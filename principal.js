///BLOQUEO DE BOTÓN DERECHO
document.oncontextmenu = function(){return false}
/// CONTROL DE FLECHAS

//puntaje = 0;
activar_equis_visible = 0;

//pagina = "pages/page1/page1.html";	

pagina = "pages/page"+ parent.znThisPage + "/page"+ parent.znThisPage + ".html";
//pagina_sig = "pages/page"+ sig + "/page"+ sig + ".html";
velocidad_lenta = 500;
velocidad_media = 280;
velocidad_rapida = 100;

sobre_avance = false;
sobre_retroceso = false;
sobre_numero = false;


adelante_activado = true;
atras_activado = true;

scale_circulos = 0.8;



//frames_principal = [[1835,515,24,62],[1861,515,24,62],[1514,288,85,84],[1514,374,85,84],[1262,437,85,84],[1763,391,80,84],[0,932,1236,102],[1751,539,34,18],[1715,539,34,18],[2000,362,34,18],[1715,559,34,18],[1787,561,34,18],[1411,521,34,18],[1751,559,34,18],[1367,288,145,136],[1841,0,176,231],[2000,233,32,82],[1801,477,32,82],[1763,287,75,85],[2000,382,15,7],[2017,382,15,7],[1262,647,56,56],[1367,0,235,286],[1907,453,56,56],[1604,0,235,285],[1324,645,56,58],[1591,460,4,47],[1324,523,23,35],[1739,477,60,60],[1907,391,60,60],[1529,522,60,60],[1349,521,60,60],[1845,391,60,60],[1324,583,60,60],[1591,582,60,60],[1386,604,60,60],[1473,584,60,60],[1969,391,60,60],[1845,453,60,60],[1653,528,60,60],[1529,460,60,60],[1411,542,60,60],[1262,585,60,60],[1591,520,60,60],[1262,523,60,60],[1991,553,39,48],[1956,539,33,58],[1763,374,25,15],[1448,604,23,22],[1678,445,59,81],[1447,521,19,18],[1217,437,39,48],[2034,203,14,14],[2000,317,45,43],[1601,445,75,73],[0,0,1166,486],[0,488,1260,442],[1473,542,36,37],[1367,426,99,93],[1386,583,23,15],[1739,445,21,23],[2019,86,29,84],[2019,0,29,84],[1535,584,29,84],[1965,453,29,84],[1468,426,34,32],[1168,437,47,48],[1996,453,47,48],[1996,503,47,48],[1907,511,47,48],[1468,460,59,80],[1790,374,38,9],[1823,579,38,9],[1887,561,33,35],[2019,172,29,29],[1168,0,197,435],[1841,233,157,156],[1604,287,157,156]];


	



/*
		createjs.Ticker.addEventListener("tick", ajuste);
			
	function ajuste() {
		
		ancho_ventana = window.innerWidth || document.body.clientWidth,
		
  		//height: window.innerHeight || document.body.clientHeight
		parent.document.getElementById("html_completo");
		razon_ventana = ancho_ventana / 1200;
		razon_ventana_d = razon_ventana.toFixed(2) 
		console.log(ancho_ventana, razon_ventana_d)
		//parent.document.getElementById("html_completo").style.width = 10+"px";
		//console.log(parent.document.getElementById("html_completo").style.zoom)
		document.getElementById("html_completo").style.webkitTransform = "scale("+razon_ventana_d+")"
		document.getElementById("html_completo").style.MozTransform = "scale("+razon_ventana_d+")"
		//parent.document.getElementById("banner").style.width = 100+"%";
		//document.documentElement.style.zoom = razon_ventana;
		
		}
*/

window.moveTo(0, 0);
window.resizeTo(screen.width, screen.height);

/*
window.innerWidth = screen.width;
window.innerHeight = screen.height;
window.screenX = 0;
window.screenY = 0;
*/

pathArray = location.href.split( '/' );
host = pathArray[2];

function pausaAnimaPerIni(){
	clearInterval(animaOjos);
	clearInterval(animaCejaizquierda);
	clearInterval(animaCejaderecha);
	clearInterval(animaCabeza);
}

function animaPersonajeIni(){
		animaOjos = setInterval(function () {
			createjs.Tween.get(ojos_abiertosini).to({alpha:0},velocidad_rapida);
			createjs.Tween.get(ojos_cerradosini).to({alpha:1},velocidad_rapida);
			createjs.Tween.get(ojos_cerradosini).wait(velocidad_rapida).to({alpha:0},velocidad_lenta);
			createjs.Tween.get(ojos_abiertosini).wait(velocidad_rapida).to({alpha:1},velocidad_lenta);

		}, 3000);


		animaCejaizquierda = setInterval(function () {
		var azar_2 = Math.floor((Math.random() * 10) + 1)
		if (ceja_izquierdaini.y == y_cejaizquierda_perini && azar_2 < 5){
			createjs.Tween.get(ceja_izquierdaini).to({y:y_cejaizquierda_perini- 2},velocidad_rapida);
		} else{
			createjs.Tween.get(ceja_izquierdaini).to({y:y_cejaizquierda_perini},velocidad_rapida);
		}
		}, 4000);

		animaCejaderecha = setInterval(function () {
		var azar_3 = Math.floor((Math.random() * 10) + 1)
		if (ceja_derechaini.y == y_cejaderecha_perini && azar_3 < 5){
			createjs.Tween.get(ceja_derechaini).to({y:y_cejaderecha_perini - 2},velocidad_rapida);
		} else{
			createjs.Tween.get(ceja_derechaini).to({y:y_cejaderecha_perini},velocidad_rapida);
		}
		}, 4000);

		animaCabeza = setInterval(function(){
				rotacion_nueva_cabeza = rotaciones_cabezas[Math.floor(Math.random()*rotaciones_cabezas.length)];
				createjs.Tween.get(contenedor_rostroini).to({rotation:rotacion_nueva_cabeza},velocidad_media);	
				azar_duracion_movimientos = Math.floor((Math.random() * duraciones_movimientos.length))
				duracion_movimiento = duraciones_movimientos[azar_duracion_movimientos];

		}, duracion_movimiento);
	}


	function animaLipsyncIni(){

		animaLipsIni = setInterval(function(){
		posicion_audioini = locucionini.getPosition();


		
		for (i = 0; i < pausas_audioini[0].length; i++) { 

				condicion_pausas = (pausas_audioini[0][i]<=posicion_audioini &&  posicion_audioini < pausas_audioini[1][i])
				//condicion_pausas = (pausas_audio[0][i]<=posicion_audio);

				//console.log(posicion_audio,pausas_audio[0][i])

				if (condicion_pausas) {
					for (ind = 0; ind < bocasini.length; ind++) { 
					bocasini[ind].alpha = 0;
					}	
					bocasini[0].alpha = 1;
					break;
				
				} else {
					for (ind = 0; ind < bocasini.length; ind++) { 
					bocasini[ind].alpha = 0;
					}	

					azar4 = Math.floor((Math.random() * 6) + 1);
				
					bocasini[azar4].alpha = 1;
					//console.log("chao")
				}
						
			}
			

		}, 95);


	}



function interface_principal(){

		 $(".puntaje_actual").text(puntaje)


	if(trato_usted){
		tx_estasmay = "Está";
		tx_estasmin = "está";

		tx_tumay = "Su";
		tx_tumin = "su";

		tx_fins = ""

		tx_ten = "Tenga";
		
		tx_te = "le";
		
		tx_pulsamay = "Pulse";
		tx_pulsamin = "pulse";
		
		tx_puedesmay = "Puede";
		
		tx_seleccionamay = "Seleccione";
		
		tx_consideresmin = "considere";
		
		tx_tuvistemay = "Tuvo";
		tx_tienesmay = "Tiene";
		
		tx_tusmin = "sus";
		
		tx_siguelomay = "Sígalo";
		
		tx_intentalomay = "Inténtelo";
		tx_hasmay = "Ha";
		tx_hazmay = "Haga";
		tx_hazmin = "haga";

		tx_recuerdmay = "Recuerde";

		tx_vuelvelomay = "Vuélvalo";

		tx_mantemin = "mantenga";		
		
		tx_presionamay = "Presione";		
		tx_muevemin = "mueva";		
		tx_seleccionastemin = "Seleccionó";		

		
	} else {
		tx_estasmay = "Estás";
		tx_estasmin = "estás";

		tx_tumay = "Tu";
		tx_tumin = "tu";

		tx_fins = "s"

		tx_ten = "Ten";

		tx_te = "te";


		tx_pulsamay = "Pulsa";
		tx_pulsamin = "pulsa";

		tx_puedesmay = "Puedes";


		tx_seleccionamay = "Selecciona";

		tx_consideresmin = "consideres";

		tx_tuvistemay = "Tuviste";
		tx_tienesmay = "Tienes";

		tx_tusmin = "tus";

		tx_siguelomay = "Síguelo";

		tx_intentalomay = "Inténtalo";

		tx_hasmay = "Has";

		tx_hazmay = "Haz";
		tx_hazmin = "haz";

		tx_recuerdmay = "Recuerda";
		
		tx_vuelvelomay = "Vuélvelo";

		tx_mantemin = "mantén";		
		tx_presionamay = "Presiona";		
		tx_muevemin = "mueve";		
		tx_seleccionastemin = "Seleccionaste";		


	}
	//console.log(tx_estasmay)
	$(".tx_estasmay").text(tx_estasmay);
	$(".tx_tumin").text(tx_tumin);
	$(".tx_fins").text(tx_fins);
	$(".tx_ten").text(tx_ten);
	$(".tx_hasmay").text(tx_hasmay);
	$(".tx_puedesmay").text(tx_puedesmay);


	audio_correcto = createjs.Sound.play("sounds/correct.mp3");
	audio_correcto.stop();
	audio_correcto.pan = 0.0001;
	
	
	audio_incorrecto = createjs.Sound.play("sounds/incorrect.mp3");
	audio_incorrecto.stop();
	audio_incorrecto.pan = 0.0001;
	
	audio_over = createjs.Sound.play("sounds/over.mp3");
	audio_over.stop();
	audio_over.pan = 0.0001;

	audio_clic = createjs.Sound.play("sounds/clic.mp3");
	audio_clic.stop();
	audio_clic.pan = 0.0001;
	
	audio_estrella = createjs.Sound.play("sounds/star.mp3");
	audio_estrella.stop();
	audio_estrella.pan = 0.0001;

	audio_boton = createjs.Sound.play("sounds/boton.mp3");
	audio_boton.stop();
	audio_boton.pan = 0.0001;
	
	clic_anterior = false;


	if(host == host){
	//if(host == "www.formarte-campusvirtual.com"){
	x_mensaje_retrocede =405;
	y_mensaje_retrocede  = 182;
	var_mensaje_retrocede = document.getElementById("mensaje_retrocede");
	mensaje_retrocede = new createjs.DOMElement(var_mensaje_retrocede);
	mensaje_retrocede.x = x_mensaje_retrocede;
	mensaje_retrocede.y = y_mensaje_retrocede;
	//desarrollado.rotation = -360;

	if(con_trofeos){
		for (var i = 0; i <znPages; i++) {
			$('.trofeos').append("<div class='trofeo'>"+icono_trofeo+"</div>")
		}
	}

	$('.trofeo').each(function(index){
		if(index<znThisPage-1){
			$(this).addClass("trofeo_on")
			$(this).html(icono_trofeo_on)
		}
	}); 

		
	mensaje_retrocede.visible = false;
	
	mensaje_retrocede.alpha = 0;

	var_cancela_retrocede = document.getElementById("cancela_retrocede");
	var_cancela_retrocede.addEventListener("click", clic_cancela_retrocede);

	function clic_cancela_retrocede(){
		if(con_sonidoclic){
			audio_clic.play();
		}
		document.getElementById("pagina_llega").innerHTML = pagina_superior;

		createjs.Tween.get(mensaje_retrocede,{override:true}).to({y:y_mensaje_cierre-40,alpha:0,visible:false},velocidad_media);
		document.getElementById("fondo_general").style.visibility = "hidden";
	}



	var_acepta_retrocede = document.getElementById("acepta_retrocede");
	var_acepta_retrocede.addEventListener("click", clic_acepta_retrocede);

	function clic_acepta_retrocede(){

		if(con_sonidoclic){
			audio_clic.play();
		}
		
		document.getElementById("pagina_llega2").innerHTML = pagina_superior;

		createjs.Tween.get(mensaje_retrocede,{override:true}).to({y:y_mensaje_cierre-40,alpha:0,visible:false},velocidad_media);
		document.getElementById("fondo_general").style.visibility = "hidden";
		clicAnterior();
	}



	x_mensaje_cierre =405;
	y_mensaje_cierre  = 82;
	var_mensaje_cierre = document.getElementById("mensaje_cierre");
	mensaje_cierre = new createjs.DOMElement(var_mensaje_cierre);
	mensaje_cierre.x = x_mensaje_cierre;
	mensaje_cierre.y = y_mensaje_cierre;
	//desarrollado.rotation = -360;

		
	mensaje_cierre.visible = false;
	
	mensaje_cierre.alpha = 0;

	var_cancela_salir = document.getElementById("cancela_salir");
	var_cancela_salir.addEventListener("click", clic_cancela_salir);

	function clic_cancela_salir(){
		if(con_sonidoclic){
			audio_clic.play();
		}

		//document.getElementById("pagina_llega").innerHTML = pagina_superior;

		createjs.Tween.get(mensaje_cierre,{override:true}).to({y:y_mensaje_cierre-40,alpha:0,visible:false},velocidad_media);
		document.getElementById("fondo_general").style.visibility = "hidden";
	}


	var_acepta_salir = document.getElementById("acepta_salir");
	var_acepta_salir.addEventListener("click", clic_acepta_salir);

	function clic_acepta_salir(){

		if(con_sonidoclic){
			audio_clic.play();
		}
		//document.getElementById("pagina_llega").innerHTML = pagina_superior;
		terminar();

		if(embebido){
			$(".modulo_cerrado").fadeIn(300);
			$(".modulo_cerrado").removeClass('op0');
		} else {
			window.parent.close();
		}
		//parent.terminar();
	}


	una_vez_pag = true;
		////// DESARROLLADO POR /////


	xinicia_esplora = 127;
		xfin_explora = 362;
		xfesteja_explora = 403;
		y_explora = 575;
		var_explorador = document.getElementById("explorador");
	explorador = new createjs.DOMElement(var_explorador);
	explorador.x = 100;
	explorador.y = y_explora;
	explorador.alpha = 0;
	explorador.visible = true;

	var_txt_creditos = document.getElementById("txt_creditos");
	txt_creditos = new createjs.DOMElement(var_txt_creditos);
	txt_creditos.x = 993;
	txt_creditos.y = 10;
	txt_creditos.alpha = 0;
	txt_creditos.visible = true;
	
	y_didacsis = 0;
	x_didacsis_inicial  = 730;
	x_didacsis_final  = x_didacsis_inicial+10;
	var_didacsis = document.getElementById("cont_over_principalb");
	didacsis = new createjs.DOMElement(var_didacsis);
	didacsis.x = x_didacsis_inicial;
	didacsis.y = y_didacsis;
	didacsis.alpha = 0;
	didacsis.visible = false;

	x_desarrollado = 1192;
	y_desarrollado  = y_boton_cerrar;
	var_desarrollado = document.getElementById("desarrollado");
	desarrollado = new createjs.DOMElement(var_desarrollado);
	desarrollado.x = x_desarrollado;
	desarrollado.y = y_desarrollado+1;
	//desarrollado.rotation = -360;

	desarrollado.scaleX = 1;
	desarrollado.scaleY = 0;

	desarrollado.regX = 15;
	desarrollado.regY = 15;
	
	desarrollado.visible = con_creditos;
	
	desarrollado.alpha = 1;

	activo_creditos = true;

	var_desarrollado.addEventListener("mouseover", over_creditos);
	var_desarrollado.addEventListener("mouseout", out_creditos);
	var_desarrollado.addEventListener("click", clic_creditos);

	function over_creditos(){
		
		if(activo_creditos && desarrollado.alpha == 1){
		//createjs.Tween.get(desarrollado,{override:true}).to({scaleX:1.2,scaleY:1.2},velocidad_media);	
		}
	}
	function out_creditos(){
		if(activo_creditos && desarrollado.alpha == 1){
		//createjs.Tween.get(desarrollado,{override:true}).to({scaleX:1,scaleY:1},velocidad_media);	
		}
	}
	function clic_creditos(){
		if(desarrollado.visible == true){
		if(con_sonidoclic){
			audio_clic.play();
		}
		if(activo_creditos){
		activo_creditos = false;
		var_desarrollado.className = "desarrollado_activo";
		didacsis.visible = true;
		createjs.Tween.get(didacsis,{override:true}).to({x:x_didacsis_final,alpha:1},velocidad_media);	

		} else {
		activo_creditos = true;
		var_desarrollado.className = "desarrollado";
		createjs.Tween.get(didacsis,{override:true}).to({x:x_didacsis_inicial,alpha:0,visible:false},velocidad_media);	

		}
		}
	}


	////// FIN DESARROLLADO POR /////



	y_btn_glosario  = y_boton_cerrar-3;
	var_btn_glosario = document.getElementById("btn_glosario");
	btn_glosario = new createjs.DOMElement(var_btn_glosario);
	btn_glosario.x = x_btn_glosario;
	btn_glosario.y = y_btn_glosario+1;
	//btn_glosario.rotation = -360;

	btn_glosario.scaleX = 1;
	btn_glosario.scaleY = 0;

	btn_glosario.regX = 15;
	btn_glosario.regY = 15;
	
	btn_glosario.visible = con_glosario;
	
	btn_glosario.alpha = 1;

	activo_glosario = true;

	var_btn_glosario.addEventListener("mouseover", over_btnglosario);
	var_btn_glosario.addEventListener("mouseout", out_btnglosario);
	var_btn_glosario.addEventListener("click", clic_btnglosario);

	




	finalizaAnimacionMenu = false;

	carga_interfase = false;
	/*
	$.getJSON("images/index_atlas_.json", function(json) {
    frames_principal = json.frames;
    });
    */	
	
	var imagenes_principales = new createjs.SpriteSheet({
	images: ["images/index_atlas_.png"], 
	frames: ["images/index_atlas_.png"], "frames": frames_principal//[[126,926,51,37],[49,1065,51,37],[179,926,51,37],[142,965,51,37],[36,980,51,38],[96,1011,51,37],[89,972,51,37],[686,862,19,11],[686,849,33,11],[732,740,70,70],[813,566,70,72],[36,926,42,52],[0,1043,47,53],[721,849,2,33],[49,1020,45,43],[80,926,44,44],[559,483,187,184],[0,1098,41,41],[102,1050,23,35],[748,483,63,147],[732,812,62,60],[669,740,61,107],[0,0,1126,481],[559,884,185,200],[559,669,108,119],[559,790,90,71],[813,483,81,81],[669,669,166,69],[658,849,26,17],[0,926,34,115],[748,640,97,18],[559,863,97,18],[289,483,268,440],[1128,442,300,440],[1128,0,340,440],[0,483,287,441]]
	});

	var frequency_principal = 100;
	stage_principal.enableMouseOver(frequency_principal);

	audio_avance = createjs.Sound.play("sounds/avance.mp3");
	audio_avance.stop();
	audio_avance.pan = 0.0001;

	audio_volver = createjs.Sound.play("sounds/volver.mp3");
	audio_volver.stop();
	audio_volver.pan = 0.0001;


	/*
	var_logo_client0 = document.getElementById("logo_client0");
	logo_client0 = new createjs.DOMElement(var_logo_client0);
	logo_client0.x = 3;
	logo_client0.y = 0;
	logo_client0.visible = true;
	logo_client0.scaleX = 0.1;
	//logo_client0.alpha = 0;
	*/

	/*
	var_barra_negra = document.getElementById("barra_negra");
	barra_negra = new createjs.DOMElement(var_barra_negra);
	barra_negra.x = 3;
	barra_negra.y = 0;
	barra_negra.visible = true;
	barra_negra.scaleX = 0.1;
	barra_negra.alpha = 0;
	*/
	
	/*
	var var_escuela = new createjs.Text("ESCUELA ÉXITO EXPRESS", "20px ProximaNova-Light", "rgba(255,231,1,1)");
	var_escuela.x = 90;
	var_escuela.y = 10;
	var_escuela.visible = true;
	*/

	//mapa_completo = new createjs.Bitmap("images/mapa_completo.jpg");
	var_mapa_completo = document.getElementById("mapa_completo");
	//bounds_mapa_completo = mapa_completo.getBounds();
	mapa_completo = new createjs.DOMElement(var_mapa_completo);
	mapa_completo.x= 0;

	mapa_completo.y= 0;
	if(tipo_curso=="plataformas"){
		y_inimc = -10;
		mapa_completo.y= y_inimc;
		
	}
	mapa_completo.alpha = 0;


	if(tipo_curso=="isometrico" || tipo_curso=="plataformas"){
		$(".div_contenidos").css("background-color","transparent");
		$(".div_contenidosint").css("background-color","transparent");
		//$(".cubre_imgfondo").css("background-color","rgba(255,255,255,0)");
    	$(".cubre_imgfondo").removeClass("cubre_imgfondoact");

	}


	scale_ini = 1;
	
	x_curso = 61;
	y_curso  = 7;
	var_curso = document.getElementById("curso");
	curso = new createjs.DOMElement(var_curso);
	curso.x = 60;
	curso.y = 80;
	curso.visible = false;
	curso.rotation = -40;
	curso.alpha = 0;
	curso.scaleX = 6;
	curso.scaleY = 6;


	x_nombre_curso = 100;
	y_nombre_curso = 7;
	var_nombre_curso = document.getElementById("nombre_curso");
	nombre_curso = new createjs.DOMElement(var_nombre_curso);
	nombre_curso.x = 100;
	nombre_curso.y = 200;
	nombre_curso.rotation = -40;
	nombre_curso.visible = false;
	nombre_curso.alpha = 0;

	var_contenedor_nombre_curso = document.getElementById("contenedor_nombre_curso");
	contenedor_nombre_curso = new createjs.DOMElement(var_contenedor_nombre_curso);
	contenedor_nombre_curso.x = 585;
	contenedor_nombre_curso.y = 0;
	contenedor_nombre_curso.scaleY = 0;
	contenedor_nombre_curso.skewX = -40;
	contenedor_nombre_curso.visible = true;
	contenedor_nombre_curso.alpha = 1;

	var_btn_ini = document.getElementById("btn_ini");
	btn_ini = new createjs.DOMElement(var_btn_ini);
	btn_ini.regX = document.getElementById("btn_ini").clientWidth/2;
	btn_ini.regY = document.getElementById("btn_ini").clientHeight/2;
	btn_ini.x = x_btn_ini;
	btn_ini.y = y_btn_ini;
	btn_ini.visible = true;
	btn_ini.alpha = 1;
	btn_ini.scaleX = 0;
	btn_ini.scaleY = 0;

	var_btn_ini.addEventListener("mouseover", over_btn_ini);
	var_btn_ini.addEventListener("mouseout", out_btn_ini);
	var_btn_ini.addEventListener("click", clic_btn_ini);

	function over_btn_ini(){
		btn_ini.scaleY = 1;
		btn_ini.scaleX = 1;
	}

	function out_btn_ini(){
		btn_ini.scaleY = 0.9;
		btn_ini.scaleX = 0.9;
	}

	function clic_btn_ini(){
		if(con_sonidoclic){
		audio_clic.play();

		}
		if(personaje_audioini){
			$(".cont_globoini").fadeOut(velocidad_lenta)

			createjs.Tween.get(contenedor_personajeini).to({x:x_personajeanima_inicial_fin-10,alpha:0},velocidad_lenta*2, createjs.Ease.backOut);

			pausaAnimaPerIni();
			//clearInterval(animaOjos);
			//clearInterval(animaCejaizquierda);
			//clearInterval(animaCejaderecha);
			//clearInterval(animaCabeza);
		}

		reduceFinal()
	}

	x_final_nc = 130;
	y_final_nc = 8;
	x_nombre_capiulo = 105;

	var_contenedor_nombre_capitulo = document.getElementById("contenedor_nombre_capitulo");
	contenedor_nombre_capitulo = new createjs.DOMElement(var_contenedor_nombre_capitulo);
	contenedor_nombre_capitulo.x = x_nombre_capiulo;//contenedor_nombre_curso.x-5;
	contenedor_nombre_capitulo.y = -10;
	contenedor_nombre_capitulo.scaleX = 1;
	contenedor_nombre_capitulo.scaleY = 0;
	//contenedor_nombre_capitulo.skewX = -40;
	//contenedor_nombre_capitulo.scaleY = 0;
	contenedor_nombre_capitulo.visible = true;
	contenedor_nombre_capitulo.alpha = 1;

	x_final_cap = 45;
	y_final_cap = 0;
	var_contenedor_numero_capitulo = document.getElementById("contenedor_numero_capitulo");
	contenedor_numero_capitulo = new createjs.DOMElement(var_contenedor_numero_capitulo);
	contenedor_numero_capitulo.x = 345;
	contenedor_numero_capitulo.y = 225;
	contenedor_numero_capitulo.scaleX = scale_ini;
	//contenedor_numero_capitulo.scaleY = 2;
	//contenedor_numero_capitulo.skewY = -40;
	contenedor_numero_capitulo.scaleY = 0;
	contenedor_numero_capitulo.visible = true;
	contenedor_numero_capitulo.alpha = 1;

	var_contenedor_nombre_leccion = document.getElementById("contenedor_nombre_leccion");
	contenedor_nombre_leccion = new createjs.DOMElement(var_contenedor_nombre_leccion);
	//contenedor_nombre_leccion.regX = document.getElementById("contenedor_nombre_leccion").clientWidth;
	//contenedor_nombre_leccion.regY = document.getElementById("contenedor_nombre_leccion").clientHeight;
	contenedor_nombre_leccion.x = x_titulo_cp;//contenedor_nombre_curso.x-5;
	contenedor_nombre_leccion.y = y_titulo_cp;
	contenedor_nombre_leccion.scaleY = 1;
	contenedor_nombre_leccion.scaleX = 0;
	//contenedor_nombre_leccion.scaleY = 0;
	contenedor_nombre_leccion.visible = true;
	contenedor_nombre_leccion.alpha = 1;


	//var_txt_capitulo = document.getElementById("txt_capitulo");
	//txt_capitulo = new createjs.DOMElement(var_txt_capitulo);
	//txt_capitulo.x = 900//contenedor_numero_capitulo.x + 15;
	//txt_capitulo.y = 9;
	//txt_capitulo.scaleY = 0;
	//txt_capitulo.visible = true;
	//txt_capitulo.alpha = 0;

	x_final_lecc1 = 300;
	x_final_lecc = 25;
	y_final_lecc = 550;

	var_txt_leccion = document.getElementById("txt_leccion");
	txt_leccion = new createjs.DOMElement(var_txt_leccion);
	txt_leccion.x = x_final_lecc1-40;//contenedor_numero_capitulo.x + 15;
	txt_leccion.y = 207;
	txt_leccion.regX = document.getElementById("txt_leccion").clientWidth;
	txt_leccion.regY = document.getElementById("txt_leccion").clientHeight;
	txt_leccion.scaleX = scale_ini;
	txt_leccion.scaleY = scale_ini;
	txt_leccion.visible = true;
	txt_leccion.alpha = 0;


	var_cont_txt_leccion = document.getElementById("cont_txt_leccion");
	cont_txt_leccion = new createjs.DOMElement(var_cont_txt_leccion);
	cont_txt_leccion.x = contenedor_numero_capitulo.x;
	cont_txt_leccion.y = 60;
	cont_txt_leccion.scaleY = 0;
	cont_txt_leccion.skewX = -40;
	//cont_txt_leccion.scaleY = 0;
	cont_txt_leccion.visible = false;
	cont_txt_leccion.alpha = 0;

	//var_num_capitulo = document.getElementById("num_capitulo");
	//num_capitulo = new createjs.DOMElement(var_num_capitulo);
	//num_capitulo.x = 900//contenedor_numero_capitulo.x + 19;
	//num_capitulo.y = 15;
	//num_capitulo.scaleY = 0;
	//num_capitulo.visible = true;
	//num_capitulo.alpha = 0;

	var_div_txtmenu = document.getElementById("div_txtmenu");
	var_div_txtmenu.style.height = 60 + 27 * znPages + "px"

	document.getElementById("div_txtmenu2").style.height = (30 + 27 * znPages) - 10 + "px";

	div_txtmenu = new createjs.DOMElement(var_div_txtmenu);
	div_txtmenu.x = 0;//contenedor_numero_capitulo.x + 15;
	div_txtmenu.y = 60;
	//div_txtmenu.regX = document.getElementById("div_txtmenu").clientWidth/2;
	//div_txtmenu.regY = document.getElementById("div_txtmenu").clientHeight/2;
	//txt_capitulo.scaleY = 0;
	div_txtmenu.visible = true;
	div_txtmenu.scaleX = 0;
	//div_txtmenu.skewX = 0;

	div_txtmenu.alpha = 1;
	//console.log(div_txtmenu.regX,div_txtmenu.regY)
	/*
	var_logo = document.getElementById("logo");
	logo = new createjs.DOMElement(var_logo);
	logo.x = 3;
	logo.y = -70;
	logo.visible = true;
	logo.alpha = 0;
	*/

/*
		for (i = 0; i < cantidad_sensibles; i++) { 
			var var_zona_sensible = document.getElementById("zona_sensible"+i);
			total_zona_sensible[i] = var_zona_sensible;
			total_zona_sensible.push(total_zona_sensible[i]);
			sensibles.push(total_zona_sensible[i]);
			zona_actual = total_zona_sensible[i];
			f_zona_over(zona_actual);
			sensibles_over[i] = {val: false};
			sensibles_over.push(sensibles_over[i]);

		} 
*/
	
	//var_flecha_atras = document.getElementById("flecha_arriba");

	var_logo_client = document.getElementById("logo_client");
	logo_client = new createjs.DOMElement(var_logo_client);
	logo_client.regX = document.getElementById("logo_client").clientWidth/2;
	logo_client.regY = document.getElementById("logo_client").clientHeight/2;
	//logo_client.x = 790;
	logo_client.x = x_logo_client;
	//logo_client.y = 140;
	logo_client.y = y_logo_client;
	logo_client.scaleX = 0;
	logo_client.scaleY = 1;
	logo_client.visible = true;
	logo_client.alpha = 1;

	x_logos_hb = 700;
	y_logos_hb = 490;

		var_logos_hb = document.getElementById("logos_hb");
	logos_hb = new createjs.DOMElement(var_logos_hb);
	logos_hb.regX = document.getElementById("logos_hb").clientWidth/2;
	logos_hb.regY = document.getElementById("logos_hb").clientHeight/2;
	//logo_client.x = 790;
	logos_hb.x = x_logos_hb;
	//logo_client.y = 140;
	logos_hb.y = y_logos_hb;
	logos_hb.scaleX = 0;
	logos_hb.scaleY = 1;
	logos_hb.visible = true;
	logos_hb.alpha = 1;
	
	x_banner_superior = 5;
	y_banner_superior = 1;
	banner_superior = new createjs.Sprite(imagenes_principales);
	banner_superior.gotoAndStop(lib.banner_azul.prototype.id);
	banner_superior.x = x_banner_superior;
	banner_superior.y = y_banner_superior;
	banner_superior.scaleX = 0;
	banner_superior.visible = false;
	banner_superior.alpha = 1;



	x_contiene_menunav =405;
	y_contiene_menunav  = 82;
	var_contiene_menunav = document.getElementById("contiene_menunav");
	contiene_menunav = new createjs.DOMElement(var_contiene_menunav);
	contiene_menunav.x = x_contiene_menunav;
	contiene_menunav.y = y_contiene_menunav;
	//desarrollado.rotation = -360;

		
	contiene_menunav.visible = false;
	
	contiene_menunav.alpha = 0;




	x_contiene_menunav_n =0;
	y_contiene_menunav_n  = 79;
	var_contiene_menunav_n = document.getElementById("contiene_menunav_n");
	contiene_menunav_n = new createjs.DOMElement(var_contiene_menunav_n);
	contiene_menunav_n.x = x_contiene_menunav_n;
	contiene_menunav_n.y = y_contiene_menunav_n;
	//desarrollado.rotation = -360;
	contiene_menunav_n.scaleX = 0;

	contiene_menunav_n.visible = true;
	
	contiene_menunav_n.alpha = 1;



	x_contiene_menunav_nhz = 450;
	y_contiene_menunav_nhz  = 557;
	var_contiene_menunav_nhz = document.getElementById("contiene_menunav_nhz");
	contiene_menunav_nhz = new createjs.DOMElement(var_contiene_menunav_nhz);
	contiene_menunav_nhz.x = x_contiene_menunav_nhz;
	contiene_menunav_nhz.y = y_contiene_menunav_nhz;
	//desarrollado.rotation = -360;
	contiene_menunav_nhz.scaleY = 0;

	contiene_menunav_nhz.visible = true;
	
	contiene_menunav_nhz.alpha = 1;




	var_boton_menunav = document.getElementById("boton_menunav");
	boton_menunav = new createjs.DOMElement(var_boton_menunav);
	


	boton_menunav.x = x_boton_menu;
	boton_menunav.y = 20.5;
	boton_menunav.regX = document.getElementById("boton_menunav").clientWidth/2;
	boton_menunav.regY = document.getElementById("boton_menunav").clientHeight/2;
	boton_menunav.scaleX = 1;
	boton_menunav.scaleY = 0;
	//boton_cerrar.skewX = -40;
	boton_menunav.cursor = "pointer";
	boton_menunav.visible = true;
	boton_menunav.alpha = 1;

	var_boton_menunav.addEventListener("click", clic_boton_menunav);

	function clic_boton_menunav(){
		if(con_sonidoclic){
			audio_clic.play();
		}
		//contiene_menunav
		contiene_menunav.y = y_contiene_menunav -40;
		contiene_menunav.visible = true;
		createjs.Tween.get(contiene_menunav,{override:true}).to({y:y_contiene_menunav,alpha:1},velocidad_media);
		document.getElementById("fondo_general").style.visibility = "visible";

		scrollMenu();
		
	}
	document.getElementById("cierra_menunav").addEventListener("click", cierraMenuNav)
	
	if(!$("#boton_cerrar_b").text().trim().length==0){
		
		$("#boton_cerrar_b").prepend("<div style='margin-right:7px'>"+icono_cerrar+"</div>");
		$("#boton_cerrar_b").css("width","auto");
		$("#boton_cerrar_b").css("padding","0 10px");
	} else {
		$("#boton_cerrar_b").prepend(icono_cerrar);
	}

	var_boton_cerrar = document.getElementById("boton_cerrar");
	boton_cerrar = new createjs.DOMElement(var_boton_cerrar);
	


	boton_cerrar.x = x_boton_cerrar;
	boton_cerrar.y = y_boton_cerrar;
	boton_cerrar.regX = document.getElementById("boton_cerrar").clientWidth/2;
	boton_cerrar.regY = document.getElementById("boton_cerrar").clientHeight/2;
	boton_cerrar.scaleX = 1;
	boton_cerrar.scaleY = 0;
	//boton_cerrar.skewX = -40;
	boton_cerrar.cursor = "pointer";
	if(con_botoncerrar){
	boton_cerrar.visible = true;
	boton_cerrar.alpha = 1;

	} else {
	boton_cerrar.visible = false;
	boton_cerrar.alpha = 0;
	}

	var_boton_cerrar.addEventListener("click", clic_boton_cerrar);


	function clic_boton_cerrar(){

		if(con_sonidoclic){
			audio_clic.play();
		}
		document.getElementById("pagina_llega").innerHTML = pagina_superior+".";
		if(completado){
		document.getElementById("preg_salir").innerHTML = "¡Muy bien!";
		document.getElementById("cont_salir").innerHTML = tx_hasmay+" completado la consulta del módulo exitosamente.<br/>"+tx_hazmay+" clic en Salir para volver a la plataforma.";
		document.getElementById("pagina_llega").innerHTML="";

		}

		if(tipo_curso=="plataformas"||tipo_curso=="isometrico"){
			$(".elem_llega").text("al elemento superior que has consultado.");
			//document.getElementById("pagina_llega").innerHTML = (znInt+1)+".";
			document.getElementById("pagina_llega").innerHTML = "";
		}

		mensaje_cierre.y = y_mensaje_cierre -40;
		mensaje_cierre.visible = true;
		createjs.Tween.get(mensaje_cierre,{override:true}).to({y:y_mensaje_cierre,alpha:1},velocidad_media);
		document.getElementById("fondo_general").style.visibility = "visible";
	}



	var_div_contenidos = document.getElementById("div_contenidos");
	div_contenidos = new createjs.DOMElement(var_div_contenidos);
	


	div_contenidos.x = 0;
	div_contenidos.y = 0;
	div_contenidos.regX = 0;
	div_contenidos.regY = 0;
	div_contenidos.scaleX = 1;
	div_contenidos.scaleY = 0;
	//div_contenidos.skewX = -40;
	div_contenidos.cursor = "pointer";
	div_contenidos.visible = true;
	div_contenidos.alpha = 1;
	//bounds_numero_menu_nav = numero_menu_nav.getBounds();

	y_finalavanceexplora = 580;

	var_avanza_explora = document.getElementById("avanza_explora");
	avanza_explora = new createjs.DOMElement(var_avanza_explora);
	
	avanza_explora.x = 20;//x_final_lc;//820//1280/2;
	avanza_explora.y = y_finalavanceexplora;//y_final_lc;//-10//340;
	//div_contenidos_2.regX = document.getElementById("div_contenidos_2").clientWidth/2;
	avanza_explora.regY = document.getElementById("avanza_explora").clientHeight/2;
	avanza_explora.scaleX = 1;
	avanza_explora.scaleY = 0;
	avanza_explora.cursor = "pointer";
	avanza_explora.visible = true;
	avanza_explora.alpha = 1;


	x_final_lc = 820+155;
	//y_final_lc = -10+55.5;
	y_final_lc = 350;

	var_div_contenidos_2 = document.getElementById("div_contenidos_2");
	div_contenidos_2 = new createjs.DOMElement(var_div_contenidos_2);
	
	div_contenidos_2.x = 1360;//x_final_lc;//820//1280/2;
	div_contenidos_2.y = y_final_lc;//y_final_lc;//-10//340;
	div_contenidos_2.regX = document.getElementById("div_contenidos_2").clientWidth/2;
	div_contenidos_2.regY = document.getElementById("div_contenidos_2").clientHeight/2;
	div_contenidos_2.scaleX = 1.2;
	div_contenidos_2.scaleY = 1.2;
	div_contenidos_2.cursor = "pointer";
	div_contenidos_2.visible = true;
	div_contenidos_2.alpha = 0;

	//console.log(div_contenidos_2.regX,div_contenidos_2.regY)
	
	

	var_personaje_inicial = document.getElementById("personaje_inicial");
	personaje_inicial = new createjs.DOMElement(var_personaje_inicial);
	
	personaje_inicial.x = x_personaje_inicial_ini;//x_final_lc;//820//1280/2;
	personaje_inicial.y = y_personaje_inicial;//y_final_lc;//-10//340;
	personaje_inicial.regX = document.getElementById("personaje_inicial").clientWidth/2;
	personaje_inicial.regY = document.getElementById("personaje_inicial").clientHeight/2;
	personaje_inicial.scaleX = 1;
	personaje_inicial.scaleY = 1;
	personaje_inicial.cursor = "pointer";
	personaje_inicial.visible = true;
	personaje_inicial.alpha = 0;

	x_final_personajes = 75;
	var_personajes = document.getElementById("personajes");
	personajes = new createjs.DOMElement(var_personajes);
	
	personajes.x = 595;//x_final_lc;//820//1280/2;
	personajes.y = 4;//y_final_lc;//-10//340;
	//personajes.regX = document.getElementById("personajes").clientWidth/2;
	//personajes.regY = document.getElementById("personajes").clientHeight/2;
	personajes.scaleX = 0;
	personajes.scaleY = .5;
	personajes.cursor = "pointer";
	personajes.visible = false;
	personajes.alpha = 1;
	//console.log(personaje_inicial.regX,personaje_inicial.regY)

	x_final_element_per = 600;
	var_element_per = document.getElementById("element_per");
	element_per = new createjs.DOMElement(var_element_per);
	
	element_per.x = 0;//x_final_lc;//820//1280/2;
	element_per.y = 40;//y_final_lc;//-10//340;
	//personajes.regX = document.getElementById("personajes").clientWidth/2;
	//personajes.regY = document.getElementById("personajes").clientHeight/2;
	element_per.scaleX = 1;
	element_per.scaleY = 1;
	element_per.cursor = "pointer";
	element_per.visible = false;
	element_per.alpha = 0;


	var_modulo = document.getElementById("modulo");
	modulo = new createjs.DOMElement(var_modulo);
	modulo.x = 70;
	modulo.y = 34;
	modulo.scaleX = 1;
	modulo.scaleY = 1;
	modulo.visible = false;
	modulo.alpha = 0;

	var_numero_modulo = document.getElementById("numero_modulo");
	numero_modulo = new createjs.DOMElement(var_numero_modulo);
	numero_modulo.x = 130;
	numero_modulo.y = 31;
	numero_modulo.scaleX = 1;
	numero_modulo.scaleY = 1;
	numero_modulo.visible = false;
	numero_modulo.alpha = 0;
	
	//var_numero_mod = document.getElementById("numero_mod");
	//numero_mod = new createjs.DOMElement(var_numero_mod);
	//numero_mod.visible = true;
	
	var_nombre_modulo = document.getElementById("nombre_modulo");
	nombre_modulo = new createjs.DOMElement(var_nombre_modulo);
	nombre_modulo.scaleX = 1;
	nombre_modulo.scaleY = 1;
	nombre_modulo.x = 0;
	nombre_modulo.y = 53;
	nombre_modulo.visible = false;
	nombre_modulo.alpha = 0;

	var_nombre_modulo_2 = document.getElementById("nombre_modulo_2");
	nombre_modulo_2 = new createjs.DOMElement(var_nombre_modulo_2);
	nombre_modulo_2.scaleX = 1;
	nombre_modulo_2.scaleY = 1;
	nombre_modulo_2.x = 20;
	nombre_modulo_2.y = 130;
	nombre_modulo_2.visible = false;
	nombre_modulo_2.alpha = 1;


	x_division_modulo = 44;
	y_division_modulo = 36;
	division_modulo = new createjs.Sprite(imagenes_principales);
	division_modulo.gotoAndStop(lib.division_modulo.prototype.id);
	division_modulo.x = x_division_modulo;
	division_modulo.y = y_division_modulo;
	division_modulo.visible = false;
	division_modulo.alpha = 1;
	division_modulo.scaleY = 0;

	x_flecha_gris = 1140;
	y_flecha_gris = 0;
	flecha_gris = new createjs.Sprite(imagenes_principales);
	flecha_gris.gotoAndStop(lib.flecha_gris.prototype.id);
	flecha_gris.x = x_flecha_gris;
	flecha_gris.y = y_flecha_gris;
	flecha_gris.visible = false;
	flecha_gris.alpha = 0;

	x_flecha_azul = 7;
	y_flecha_azul = 31;
	flecha_azul = new createjs.Sprite(imagenes_principales);
	flecha_azul.gotoAndStop(lib.flecha_azul.prototype.id);
	flecha_azul.x = x_flecha_azul;
	flecha_azul.y = y_flecha_azul;
	flecha_azul.visible = false;
	flecha_azul.alpha = 0;

	/*
	var_barra_naranja = document.getElementById("barra_naranja");
	barra_naranja = new createjs.DOMElement(var_barra_naranja);
	barra_naranja.x = 3;
	barra_naranja.y = 270;
	barra_naranja.scaleX = 1.5;
	barra_naranja.scaleY = 1.5;
	barra_naranja.visible = true;
	barra_naranja.alpha = 0;
	
	var_numero_leccion = document.getElementById("numero_leccion");
	numero_leccion = new createjs.DOMElement(var_numero_leccion);
	numero_leccion.x = 450;
	numero_leccion.y = 70;
	numero_leccion.scaleX = 2.5;
	numero_leccion.scaleY = 2.5;
	numero_leccion.visible = true;
	numero_leccion.alpha = 0;
	
	//var_numero_mod = document.getElementById("numero_mod");
	//numero_mod = new createjs.DOMElement(var_numero_mod);
	//numero_mod.visible = true;
	
	var_nombre_leccion = document.getElementById("nombre_leccion");
	nombre_leccion = new createjs.DOMElement(var_nombre_leccion);
	nombre_leccion.scaleX = 2;
	nombre_leccion.scaleY = 2;
	nombre_leccion.x = 360;
	nombre_leccion.y = 310;
	nombre_leccion.visible = true;
	nombre_leccion.alpha = 0;
	*/
	/*
	x_exclamacion = 3;
	y_exclamacion = 0;
	exclamacion = new createjs.Sprite(imagenes_principales);
	exclamacion.gotoAndStop(30);
	*/
	//exclamacion = new createjs.Bitmap("images/logo_exc.png");
	//exclamacion.x = x_exclamacion;
	//exclamacion.y = y_exclamacion;
	//exclamacion.scaleX = 3
	//exclamacion.scaleY = 3
	//exclamacion.alpha = 0;
	//exclamacion.rotation = 90;


	//var_numero1 = document.getElementById("numero1");

	//var_numero1.addEventListener("mouseover", over_flecha_atras);
	
	var_pop_btnnav = document.getElementById("cont_over_principalbtn");
	pop_btnnav = new createjs.DOMElement(var_pop_btnnav);
	pop_btnnav.scaleX = 1;
	pop_btnnav.scaleY = 0;
	pop_btnnav.visible = true;
	pop_btnnav.alpha = 1;

	var_pop_mennum_n = document.getElementById("cont_over_principal_n");
	pop_mennum_n = new createjs.DOMElement(var_pop_mennum_n);
	pop_mennum_n.scaleX = 0;
	pop_mennum_n.scaleY = 0;
	pop_mennum_n.visible = true;
	pop_mennum_n.alpha = 0;

	var_pop_adelante = document.getElementById("cont_over_principal");
	pop_adelante = new createjs.DOMElement(var_pop_adelante);
	pop_adelante.scaleX = 0;
	pop_adelante.scaleY = 0;
	pop_adelante.visible = true;
	pop_adelante.alpha = 0;


	var_pop_atras = document.getElementById("cont_over_principal");
	pop_atras = new createjs.DOMElement(var_pop_atras);
	pop_atras.scaleX = 0;
	pop_atras.scaleY = 0;
	pop_atras.visible = true;
	pop_atras.alpha = 0;

	

	//var_enlace_principal = document.getElementById("enlace_principal");
	//enlace_principal = new createjs.DOMElement(var_enlace_principal);
	//enlace_principal.visible = true;
	//enlace_principal.alpha = 0;

	contenedores_circulos_menu = [];
	contenedor_circulos_desbloqueados = [];
	contenedor_circulos_novistos = [];
	contenedor_circulos_vistos = [];
	contenedor_numeros_menu = [];
	contenedor_simbolos_ok = [];
	contenedor_simbolos_unlock = [];
	contenedor_simbolos_bandera = [];

	bounds_contenedores_numeros = []

	
	total_numeros_menu_nav = []
	total_html_numeros_menu_nav = []
	total_html_num_menu_nav = []
	total_html_simb_menu_nav = []
	
	
	texto_check = "<i class='fa fa-check'></i>";	
	
	x_total_numeros_menu_nav = [];

	total_html_franjamenunav = [];
	total_status_franjamenunav = [];
	total_titulos_franjamenunav = [];

	top_franjasmenu = [];


	x_total_numeros_menu_nav_n = [];

	total_html_franjamenunav_n = [];
	total_num_franjamenunav_n = [];
	total_status_franjamenunav_n = [];
	total_titulos_franjamenunav_n = [];


	total_html_franjamenunav_nhz = [];
	total_num_franjamenunav_nhz = [];
	total_status_franjamenunav_nhz = [];
	total_titulos_franjamenunav_nhz = [];

	top_franjasmenu_n = [];
	left_franjasmenu_nhz = [];

	for (var i = 0; i <znPages; i++) {
	
	
		

	circulo_desbloqueado = new createjs.Sprite(imagenes_principales);
	circulo_desbloqueado.gotoAndStop(lib.circulo_novisto.prototype.id);
	//circulo_gris = new createjs.Bitmp("images/circulo_gris.png");
	bounds_circulo_desbloqueado = circulo_desbloqueado.getBounds();
	//console.log(bounds_circulo_gris)
	circulo_desbloqueado.regX = 0; //bounds_circulo_gris.width/2;
	circulo_desbloqueado.regY = 0; //bounds_circulo_gris.height/2;
	circulo_desbloqueado.scaleX = scale_circulos;
	circulo_desbloqueado.scaleY = scale_circulos;
	circulo_desbloqueado.x = 0;
	circulo_desbloqueado.y = 0;
	circulo_desbloqueado.alpha = 1;
	contenedor_circulos_desbloqueados[i] = circulo_desbloqueado;
	
	circulo_novisto = new createjs.Sprite(imagenes_principales);
	circulo_novisto.gotoAndStop(lib.circulo_desbloqueado.prototype.id);
	//circulo_gris = new createjs.Bitmap("images/circulo_gris.png");
	bounds_circulo_novisto = circulo_novisto.getBounds();
	//console.log(bounds_circulo_gris)
	circulo_novisto.regX = 0; //bounds_circulo_gris.width/2;
	circulo_novisto.regY = 0; //bounds_circulo_gris.height/2;
	circulo_novisto.scaleX = scale_circulos;
	circulo_novisto.scaleY = scale_circulos;
	circulo_novisto.x = 0;
	circulo_novisto.y = 0;
	circulo_novisto.alpha = 0;
	contenedor_circulos_novistos[i] = circulo_novisto;
	
	circulo_visto = new createjs.Sprite(imagenes_principales);
	circulo_visto.gotoAndStop(lib.circulo_visto.prototype.id);
	bounds_circulo_visto = circulo_visto.getBounds();
	//circulo_rojo = new createjs.Bitmap("images/circulo_rojo.png");
	circulo_visto.x = 0;
	circulo_visto.y = 0;
	circulo_visto.alpha = 0;
	circulo_visto.scaleX = scale_circulos;
	circulo_visto.scaleY = scale_circulos;
	
	contenedor_circulos_vistos[i] = circulo_visto;
	
	
	/*
	sombra_circulo = new createjs.Sprite(imagenes_principales);
	sombra_circulo.gotoAndStop(23);
	//sombra_circulo = new createjs.Bitmap("images/sombra_circulos.png");
	sombra_circulo.x = 6;
	sombra_circulo.y = 3;
	sombra_circulo.alpha = 1;
	sombra_circulo.scaleX = scale_circulos;
	sombra_circulo.scaleY = scale_circulos;
	*/
	

	////////////////////////////////////

	

	top_titmen = document.getElementById("txt_menu_n").style.marginTop;
	left_titmen = document.getElementById("txt_menu_nhz").style.marginLeft;

	
	document.getElementById("contiene_menunav_n").addEventListener("mouseleave", scrollMenu);

	franja_menunav_n = document.createElement("DIV");
	franja_menunav_n.id = "franja_menunav_n"+i
	franja_menunav_n.className = "franja_menunav_n"
	document.getElementById("menunavint_n").appendChild(franja_menunav_n);

	top_franjasmenu_n[i] =  document.getElementById("franja_menunav_n"+i).offsetTop+top_titmen; 

	franja_menunav_n.addEventListener("click", clicCirculosMenuNavA);
	franja_menunav_n.addEventListener("mouseover", overCirculosMenuNav_N);
	franja_menunav_n.addEventListener("mouseout", outCirculosMenuNav_N);

	//franja_menunav.addEventListener("click", clicCirculosMenuNavA);

	franja_menunavint_n = document.createElement("DIV");
	franja_menunavint_n.id = "franja_menunavint_n"+i
	franja_menunavint_n.className = "franja_menunavint_n"
	document.getElementById("franja_menunav_n"+i).appendChild(franja_menunavint_n);
	



    num_menunav_n = document.createElement("DIV");
	num_menunav_n.id = "num_menunav_n"+i
	num_menunav_n.className = "num_menunav_n"
	num_menunav_n.innerHTML = i+1;
    document.getElementById("franja_menunavint_n"+i).appendChild(num_menunav_n);

    sel_menunav_n = document.createElement("DIV");
	sel_menunav_n.id = "sel_menunav_n"+i
	sel_menunav_n.className = "sel_menunav_n"
	document.getElementById("franja_menunavint_n"+i).appendChild(sel_menunav_n);

    //titulo_menunav_n = document.createElement("DIV");
	//titulo_menunav_n.id = "titulo_menunav_n"+i
	//titulo_menunav_n.className = "titulo_menunav_n"
	//titulo_menunav_n.innerHTML = titulos_pantallas[i];
    //document.getElementById("franja_menunavint_n"+i).appendChild(titulo_menunav_n);

    status_menunav_n = document.createElement("DIV");
	status_menunav_n.id = "status_menunav_n"+i
	status_menunav_n.className = "status_menunav_cerrado_n"
	document.getElementById("franja_menunavint_n"+i).appendChild(status_menunav_n);

	
	total_html_franjamenunav_n[i] = franja_menunav_n;
	total_num_franjamenunav_n[i] = num_menunav_n;
	total_status_franjamenunav_n[i] = status_menunav_n;
	//total_titulos_franjamenunav_n[i] = titulo_menunav_n;
	////////////////////////////////////

	



	document.getElementById("contiene_menunav_nhz").addEventListener("mouseleave", scrollMenu);

	franja_menunav_nhz = document.createElement("DIV");
	franja_menunav_nhz.id = "franja_menunav_nhz"+i
	franja_menunav_nhz.className = "franja_menunav_nhz"
	document.getElementById("menunavint_nhz").appendChild(franja_menunav_nhz);

	//top_franjasmenu_n[i] =  document.getElementById("franja_menunav_n"+i).offsetTop+top_titmen; 
	left_franjasmenu_nhz[i] =  document.getElementById("franja_menunav_nhz"+i).offsetLeft-document.getElementById("menunavint_nhz").offsetLeft+left_titmen;// - 11; 
	//console.log(document.getElementById("franja_menunav_nhz"+i),"---",i,"left_titmen",left_titmen)
	//console.log($("#franja_menunav_nhz"+i).offset().left,"$",i)
	//console.log(document.getElementById("franja_menunav_nhz"+i).offsetLeft,"++++",i)
	//console.log(document.getElementById("contiene_menunav_nhz").offsetLeft,"contiene_menunav_nhz")
	//console.log(document.getElementById("menunavint_nhz").offsetLeft,"menunavint_nhz")


	franja_menunav_nhz.addEventListener("click", clicCirculosMenuNavA);
	franja_menunav_nhz.addEventListener("mouseover", overCirculosMenuNav_N);
	franja_menunav_nhz.addEventListener("mouseout", outCirculosMenuNav_N);

	//franja_menunav.addEventListener("click", clicCirculosMenuNavA);

	
	franja_menunavint_nhz = document.createElement("DIV");
	franja_menunavint_nhz.id = "franja_menunavint_nhz"+i
	franja_menunavint_nhz.className = "franja_menunavint_nhz"
	document.getElementById("franja_menunav_nhz"+i).appendChild(franja_menunavint_nhz);
	



    num_menunav_nhz = document.createElement("DIV");
	num_menunav_nhz.id = "num_menunav_nhz"+i
	num_menunav_nhz.className = "num_menunav_nhz"
	num_menunav_nhz.innerHTML = i+1;
    document.getElementById("franja_menunavint_nhz"+i).appendChild(num_menunav_nhz);

    
    sel_menunav_nhz = document.createElement("DIV");
	sel_menunav_nhz.id = "sel_menunav_nhz"+i
	sel_menunav_nhz.className = "sel_menunav_nhz"
	document.getElementById("franja_menunavint_nhz"+i).appendChild(sel_menunav_nhz);

    //titulo_menunav_n = document.createElement("DIV");
	//titulo_menunav_n.id = "titulo_menunav_n"+i
	//titulo_menunav_n.className = "titulo_menunav_n"
	//titulo_menunav_n.innerHTML = titulos_pantallas[i];
    //document.getElementById("franja_menunavint_n"+i).appendChild(titulo_menunav_n);

    status_menunav_nhz = document.createElement("DIV");
	status_menunav_nhz.id = "status_menunav_nhz"+i
	status_menunav_nhz.className = "status_menunav_cerrado_nhz"
	document.getElementById("franja_menunavint_nhz"+i).appendChild(status_menunav_nhz);

	

	total_html_franjamenunav_nhz[i] = franja_menunav_nhz;
	total_num_franjamenunav_nhz[i] = num_menunav_nhz;
	total_status_franjamenunav_nhz[i] = status_menunav_nhz;
	//total_titulos_franjamenunav_n[i] = titulo_menunav_n;

	
	////

	





	////////////////////////////////////

	franja_menunav = document.createElement("DIV");
	franja_menunav.id = "franja_menunav"+i
	franja_menunav.className = "franja_menunav"
	document.getElementById("menunavint").appendChild(franja_menunav);
	top_franjasmenu[i] =  document.getElementById("franja_menunav"+i).offsetTop; 


	franja_menunav.addEventListener("click", clicCirculosMenuNavA);

	franja_menunavint = document.createElement("DIV");
	franja_menunavint.id = "franja_menunavint"+i
	franja_menunavint.className = "franja_menunavint"
	document.getElementById("franja_menunav"+i).appendChild(franja_menunavint);

    num_menunav = document.createElement("DIV");
	num_menunav.id = "num_menunav"+i
	num_menunav.className = "num_menunav"
	num_menunav.innerHTML = i+1;
    document.getElementById("franja_menunavint"+i).appendChild(num_menunav);

    sel_menunav = document.createElement("DIV");
	sel_menunav.id = "sel_menunav"+i
	sel_menunav.className = "sel_menunav"
	document.getElementById("franja_menunavint"+i).appendChild(sel_menunav);

    titulo_menunav = document.createElement("DIV");
	titulo_menunav.id = "titulo_menunav"+i
	titulo_menunav.className = "titulo_menunav"
	titulo_menunav.innerHTML = titulos_pantallas[i].replace("<br/>", " ");;
	titulo_menunav.innerHTML = titulos_pantallas[i].replace("<br>", " ");;
    document.getElementById("franja_menunavint"+i).appendChild(titulo_menunav);

    status_menunav = document.createElement("DIV");
	status_menunav.id = "status_menunav"+i
	status_menunav.className = "status_menunav_cerrado"
	document.getElementById("franja_menunavint"+i).appendChild(status_menunav);


	total_html_franjamenunav[i] = franja_menunav;
	total_status_franjamenunav[i] = status_menunav;
	total_titulos_franjamenunav[i] = titulo_menunav;
	////////////////////////////////////

	
	numero_menu_principal = document.createElement("DIV");
	numero_menu_principal.id = "numero_menu_principal"+i
	numero_menu_principal.className = "menu_principal"
	//numero_menu_principal.innerHTML = i+1;
    document.body.appendChild(numero_menu_principal);
    total_html_numeros_menu_nav[i] = numero_menu_principal;


	num_menu_principal = document.createElement("DIV");
	num_menu_principal.id = "num_menu_principal"+i
	num_menu_principal.className = "num_menu_principal"
	num_menu_principal.innerHTML = i+1;
    document.getElementById("numero_menu_principal"+i).appendChild(num_menu_principal);
    total_html_num_menu_nav[i] = num_menu_principal;
     

    simb_menu_principal = document.createElement("DIV");
	simb_menu_principal.id = "simb_menu_principal"+i
	simb_menu_principal.className = "simb_menu_principal"
	//simb_menu_principal.innerHTML = "è";
    document.getElementById("numero_menu_principal"+i).appendChild(simb_menu_principal);
    total_html_simb_menu_nav[i] = simb_menu_principal;


    
	x_contenedor_numero = 0;
	x_ultimo_circulo = 70;
	x_primer_circulo = 0;
	y_primer_circulo = 110;
	
    if(i == 0){
		y_contenedor_numero = y_primer_circulo;


		
	} else {
		y_contenedor_numero = contenedores_circulos_menu[i-1].y+27;
	}

    
    
	var_numero_menu_nav = document.getElementById("numero_menu_principal"+i);
	numero_menu_nav = new createjs.DOMElement(var_numero_menu_nav);
	
	numero_menu_nav.x = 20;//x_contenedor_numero;
	numero_menu_nav.y = y_contenedor_numero; /// 115 ACA
	//numero_menu_nav.rotation = -20;
	numero_menu_nav.regX = 0;
	numero_menu_nav.regY = 13;
	numero_menu_nav.scaleX = 0.8;
	numero_menu_nav.scaleY = 0.8;
	numero_menu_nav.cursor = "pointer";
	numero_menu_nav.visible = false;
	numero_menu_nav.alpha = 0;
	

	bounds_numero_menu_nav = numero_menu_nav.getBounds();

	
	total_numeros_menu_nav[i] = numero_menu_nav;
	x_total_numeros_menu_nav[i] = numero_menu_nav.x;

	

	//funcionCirculosMenuNav(numero_menu_principal);
	numero_menu_principal.addEventListener("mouseover", overCirculosMenuNav);
	numero_menu_principal.addEventListener("mouseout", outCirculosMenuNav);
	numero_menu_principal.addEventListener("click", clicCirculosMenuNavA);

	

	numero_menu = new createjs.Text(i+1, "22px hnc", "rgba(0,0,0,1)");
	bounds_numero_menu = numero_menu.getBounds();
	numero_menu.regX = 0; //bounds_circulo_gris.width/2;
	numero_menu.regY = 0; //bounds_circulo_gris.height/2;
	//bounds_numero_menu.height = 15;
	//bounds_numero_menu.width = 8.3;
	//numero_menu.setBounds( 0,  0,  8.3,  15 )
	numero_menu.x = bounds_circulo_desbloqueado.width/2*scale_circulos - bounds_numero_menu.width/2;
	numero_menu.y = bounds_circulo_desbloqueado.height/2*scale_circulos - bounds_numero_menu.height/2;
	//console.log(numero_menu.x, numero_menu.y, circulo_rojo.x, circulo_rojo.y)
	contenedor_numeros_menu[i] = numero_menu;

	

	simbolo_ok = new createjs.Text("å", "22px sosa", "rgba(255,231,1,1)");
	bounds_simbolo_ok = simbolo_ok.getBounds();
	simbolo_ok.regX = 0; //bounds_circulo_gris.width/2;
	simbolo_ok.regY = 0; //bounds_circulo_gris.height/2;
	simbolo_ok.x = bounds_circulo_desbloqueado.width/2*scale_circulos - bounds_simbolo_ok.width/2;
	simbolo_ok.y = bounds_circulo_desbloqueado.height/2*scale_circulos - bounds_simbolo_ok.height/2;
	simbolo_ok.alpha = 0;
	//console.log(numero_menu.x, numero_menu.y, circulo_rojo.x, circulo_rojo.y)
	contenedor_simbolos_ok[i] = simbolo_ok;


	simbolo_unlock = new createjs.Text("ê", "22px sosa", "rgba(0,0,0,1)");
	bounds_simbolo_unlock = simbolo_unlock.getBounds();
	simbolo_unlock.regX = 0; //bounds_circulo_gris.width/2;
	simbolo_unlock.regY = 0; //bounds_circulo_gris.height/2;
	simbolo_unlock.x = bounds_circulo_desbloqueado.width/2*scale_circulos - bounds_simbolo_unlock.width/2;
	simbolo_unlock.y = bounds_circulo_desbloqueado.height/2*scale_circulos - bounds_simbolo_unlock.height/2;
	simbolo_unlock.alpha = 0;
	//console.log(numero_menu.x, numero_menu.y, circulo_rojo.x, circulo_rojo.y)
	contenedor_simbolos_unlock[i] = simbolo_unlock;
	

	
	simbolo_bandera = new createjs.Text("j", "22px sosa", "rgba(255,231,1,1)");
	bounds_simbolo_bandera = simbolo_bandera.getBounds();
	simbolo_bandera.regX = 0; //bounds_circulo_gris.width/2;
	simbolo_bandera.regY = 0; //bounds_circulo_gris.height/2;
	simbolo_bandera.x = bounds_circulo_desbloqueado.width/2*scale_circulos - bounds_simbolo_bandera.width/2;
	simbolo_bandera.y = bounds_circulo_desbloqueado.height/2*scale_circulos - bounds_simbolo_bandera.height/2;
	simbolo_bandera.alpha = 0;
	//console.log(numero_menu.x, numero_menu.y, circulo_rojo.x, circulo_rojo.y)
	contenedor_simbolos_bandera[i] = simbolo_bandera;
	
	
	//x_contenedor_numero = 0;
	
	
	
	
	

	
	y_contenedores_circulos_menu = 44;
	contenedor_numero = new createjs.Container();
	contenedor_numero.addChild(circulo_desbloqueado,circulo_novisto,circulo_visto,numero_menu,simbolo_ok,simbolo_unlock,simbolo_bandera);
	contenedor_numero.x = x_contenedor_numero;
	contenedor_numero.y = y_contenedor_numero;
	contenedor_numero.regX = bounds_circulo_desbloqueado.width/2;
	contenedor_numero.regY = bounds_circulo_desbloqueado.height/2;
	contenedor_numero.alpha = 0;
	contenedor_numero.cursor = "pointer";
	contenedor_numero.mouseChildren = false;
	
	bounds_contenedor_numero = contenedor_numero.getBounds();
	
	funcionCirculosMenu(contenedor_numero);
	//funcionCirculosMenu2(var_numero_menu_nav);


	contenedores_circulos_menu[i] = contenedor_numero;

	bounds_contenedores_numeros[i] = bounds_contenedor_numero;
	//console.log(contenedor_numero,bounds_contenedor_numero)

	//contenedor_numero.scaleX = scale_personaje;

	}


	
	alto_finmenunav = $("#menunav").innerHeight()-$("#franja_menunav0").innerHeight()-20
	document.getElementById("fin_menunav").style.height = alto_finmenunav+"px";


	alto_finmenunav_n = $("#menunav_n").innerHeight()-$("#franja_menunav0").innerHeight()-20
	document.getElementById("fin_menunav_n").style.height = alto_finmenunav_n+"px";

	ancho_finmenunav_nhz = $("#menunav_nhz").innerWidth()-$("#franja_menunavhz0").innerWidth()-61
	document.getElementById("fin_menunav_nhz").style.width = ancho_finmenunav_nhz+"px";

	numeros_menu_activos = []

	for (i = 0; i < znPages; i++) { 
			
		numeros_menu_activos[i] = {val: false};

	}

	x_final_flechas = 1085;
	/*
	var_flechas = document.getElementById("flechas");
	flechas = new createjs.DOMElement(var_flechas);
	flechas.x = 300;
	flechas.y = 120;
	//flechas.mouseEnabled = true;
	//flechas.tickEnabled = true;
	flechas.visible = true;
	flechas.alpha = 0;
	*/

	

	x_final_atras = x_total_numeros_menu_nav[0] - 62;
	x_inicial_atras = x_final_atras + 10;

	y_final_atras = numero_menu_nav.y - 16;

	flecha_atras = new createjs.Sprite(imagenes_principales);
	flecha_atras.gotoAndStop(lib.flecha_retroceso.prototype.id);
	//flecha_atras = new createjs.Bitmap("images/fondo_flecha_atras.png");
	//flecha_atras.x = x_inicial_atras;
	flecha_atras.x = 0;
	flecha_atras.y = 0;
	flecha_atras.alpha = 1;
	flecha_atras.cursor = "pointer"
	
	x_final_adelante = x_total_numeros_menu_nav[znPages-1] + 65;
	x_inicial_adelante = x_final_adelante - 10;
	y_final_adelante = y_final_atras;

	flecha_adelante = new createjs.Sprite(imagenes_principales);
	flecha_adelante.gotoAndStop(lib.flecha_retroceso.prototype.id);
	//flecha_adelante = new createjs.Bitmap("images/fondo_flecha_adelante.png");
	//flecha_adelante.x = x_inicial_adelante;
	flecha_adelante.x = 0;
	flecha_adelante.y = 0;
	flecha_adelante.scaleX = -1;
	flecha_adelante.alpha = 1;
	flecha_adelante.cursor = "pointer"
	

	fondo_flecha_atras = new createjs.Sprite(imagenes_principales);
	fondo_flecha_atras.gotoAndStop(lib.z_contenedor_flechas.prototype.id);
	//flecha_atras = new createjs.Bitmap("images/fondo_flecha_atras.png");
	//flecha_atras.x = x_inicial_atras;
	fondo_flecha_atras.y = 0;
	fondo_flecha_atras.alpha = 0;
	
	fondo_flecha_adelante = new createjs.Sprite(imagenes_principales);
	fondo_flecha_adelante.gotoAndStop(lib.z_contenedor_flechas1.prototype.id);
	//flecha_atras = new createjs.Bitmap("images/fondo_flecha_atras.png");
	//flecha_atras.x = x_inicial_atras;
	fondo_flecha_adelante.y = 0;
	fondo_flecha_adelante.alpha = 0;

	contenedor_flecha_retroceso = new createjs.Container();
	contenedor_flecha_retroceso.addChild(fondo_flecha_atras,flecha_atras);
	contenedor_flecha_retroceso.x = x_primer_circulo;
	contenedor_flecha_retroceso.y = y_final_atras;
	contenedor_flecha_retroceso.alpha = 0;

	contenedor_flecha_retroceso.mouseChildren = true;
	
	contenedor_flecha_avance = new createjs.Container();
	contenedor_flecha_avance.addChild(fondo_flecha_adelante,flecha_adelante);
	contenedor_flecha_avance.x = x_final_adelante;
	contenedor_flecha_avance.y = y_final_adelante;
	contenedor_flecha_avance.alpha = 0;
	contenedor_flecha_avance.visible = false;

	contenedor_flecha_retroceso.mouseChildren = true;
	
	
		
	/*
	extension_escuela = document.getElementById("escuela").innerHTML

	console.log(extension_escuela[0])

	extension_escuela[0].x = 100;

	letras_escuela = []

	
	for (i = 0; i < extension_escuela.length; i++) { 

		var var_letra_escuela = new createjs.DOMElement("letra"+i);
		letras_escuela[i] = var_letra_escuela;
	}
	console.log(letras_escuela)
	*/	

	y_indica_nav = 100;
	var_indica_nav = document.getElementById("indica_nav");
	indica_nav = new createjs.DOMElement(var_indica_nav);
	
	indica_nav.x = 110;
	indica_nav.y = y_indica_nav;
	indica_nav.visible = false;
	indica_nav.alpha = 0;
	indica_nav.rotation = 90;
	indica_nav.scaleY = -1;
	bounds_indica_nav = indica_nav.getBounds();

	document.getElementById("indica_nav_int").innerHTML =  icono_indica_principal;

	


	y_final_instruccion_especial = 470;
	var_instruccion_especial = document.getElementById("instruccion_especial");
	instruccion_especial = new createjs.DOMElement(var_instruccion_especial);
	
	instruccion_especial.x = 0;
	instruccion_especial.y = y_final_instruccion_especial;
	instruccion_especial.visible = false;
	instruccion_especial.alpha = 0;
	bounds_instruccion_especial = instruccion_especial.getBounds();



	$(".btn_play_per").html(icono_play);
	$(".btn_stop_per").html(icono_stop);

	$(".instruccion_audio").find("div").html("<span class='arrow animated bounce' style='font-size:18px;margin-left:10px'>"+icono_indica+" </span> Para empezar "+tx_pulsamin+" aquí.");

	clic_btnaudio = false;
	locucionini = createjs.Sound.play("sounds/locucionini.mp3");
	locucionini.stop();
	locucionini.pan = 0.0001;
			

	$("#boton_audioini").click(function(){
		if(clic_btnaudio){
			clic_btnaudio = false;
			locucionini.stop();


			document.getElementById("boton_audioini").className = "boton_audioini";
			document.getElementById("btn_play_per").style.width = "75px";
			document.getElementById("btn_stop_per").style.width = "0px";
			
			for (ind = 0; ind < bocasini.length; ind++) { 
				bocasini[ind].alpha = 0;
			}	
			bocasini[0].alpha = 1;
			clearInterval(animaLipsIni);



		} else {
			clic_btnaudio = true;
			locucionini.play();

			document.getElementById("boton_audioini").className = "boton_audioini2";
			document.getElementById("btn_play_per").style.width = "0px";
			document.getElementById("btn_stop_per").style.width = "70px";

			$(".instruccion_audio").fadeOut(velocidad_lenta);
			if(con_globotxt){
				$(".cont_globoini").fadeIn(velocidad_lenta);
			}
			animaLipsyncIni();
		}

		locucionini.on("complete", locucionIntroFinaliza);
	})

	function locucionIntroFinaliza(){
		
		$("#boton_audioini").fadeOut(velocidad_rapida);
		
		createjs.Tween.get(btn_ini).wait(velocidad_lenta).to({scaleX:0.9,scaleY:0.9},velocidad_lenta, createjs.Ease.backOut);

		for (ind = 0; ind < bocasini.length; ind++) { 
			bocasini[ind].alpha = 0;
		}	
		bocasini[0].alpha = 1;
		clearInterval(animaLipsIni);


	}

	var imagenes_principales = new createjs.SpriteSheet({
	images: ["images/index_atlas_.png"], 
	frames: ["images/index_atlas_.png"], "frames": frames_principal
	});
	
	cabezaini = new createjs.Sprite(imagenes_principales);
	ceja_derechaini = new createjs.Sprite(imagenes_principales);
	ceja_izquierdaini = new createjs.Sprite(imagenes_principales);
	ojos_abiertosini = new createjs.Sprite(imagenes_principales);
	ojos_cerradosini = new createjs.Sprite(imagenes_principales);
	bocasini = [];
	boca_0ini = new createjs.Sprite(imagenes_principales);
	boca_1ini = new createjs.Sprite(imagenes_principales);
	boca_2ini = new createjs.Sprite(imagenes_principales);
	boca_3ini = new createjs.Sprite(imagenes_principales);
	boca_4ini = new createjs.Sprite(imagenes_principales);
	boca_5ini = new createjs.Sprite(imagenes_principales);
	boca_6ini = new createjs.Sprite(imagenes_principales);
	cabelloini = new createjs.Sprite(imagenes_principales);

	contenedor_rostroini = new createjs.Container();
	
	tronco_perini = new createjs.Sprite(imagenes_principales);

	logo_uniforme_ini = new createjs.Sprite(imagenes_principales);
	

	if(personaje_ini == 1){
		x_tronco_perini = x_tronco_per1;
		y_tronco_perini = y_tronco_per1;

		tronco_perini.gotoAndStop(lib.tronco_per1.prototype.id);
		
		x_cabeza_perini = x_cabeza_per1;
		y_cabeza_perini = y_cabeza_per1;
		
		cabezaini.gotoAndStop(lib.cabeza_per1.prototype.id);

		x_cejaderecha_perini = x_ceja_derecha_per1;
		y_cejaderecha_perini = y_ceja_derecha_per1;
		
		ceja_derechaini.gotoAndStop(lib.ceja_derecha_per1.prototype.id);

		x_cejaizquierda_perini = x_ceja_izquierda_per1;
		y_cejaizquierda_perini = y_ceja_izquierda_per1;
		
		ceja_izquierdaini.gotoAndStop(lib.ceja_izquierda_per1.prototype.id);

		x_ojosabiertos_perini = x_ojos_per1;
		y_ojosabiertos_perini = y_ojos_per1;
		
		ojos_abiertosini.gotoAndStop(lib.ojos_abiertos_per1.prototype.id);
		ojos_cerradosini.gotoAndStop(lib.ojos_cerrados_per1.prototype.id);

		x_bocaini = x_boca_per1;
		y_bocaini = y_boca_per1;
		boca_0ini.gotoAndStop(lib.boca0_per1.prototype.id);
		boca_1ini.gotoAndStop(lib.boca1_per1.prototype.id);
		boca_2ini.gotoAndStop(lib.boca2_per1.prototype.id);
		boca_3ini.gotoAndStop(lib.boca3_per1.prototype.id);
		boca_4ini.gotoAndStop(lib.boca4_per1.prototype.id);
		boca_5ini.gotoAndStop(lib.boca5_per1.prototype.id);
		boca_6ini.gotoAndStop(lib.boca6_per1.prototype.id);

		x_cabelloini = x_cabello_per1;
		y_cabelloini = y_cabello_per1;
		visible_cabelloini = visible_cabello_per1;
		cabelloini.gotoAndStop(lib.cabello_per1.prototype.id);

		x_contenedor_rostroini = x_contenedor_rostro_per1;
		y_contenedor_rostroini = y_contenedor_rostro_per1;

		x_logouniformeini = x_logo_uniforme_per1_izq;
		y_logouniformeini = y_logo_uniforme_per1_izq;
		visible_uniformeini = visible_logo_uniforme_per1;

		logo_uniforme_ini.gotoAndStop(lib.logo_camisa_per1.prototype.id);
	
	} else if(personaje_ini == 2){
		x_tronco_perini = x_tronco_per2;
		y_tronco_perini = y_tronco_per2;
		
		tronco_perini.gotoAndStop(lib.tronco_per2.prototype.id);

		x_cabeza_perini = x_cabeza_per2;
		y_cabeza_perini = y_cabeza_per2;
		
		cabezaini.gotoAndStop(lib.cabeza_per2.prototype.id);

		x_cejaderecha_perini = x_ceja_derecha_per1;
		y_cejaderecha_perini = y_ceja_derecha_per1;
		
		ceja_derechaini.gotoAndStop(lib.ceja_derecha_per2.prototype.id);

		x_cejaizquierda_perini = x_ceja_izquierda_per1;
		y_cejaizquierda_perini = y_ceja_izquierda_per1;
		
		ceja_izquierdaini.gotoAndStop(lib.ceja_izquierda_per2.prototype.id);

		x_ojosabiertos_perini = x_ojos_per2;
		y_ojosabiertos_perini = y_ojos_per2;
		
		ojos_abiertosini.gotoAndStop(lib.ojos_abiertos_per2.prototype.id);
		ojos_cerradosini.gotoAndStop(lib.ojos_cerrados_per2.prototype.id);

		x_bocaini = x_boca_per2;
		y_bocaini = y_boca_per2;
		
		boca_0ini.gotoAndStop(lib.boca0_per2.prototype.id);
		boca_1ini.gotoAndStop(lib.boca1_per2.prototype.id);
		boca_2ini.gotoAndStop(lib.boca2_per2.prototype.id);
		boca_3ini.gotoAndStop(lib.boca3_per2.prototype.id);
		boca_4ini.gotoAndStop(lib.boca4_per2.prototype.id);
		boca_5ini.gotoAndStop(lib.boca5_per2.prototype.id);
		boca_6ini.gotoAndStop(lib.boca6_per2.prototype.id);

		x_cabelloini = x_cabello_per2;
		y_cabelloini = y_cabello_per2;
		visible_cabelloini = visible_cabello_per2;

		cabelloini.gotoAndStop(lib.cabello_per2.prototype.id);

		x_contenedor_rostroini = x_contenedor_rostro_per2;
		y_contenedor_rostroini = y_contenedor_rostro_per2;

		x_logouniformeini = x_logo_uniforme_per2_izq;
		y_logouniformeini = y_logo_uniforme_per2_izq;
		visible_uniformeini = visible_logo_uniforme_per2;


		logo_uniforme_ini.gotoAndStop(lib.logo_camisa_per2.prototype.id);



	} else if(personaje_ini == 3){
		x_tronco_perini = x_tronco_per3;
		y_tronco_perini = y_tronco_per3;
		
		tronco_perini.gotoAndStop(lib.tronco_per3.prototype.id);

		x_cabeza_perini = x_cabeza_per3;
		y_cabeza_perini = y_cabeza_per3;
		
		cabezaini.gotoAndStop(lib.cabeza_per3.prototype.id);

		x_cejaderecha_perini = x_ceja_derecha_per1;
		y_cejaderecha_perini = y_ceja_derecha_per1;
		
		ceja_derechaini.gotoAndStop(lib.ceja_derecha_per3.prototype.id);

		x_cejaizquierda_perini = x_ceja_izquierda_per1;
		y_cejaizquierda_perini = y_ceja_izquierda_per1;
		
		ceja_izquierdaini.gotoAndStop(lib.ceja_izquierda_per3.prototype.id);

		x_ojosabiertos_perini = x_ojos_per3;
		y_ojosabiertos_perini = y_ojos_per3;
		
		ojos_abiertosini.gotoAndStop(lib.ojos_abiertos_per3.prototype.id);
		ojos_cerradosini.gotoAndStop(lib.ojos_cerrados_per3.prototype.id);

		x_bocaini = x_boca_per3;
		y_bocaini = y_boca_per3;
		
		boca_0ini.gotoAndStop(lib.boca0_per3.prototype.id);
		boca_1ini.gotoAndStop(lib.boca1_per3.prototype.id);
		boca_2ini.gotoAndStop(lib.boca2_per3.prototype.id);
		boca_3ini.gotoAndStop(lib.boca3_per3.prototype.id);
		boca_4ini.gotoAndStop(lib.boca4_per3.prototype.id);
		boca_5ini.gotoAndStop(lib.boca5_per3.prototype.id);
		boca_6ini.gotoAndStop(lib.boca6_per3.prototype.id);

		x_cabelloini = x_cabello_per3;
		y_cabelloini = y_cabello_per3;
		visible_cabelloini = visible_cabello_per3;

		cabelloini.gotoAndStop(lib.cabello_per3.prototype.id);

		x_contenedor_rostroini = x_contenedor_rostro_per3;
		y_contenedor_rostroini = y_contenedor_rostro_per3;

		x_logouniformeini = x_logo_uniforme_per3_izq;
		y_logouniformeini = y_logo_uniforme_per3_izq;
		visible_uniformeini = visible_logo_uniforme_per3;

		logo_uniforme_ini.gotoAndStop(lib.logo_camisa_per3.prototype.id);

	} else if(personaje_ini == 4){
		x_tronco_perini = x_tronco_per4;
		y_tronco_perini = y_tronco_per4;
		
		tronco_perini.gotoAndStop(lib.tronco_per4.prototype.id);

		x_cabeza_perini = x_cabeza_per4;
		y_cabeza_perini = y_cabeza_per4;
		
		cabezaini.gotoAndStop(lib.cabeza_per4.prototype.id);

		x_cejaderecha_perini = x_ceja_derecha_per1;
		y_cejaderecha_perini = y_ceja_derecha_per1;
		
		ceja_derechaini.gotoAndStop(lib.ceja_derecha_per4.prototype.id);

		x_cejaizquierda_perini = x_ceja_izquierda_per1;
		y_cejaizquierda_perini = y_ceja_izquierda_per1;
		
		ceja_izquierdaini.gotoAndStop(lib.ceja_izquierda_per4.prototype.id);

		x_ojosabiertos_perini = x_ojos_per4;
		y_ojosabiertos_perini = y_ojos_per4;
		
		ojos_abiertosini.gotoAndStop(lib.ojos_abiertos_per4.prototype.id);
		ojos_cerradosini.gotoAndStop(lib.ojos_cerrados_per4.prototype.id);

		x_bocaini = x_boca_per4;
		y_bocaini = y_boca_per4;
		
		boca_0ini.gotoAndStop(lib.boca0_per4.prototype.id);
		boca_1ini.gotoAndStop(lib.boca1_per4.prototype.id);
		boca_2ini.gotoAndStop(lib.boca2_per4.prototype.id);
		boca_3ini.gotoAndStop(lib.boca3_per4.prototype.id);
		boca_4ini.gotoAndStop(lib.boca4_per4.prototype.id);
		boca_5ini.gotoAndStop(lib.boca5_per4.prototype.id);
		boca_6ini.gotoAndStop(lib.boca6_per4.prototype.id);

		x_cabelloini = x_cabello_per4;
		y_cabelloini = y_cabello_per4;
		visible_cabelloini = visible_cabello_per4;

		cabelloini.gotoAndStop(lib.cabello_per4.prototype.id);

		x_contenedor_rostroini = x_contenedor_rostro_per4;
		y_contenedor_rostroini = y_contenedor_rostro_per4;

		x_logouniformeini = x_logo_uniforme_per4_izq;
		y_logouniformeini = y_logo_uniforme_per4_izq;
		visible_uniformeini = visible_logo_uniforme_per4;
		logo_uniforme_ini.gotoAndStop(lib.logo_camisa_per4.prototype.id);

	}
	bocasini.push(boca_0ini);
	bocasini.push(boca_1ini);
	bocasini.push(boca_2ini);
	bocasini.push(boca_3ini);
	bocasini.push(boca_4ini);
	bocasini.push(boca_5ini);
	bocasini.push(boca_6ini);

	tronco_perini.alpha = 1;
	tronco_perini.x = x_tronco_perini;
	tronco_perini.y = y_tronco_perini;

	cabezaini.alpha = 1;
	cabezaini.x = x_cabeza_perini;
	cabezaini.y = y_cabeza_perini;

	ceja_derechaini.alpha = 1;
	ceja_derechaini.x = x_cejaderecha_perini;
	ceja_derechaini.y = y_cejaderecha_perini;

	ceja_izquierdaini.alpha = 1;
	ceja_izquierdaini.x = x_cejaizquierda_perini;
	ceja_izquierdaini.y = y_cejaizquierda_perini;

	ojos_abiertosini.alpha = 1;
	ojos_abiertosini.x = x_ojosabiertos_perini;
	ojos_abiertosini.y = y_ojosabiertos_perini;

	ojos_cerradosini.alpha = 0;
	ojos_cerradosini.x = x_ojosabiertos_perini;
	ojos_cerradosini.y = y_ojosabiertos_perini;

	boca_0ini.alpha = 1;
	boca_0ini.x = x_bocaini;
	boca_0ini.y = y_bocaini;

	boca_1ini.alpha = 0;
	boca_1ini.x = x_bocaini;
	boca_1ini.y = y_bocaini;

	boca_1ini.alpha = 0;
	boca_1ini.x = x_bocaini;
	boca_1ini.y = y_bocaini;

	boca_2ini.alpha = 0;
	boca_2ini.x = x_bocaini;
	boca_2ini.y = y_bocaini;

	boca_3ini.alpha = 0;
	boca_3ini.x = x_bocaini;
	boca_3ini.y = y_bocaini;

	boca_4ini.alpha = 0;
	boca_4ini.x = x_bocaini;
	boca_4ini.y = y_bocaini;

	boca_5ini.alpha = 0;
	boca_5ini.x = x_bocaini;
	boca_5ini.y = y_bocaini;

	boca_6ini.alpha = 0;
	boca_6ini.x = x_bocaini;
	boca_6ini.y = y_bocaini;

	cabelloini.visible = visible_cabelloini;
	cabelloini.x = x_cabelloini;
	cabelloini.y = y_cabelloini;

	


	contenedor_rostroini.addChild(cabezaini,ceja_derechaini,ceja_izquierdaini,ojos_abiertosini,ojos_cerradosini,boca_0ini,boca_1ini,boca_2ini,boca_3ini,boca_4ini,boca_5ini,boca_6ini,cabelloini);

	bounds_contenedor_rostroini = contenedor_rostroini.getBounds();
	contenedor_rostroini.regX = bounds_contenedor_rostroini.width/2;
	contenedor_rostroini.regY = bounds_contenedor_rostroini.height*1/2;
	contenedor_rostroini.x = x_contenedor_rostroini;
	contenedor_rostroini.y = y_contenedor_rostroini;
	//contenedor_rostro.addChild(cabeza, ceja_derecha, ceja_izquierda,ojos_abiertos,ojos_cerrados,boca0,boca1,boca2,boca3,boca4,boca5,boca6,cabello);


	logo_uniforme_ini.visible = visible_uniformeini;
	logo_uniforme_ini.x = x_logouniformeini;
	logo_uniforme_ini.y = y_logouniformeini;
	
	contenedor_personajeini = new createjs.Container();
	contenedor_personajeini.x = x_personajeanima_inicial_ini;
	contenedor_personajeini.y = y_personajeanima_inicial;
	contenedor_personajeini.alpha = 0;
	contenedor_personajeini.addChild(tronco_perini,contenedor_rostroini,logo_uniforme_ini)
	//contenedor_personajeini.addChild(tronco,contenedor_rostro,logo_uniforme)

	rotaciones_cabezas = [-2,0,0,0,2]

	duraciones_movimientos = [2500,3500,4500]
	azar_duracion_movimientos = Math.floor((Math.random() * duraciones_movimientos.length))
	duracion_movimiento = duraciones_movimientos[azar_duracion_movimientos];


	if(personaje_audioini){
		animaPersonajeIni();
	}

	


		var_instruccion_especial2 = document.getElementById("instruccion_especial2");
		instruccion_especial2 = new createjs.DOMElement(var_instruccion_especial2);
		
		instruccion_especial2.x = 450;
		instruccion_especial2.y = y_final_instruccion_especial;
		instruccion_especial2.visible = false;
		instruccion_especial2.alpha = 0;
		bounds_instruccion_especial2 = instruccion_especial2.getBounds();





	y_final_mensaje_avance = 250;
	var_mensaje_avance = document.getElementById("mensaje_avance");
	mensaje_avance = new createjs.DOMElement(var_mensaje_avance);
	
	mensaje_avance.x = 355;
	mensaje_avance.y = 0;
	mensaje_avance.visible = false;
	mensaje_avance.alpha = 0;
	bounds_mensaje_avance = mensaje_avance.getBounds();


	var_texto_mensaje_avance = document.getElementById("texto_mensaje_avance");

	x_indicador_principal =1196;

	//y_indicador_principal = numero_menu_nav.y + 25;

	indicador_principal = new createjs.Sprite(imagenes_principales);
	indicador_principal.gotoAndStop(lib.indicador_menu_superior.prototype.id);
	//indicador_principal = new createjs.Bitmap("images/indicador_menu_superior.png");
	bounds_indicador_principal = indicador_principal.getBounds();
	y_indicador_principal = total_numeros_menu_nav[znThisPage-1].y - bounds_indicador_principal.width*1/2; ///2 - 4;

	indicador_principal.x = x_indicador_principal;
	indicador_principal.y = y_indicador_principal;
	indicador_principal.alpha = 0;
	indicador_principal.visible = false;
	indicador_principal.rotation = 90;

	var_equis_mensaje = document.getElementById("equis_mensaje");
	//var_equis_mensaje.style.opacity = 0;
	//equis_mensaje = new createjs.DOMElement(var_equis_mensaje);
	//bounds_equis_mensaje = equis_mensaje.getBounds();
	//equis_mensaje.visible = false;
	//equis_mensaje.alpha = 0;
	//equis_mensaje.rotation = 45;
	//equis_mensaje.regX = equis_mensaje.width/2;
	//equis_mensaje.regY = equis_mensaje.height/2;

	//equis_mensaje.cursor = "pointer";
	//var_equis_mensaje.style.visibility = "visible";
	//var_equis_mensaje.style.opacity = 1;
	//var_equis_mensaje.style.cursor = "pointer";



	//flechas.x = 300;
	//flechas.y = 120;

	//var_html_completo = document.getElementById("html_completo");

	
	var_arrow_anterior = document.getElementById("arrow_anterior");
	arrow_anterior = new createjs.DOMElement(var_arrow_anterior);
	arrow_anterior.regX = document.getElementById("arrow_anterior").clientWidth/2;
	arrow_anterior.regY = document.getElementById("arrow_anterior").clientHeight/2;
	arrow_anterior.x = 893;
	arrow_anterior.y = 575;
	arrow_anterior.alpha = 1;
	if(es_evaluacion){
	arrow_anterior.visible = false;
	} else {
	arrow_anterior.visible = true;

	}
	arrow_anterior.scaleX = 0;
	arrow_anterior.scaleY = 0;
	
	anterior_activo = true;


	var_arrow_anterior.addEventListener("mouseover", overAnterior);
	var_arrow_anterior.addEventListener("mouseout", outAnterior);
	var_arrow_anterior.addEventListener("click", clicAnterior2);

	function clicAnterior2(){
		if(con_sonidoclic){
		audio_clic.play();

		}
		if(znThisPage==pagina_superior){
		document.getElementById("fondo_general").style.visibility = "visible";
		document.getElementById("pagina_llega2").innerHTML = pagina_superior;

		mensaje_retrocede.y = y_mensaje_retrocede -40;
		mensaje_retrocede.visible = true;
		createjs.Tween.get(mensaje_retrocede,{override:true}).to({y:y_mensaje_retrocede,alpha:1},velocidad_media);
		
		} else {
			clicAnterior();
		}
	}


	function overAnterior(){

		if(anterior_activo){
		createjs.Tween.get(arrow_anterior,{override:true}).to({scaleX:1.1,scaleY:1.1},velocidad_media);	

		sobre_retroceso = true;
		createjs.Tween.get(contenedor_flecha_retroceso,{override:true}).to({x:x_final_atras-5-stage_principal.x,alpha:1},velocidad_media);
		createjs.Tween.get(pop_btnnav,{override:true}).to({scaleX:1, scaleY:1, alpha:1},velocidad_media);

		restriccion =  icono_check;

		numero_anterior = parseInt(znThisPage);
		numero_anterior = numero_anterior-1;

		document.getElementById("over_principalbtn").innerHTML = "<span style='font-size:15px,font-family:'agcb''>Anterior:</span><br/>" + "<span class='texto_titulo_pantalla'>" + numero_anterior + ". " +titulos_pantallas[znThisPage-2] + " </span>" + restriccion;
		document.getElementById("enlace_principalbtn").className = "enlace_principalbtn";

		ancho_pop_btnnav = document.getElementById("over_principalbtn").clientWidth;
		alto_pop_btnnav = document.getElementById("over_principalbtn").clientHeight;


		
		pop_btnnav.x = arrow_anterior.x - (ancho_pop_btnnav/2);
		pop_btnnav.y = arrow_anterior.y - alto_pop_btnnav-30;

		}

	}
	function outAnterior(){
		if(anterior_activo){


		createjs.Tween.get(arrow_anterior,{override:true}).to({scaleX:1,scaleY:1},velocidad_media);	
	}
	sobre_retroceso = false;
	createjs.Tween.get(pop_btnnav,{override:true}).to({scaleY:0},velocidad_rapida/2);


	}

	function clicAnterior(){

		if(con_sonidoclic){
			audio_clic.play();
			
		}
		
		clic_anterior = true;

		anterior_activo = false;
		instruccion_especial.alpha = 0;
		instruccion_especial.visible = false;


		instruccion_especial2.alpha = 0;
		instruccion_especial2.visible = false;
			
		//createjs.Tween.get(instruccion_especial,{override:true}).to({alpha:0},velocidad_rapida/2).to({visible:false},velocidad_rapida/2);

		
		clicEquisMensaje();

		//znThisPage--;
		idcirc = znThisPage-2;
		//console.log(idcirc)
		clicCirculosMenuNav(idcirc)


	//	x_explorador = parent.xinicia_esplora + ((parent.xfin_explora-parent.xinicia_esplora)/parent.znPages)*pagina_superior;
	//createjs.Tween.get(parent.explorador).to({x:x_explorador,alpha:1},velocidad_lenta*2);
		document.getElementById("actual_pag").innerHTML = znThisPage;

		//pagina = "pages/page"+ znThisPage + "/page"+ znThisPage + ".html";
		//createjs.Tween.get(paginas_frame,{override:true}).to({x:325, alpha:0},velocidad_media).call(llamarPagina);
		adelante = false;
		atras = true;
		//createjs.Tween.get(pop_btnnav,{override:true}).to({scaleX:0, scaleY:0, alpha:0},velocidad_media).call(overAnterior);

		createjs.Tween.get(pop_btnnav,{override:true}).to({scaleY:0},velocidad_media).call(overAnterior);
		
		adelante_activado = true;

		//flechaNumero();
		visibilidadFlechas();

		createjs.Tween.get(arrow_anterior,{override:true}).to({scaleY:0},velocidad_rapida/2, createjs.Ease.backOut);

	}
	
	
	var_arrow_siguiente = document.getElementById("arrow_siguiente");
	arrow_siguiente = new createjs.DOMElement(var_arrow_siguiente);
	arrow_siguiente.regX = document.getElementById("arrow_siguiente").clientWidth/2;
	arrow_siguiente.regY = document.getElementById("arrow_siguiente").clientHeight/2;
	arrow_siguiente.x = 743;
	arrow_siguiente.y = 575;
	arrow_siguiente.alpha = 1;
	arrow_siguiente.visible = true;
	arrow_siguiente.scaleX = 0;
	arrow_siguiente.scaleY = 0;
	
	siguiente_activo = true;

	$("#arrow_siguiente").append(icono_indica_right);
	$("#arrow_anterior").prepend(icono_indica_left);

	if(!$("#boton_menunav_b").text().trim().length==0){
		$("#boton_menunav_b").prepend("<div style='margin-right:7px'>"+icono_menu+"</div>");
		$("#boton_menunav_b").css("width","auto");
		$("#boton_menunav_b").css("padding","0 10px");
		
	} else {
		$("#boton_menunav_b").prepend(icono_menu);
	}
	$("#cierra_menunav").prepend(icono_cerrar);
	$("#equis_mensaje").prepend(icono_cerrar);
	$("#btn_ini b").append(icono_play_circ);

	var_arrow_siguiente.addEventListener("mouseover", overSiguiente);
	var_arrow_siguiente.addEventListener("mouseout", outSiguiente);
	var_arrow_siguiente.addEventListener("click", clicSiguiente);


	function overSiguiente(){
		if(siguiente_activo){

		createjs.Tween.get(arrow_siguiente,{override:true}).to({scaleX:1.1,scaleY:1.1},velocidad_media);	

		//createjs.Tween.get(contenedor_flecha_avance).to({x:x_final_adelante+5-stage_principal.x,alpha:1},velocidad_media);



			
	}

		sobre_avance = true;

		createjs.Tween.get(pop_btnnav,{override:true}).to({scaleY:1},velocidad_media);

	/*if (znThisPage == znPages-1){
				//restriccion = "<span class='simbolos'>j</span>";
					restriccion = icono_check;

			} else*/ if (znThisPage == pagina_superior){
				if(var_arrow_siguiente.className=="flecha_activa_sig"){
					//restriccion = "<span class='simbolos'>ê</span>";
					restriccion = icono_candadoab;
				} else if (var_arrow_siguiente.className=="flecha_activa"){
					//restriccion = "<span class='simbolos'>å</span>";
					restriccion = icono_check;

				} else if (var_arrow_siguiente.className=="flecha_inactiva"){

					//restriccion = "<span class='simbolos'>è</span>";
					restriccion = icono_candadocerr;
				}
			} else if (znThisPage+1 == pagina_superior) {
					//restriccion = "<span class='simbolos'>ê</span>";
					restriccion = icono_candadoab;

			} else {
				if(var_arrow_siguiente.className=="flecha_activa_sig"){
					//restriccion = "<span class='simbolos'>ê</span>";
					restriccion = icono_candadoab;
				} else if (var_arrow_siguiente.className=="flecha_activa"){
					//restriccion = "<span class='simbolos'>å</span>";
					restriccion = icono_check;

				} else if (var_arrow_siguiente.className=="flecha_inactiva"){

					//restriccion = "<span class='simbolos'>è</span>";
					restriccion = icono_candadocerr;
				}
			}
		
		numero_siguiente = parseInt(znThisPage);
		numero_siguiente = numero_siguiente+1;

		document.getElementById("over_principalbtn").innerHTML = "<span style='font-size:15px'>Siguiente:</span><br/>" + "<span class='texto_titulo_pantalla'>" + numero_siguiente + ". " + titulos_pantallas[znThisPage] + " </span>" + restriccion;
		document.getElementById("enlace_principalbtn").className = "enlace_principalbtn";

		ancho_pop_btnnav = document.getElementById("over_principalbtn").clientWidth;
		alto_pop_btnnav = document.getElementById("over_principalbtn").clientHeight;

		pop_btnnav.x = arrow_siguiente.x - (ancho_pop_btnnav/2);
		pop_btnnav.y = arrow_siguiente.y - alto_pop_btnnav-30;

	}
	function outSiguiente(){
		if(siguiente_activo){

		createjs.Tween.get(arrow_siguiente,{override:true}).to({scaleX:1,scaleY:1},velocidad_media);	
	
}
sobre_numero = false
	createjs.Tween.get(pop_btnnav,{override:true}).to({scaleY:0},velocidad_rapida/2);
	}

	function clicSiguiente(){

		if(con_sonidoclic){
			audio_clic.play();
			
		}
		instruccion_especial.alpha = 0;
	instruccion_especial.visible = false;

	instruccion_especial2.alpha = 0;
	instruccion_especial2.visible = false;
		
		
	//createjs.Tween.get(instruccion_especial,{override:true}).to({alpha:0},velocidad_rapida/2).to({visible:false},velocidad_rapida/2);

	if (finalizaAnimacionMenu&&siguiente_activo){
	siguiente_activo = false;
	clicEquisMensaje();
	
	//znThisPage++;

	idcirc = znThisPage;
		
	clicCirculosMenuNav(idcirc)


if(con_botonesavance){
		document.getElementById("actual_pag").innerHTML = znThisPage;
		if(!completado){
			document.getElementById("explorador1").className = "explora_visible";
	
	x_explorador = parent.xinicia_esplora + ((parent.xfin_explora-parent.xinicia_esplora)/parent.znPages)*pagina_superior;
	createjs.Tween.get(explorador).to({x:x_explorador,alpha:1},velocidad_lenta*2);
} else {

	x_explorador = xfesteja_explora;
	document.getElementById("explorador1").className = "explora_invisible";
	document.getElementById("explorador2").className = "explora_visible";
	//y_explora = 565;

}
}
	//pagina = "pages/page"+ znThisPage + "/page"+ znThisPage + ".html";
	//createjs.Tween.get(paginas_frame,{override:true}).to({x:-100, alpha:0},velocidad_media).call(llamarPagina);
	adelante = true;
	atras=false;
	createjs.Tween.get(pop_btnnav,{override:true}).to({scaleY:0},velocidad_rapida/2).call((overSiguiente));

		createjs.Tween.get(arrow_siguiente,{override:true}).to({scaleX:0,scaleY:0},velocidad_rapida, createjs.Ease.backOut);

		var_arrow_siguiente.className = "flecha_inactiva";
	atras_activado = true;

	//flechaNumero();
	visibilidadFlechas();
	} else {
		mensaje_avance.visible = true;
			createjs.Tween.get(mensaje_avance,{override:true}).to({alpha:1,y:y_final_mensaje_avance},velocidad_lenta, createjs.Ease.circIn).call(cerrarMensajeDemora);
			//if(diferencia_pantalla_objetivo == 1){

				if(es_evaluacion){
					txt_inst = " responder la actividad "
				} else {
					txt_inst = " consultar la totalidad de los contenidos "

				}
				

				txt_titact = titulos_pantallas[znThisPage].replace("<br/>", " ");
				txt_titact = titulos_pantallas[znThisPage].replace("<br>", " ");

				txt_titact_1 = titulos_pantallas[znThisPage-1].replace("<br/>", " ");
				txt_titact_1 = titulos_pantallas[znThisPage-1].replace("<br>", " ");
				document.getElementById("texto_mensaje_avance").innerHTML = "Para ingresar a la pantalla '" + (znThisPage+1) + ". "+ titulos_pantallas[znThisPage] + "' "+tx_te+" falta"+txt_inst +  "de la pantalla actual: '" + (znThisPage) + ". " + txt_titact_1 + "'.";
				
			
	}
	}
	

	//contiene_menunav_nhz.x = 1260/2 - var_contiene_menunav_nhz.clientWidth/2;
	//contiene_menunav_nhz.x = 100;
	//arrow_anterior.x = contiene_menunav_nhz.x - var_arrow_anterior.clientWidth/2 - 20;
	arrow_siguiente.x = contiene_menunav_nhz.x +  var_contiene_menunav_nhz.clientWidth + var_arrow_siguiente.clientWidth/2 + 220;
	arrow_anterior.x = arrow_siguiente.x - 170;

	stage_principal.addChild(contenedor_personajeini,mapa_completo,banner_superior,curso,contenedor_numero_capitulo,contenedor_nombre_curso,nombre_curso,desarrollado,btn_glosario,contenedor_nombre_capitulo,txt_leccion,cont_txt_leccion,numero_modulo,modulo,nombre_modulo_2,nombre_modulo,division_modulo,flecha_gris,flecha_azul,contenedor_flecha_retroceso,contenedor_flecha_avance,pop_adelante,pop_atras,pop_mennum_n,pop_btnnav,instruccion_especial,instruccion_especial2,indica_nav,mensaje_avance,indicador_principal,numero_menu_nav,didacsis,boton_cerrar,boton_menunav,div_contenidos,div_contenidos_2,personaje_inicial,personajes,element_per,div_txtmenu,btn_ini,logo_client,logos_hb,contenedor_nombre_leccion,arrow_anterior,arrow_siguiente,explorador,avanza_explora,mensaje_cierre,mensaje_retrocede,contiene_menunav,contiene_menunav_n,contiene_menunav_nhz);
	for (i = 0; i < total_numeros_menu_nav.length; i++) { 
		//stage_principal.addChild(contenedores_circulos_menu[i]);
		stage_principal.addChild(total_numeros_menu_nav[i]);
	}
	//stage_principal.update();
	leida_funcion_principal = true;

	//createjs.Tween.get(logo_client0,{override:true}).to({scaleX:1},velocidad_lenta*2, createjs.Ease.bounceInOut);//.call(paginas);
	//createjs.Tween.get(barra_negra).wait(velocidad_lenta*2).to({alpha:1},velocidad_rapida, createjs.Ease.elasticIn);
	//createjs.Tween.get(banner_superior).wait(velocidad_lenta*2).to({alpha:1,y:0},velocidad_lenta*2, createjs.Ease.elasticIn);
	//createjs.Tween.get(escuela,{override:true}).wait(velocidad_lenta*3.5).to({alpha:1, x:50},velocidad_lenta*2, createjs.Ease.elasticInOut);
	//createjs.Tween.get(logo,{override:true}).wait(velocidad_lenta*4).to({alpha:1, y:0},velocidad_lenta*2, createjs.Ease.elasticOut).call(capitulo);

	//flechaNumero();

	//capitulo();

	//fExclamacion();
	//numerosVistos();



	
	reducirNombreCursoA();

	flecha_adelante.addEventListener("mouseover", over_flecha_adelante);
	flecha_adelante.addEventListener("mouseout", out_flecha_adelante);
	flecha_adelante.addEventListener("click", clic_flecha_adelante);

	flecha_atras.addEventListener("mouseover", over_flecha_atras);
	flecha_atras.addEventListener("mouseout", out_flecha_atras);
	flecha_atras.addEventListener("click", clic_flecha_atras);
	//var_flechas.addEventListener("mouseover", over_opcion_mn);
	//f_prueba_canvas(exclamacion);
	//

	//var_equis_mensaje.addEventListener("click", clicMensajeAvance);
	
	var_mensaje_avance.addEventListener("mouseover", overMensajeAvance);
	var_mensaje_avance.addEventListener("mouseout", outMensajeAvance);
	//funcionesMensajePrincipal(var_equis_mensaje)

	var_equis_mensaje.addEventListener("click", clicEquisMensaje);
	//var_html_completo.addEventListener("click", clicEquisMensaje);


	for (i = 0; i < contenedores_circulos_menu.length; i++) { 
		//contenedores_circulos_menu[i].addEventListener("click", clicEquisMensaje);
	}
	}

}



function overMensajeAvance(){
	//equis_mensaje.visible = true;
	
	//createjs.Tween.get(equis_mensaje,{override:true}).to({alpha:1},velocidad_media, createjs.Ease.elasticInOut);
	//var_equis_mensaje.style.opacity = 1;
	}
function outMensajeAvance(){

	//var_equis_mensaje.style.opacity = 0;
	//var_equis_mensaje.style.visibility = "hidden";
	
	//equis_mensaje.visible = false;
	//createjs.Tween.get(equis_mensaje,{override:true}).to({alpha:0},velocidad_rapida);
		
	}
function clicEquisMensaje(){
	if(con_sonidoclic){
			audio_clic.play();
			
		}
	createjs.Tween.get(mensaje_avance,{override:true}).to({alpha:0,y:0,visible:false},velocidad_lenta);
}


function clicEquisGlosario(){
	//createjs.Tween.get(glosario,{override:true}).to({alpha:0,y:0,visible:false},velocidad_lenta);
	clic_btnglosario();
}

function over_btnglosario(){
		
		if(activo_glosario && btn_glosario.alpha == 1){
		//createjs.Tween.get(btn_glosario,{override:true}).to({scaleX:1.2,scaleY:1.2},velocidad_media);	
		}
	}
	function out_btnglosario(){
		if(activo_glosario && btn_glosario.alpha == 1){
		//createjs.Tween.get(btn_glosario,{override:true}).to({scaleX:1,scaleY:1},velocidad_media);	
		}
	}
	function clic_btnglosario(){
		if(btn_glosario.visible == true){
		if(activo_glosario){
		activo_glosario = false;
		var_btn_glosario.className = "btn_glosarioactivo";
		glosario.visible = true;
		createjs.Tween.get(glosario,{override:true}).to({y:y_final_glosario,alpha:1},velocidad_media);	
		document.getElementById("fondo_general").style.visibility = "visible";

		} else {
		activo_glosario = true;
		var_btn_glosario.className = "btn_glosario";
		createjs.Tween.get(glosario,{override:true}).to({y:y_inicial_glosario,alpha:0,visible:false},velocidad_media);	
		document.getElementById("fondo_general").style.visibility = "hidden";

		}
		}
	}


/////////////////////////////////


//function funcionCirculosMenuNav (circulo_menu_actual){

	function overCirculosMenuNav_N(e){

		if(con_sonidoover){
			audio_over.play();
		}


		idcirc = e.target.id;
		//console.log(idcirc,e.target.nodeName,e)
		if(e.target.nodeName=="I"){
			idcirc = e.target.offsetParent.id;
		} 
		//console.log(idcirc,e.target.nodeName,e)

		if(idcirc ==""){
			idcirc = e.path[1].id;
		}

		idcirc = idcirc.replace("franja_menunav_nhz","");
		idcirc = idcirc.replace("franja_menunav_n","");
		idcirc = idcirc.replace("franja_menunavint_nhz","");
		idcirc = idcirc.replace("franja_menunavint_n","");
		idcirc = idcirc.replace("num_menunav_nhz","");
		idcirc = idcirc.replace("num_menunav_n","");
		idcirc = idcirc.replace("status_menunav_nhz","");
		idcirc = idcirc.replace("status_menunav_n","");

		idcirc = parseInt(idcirc);
		
		numero_arreglo_contenedores_circulos_menu = idcirc;//total_html_numeros_menu_nav.indexOf(numero_menu_principal);
		
		//if (total_numeros_menu_nav[numero_arreglo_contenedores_circulos_menu].alpha==1){

		createjs.Tween.get(total_numeros_menu_nav[numero_arreglo_contenedores_circulos_menu],{override:true}).to({scaleX:1,scaleY:1},velocidad_lenta, createjs.Ease.bounceOut)
		
		sobre_numero = true;

		//console.log(top_scrollMenu.mcs.top)
		///494
		
			/*if (numero_arreglo_contenedores_circulos_menu == parent.znPages-1){
				//restriccion = "<span class='simbolos'>j</span>";
					restriccion = icono_check;

			} else*/ if (numero_arreglo_contenedores_circulos_menu<pagina_superior-1){
				//restriccion = "<span class='simbolos'>å</span>";
					restriccion = icono_check;

			} else if (numero_arreglo_contenedores_circulos_menu == pagina_superior-1) {
				//restriccion = "<span class='simbolos'>ê</span>";
				restriccion = icono_candadoab

			} else {
				//restriccion = "<span class='simbolos'>è</span>";
					restriccion = icono_candadocerr;

			}
		
		
		
		texto_titulo_pantalla = "<span class='texto_titulo_pantalla'>"+titulos_pantallas[numero_arreglo_contenedores_circulos_menu]+"</span>"

		texto_titulo_pantalla = texto_titulo_pantalla.replace("<br/>", " ");
		texto_titulo_pantalla = texto_titulo_pantalla.replace("<br>", " ");


		document.getElementById("over_principal_n").innerHTML = texto_titulo_pantalla + " "+ restriccion;
		document.getElementById("enlace_principal_n").className = "enlace_principal_n";


		pop_mennum_n.scaleX = 1;
		pop_mennum_n.scaleY = 0;

		alto_pop_mennum_n = document.getElementById("over_principal_n").clientWidth;
		ancho_pop_mennum_n = document.getElementById("over_principal_n").clientHeight;

		//console.log(total_numeros_menu_nav[numero_arreglo_contenedores_circulos_menu])

		bounding_pop_mennum_n = document.getElementById("franja_menunav_n"+numero_arreglo_contenedores_circulos_menu).getBoundingClientRect();
		//console.log(bounding_pop_mennum_n)

		top_scroll_m = $('#menunav_n').find(".mCSB_dragger").position().top;
		//top_scroll_m = $('#menunav_n').msc.top;
		top_scroll_x = $('#menunav_n').offset().top;
		

		ancho_num_menu = document.getElementById("franja_menunav_n"+numero_arreglo_contenedores_circulos_menu).clientWidth;
		alto_num_menu = document.getElementById("franja_menunav_n"+numero_arreglo_contenedores_circulos_menu).clientHeight;
		x_num_menu = document.getElementById("franja_menunav_n"+numero_arreglo_contenedores_circulos_menu).offsetLeft+10;//$("#franja_menunav_n"+numero_arreglo_contenedores_circulos_menu).offset().left;//document.getElementById("franja_menunav_n"+numero_arreglo_contenedores_circulos_menu).offsetLeft;//bounding_pop_mennum_n.x
		y_num_menu = top_franjasmenu_n[numero_arreglo_contenedores_circulos_menu]-60//$("#franja_menunav_n"+numero_arreglo_contenedores_circulos_menu).offset().top//-(y_contiene_menunav_n/(numero_arreglo_contenedores_circulos_menu+1));//document.getElementById("franja_menunav_n"+numero_arreglo_contenedores_circulos_menu).offsetTop-top_scroll_m;//;//;//bounding_pop_mennum_n.y//

		//console.log(top_scroll_m)
		//console.log(ancho_num_menu,alto_num_menu,x_num_menu,y_num_menu,top_scroll_m)
		pop_mennum_n.x = x_num_menu+ancho_num_menu+15//65;//+ancho_pop_adelante+25;
		pop_mennum_n.y = y_num_menu+y_contiene_menunav_n+65+top_scrollMenu//+y_contiene_menunav_n+50//-top_scroll_m+y_contiene_menunav_n+50//-alto_num_menu;//+alto_pop_adelante/2;
		if(con_menunumeros_v2){
			if(pop_mennum_n.scaleY==0){
			createjs.Tween.get(pop_mennum_n,{override:true}).to({scaleY:1, alpha:1},velocidad_media/2);
			}
		}
		//}

		if(con_menunumeros_vhz){
			
		left_scroll_m = $('#menunav_nhz').find(".mCSB_dragger").position().left;
		ancho_txtmenunhz = $("#txt_menu_nhz").width()+parseInt($("#txt_menu_nhz").css("marginLeft"),10)+parseInt($("#txt_menu_nhz").css("marginRight"),10);

		//console.log(left_scroll_m,"left_scroll_m")
		document.getElementById("over_principalbtn").innerHTML = texto_titulo_pantalla + " "+ restriccion;
			ancho_pop_btnnav = document.getElementById("over_principalbtn").clientWidth;
			alto_pop_btnnav = document.getElementById("over_principalbtn").clientHeight;

			//console.log(document.getElementById("franja_menunav_nhz"+idcirc).clientLeft)
			//console.log(document.getElementById("franja_menunav_nhz"+idcirc).offsetLeft)
			//console.log($("#franja_menunav_nhz"+idcirc).left)
			//console.log($("#franja_menunav_nhz"+idcirc)[0].getBoundingClientRect().left)
			//console.log(ancho_pop_btnnav/2)
			//console.log(document.getElementById("franja_menunav_nhz"+idcirc).offsetLeft)
			//console.log(left_scroll_m,"left_scroll_m")
			//console.log(document.getElementById("franja_menunav_nhz"+idcirc).offsetLeft - left_scroll_m)
			//console.log(left_scrollMenu,"left_scrollMenu")
			pop_btnnav.x = document.getElementById("franja_menunav_nhz"+idcirc).offsetLeft + left_scrollMenu + contiene_menunav_nhz.x - (ancho_pop_btnnav/2) + (30) + ancho_txtmenunhz///2);// - left_scroll_m;
			pop_btnnav.y = y_contiene_menunav_nhz - alto_pop_btnnav-10;
		
			createjs.Tween.get(pop_btnnav,{override:true}).to({scaleY:1},velocidad_media);

		}
	}
	function overCirculosMenuNav(e)
	{	
		idcirc = e.target.id;
		if(idcirc ==""){
			idcirc = e.path[1].id;
		}
		idcirc = idcirc.replace("num_menu_principal","");
		idcirc = idcirc.replace("numero_menu_principal","");
		idcirc = idcirc.replace("simb_menu_principal","");
		idcirc = parseInt(idcirc);
		numero_arreglo_contenedores_circulos_menu = idcirc;//total_html_numeros_menu_nav.indexOf(numero_menu_principal);
		
		if (total_numeros_menu_nav[numero_arreglo_contenedores_circulos_menu].alpha==1){

		createjs.Tween.get(total_numeros_menu_nav[numero_arreglo_contenedores_circulos_menu],{override:true}).to({scaleX:1,scaleY:1},velocidad_lenta, createjs.Ease.bounceOut)
		
		sobre_numero = true;

		
		
			/*if (numero_arreglo_contenedores_circulos_menu == parent.znPages-1){
				//restriccion = "<span class='simbolos'>j</span>";
					restriccion = icono_check;

			} else*/ if (numero_arreglo_contenedores_circulos_menu<pagina_superior-1){
				//restriccion = "<span class='simbolos'>å</span>";
					restriccion = icono_check;

			} else if (numero_arreglo_contenedores_circulos_menu == pagina_superior-1) {
				//restriccion = "<span class='simbolos'>ê</span>";
					restriccion = icono_candadoab;

			} else {
				//restriccion = "<span class='simbolos'>è</span>";
					restriccion = icono_candadocerr;

			}
		
		texto_titulo_pantalla = "<span class='texto_titulo_pantalla'>"+titulos_pantallas[numero_arreglo_contenedores_circulos_menu]+"</span>"

		texto_titulo_pantalla = texto_titulo_pantalla.replace("<br/>", " ");


		document.getElementById("over_principal").innerHTML = texto_titulo_pantalla + " "+ restriccion;
		document.getElementById("enlace_principal").className = "enlace_principal";


		pop_adelante.scaleX = 1;
		pop_adelante.scaleY = 0;

		ancho_pop_adelante = document.getElementById("over_principal").clientWidth;
		alto_pop_adelante = document.getElementById("over_principal").clientHeight;

		//console.log(total_numeros_menu_nav[numero_arreglo_contenedores_circulos_menu])

		ancho_num_menu = document.getElementById("numero_menu_principal"+numero_arreglo_contenedores_circulos_menu).clientWidth;
		alto_num_menu = document.getElementById("numero_menu_principal"+numero_arreglo_contenedores_circulos_menu).clientHeight;
		
		pop_adelante.x = total_numeros_menu_nav[numero_arreglo_contenedores_circulos_menu].x+ancho_num_menu+15//65;//+ancho_pop_adelante+25;
		pop_adelante.y = total_numeros_menu_nav[numero_arreglo_contenedores_circulos_menu].y-alto_num_menu;//+alto_pop_adelante/2;

		if(pop_adelante.scaleY==0){
		
		createjs.Tween.get(pop_adelante,{override:true}).to({scaleY:1, alpha:1},velocidad_media/2);
		}
		}


		
	}

	//circulo_menu_actual.addEventListener("mouseout", outCirculosMenuNav);
	function outCirculosMenuNav_N(e)
	{	
		
		idcirc = e.target.id;

		if(e.target.nodeName=="I"){
			idcirc = e.target.offsetParent.id;
		} 

		if(idcirc ==""){
			idcirc = e.path[1].id;
		}
		idcirc = idcirc.replace("franja_menunav_nhz","");
		idcirc = idcirc.replace("franja_menunav_n","");
		idcirc = idcirc.replace("franja_menunavint_nhz","");
		idcirc = idcirc.replace("franja_menunavint_n","");
		idcirc = idcirc.replace("num_menunav_nhz","");
		idcirc = idcirc.replace("num_menunav_n","");
		idcirc = idcirc.replace("status_menunav_nhz","");
		idcirc = idcirc.replace("status_menunav_n","");

		idcirc = parseInt(idcirc);
		
		
		
	numero_arreglo_contenedores_circulos_menu = idcirc;//total_html_numeros_menu_nav.indexOf(numero_menu_principal);
	//if (total_numeros_menu_nav[numero_arreglo_contenedores_circulos_menu].alpha==1){

		
		//if (numeros_menu_activos[numero_arreglo_contenedores_circulos_menu].val == false){
		//createjs.Tween.get(total_numeros_menu_nav[numero_arreglo_contenedores_circulos_menu],{override:true}).to({scaleX:scale_circulos,scaleY:scale_circulos},velocidad_lenta, createjs.Ease.bounceOut)
		//}

		sobre_numero = false;
		pop_mennum_n.scaleY=0;
		pop_mennum_n.alpha=0;
		//createjs.Tween.get(pop_adelante,{override:true}).to({scaleY:0, alpha:0},velocidad_media);
	//	}

		createjs.Tween.get(pop_mennum_n,{override:true}).to({scaleY:0, alpha:0},velocidad_rapida/10);

		if(con_menunumeros_vhz){
			
			createjs.Tween.get(pop_btnnav,{override:true}).to({scaleY:0},velocidad_rapida/2);

		}
	}


	function outCirculosMenuNav(e)
	{	
		
		idcirc = e.target.id;
		if(idcirc ==""){
			idcirc = e.path[1].id;
		}
		idcirc = idcirc.replace("num_menu_principal","");
		idcirc = idcirc.replace("numero_menu_principal","");
		idcirc = idcirc.replace("simb_menu_principal","");
		
		idcirc = parseInt(idcirc);
		
	numero_arreglo_contenedores_circulos_menu = idcirc;//total_html_numeros_menu_nav.indexOf(numero_menu_principal);
	if (total_numeros_menu_nav[numero_arreglo_contenedores_circulos_menu].alpha==1){

		
		if (numeros_menu_activos[numero_arreglo_contenedores_circulos_menu].val == false){
		createjs.Tween.get(total_numeros_menu_nav[numero_arreglo_contenedores_circulos_menu],{override:true}).to({scaleX:scale_circulos,scaleY:scale_circulos},velocidad_lenta, createjs.Ease.bounceOut)
		}

		sobre_numero = false;
		pop_adelante.scaleY=0;
		pop_adelante.alpha=0;
		//createjs.Tween.get(pop_adelante,{override:true}).to({scaleY:0, alpha:0},velocidad_media);
		}

		createjs.Tween.get(pop_adelante,{override:true}).to({scaleY:0, alpha:0},velocidad_rapida/10);

	}


	//circulo_menu_actual.addEventListener("click", clicCirculosMenuNavA);

	function scrollMenu(){
		$(".menunav").mCustomScrollbar("scrollTo",top_franjasmenu[znThisPage-1]-60,{
   				scrollEasing:"easeOut",
   				scrollInertia: 300
			});

			$(".menunav_n").mCustomScrollbar("scrollTo",top_franjasmenu_n[znThisPage-1]-60,{
   				scrollEasing:"easeOut",
   				scrollInertia: 300
			});
			console.log(left_franjasmenu_nhz,"left_franjasmenu_nhz")
			$(".menunav_nhz").mCustomScrollbar("scrollTo",left_franjasmenu_nhz[znThisPage-1],{
   				scrollEasing:"easeOut",
   				scrollInertia: 300
			});
	}

	function clicCirculosMenuNavA(e){
		if(con_sonidoclic){
			audio_clic.play();
			
		}
		idcirc = e.target.id;
		if(e.target.nodeName=="I"){
			idcirc = e.target.offsetParent.id;
		} 
		if(idcirc ==""){
			idcirc = e.path[1].id;
		}

		
		idcirc = idcirc.replace("num_menu_principal","");
		idcirc = idcirc.replace("numero_menu_principal","");
		idcirc = idcirc.replace("simb_menu_principal","");
		
		idcirc = idcirc.replace("franja_menunav_nhz",""); 	
		idcirc = idcirc.replace("franja_menunav_n","");
		
		idcirc = idcirc.replace("franja_menunavint_nhz","");
		idcirc = idcirc.replace("franja_menunavint_n","");
		idcirc = idcirc.replace("franja_menunav","");
		
		idcirc = idcirc.replace("num_menunav_nhz","");
		idcirc = idcirc.replace("num_menunav_n","");
		idcirc = idcirc.replace("num_menunav","");
		
		idcirc = idcirc.replace("sel_menunav_nhz","");
		idcirc = idcirc.replace("sel_menunav_n","");
		idcirc = idcirc.replace("sel_menunav","");
		
		idcirc = idcirc.replace("titulo_menunav_nhz","");
		idcirc = idcirc.replace("titulo_menunav_n","");
		idcirc = idcirc.replace("titulo_menunav","");
		
		idcirc = idcirc.replace("status_menunav_nhz","");
		idcirc = idcirc.replace("status_menunav_n","");
		idcirc = idcirc.replace("status_menunav","");
		
		
		idcirc = parseInt(idcirc);

		pop_mennum_n.scaleY=0;
		pop_mennum_n.alpha=0;
		
		if(idcirc!=znThisPage-1){
			clicCirculosMenuNav(idcirc)
		}

		
		if(idcirc<=pagina_superior-1){

			cierraMenuNav()
		}

	}

	function cierraMenuNav(){
		createjs.Tween.get(contiene_menunav,{override:true}).to({y:y_mensaje_cierre-40,alpha:0,visible:false},velocidad_media);
		
		document.getElementById("fondo_general").style.visibility = "hidden";
	}
	
	function clicCirculosMenuNav(idcirc)
	{
		
		
		if(con_sonidoclic){
			audio_clic.play();
			
		}
		//console.log(finalizaAnimacionMenu,"finalizaAnimacionMenu")
		if (finalizaAnimacionMenu){
		
		
		
		//numero_arr_contcircmenu = total_html_numeros_menu_nav.indexOf(circulo_menu_actual);
		

		numero_arr_contcircmenu = idcirc;
		
		if(numero_arr_contcircmenu+1<=pagina_superior){
			//indica_nav.visible = false;
			//indica_nav.alpha = 0;
			createjs.Tween.get(indica_nav,{override:true}).to({visible:false,alpha:0},velocidad_rapida);

		}
			if(numero_arr_contcircmenu+1 < pagina_superior){
				clic_anterior = true;
			}
		if(document.getElementById("simb_menu_principal"+numero_arr_contcircmenu).className=="simb_menu_principal_abierto"){
			document.getElementById("num_menu_principal"+numero_arr_contcircmenu).className = "num_menu_principal_abierto2";
			document.getElementById("franja_menunav"+numero_arr_contcircmenu).className = "franja_menunav_abierta2";
			document.getElementById("franja_menunav_n"+numero_arr_contcircmenu).className = "franja_menunav_abierta2_n";
			document.getElementById("franja_menunav_nhz"+numero_arr_contcircmenu).className = "franja_menunav_abierta2_nhz";
			
		}

		//if (total_numeros_menu_nav[numero_arr_contcircmenu].alpha==1){
		
		
		if (finalizaAnimacionMenu){

		createjs.Tween.get(pop_adelante,{override:true}).to({scaleX:0, scaleY:0, alpha:0},velocidad_media);
			

			//outCirculosMenuNav()

		mensaje_avance.alpha = 0;

		mensaje_avance.y = 0;
		
		clic_en_visto = numeros_menu_activos[numero_arr_contcircmenu].val;

		if(numero_arr_contcircmenu != znThisPage-1 && estados_numeros[numero_arr_contcircmenu].val != "cerrado"){
		
		instruccion_especial.alpha = 0;
		instruccion_especial.visible = false;

		instruccion_especial2.alpha = 0;
		instruccion_especial2.visible = false;
		//createjs.Tween.get(instruccion_especial,{override:true}).to({alpha:0},velocidad_rapida/2).to({visible:false},velocidad_rapida/2);

					
		}

		if (numero_arr_contcircmenu <= pagina_superior) {
			clicEquisMensaje();
		}
	
		pagina_clic = numero_arr_contcircmenu+1;
		
		numero_arreglo_seleccionado = numero_arr_contcircmenu + 1;


		if (pagina_clic<=pagina_superior){
			znAnterior = znThisPage;
			$("#"+total_titulos_franjamenunav[znAnterior-1].id).removeClass("selected_franja");
			$("#"+total_num_franjamenunav_n[znAnterior-1].id).removeClass("selected_franja_n");
			$("#"+total_num_franjamenunav_nhz[znAnterior-1].id).removeClass("selected_franja_nhz");


			znThisPage = numero_arr_contcircmenu+1;
			// $("#menunavint").stop(true,true).animate({ scrollTop: top_franjasmenu[znThisPage-1] },velocidad_media,function(){});
			

			scrollMenu();

			$("#"+total_titulos_franjamenunav[znThisPage-1].id).addClass("selected_franja");
			$("#"+total_num_franjamenunav_n[znThisPage-1].id).addClass("selected_franja_n");
			$("#"+total_num_franjamenunav_nhz[znThisPage-1].id).addClass("selected_franja_nhz");

			pagina = "pages/page"+ znThisPage + "/page"+ znThisPage + ".html";
			
			if(con_botonesavance){

			document.getElementById("actual_pag").innerHTML = znThisPage;

			createjs.Tween.get(arrow_siguiente,{override:true}).to({scaleX:0,scaleY:0},velocidad_rapida, createjs.Ease.backOut);

			//var_arrow_siguiente.className = "flecha_inactiva";

			createjs.Tween.get(arrow_anterior,{override:true}).to({scaleX:0,scaleY:0},velocidad_rapida, createjs.Ease.backOut);
				}
			if (znAnterior>znThisPage){
			adelante = false;
			atras = true;
			createjs.Tween.get(paginas_frame,{override:true}).to({y:205, alpha:0},velocidad_media).call(llamarPagina);
			//llamarPagina();
			} else if (znAnterior<znThisPage) {
			adelante = true;
 			atras=false;
			createjs.Tween.get(paginas_frame,{override:true}).to({y:0, alpha:0},velocidad_media).call(llamarPagina);
			
			} else {
			adelante = false;
			atras=false;
			
			}
			flechaNumero();
			visibilidadFlechas();
			//createjs.Tween.get(pop_atras,{override:true}).to({scaleX:0.1, scaleY:0.1, alpha:0, x:stage_principal.mouseX, y:stage_principal.mouseY},velocidad_media).call(over_flecha_atras);
			
			//createjs.Tween.get(circulo_menu_actual,{override:true}).to({scaleX:1.3,scaleY:1.3},velocidad_lenta, createjs.Ease.bounceOut)
			//createjs.Tween.get(contenedor_circulos_rojos[numero_arr_contcircmenu],{override:true}).to({alpha:1},velocidad_lenta)
			//contenedor_numeros_menu[numero_arr_contcircmenu].color = "rgba(255,235,1,1)";
			//createjs.Tween.get(contenedor_circulos_grises[numero_arr_contcircmenu],{override:true}).to({alpha:0},velocidad_rapida);	
		} else {
			diferencia_pantalla_objetivo = pagina_clic-pagina_superior;
			pantallas_pendientes = "";

			
			for (i = pagina_superior; i < pagina_clic; i++) {
				if(i == pagina_superior){
					pantallas_pendientes += i;
				} else if (i == pagina_clic-1){
					pantallas_pendientes += " y " + i;
				} else {
					pantallas_pendientes += ", " + i;
				}
			};

			mensaje_avance.visible = true;
			createjs.Tween.get(mensaje_avance,{override:true}).to({alpha:1,y:y_final_mensaje_avance},velocidad_lenta, createjs.Ease.circIn).call(cerrarMensajeDemora);
			if(diferencia_pantalla_objetivo == 1){
				document.getElementById("texto_mensaje_avance").innerHTML = "Para ingresar al tema " + numero_arreglo_seleccionado + ",  "+tx_te+" falta consultar la totalidad de los contenidos del tema " + numero_arr_contcircmenu + ".";
			} else {
				document.getElementById("texto_mensaje_avance").innerHTML = "Para ingresar al tema " + numero_arreglo_seleccionado + ", "+tx_te+" falta consultar la totalidad de los contenidos de los temas número: " + pantallas_pendientes+".";
			}
		}
		


		}
	}
	//}
	}









/////////////////////////////////




function funcionCirculosMenu (circulo_menu_actual){
	

	circulo_menu_actual.addEventListener("mouseover", overCirculosMenu);
	
	function overCirculosMenu()
	{	

		
		circulo_menu_actual.alpha = 1;
		numero_arr_contcircmenu = contenedores_circulos_menu.indexOf(circulo_menu_actual);
		createjs.Tween.get(circulo_menu_actual,{override:true}).to({scaleX:1,scaleY:1},velocidad_lenta, createjs.Ease.bounceOut)
		//createjs.Tween.get(contenedor_circulos_rojos[numero_arr_contcircmenu],{override:true}).to({alpha:1},velocidad_lenta)
		//contenedor_numeros_menu[numero_arr_contcircmenu].color = "rgba(255,235,1,1)";
		//createjs.Tween.get(contenedor_numeros_menu[numero_arr_contcircmenu],{override:true}).to({color:rgba(255,235,1)},velocidad_lenta)
		//createjs.Tween.get(contenedor_circulos_grises[numero_arr_contcircmenu],{override:true}).to({alpha:0},velocidad_rapida);

		sobre_numero = true;
		//pop_atras.x = stage_principal.mouseX//circulo_menu_actual.x;
		//pop_atras.y = stage_principal.mouseY+20//circulo_menu_actual.y + 50;
		createjs.Tween.get(pop_adelante,{override:true}).to({scaleX:1, scaleY:1, alpha:1},velocidad_media);
		
			/*if (numero_arr_contcircmenu == parent.znPages-1){
				//restriccion = "<span class='simbolos'>j</span>";
					restriccion = icono_check;

			} else*/ if (numero_arr_contcircmenu<parent.pagina_superior-1){
				//restriccion = "<span class='simbolos'>å</span>";
					restriccion = icono_check;

			} else if (numero_arr_contcircmenu == parent.pagina_superior-1) {
				//restriccion = "<span class='simbolos'>ê</span>";
					restriccion = icono_candadoab;

			} else {
				//restriccion = "<span class='simbolos'>è</span>";
					restriccion = icono_candadocerr;

			}
		//if (numero_arr_contcircmenu == parent.znPages){
		//	restriccion = "<i class='fa fa-flag-checkered'></i> ";
		//} else {
		
		texto_titulo_pantalla = "<span class='texto_titulo_pantalla'>"+parent.titulos_pantallas[numero_arr_contcircmenu]+"</span>"

		document.getElementById("over_principal").innerHTML = texto_titulo_pantalla + " "+ restriccion;
		document.getElementById("enlace_principal").className = "enlace_principal";

		
		
	}

	circulo_menu_actual.addEventListener("mouseout", outCirculosMenu);
	
	function outCirculosMenu()
	{	
		
		numero_arr_contcircmenu = contenedores_circulos_menu.indexOf(circulo_menu_actual);
		if (numeros_menu_activos[numero_arr_contcircmenu].val == false){
		createjs.Tween.get(circulo_menu_actual,{override:true}).to({scaleX:scale_circulos,scaleY:scale_circulos},velocidad_lenta, createjs.Ease.bounceOut)
		}

		sobre_numero = false;
		createjs.Tween.get(pop_adelante,{override:true}).to({scaleX:0, scaleY:0, alpha:0},velocidad_media);

	}

	circulo_menu_actual.addEventListener("click", clicCirculosMenu);
	
	function clicCirculosMenu()
	{
		
		if (finalizaAnimacionMenu){

			if(con_sonidoclic){
				audio_clic.play();
			
			}
	
		//var_mensaje_avance.style.opacity = 1;
		mensaje_avance.alpha = 0;
		//mensaje_avance.scaleX = 0.1;
		//mensaje_avance.scaleY = 0.1;
		mensaje_avance.y = 0;
		numero_arr_contcircmenu = contenedores_circulos_menu.indexOf(circulo_menu_actual);
		clic_en_visto = numeros_menu_activos[numero_arr_contcircmenu].val;


		if (numero_arr_contcircmenu <= parent.pagina_superior) {
			clicEquisMensaje();
		}
		/*
		for (i = 0; i < parent.znPages; i++) { 
			
			numeros_menu_activos[i] = {val: false};


		}
		numero_arr_contcircmenu = contenedores_circulos_menu.indexOf(circulo_menu_actual);
		numeros_menu_activos[numero_arr_contcircmenu].val = true;
		for (i = 0; i < parent.znPages; i++) { 
			if (numeros_menu_activos[i].val == false){
				createjs.Tween.get(contenedores_circulos_menu[i],{override:true}).to({scaleX:1,scaleY:1},velocidad_lenta, createjs.Ease.bounceOut)
			}
		}
		*/
		
		pagina_clic = numero_arr_contcircmenu+1;
		
		numero_arreglo_seleccionado = numero_arr_contcircmenu + 1;

		if (pagina_clic<=parent.pagina_superior){
			znAnterior = znThisPage;
			znThisPage = numero_arr_contcircmenu+1;
			pagina = "pages/page"+ znThisPage + "/page"+ znThisPage + ".html";
			
			if (znAnterior>znThisPage){
			adelante = false;
			atras = true;
			createjs.Tween.get(paginas_frame,{override:true}).to({x:325, alpha:0},velocidad_media).call(llamarPagina);
			} else if (znAnterior<znThisPage) {
			adelante = true;
 			atras=false;
			createjs.Tween.get(paginas_frame,{override:true}).to({x:-100, alpha:0},velocidad_media).call(llamarPagina);
			
			} else {
			adelante = false;
			atras=false;
			
			}
			flechaNumero();
			visibilidadFlechas();
			//createjs.Tween.get(pop_atras,{override:true}).to({scaleX:0.1, scaleY:0.1, alpha:0, x:stage_principal.mouseX, y:stage_principal.mouseY},velocidad_media).call(over_flecha_atras);
			
			//createjs.Tween.get(circulo_menu_actual,{override:true}).to({scaleX:1.3,scaleY:1.3},velocidad_lenta, createjs.Ease.bounceOut)
			//createjs.Tween.get(contenedor_circulos_rojos[numero_arr_contcircmenu],{override:true}).to({alpha:1},velocidad_lenta)
			//contenedor_numeros_menu[numero_arr_contcircmenu].color = "rgba(255,235,1,1)";
			//createjs.Tween.get(contenedor_circulos_grises[numero_arr_contcircmenu],{override:true}).to({alpha:0},velocidad_rapida);	
		} else {
			diferencia_pantalla_objetivo = pagina_clic-parent.pagina_superior;
			pantallas_pendientes = "";

			for (i = parent.pagina_superior; i < pagina_clic; i++) {
				if(i == parent.pagina_superior){
					pantallas_pendientes += i;
				} else if (i == pagina_clic-1){
					pantallas_pendientes += " y " + i;
				} else {
					pantallas_pendientes += ", " + i;
				}
			};

			mensaje_avance.visible = true;
			createjs.Tween.get(mensaje_avance,{override:true}).to({alpha:1,y:y_final_mensaje_avance},velocidad_lenta, createjs.Ease.circIn).call(cerrarMensajeDemora);
			if(diferencia_pantalla_objetivo == 1){
				document.getElementById("texto_mensaje_avance").innerHTML = "Para ingresar al tema " + numero_arreglo_seleccionado + ",  "+tx_te+" falta consultar la totalidad de los contenidos de la pantalla '" + numero_arr_contcircmenu + ".";
			} else {
				document.getElementById("texto_mensaje_avance").innerHTML = "Para ingresar al tema " + numero_arreglo_seleccionado + ", "+tx_te+" falta consultar la totalidad de los contenidos de los temas número: " + pantallas_pendientes+".";
			}
		}
		


		}
	}
}

function cerrarMensaje(){
	
	//var_mensaje_avance.style.opacity = 0; 
	//var_mensaje_avance.style.visibility = "hidden"; 
	//var_mensaje_avance.style.visibility.color = "red";
	createjs.Tween.get(mensaje_avance,{override:true}).to({alpha:0,y:0,visible:false},velocidad_lenta).call(mensajeInvisible);
	//createjs.Tween.get(mensaje_avance,{override:true}).wait(velocidad_lenta*12).to({scaleX:0.1,scaleY:0.1,alpha:0,y:100},velocidad_lenta);
}

function mensajeInvisible(){
	mensaje_avance.visible = false;
}

function cerrarMensajeDemora(){
	if(mensaje_avance.alpha >0){
		createjs.Tween.get(mensaje_avance,{override:true}).wait(velocidad_lenta*12).to({alpha:0,y:0,visible:false},velocidad_lenta);
	}
}
function verMensaje(){
	mensaje_avance.visible = true;
	mensaje_avance.y = 0;
	mensaje_avance.alpha = 0;
	createjs.Tween.get(mensaje_avance,{override:true}).to({alpha:1,y:y_final_mensaje_avance},velocidad_lenta, createjs.Ease.circIn).call(cerrarMensajeDemora);

}
function flechaNumero(){


	
	for (i = 0; i < znPages; i++) { 
			numeros_menu_activos[i].val = false;
			
			//createjs.Tween.get(parent.contenedor_simbolos_unlock[i],{override:true}).to({alpha:0},velocidad_media);
			//createjs.Tween.get(parent.contenedor_simbolos_ok[i],{override:true}).to({alpha:0},velocidad_media);
	}

	

	numeros_menu_activos[znThisPage-1].val = true;
	
	for (i = 0; i < znPages; i++) { 
		if (numeros_menu_activos[i].val == false){
			
			createjs.Tween.get(contenedores_circulos_menu[i],{override:true} ).to({scaleX:scale_circulos,scaleY:scale_circulos},velocidad_lenta, createjs.Ease.bounceOut)
			createjs.Tween.get(total_numeros_menu_nav[i],{override:true}).to({scaleX:scale_circulos,scaleY:scale_circulos},velocidad_lenta, createjs.Ease.bounceOut)
		} else {
			createjs.Tween.get(contenedores_circulos_menu[i],{override:true}).to({scaleX:1,scaleY:1},velocidad_lenta, createjs.Ease.bounceOut)
			createjs.Tween.get(total_numeros_menu_nav[i],{override:true}).to({scaleX:1,scaleY:1},velocidad_lenta, createjs.Ease.bounceOut)
			

		}
	}

	

	
}


function numerosVistos(){
	//////MEJORAS MENU CANDADOS
	//div_txtmenu
	document.getElementById("actual_pag").innerHTML = znThisPage;

	div_txtmenu.scaleX = 0;

	
	if(!con_menunumeros_old){
		visible_valor = false;
		alpha_valor = 1
	} else if (pagina_superior==1){
		visible_valor = false;
		alpha_valor = 1
	} else {
		visible_valor = true;
		alpha_valor = 1
		createjs.Tween.get(div_txtmenu).to({scaleX:1},velocidad_lenta*2)//.call(numerosVistos);

	}

	if(con_menunumeros_v2&&pagina_superior>1){
		createjs.Tween.get(contiene_menunav_n).to({scaleX:1},velocidad_media)//.call(numerosVistos);

	}

	if(con_menunumeros_vhz&&pagina_superior>1){
		createjs.Tween.get(contiene_menunav_nhz).to({scaleY:1},velocidad_media)//.call(numerosVistos);

	}


	estados_numeros = []

	if(!completado){
if(contenedores_circulos_menu.length==1){
                                visibilidadFlechas();
                        }
		for (i = 0; i < contenedores_circulos_menu.length; i++) { 
			total_numeros_menu_nav[i].visible = visible_valor;
			if (i<pagina_superior-1){

			estados_numeros[i] = {val: "visto"};
				
			//createjs.Tween.get(contenedores_circulos_menu[i],{override:true}).to({scaleX:1,scaleY:1},velocidad_lenta, createjs.Ease.bounceOut)
			//parent.contenedor_numeros_menu[i].color = "rgba(255,235,1,1)";

			//total_html_numeros_menu_nav[i].style.color = "#ffffff";
			//total_html_numeros_menu_nav[i].style.backgroundColor = "#D10019";
			//total_html_numeros_menu_nav[i].style.borderColor = "#D10019";
			
			total_html_numeros_menu_nav[i].className = "menu_visto";
			total_html_simb_menu_nav[i].className = "simb_menu_principal_visto";
			total_html_num_menu_nav[i].className = "num_menu_principal_visto";
			

			total_html_franjamenunav[i].className = "franja_menunav_vista"
			total_status_franjamenunav[i].className = "status_menunav_visto"

			total_html_franjamenunav_n[i].className = "franja_menunav_vista_n"
			total_status_franjamenunav_n[i].className = "status_menunav_visto_n"

			total_html_franjamenunav_nhz[i].className = "franja_menunav_vista_nhz"
			total_status_franjamenunav_nhz[i].className = "status_menunav_visto_nhz"


			createjs.Tween.get(total_numeros_menu_nav[i],{override:true}).wait((i+1)*150).to({alpha:alpha_valor,visible:visible_valor},velocidad_rapida, createjs.Ease.bounceOut).call(visibilidadFlechas)

			//createjs.Tween.get(contenedores_circulos_menu[i],{override:true}).wait((i+1)*150).to({alpha:1},velocidad_rapida, createjs.Ease.bounceOut).call(visibilidadFlechas)
			//createjs.Tween.get(parent.contenedor_circulos_desbloqueados[i],{override:true}).wait((i+1)*150).to({alpha:0},velocidad_rapida, createjs.Ease.bounceInOut);	
			//createjs.Tween.get(parent.contenedor_circulos_vistos[i],{override:true}).wait((i+1)*150).to({alpha:1},velocidad_rapida, createjs.Ease.bounceInOut);
			} else if (i==pagina_superior-1){
			estados_numeros[i] = {val: "abierto"};

			//parent.contenedor_numeros_menu[i].color = "rgba(255,255,255,1)";
			//parent.contenedor_simbolos_unlock[parent.znThisPage].color = "rgba(255,255,255,1)";
			createjs.Tween.get(total_numeros_menu_nav[i],{override:true}).wait((i+1)*150).to({alpha:alpha_valor,visible:visible_valor},velocidad_rapida, createjs.Ease.bounceOut).call(visibilidadFlechas)
			
			//createjs.Tween.get(contenedores_circulos_menu[i],{override:true}).wait((i+1)*150).to({alpha:1},velocidad_rapida, createjs.Ease.bounceOut);
			//createjs.Tween.get(contenedor_circulos_novistos[i],{override:true}).wait((i+1)*150).to({alpha:1},velocidad_rapida, createjs.Ease.bounceInOut);

			//total_html_numeros_menu_nav[i].style.color = "#ffffff";
			//total_html_numeros_menu_nav[i].style.backgroundColor = "#333333";
			//total_html_numeros_menu_nav[i].style.borderColor = "#333333";

			total_html_numeros_menu_nav[i].className = "menu_abierto";
			total_html_simb_menu_nav[i].className = "simb_menu_principal_abierto";

			total_html_franjamenunav[i].className = "franja_menunav_abierta"
			total_status_franjamenunav[i].className = "status_menunav_abierto"

			total_html_franjamenunav_n[i].className = "franja_menunav_abierta_n"
			total_status_franjamenunav_n[i].className = "status_menunav_abierto_n"

			total_html_franjamenunav_nhz[i].className = "franja_menunav_abierta_nhz"
			total_status_franjamenunav_nhz[i].className = "status_menunav_abierto_nhz"


			if(znThisPage==1){
			total_html_num_menu_nav[i].className = "num_menu_principal_abierto2_n";
			total_html_franjamenunav[i].className = "franja_menunav_abierta"

			//total_html_num_menu_nav_n[i].className = "num_menu_principal_abierto2_n";
			total_html_franjamenunav_n[i].className = "franja_menunav_abierta_n"
			total_html_franjamenunav_nhz[i].className = "franja_menunav_abierta_nhz"

			} else {
			//total_html_num_menu_nav[i].className = "num_menu_principal_abierto2";
			total_html_franjamenunav[i].className = "franja_menunav_abierta2"

			//total_html_num_menu_nav_n[i].className = "num_menu_principal_abierto2_n";
			total_html_franjamenunav_n[i].className = "franja_menunav_abierta2_n"
			total_html_franjamenunav_nhz[i].className = "franja_menunav_abierta2_nhz"


			}

			} else {
			estados_numeros[i] = {val: "cerrado"};

			createjs.Tween.get(total_numeros_menu_nav[i],{override:true}).wait((i+1)*150).to({alpha:alpha_valor,visible:visible_valor},velocidad_rapida, createjs.Ease.bounceOut).call(visibilidadFlechas)
			//createjs.Tween.get(contenedores_circulos_menu[i],{override:true}).wait((i+1)*150).to({alpha:1},velocidad_rapida, createjs.Ease.bounceOut).call(visibilidadFlechas);
			}
	
		}
	} else {

		if(contenedores_circulos_menu.length==1){
                                visibilidadFlechas();
                        }

		for (i = 0; i < contenedores_circulos_menu.length; i++) { 
			estados_numeros[i] = {val: "visto"};

			total_numeros_menu_nav[i].visible = visible_valor;

			if (i<pagina_superior){
			//createjs.Tween.get(contenedores_circulos_menu[i],{override:true}).to({scaleX:1,scaleY:1},velocidad_lenta, createjs.Ease.bounceOut)
			//parent.contenedor_numeros_menu[i].color = "rgba(255,235,1,1)";

			//total_html_numeros_menu_nav[i].style.color = "#ffffff";
			//total_html_numeros_menu_nav[i].style.backgroundColor = "#D10019";
			//total_html_numeros_menu_nav[i].style.borderColor = "#D10019";
			
			total_html_numeros_menu_nav[i].className = "menu_visto";
			total_html_simb_menu_nav[i].className = "simb_menu_principal_visto";

			total_html_num_menu_nav[i].className = "num_menu_principal_visto";

			total_html_franjamenunav[i].className = "franja_menunav_vista"
			total_status_franjamenunav[i].className = "status_menunav_visto"

			total_html_franjamenunav_n[i].className = "franja_menunav_vista_n"
			total_status_franjamenunav_n[i].className = "status_menunav_visto_n"

			total_html_franjamenunav_nhz[i].className = "franja_menunav_vista_nhz"
			total_status_franjamenunav_nhz[i].className = "status_menunav_visto_nhz"

			
			createjs.Tween.get(total_numeros_menu_nav[i],{override:true}).wait((i+1)*150).to({alpha:alpha_valor,visible:visible_valor},velocidad_rapida, createjs.Ease.bounceOut).call(visibilidadFlechas)
			
			//createjs.Tween.get(contenedores_circulos_menu[i],{override:true}).wait((i+1)*150).to({alpha:1},velocidad_rapida, createjs.Ease.bounceOut).call(visibilidadFlechas);
			//createjs.Tween.get(parent.contenedor_circulos_desbloqueados[i],{override:true}).wait((i+1)*150).to({alpha:0},velocidad_rapida, createjs.Ease.bounceInOut);	
			//createjs.Tween.get(parent.contenedor_circulos_vistos[i],{override:true}).wait((i+1)*150).to({alpha:1},velocidad_rapida, createjs.Ease.bounceInOut);
			} else {
			createjs.Tween.get(total_numeros_menu_nav[i],{override:true}).wait((i+1)*150).to({alpha:alpha_valor},velocidad_rapida, createjs.Ease.bounceOut).call(visibilidadFlechas)
			
			//createjs.Tween.get(contenedores_circulos_menu[i],{override:true}).wait((i+1)*150).to({alpha:1},velocidad_rapida, createjs.Ease.bounceOut);
			}
			if(i==znPages-1){
			total_html_simb_menu_nav[i].className = "simb_menu_principal_visto_fin";
			total_html_num_menu_nav[i].className = "num_menu_principal_visto";

			total_html_franjamenunav[i].className = "franja_menunav_vista"
			total_status_franjamenunav[i].className = "status_menunav_visto_fin"
			total_status_franjamenunav[i].className = "status_menunav_visto"

			total_html_franjamenunav_n[i].className = "franja_menunav_vista_n"
			total_status_franjamenunav_n[i].className = "status_menunav_visto_fin_n"
			total_status_franjamenunav_n[i].className = "status_menunav_visto_n"


			total_html_franjamenunav_nhz[i].className = "franja_menunav_vista_nhz"
			total_status_franjamenunav_nhz[i].className = "status_menunav_visto_fin_nhz"
			total_status_franjamenunav_nhz[i].className = "status_menunav_visto_nhz"

			createjs.Tween.get(total_numeros_menu_nav[i],{override:true}).wait((i+1)*150).to({alpha:alpha_valor,scaleX:1,scaleY:1,visible:visible_valor},velocidad_rapida, createjs.Ease.bounceOut).call(visibilidadFlechas)
			

			}
	
		}
	}

	actualizaSimbolos();

	
	$("#"+total_titulos_franjamenunav[znThisPage-1].id).addClass("selected_franja");
	$("#"+total_num_franjamenunav_n[znThisPage-1].id).addClass("selected_franja_n");
	$("#"+total_num_franjamenunav_nhz[znThisPage-1].id).addClass("selected_franja_nhz");
	
	scrollMenu();
	
	createjs.Tween.get(total_numeros_menu_nav[znThisPage-1],{override:true}).wait((znThisPage+1)*150).to({alpha:alpha_valor,scaleX:1,scaleY:1,visible:visible_valor},velocidad_rapida, createjs.Ease.bounceOut)//.call(visibilidadFlechas)

		setTimeout(function(){
	finalizaAnimacionMenu = true;
		

	}, 150);
	//}, contenedores_circulos_menu.length*150);
	

	
	
}

function actualizaSimbolos(){
	$(".status_menunav_visto, .status_menunav_visto_n, .status_menunav_visto_fin_n, .status_menunav_visto_fin_nhz, .status_menunav_visto_nhz").html(icono_check);
 	
 	$(".status_menunav_abierto, .status_menunav_abierto_n, .status_menunav_abierto_nhz").html(icono_candadoab);

 	$(".status_menunav_cerrado, .status_menunav_cerrado_n, .status_menunav_cerrado_nhz").html(icono_candadocerr);
}

function visibilidadFlechas(){
	carga_interfase = true;
	//console.log(parent.znThisPage-1)
	y_indicador_principal = total_numeros_menu_nav[znThisPage-1].y - bounds_indicador_principal.width*1/2; ///2 - 4;
	
	//console.log(bounds_contenedores_numeros)
	//console.log(bounds_contenedores_numeros[parent.znThisPage-1].x, bounds_contenedores_numeros[parent.znThisPage-1].width/2, bounds_indicador_principal.width)
	createjs.Tween.get(indicador_principal,{override:true}).to({y:y_indicador_principal- stage_principal.y},velocidad_lenta);
	createjs.Tween.get(indicador_principal).wait(velocidad_rapida).to({alpha:alpha_valor},velocidad_rapida/2);

	/*if (znThisPage == 1){
		
		adelante_activado = false;
		flecha_adelante.visible = false;
		createjs.Tween.get(flecha_adelante).to({alpha:1},velocidad_lenta);
	}*/if(znThisPage!=znPages){
		if(pagina_superior>znThisPage){
			adelante_activado = true;
			contenedor_flecha_avance.visible = false;
			createjs.Tween.get(contenedor_flecha_avance).to({alpha:0},velocidad_lenta);
		} else {
			adelante_activado = false;
			contenedor_flecha_avance.visible = false;
			contenedor_flecha_avance.alpha = 0;
		}
	} else {
		
		adelante_activado = false;

		contenedor_flecha_avance.alpha = 0;
		contenedor_flecha_avance.visible = false;
		//sobre_avance = false;
		contenedor_flecha_retroceso.visible = false;
		createjs.Tween.get(contenedor_flecha_retroceso).to({alpha:0},velocidad_lenta);
	}

	if (znThisPage!=1){
		atras_activado = true;
		contenedor_flecha_retroceso.visible = false;
		createjs.Tween.get(contenedor_flecha_retroceso).to({alpha:0},velocidad_lenta);
		
	} else {
		atras_activado = false;
		contenedor_flecha_retroceso.alpha = 0;
		contenedor_flecha_retroceso.visible = false;
		atras_activado = false;
		

	}

	//numerosVistos();
	if(una_vez_pag){
	una_vez_pag = false;
	paginas(pagina);
	}
	
}


function lugarFlechas(){
	/// X
	banner_superior.x = x_banner_superior - stage_principal.x;
	banner_superior.y = y_banner_superior - stage_principal.y;

	division_modulo.x = x_division_modulo - stage_principal.x;
	division_modulo.y = y_division_modulo - stage_principal.y;
	
	flecha_gris.x = x_flecha_gris - stage_principal.x;
	flecha_gris.y = y_flecha_gris - stage_principal.y;
	
	flecha_azul.x = x_flecha_azul - stage_principal.x;
	flecha_azul.y = y_flecha_azul - stage_principal.y;

	contenedor_flecha_retroceso.x = x_final_atras - stage_principal.x;
	contenedor_flecha_avance.x = x_final_adelante - stage_principal.x;
	//exclamacion.x = x_exclamacion-stage_principal.x;
	//x_indicador_principal = contenedores_circulos_menu[parent.znThisPage-1].x - bounds_indicador_principal.width/2 + 2 - stage_principal.x;
	//x_indicador_principal = contenedores_circulos_menu[parent.znThisPage-1].x - bounds_indicador_principal.width/2 - 4;
	
	//indicador_principal.x = x_indicador_principal - stage_principal.x;

	
	for (i = parent.znPages-1; i >= 0; i--) { 
		if(i == parent.znPages-1){
		//contenedores_circulos_menu[i].x = x_ultimo_circulo - stage_principal.x;
		
		} else {
		//contenedores_circulos_menu[i].x = contenedores_circulos_menu[i+1].x-50;
		}
		/*
		if(i == 0){
			contenedores_circulos_menu[i].x = 95 - stage_principal.x;
		} else {
			contenedores_circulos_menu[i].x = contenedores_circulos_menu[i-1].x+50;
		}
		*/
	}
	


	
	/// Y
	contenedor_flecha_retroceso.y = y_final_atras - stage_principal.y;
	contenedor_flecha_avance.y = y_final_adelante - stage_principal.y;
	//exclamacion.y = y_exclamacion-stage_principal.y;
	indicador_principal.y = y_indicador_principal - stage_principal.y;
	
	for (i = 0; i < parent.znPages; i++) { 
		//contenedores_circulos_menu[i].y = y_contenedores_circulos_menu - stage_principal.y;
	}
	/*
	for (i = 0; i < parent.znPages; i++) { 

		if(i == 0){
			contenedores_circulos_menu[i].y = y_contenedores_circulos_menu - stage_principal.y;
		} else {
			contenedores_circulos_menu[i].y = contenedores_circulos_menu[i-1].y+50;
		}
	}
	*/

	//x_indicador_principal = contenedores_circulos_menu[parent.znThisPage-1].x - bounds_indicador_principal.width*2/3
	//x_indicador_principal = total_numeros_menu_nav[znThisPage-1].x - bounds_indicador_principal.width*1/3 - 2; ///2 - 4;

	indicador_principal.x = x_indicador_principal - stage_principal.x;
	//if (carga_interfase) {
	//	visibilidadFlechas();
	//}
}

function over_flecha_adelante() {


	
	if (adelante_activado){
		
		sobre_numero = true;
		createjs.Tween.get(contenedor_flecha_avance).to({x:x_final_adelante+5-stage_principal.x,alpha:1},velocidad_media);
		createjs.Tween.get(pop_adelante,{override:true}).to({scaleX:1, scaleY:1, alpha:1},velocidad_media);



		/*if (znThisPage == znPages-1){
				//restriccion = "<span class='simbolos'>j</span>";
					restriccion = icono_check;

			} else*/ if (znThisPage == pagina_superior-1){
				//restriccion = "<span class='simbolos'>ê</span>";
					restriccion = icono_candadoab;

			} else {
				//restriccion = "<span class='simbolos'>å</span>";
					restriccion = icono_candadocerr;

			}
		numero_siguiente = parseInt(znThisPage);
		numero_siguiente = numero_siguiente+1;

		document.getElementById("over_principal").innerHTML = "<span style='font-size:15px'>Siguiente:</span><br/>" + "<span class='texto_titulo_pantalla'>" + numero_siguiente + ". " + titulos_pantallas[znThisPage] + " </span>" + restriccion;
		document.getElementById("enlace_principal").className = "enlace_principal";

		ancho_pop_adelante = document.getElementById("over_principal").clientWidth;
		//createjs.Tween.get(pop_adelante).to({x:stage_principal.mouseX-ancho_pop_adelante+28, y:stage_principal.mouseY+37},velocidad_rapida,createjs.Ease.elasticOut);
		
		//pop_adelante.x = flecha_adelante.x - ancho_pop_adelante + 110;
		//pop_adelante.y = flecha_adelante.y + 80;
		
	}
	//createjs.Tween.get(enlace_principal,{override:true}).to({alpha:1},velocidad_media);
}

adelante = false;
atras = false;


function out_flecha_adelante() {
	sobre_numero = false
	createjs.Tween.get(contenedor_flecha_avance,{override:true}).to({x:x_final_adelante-stage_principal.x},velocidad_media);
	//createjs.Tween.get(flecha_adelante,{override:true}).to({alpha:1},velocidad_media);
	createjs.Tween.get(pop_adelante,{override:true}).to({scaleX:0, scaleY:0, alpha:0},velocidad_media);
	//createjs.Tween.get(enlace_principal,{override:true}).to({alpha:0},velocidad_media);	

	}

function clic_flecha_adelante() {

	if(con_sonidoclic){
				audio_clic.play();
			
			}

	instruccion_especial.alpha = 0;
	instruccion_especial.visible = false;

	instruccion_especial2.alpha = 0;
	instruccion_especial2.visible = false;
		
		
	//createjs.Tween.get(instruccion_especial,{override:true}).to({alpha:0},velocidad_rapida/2).to({visible:false},velocidad_rapida/2);

	if (finalizaAnimacionMenu){
	
	clicEquisMensaje();
	
	znThisPage++;
	pagina = "pages/page"+ znThisPage + "/page"+ znThisPage + ".html";
	createjs.Tween.get(paginas_frame,{override:true}).to({x:-100, alpha:0},velocidad_media).call(llamarPagina);
	adelante = true;
	atras=false;
	createjs.Tween.get(pop_adelante,{override:true}).to({scaleX:0, scaleY:0, alpha:0},velocidad_media).call((over_flecha_adelante));

	
	atras_activado = true;

	flechaNumero();
	visibilidadFlechas();
	}
}
function llamarPagina(){
	paginas(pagina);
}

function over_flecha_atras() {
	if (atras_activado){
		sobre_retroceso = true;
		createjs.Tween.get(contenedor_flecha_retroceso,{override:true}).to({x:x_final_atras-5-stage_principal.x,alpha:1},velocidad_media);
		createjs.Tween.get(pop_adelante,{override:true}).to({scaleX:1, scaleY:1, alpha:1},velocidad_media);

		restriccion =  icono_check;

		numero_anterior = parseInt(znThisPage);
		numero_anterior = numero_anterior-1;

		document.getElementById("over_principal").innerHTML = "<span style='font-size:15px,font-family:'agcb''>Anterior:</span><br/>" + "<span class='texto_titulo_pantalla'>" + numero_anterior + ". " +titulos_pantallas[znThisPage-2] + " </span>" + restriccion;
		document.getElementById("enlace_principal").className = "enlace_principal";

		ancho_pop_atras = document.getElementById("over_principal").clientWidth;
		//pop_atras.x = flecha_atras.x - ancho_pop_atras + 90;
		//pop_atras.y = flecha_atras.y + 80;
		
		
	}
	
	
}
function out_flecha_atras() {
	sobre_retroceso = false;

	createjs.Tween.get(contenedor_flecha_retroceso,{override:true}).to({x:x_final_atras-stage_principal.x},velocidad_media);
	createjs.Tween.get(pop_adelante,{override:true}).to({scaleX:0, scaleY:0, alpha:0},velocidad_media);
	

}
function clic_flecha_atras() {

	if(con_sonidoclic){
				audio_clic.play();
			
			}

	clic_anterior = true;

	instruccion_especial.alpha = 0;
	instruccion_especial.visible = false;


	instruccion_especial2.alpha = 0;
	instruccion_especial2.visible = false;
		
	//createjs.Tween.get(instruccion_especial,{override:true}).to({alpha:0},velocidad_rapida/2).to({visible:false},velocidad_rapida/2);

	
	clicEquisMensaje();

	znThisPage--;
	pagina = "pages/page"+ znThisPage + "/page"+ znThisPage + ".html";
	createjs.Tween.get(paginas_frame,{override:true}).to({x:325, alpha:0},velocidad_media).call(llamarPagina);
	adelante = false;
	atras = true;
	createjs.Tween.get(pop_adelante,{override:true}).to({scaleX:0, scaleY:0, alpha:0},velocidad_media).call(over_flecha_atras);

	
	adelante_activado = true;

	flechaNumero();
	visibilidadFlechas();
}



function capitulo(){
	
	//logo_client.alpha = 1;

	createjs.Tween.get(numero_modulo,{override:true}).to({alpha:1, y:210},velocidad_lenta*4, createjs.Ease.elasticOut).call(nombreCapitulo);
	document.getElementById("barra_negra").style.backgroundImage = "url('images/fondo_negro.png')"
	
	contador = 0;	

	numero_capitulo_final = document.getElementById("numero_modulo").innerHTML

	setInterval(function () {
		contador++
		if (contador < 10){
			azar_numeros_modulo = Math.floor((Math.random() * 25) + 1);
			if (azar_numeros_modulo<10) {
				azar_numeros_modulo = "0"+azar_numeros_modulo;
			}
			document.getElementById("numero_modulo").innerHTML = azar_numeros_modulo;
		} else {
			document.getElementById("numero_modulo").innerHTML = numero_capitulo_final;

		}

	}, 70);
	
}

function nombreCapitulo(){
	createjs.Tween.get(logo_client,{override:true}).to({alpha:1},velocidad_lenta*2);
	
	createjs.Tween.get(numero_modulo,{override:true}).to({x:70},velocidad_lenta, createjs.Ease.cubicOut);
	createjs.Tween.get(nombre_modulo,{override:true}).wait(velocidad_lenta).to({alpha:1,x:350},velocidad_lenta, createjs.Ease.cubicOut).call(reducirNombre);
}

function reducirNombre()		
{
	createjs.Tween.get(logo_client,{override:true}).wait(velocidad_lenta*3).to({scaleX:scale_logo_client_fin,scaleY:scale_logo_client_fin,y:y_logo_client_fin,alpha:1},velocidad_lenta);
	
	createjs.Tween.get(numero_modulo,{override:true}).wait(velocidad_lenta*3).to({scaleX:1,scaleY:1,y:35, x:50},velocidad_lenta*1.2, createjs.Ease.cubicIn);
	createjs.Tween.get(nombre_modulo,{override:true}).wait(velocidad_lenta*3).to({scaleX:1,scaleY:1, y:50, x:137},velocidad_lenta*1.5, createjs.Ease.cubicIn);//.call(nombreLeccion);
}

function nombreLeccion(){
	createjs.Tween.get(numero_leccion,{override:true}).wait(velocidad_rapida).to({alpha:1, y:295,x:50},velocidad_lenta*2, createjs.Ease.elasticOut);
	

	createjs.Tween.get(barra_naranja,{override:true}).to({alpha:1},velocidad_lenta*2);
	
	//createjs.Tween.get(numero_leccion,{override:true}).to({x:70},velocidad_lenta, createjs.Ease.cubicOut);
	createjs.Tween.get(nombre_leccion,{override:true}).wait(velocidad_lenta).wait(velocidad_rapida).to({alpha:1,x:480},velocidad_lenta*3, createjs.Ease.cubicOut).call(reducirLeccion);
}

function reducirLeccion()		
{
	createjs.Tween.get(barra_naranja,{override:true}).wait(velocidad_lenta*3).to({scaleX:1,scaleY:1,x: 527, y:35},velocidad_lenta*1, createjs.Ease.cubicIn);
	createjs.Tween.get(numero_leccion,{override:true}).wait(velocidad_lenta*3).to({scaleX:1,scaleY:1,y:45, x:570},velocidad_lenta*1.2, createjs.Ease.cubicIn);
	createjs.Tween.get(nombre_leccion,{override:true}).wait(velocidad_lenta*3).to({scaleX:1,scaleY:1, y:70, x:570},velocidad_lenta*1.5, createjs.Ease.cubicIn).call(fExclamacion);
}



function fExclamacion(){
	flechaNumero();
	//createjs.Tween.get(exclamacion,{override:true}).to({alpha:1,rotation:0},velocidad_lenta*4,createjs.Ease.bounceInOut)//.call(flechaNumero);
	//createjs.Tween.get(menu_numeros).wait(velocidad_lenta*3).to({alpha:1},velocidad_lenta*4);
	//createjs.Tween.get(menu_numeros).wait(velocidad_lenta*1.5).to({x:3},velocidad_lenta*4,createjs.Ease.elasticInOut);
	createjs.Tween.get(curso).to({alpha:1,x:140,y:120,rotation:0},velocidad_lenta*4, createjs.Ease.elasticOut);
	createjs.Tween.get(div_contenidos).to({scaleY:1},velocidad_lenta*2);

	nombre_curso.scaleX = 8;
	nombre_curso.scaleY = 8;
	//createjs.Tween.get(nombre_curso).wait(velocidad_lenta).to({alpha:1,y:240,rotation:0},velocidad_lenta*4, createjs.Ease.elasticOut).call(reducirNombreCurso);
	
	//reducirNombreCurso();
	//createjs.Tween.get(flechas).wait(velocidad_lenta*3).to({x:x_final_flechas},velocidad_lenta*4,createjs.Ease.elasticInOut);
	
	/*
	if (znThisPage>1){
		//createjs.Tween.get(flecha_atras).wait(velocidad_lenta*5).to({alpha:1},velocidad_lenta*4);
	} else {
		flecha_atras.alpha = 0;
	}
	*/
	createjs.Tween.get(contenedor_flecha_retroceso).wait(velocidad_lenta).to({visible:true},velocidad_lenta*2)//.call(numerosVistos);
	//if(znThisPage!=1){

		numerosVistos();
	//}
	//numerosVistos();
	if (znThisPage==znPages){
		//flecha_adelante.alpha = 0;
	} else {
		//createjs.Tween.get(flecha_adelante).wait(velocidad_lenta*5).to({alpha:1},velocidad_lenta*4);	
	}
	//createjs.Tween.get(contenedor_flecha_avance).wait(velocidad_lenta*3).to({x:x_final_adelante-stage_principal.x},velocidad_lenta*4);


	
	//paginas(pagina);
	
	//document.getElementById("menu_numeros").style.backgroundImage = "url('images/fondo_menu_numeros.png')"


}

tiempo_fuera = false;

function reducirNombreCursoA(){

	if(znThisPage>1){
		tiempo_resta = 0;
		con_videoini = false;
		}
	if(con_videoini){
		tiempo_resta = 0.3;

	} else {
		tiempo_resta = 0;
	}
	$( "#loader" ).fadeOut( "fast" );
	if(con_videoini){
	createjs.Tween.get(contenedor_nombre_capitulo).wait(velocidad_lenta).to({scaleY:scale_ini,scaleX:scale_ini,x:x_nombre_capiulo,y:0},velocidad_lenta*1.5, createjs.Ease.backOut);
	document.getElementById("video0").play();

	} else {
	createjs.Tween.get(contenedor_nombre_capitulo).to({scaleY:0,y:-10},velocidad_rapida, createjs.Ease.backIn).call(reducirNombreCurso);
		
	}
	
	document.getElementById('video0').addEventListener('ended',myHandler,false);
    function myHandler(e) {
      if(con_videoini){
	createjs.Tween.get(contenedor_nombre_capitulo).wait(velocidad_lenta).to({scaleY:0,y:-10},velocidad_lenta*1.5, createjs.Ease.backIn).call(reducirNombreCurso);
		
	} 
    }

}

function reducirNombreCurso(){

	//createjs.Tween.get(div_contenidos).to({x:75,y:75,scaleX:0.5,scaleY:0.5},velocidad_lenta*4, createjs.Ease.qubicOut);
	//createjs.Tween.get(div_contenidos).to({x:450},400).wait(2000).to({scaleX:0,scaleY:0},velocidad_media, createjs.Ease.backIn).to({x:100,y:60},velocidad_rapida).to({scaleX:1,scaleY:1},velocidad_lenta*2, createjs.Ease.backOut);
	//createjs.Tween.get(div_contenidos_2).to({x:850,alpha:1,visible:true},400).wait(2500).to({scaleX:0,scaleY:0},velocidad_media, createjs.Ease.backIn).to({x:1170,y:600},velocidad_rapida).to({scaleX:0.4,scaleY:0.4},velocidad_lenta*2, createjs.Ease.backOut).call(animacionModulo);
	animacionModulo();

	//createjs.Tween.get(contenedor_numero_capitulo).wait(velocidad_lenta*4).to({scaleY:scale_ini},velocidad_lenta, createjs.Ease.bounceOut);
	//createjs.Tween.get(contenedor_nombre_capitulo).wait(velocidad_lenta*5).to({scaleY:scale_ini,skewX:0},velocidad_lenta*1.2, createjs.Ease.bounceOut);
	

	//createjs.Tween.get(contenedor_nombre_curso).wait(velocidad_lenta).to({scaleY:1,skewX:0},velocidad_lenta, createjs.Ease.bounceOut);
	
	
	createjs.Tween.get(contenedor_nombre_leccion).wait(velocidad_lenta*3).to({scaleX:1},velocidad_lenta);
	
	//createjs.Tween.get(cont_txt_leccion).wait(velocidad_lenta*2).to({scaleY:1,skewX:0},velocidad_lenta*1.5, createjs.Ease.bounceOut);
	//createjs.Tween.get(div_txtmenu).wait(velocidad_lenta*3).to({scaleY:1,skewX:1},velocidad_lenta*1.5, createjs.Ease.bounceOut);
	
	//createjs.Tween.get(contenedor_numero_capitulo).wait(velocidad_lenta*6).to({scaleX:1,skewY:0},velocidad_lenta*1.5, createjs.Ease.bounceOut);
	
	//createjs.Tween.get(txt_capitulo).wait(velocidad_lenta*7).to({alpha:1},velocidad_lenta*1.5);
	//createjs.Tween.get(num_capitulo).wait(velocidad_lenta*8.5).to({alpha:1},velocidad_lenta*1.5);
	
	//createjs.Tween.get(div_contenidos).to({scaleY:1},velocidad_lenta*2);
	
	
	createjs.Tween.get(div_contenidos_2).to({alpha:1,x:650,scaleX:1,scaleY:1},velocidad_lenta*4).call(movAvion);
	
	//createjs.Tween.get(div_contenidos_2).wait(velocidad_lenta*3).to({scaleY:1,scaleX:1,alpha:1},velocidad_lenta*3, createjs.Ease.backOut);
	
	//personaje_inicial.y = y_personaje_inicial-80;
	createjs.Tween.get(logo_client).wait(velocidad_lenta*2).to({scaleX:scale_logo_client_ini,scaleY:scale_logo_client_ini},velocidad_lenta*3, createjs.Ease.backOut).call(movAvion);
	createjs.Tween.get(logos_hb).wait(velocidad_lenta*3).to({scaleX:1},velocidad_lenta*3, createjs.Ease.backOut);
	


	createjs.Tween.get(personaje_inicial).to({scaleY:1,scaleX:1,x:x_personaje_inicial_fin,alpha:1},velocidad_lenta*6, createjs.Ease.backOut);//.to({x:x_personaje_inicial_fin},velocidad_lenta*2, createjs.Ease.backOut);//.call(movLogos);
	
	if(personaje_audioini){
		createjs.Tween.get(contenedor_personajeini).wait(velocidad_lenta/2).to({x:x_personajeanima_inicial_fin,alpha:1},velocidad_lenta*2, createjs.Ease.backOut);
		
	}
	$(".fondo_mapa").fadeIn(velocidad_lenta*3)

	createjs.Tween.get(txt_leccion).wait(velocidad_lenta*3).to({scaleY:scale_ini,scaleX:scale_ini,x:x_final_lecc1,alpha:1},velocidad_lenta*1.3, createjs.Ease.backOut).wait(velocidad_lenta*2).call(activaIni);

	//div_contenidos_2.y = y_final_lc-80;
	
	//createjs.Tween.get(div_contenidos_2).wait(velocidad_lenta*3).to({scaleY:1,scaleX:1,y:y_final_lc,alpha:1},velocidad_lenta*5, createjs.Ease.backOut).wait(velocidad_lenta);


	//createjs.Tween.get(personajes).wait(velocidad_lenta*2).to({x:x_final_personajes,alpha:1},velocidad_lenta);

	
	//fExclamacion();
	//createjs.Tween.get(txt_capitulo).wait(velocidad_lenta*3.7).to({scaleY:1,skewX:0},velocidad_lenta*1.5, createjs.Ease.bounceOut);


	//createjs.Tween.get(curso).to({x:x_curso,y:y_curso,scaleX:1,scaleY:1},velocidad_lenta*4, createjs.Ease.elasticOut);

	//createjs.Tween.get(nombre_curso).wait(velocidad_lenta).to({y:y_nombre_curso,x:x_nombre_curso,scaleX:1,scaleY:1},velocidad_lenta*4, createjs.Ease.cubicOut);
	
	//createjs.Tween.get(banner_superior).wait(velocidad_lenta*3).to({scaleX:1},velocidad_lenta*3, createjs.Ease.cubicOut).call(animacionModulo);
	
	

}

function movAvion(){
	arreglo_avionx = [560,564,568,556];
	arreglo_aviony = [y_final_lc,y_final_lc+2,y_final_lc+4,y_final_lc-2];
	arreglo_velavion = [1300,1700,2000];
		azar_vel = Math.floor((Math.random() * 2));

	setInterval(function () {
	

		azar_x = Math.floor((Math.random() * 4));
		azar_y = Math.floor((Math.random() * 4));
		azar_vel = Math.floor((Math.random() * 3));
			
			//createjs.Tween.get(div_contenidos_2).to({x:arreglo_avionx[azar_x],y:arreglo_aviony[azar_y]},arreglo_velavion[azar_vel]);


		}, arreglo_velavion[azar_vel]);
}
function movLogos(){
	//createjs.Tween.get(div_contenidos_2).wait(velocidad_lenta).to({scaleY:0.75,scaleX:0.75,y:y_final_lc+180,alpha:1},velocidad_lenta);
	
	//createjs.Tween.get(personaje_inicial).wait(velocidad_lenta*2).to({scaleY:0.75,scaleX:0.75,y:y_personaje_inicial+260,alpha:1},velocidad_lenta);

	personajes.x = x_final_personajes+20;
	createjs.Tween.get(personajes).wait(velocidad_lenta*2.6).to({x:x_final_personajes,alpha:1},velocidad_lenta);
	
	element_per.x = x_final_element_per+20;
	createjs.Tween.get(element_per).wait(velocidad_lenta*1.7).to({x:x_final_element_per,alpha:1},velocidad_lenta);
	
	txt_leccion.x = x_final_lecc1+600;

	contenedor_nombre_capitulo.x = x_nombre_capiulo + 700;

}
function activaIni(){



	if(personaje_audioini&&((tipo_curso!="plataformas"&&tipo_curso!="isometrico")&&(znThisPage==1)||((tipo_curso=="plataformas"||tipo_curso=="isometrico")&&znInt==0))){
		$(".boton_audioini").delay(velocidad_lenta).fadeIn(velocidad_lenta);
		$(".instruccion_audio").delay(velocidad_lenta*1.5).fadeIn(velocidad_lenta);

	} else {
		createjs.Tween.get(btn_ini).wait(velocidad_lenta).to({scaleX:0.9,scaleY:0.9},velocidad_lenta, createjs.Ease.backOut);

	}

}

function muestraGlosario(){
	createjs.Tween.get(parent.btn_glosario).wait(velocidad_lenta*4.5).to({scaleY:1},velocidad_lenta, createjs.Ease.backOut);
	
}
function reduceFinal(){
	btn_ini.visible = false;
	
	$(".fondo_mapa").fadeOut(velocidad_lenta*3)

	
	if(puntaje_visible){
		$(".contiene_puntaje").delay(velocidad_lenta*2).fadeIn(velocidad_lenta);

	}
	if(con_trofeos){
		
		$(".cont_trofeo").delay(velocidad_lenta*2).fadeIn(velocidad_lenta);

	}
	
	if(tipo_curso=="isometrico"){
		mapa_completo.x = coordenadas_mapa[znThisPage-1][0];
		mapa_completo.y = coordenadas_mapa[znThisPage-1][1];
		createjs.Tween.get(mapa_completo).wait(velocidad_lenta*2).to({alpha:1},velocidad_lenta);
	} else if(tipo_curso=="plataformas"){
		createjs.Tween.get(mapa_completo).wait(velocidad_lenta*2).to({alpha:1},velocidad_lenta);
	}

	createjs.Tween.get(personajes).wait(velocidad_lenta*2).to({scaleX:.5},velocidad_lenta);
	createjs.Tween.get(element_per).wait(velocidad_lenta*3).to({x:x_final_element_per,alpha:0},velocidad_lenta);
	//createjs.Tween.get(personaje_inicial).wait(velocidad_lenta*2).to({y:y_personaje_inicial+280,alpha:0},velocidad_lenta*2.5);
	//createjs.Tween.get(contenedor_numero_capitulo).wait(velocidad_lenta*4).to({scaleY:1,scaleX:1,x:x_final_cap,y:y_final_cap},velocidad_lenta, createjs.Ease.backOut);
	createjs.Tween.get(contenedor_nombre_capitulo).wait(velocidad_lenta).to({y:-10},velocidad_lenta*2).call(fExclamacion);
	//createjs.Tween.get(txt_leccion).wait(velocidad_rapida).to({scaleY:0.7,scaleX:0.7,x:10,y:-23},velocidad_lenta);
	createjs.Tween.get(txt_leccion).wait(velocidad_rapida).to({scaleY:0,scaleX:0,x:10,y:-23},velocidad_lenta);
	//createjs.Tween.get(div_contenidos_2).wait(velocidad_lenta*2.5).to({y:y_final_lc+200,alpha:0},velocidad_lenta);
	

	createjs.Tween.get(personaje_inicial).wait(velocidad_lenta).to({alpha:0,scaleX:0},velocidad_rapida).call(cambiaTxtMov);
	createjs.Tween.get(boton_cerrar).wait(velocidad_lenta*3.5).to({scaleY:1},velocidad_lenta, createjs.Ease.backOut);
	createjs.Tween.get(desarrollado).wait(velocidad_lenta*4).to({scaleY:1},velocidad_lenta, createjs.Ease.backOut);
	if(con_botonmenu){
	createjs.Tween.get(boton_menunav).wait(velocidad_lenta*4).to({scaleY:1},velocidad_lenta, createjs.Ease.backOut);
	}
	
	createjs.Tween.get(logo_client,{override:true}).wait(velocidad_lenta).to({scaleX:scale_logo_client_fin,scaleY:scale_logo_client_fin,x:x_logo_client_fin,y:y_logo_client_fin},velocidad_lenta, createjs.Ease.backIn);

	createjs.Tween.get(logos_hb).wait(velocidad_lenta).to({scaleX:0},velocidad_lenta);

	//createjs.Tween.get(div_contenidos_2,{override:true}).to({scaleY:0.65,scaleX:0.65,x:329,y:div_contenidos_2.regY+15},velocidad_lenta*2);
	createjs.Tween.get(div_contenidos_2,{override:true}).to({scaleY:0.44,scaleX:0.64,x:348,y:div_contenidos_2.regY-33},velocidad_lenta*2);
if(con_botonesavance){
	if(!completado){
	document.getElementById("explorador1").className = "explora_visible";

	x_explorador = xinicia_esplora + ((xfin_explora-xinicia_esplora)/znPages)*znThisPage;
} else {
	x_explorador = xfesteja_explora;
	document.getElementById("explorador1").className = "explora_invisible";
	document.getElementById("explorador2").className = "explora_visible";
	//y_explora = 565;
}
}
if(con_botonesavance){
	createjs.Tween.get(explorador).wait(velocidad_lenta*6).to({x:x_explorador,y:y_explora,alpha:1},velocidad_lenta*2);
	
}
if(con_textoavance){
	createjs.Tween.get(avanza_explora).wait(velocidad_lenta*5.5).to({scaleY:1,scaleX:1,y:y_finalavanceexplora,alpha:1},velocidad_lenta);
	}
	createjs.Tween.get(contenedor_nombre_leccion).wait(velocidad_rapida*5).to({x:0,y:0,scaleX:0.68,scaleY:0.68},velocidad_lenta*2.5, createjs.Ease.bounceOut);
	
	setTimeout(function(){
		document.getElementById("txt_mod").className ="txt_mod2";
		//document.getElementById("nom_curso").innerHTML ="CURSO: REMAC";
		document.getElementById("nom_curso").className ="nom_curso2";
		document.getElementById("logo_client").className ="logo_client2";
		document.getElementById("logo_client").innerHTML ="<img src='images/logo_cx2.png'>";
		$('body').css("box-shadow","0 0 10px rgba(0,0,0,.3)")
		document.getElementById("contenedor_nombre_leccion").className ="contenedor_nombre_leccion";

	}, velocidad_lenta*2);
	//document.getElementById("contenedor_nombre_leccion").style.backgroundColor ="#004996";
	
	//document.getElementById("imagen_fp").src = "images/fondo_general2.png";
	
	

}
function cambiaTxtMov(){

	//document.getElementById("logo_c1").style.display ="none";
	//document.getElementById("logo_c2").style.visibility ="visible";
	personaje_inicial.x = 1120;
	personaje_inicial.y = 186;
	personaje_inicial.visible = false;
	createjs.Tween.get(personaje_inicial).wait(velocidad_lenta*2.5).to({scaleX:1,scaleY:1},velocidad_lenta, createjs.Ease.backOut);


	document.getElementById("fondod_titlecc").style.visibility ="hidden";
	document.getElementById("fondod_titlecc2").style.visibility ="visible";
	
	
	/*
	document.getElementById("txt_leccion_txt").className ="txt_leccion_txt2";
	document.getElementById("cont_tita").className ="cont_tita2";
	document.getElementById("txt_lecc_1").className ="txt_lecc_1b";
	document.getElementById("txt_lecc_2").className ="txt_lecc_2b";
	txt_leccion.x = x_final_lecc+1140;
	txt_leccion.y = y_final_lecc;
	createjs.Tween.get(txt_leccion).wait(velocidad_rapida).to({scaleY:0,scaleX:0,x:x_final_lecc},velocidad_lenta);
	*/
	//desarrollado.visible = true;
	createjs.Tween.get(desarrollado).wait(velocidad_lenta*2).to({alpha:1},velocidad_lenta*4, createjs.Ease.elasticOut);

}
function animacionModulo(){
	flecha_azul.x=stage_principal.x+20;
	////DESARROLLADO
	//desarrollado.visible = true;
	//desarrollado.alpha = 1;
	//createjs.Tween.get(desarrollado).wait(velocidad_lenta).to({scaleX:1,scaleY:1},velocidad_lenta*4, createjs.Ease.elasticOut);
	//createjs.Tween.get(txt_creditos).wait(velocidad_lenta*2).to({alpha:1},velocidad_lenta*3, createjs.Ease.elasticOut);
	
	////
	//createjs.Tween.get(div_contenidos).wait(velocidad_lenta).to({alpha:0,scaleX:0,scaleY:0},velocidad_lenta*4, createjs.Ease.elasticOut);
	createjs.Tween.get(flecha_azul).wait(velocidad_lenta*3).to({alpha:1,x:x_flecha_azul - stage_principal.x},velocidad_lenta*2, createjs.Ease.bounceOut);
	createjs.Tween.get(nombre_modulo).wait(velocidad_lenta*3).to({alpha:1,x:73},velocidad_lenta*2, createjs.Ease.bounceOut);
	createjs.Tween.get(division_modulo).to({scaleY:1},velocidad_lenta*2);
	createjs.Tween.get(modulo).to({alpha:1},velocidad_lenta);
	createjs.Tween.get(numero_modulo).to({alpha:1},velocidad_lenta);


	//paginas(pagina);	

}


//createjs.Ticker.addEventListener("tick", controlNavegacion);
		
function controlNavegacion() {


	if (sobre_avance){
		ancho_pop_adelante = document.getElementById("over_principal").clientWidth;
		pop_adelante.x = stage_principal.mouseX-ancho_pop_adelante+28;
		pop_adelante.y = stage_principal.mouseY+28;
		//createjs.Tween.get(pop_adelante).to({x:stage_principal.mouseX-ancho_pop_adelante+28, y:stage_principal.mouseY+37},velocidad_rapida,createjs.Ease.elasticOut);
		//document.getElementById("over_principal").innerHTML = "<span style='font-size:15px'>Siguiente:</span><br/>" + parent.titulos_pantallas[znThisPage];
	}

	if (sobre_retroceso){
		ancho_pop_adelante = document.getElementById("over_principal").clientWidth;
		pop_adelante.x = stage_principal.mouseX-ancho_pop_adelante+28;
		pop_adelante.y = stage_principal.mouseY+28;

		//ancho_pop_adelante = document.getElementById("over_principal").clientWidth;
		//pop_adelante.x = stage_principal.mouseX-ancho_pop_atras+ancho_pop_atras-15;
		//pop_adelante.y = stage_principal.mouseY+28;
		//createjs.Tween.get(pop_atras).to({x:stage_principal.mouseX-ancho_pop_atras+28, y:stage_principal.mouseY+37},velocidad_rapida,createjs.Ease.elasticOut);
		//document.getElementById("over_principal").innerHTML = "<span style='font-size:15px'>Anterior:</span><br/>" + parent.titulos_pantallas[znThisPage-2];
	}

	if (sobre_numero){
		//ancho_pop_adelante = document.getElementById("over_principal").clientWidth;
		//pop_adelante.x = stage_principal.mouseX+30;
		//pop_adelante.y = stage_principal.mouseY-28;
		//createjs.Tween.get(pop_atras).to({x:stage_principal.mouseX-15, y:stage_principal.mouseY+37},velocidad_rapida,createjs.Ease.elasticOut);
			
	}

	
}



numero_activo = [];

for (i = 1; i < parent.znPages+1; i++) { 
			
	numero_activo[i] = {val: false};

}


function clicNumero(id_seleccionado_clic)
	{

		if(con_sonidoclic){
				audio_clic.play();
			
			}


		for (i = 1; i < znPages+1; i++) { 
			
			document.getElementById('numero'+i).style.backgroundColor = "transparent";
			document.getElementById('numero'+i).style.color = "rgba(0,0,0,1)";
			document.getElementById('numero'+i).style.border = "2px solid rgba(128,128,128,1)";
			numero_activo[i] = {val: false};
			

		}
		id_numero = Number(id_seleccionado_clic);
		numero_activo[id_numero] = {val: true};
		
		document.getElementById('numero'+id_seleccionado_clic).style.backgroundColor = "rgba(236,27,35,1)";
		document.getElementById('numero'+id_seleccionado_clic).style.color = "rgba(255,231,1,1)";
		document.getElementById('numero'+id_seleccionado_clic).style.border = "2px solid rgba(236,27,35,1)"
	}


function overNumero(id_seleccionado_over)
	{
		document.getElementById('numero'+id_seleccionado_over).style.backgroundColor = "rgba(236,27,35,1)";
		document.getElementById('numero'+id_seleccionado_over).style.color = "rgba(255,231,1,1)";
		document.getElementById('numero'+id_seleccionado_over).style.border = "2px solid rgba(236,27,35,1)"
	}
function outNumero(id_seleccionado_out)
	{
		id_numero = Number(id_seleccionado_out);
		
		
		if(numero_activo[id_numero].val == false){
			document.getElementById('numero'+id_seleccionado_out).style.backgroundColor = "transparent";
			document.getElementById('numero'+id_seleccionado_out).style.color = "rgba(0,0,0,1)";
			document.getElementById('numero'+id_seleccionado_out).style.border = "2px solid rgba(128,128,128,1)"
			
		}
	}


function clicFlechaArriba()
	{
		

		if(con_sonidoclic){
				audio_clic.play();
			
			}

		audio_activo = true;

		if (znThisPage==2)
		{
			znThisPage -= 1;
			document.getElementById('pagina_actual').innerHTML = znThisPage;
			document.getElementById("flecha_arriba").style.visibility = "hidden";
			//document.getElementById("flecha_abajo").style.visibility = "visible";
			pagina = "pages/page"+ znThisPage + "/page"+ znThisPage + ".html";
			paginas(pagina);
		} else {
			znThisPage -= 1;
			document.getElementById('pagina_actual').innerHTML = znThisPage;
			document.getElementById("flecha_arriba").style.visibility = "visible";
			document.getElementById("flecha_abajo").style.visibility = "visible";
			pagina = "pages/page"+ znThisPage + "/page"+ znThisPage + ".html";
			paginas(pagina);
		}
		}

function clicFlechaAbajo()
	{


		if(con_sonidoclic){
				audio_clic.play();
			
			}


		audio_activo = true;
		document.getElementById("flecha_abajo").style.visibility = "hidden"; 
		if(znThisPage==var_paginas_totales-1)
		{
			znThisPage += 1;
			document.getElementById('pagina_actual').innerHTML = znThisPage;
			document.getElementById("flecha_arriba").style.visibility = "visible";
			document.getElementById("flecha_abajo").style.visibility = "hidden"; 
			pagina = "pages/page"+ znThisPage + "/page"+ znThisPage + ".html";
			paginas(pagina);
		} else {
			znThisPage += 1;
			document.getElementById('pagina_actual').innerHTML = znThisPage;
			document.getElementById("flecha_arriba").style.visibility = "visible";
			pagina = "pages/page"+ znThisPage + "/page"+ znThisPage + ".html";
			paginas(pagina);
		}
		znThisPage = znThisPage;
		
		
	}




/// CONTROL DE PAGINAS

var ifrm;
frame_leido = false;

function f_iframe(){

	//document.getElementById("loader").style.visibility = "visible"; 
	 $( "#loader" ).fadeIn( "slow" );

	sig = znThisPage + 1;
	//console.log(sig)
	ifrm = document.createElement('IFRAME');
	ifrm.setAttribute("src", pagina);
	ifrm.setAttribute('id', 'ifrm'); 
	if(!con_botonesavance&&!con_menunumeros_v2&&!con_menunumeros_vhz){
	ifrm.setAttribute('class', 'iframe_pages3'); 
	
	} else if(con_botonesavance||con_menunumeros_vhz){
	ifrm.setAttribute('class', 'iframe_pages2'); 
	
	} else {
	ifrm.setAttribute('class', 'iframe_pages'); 

	}
	
	
	ifrm.scrolling = "no";
	
	/////////////////
	if(znThisPage<znPages){
	var loader2 = new createjs.LoadQueue(true);
		

	//loader2.loadFile({src:"pages/page"+sig+"/images/page"+sig+"_atlas_.json", type:"spritesheet", id:"page"+sig+"_atlas_"});
		

	loader2.loadFile({src:"pages/page"+sig+"/sounds/audio"+sig+".mp3"});
	//loader.loadFile({src:"pages/page"+sig+"/index"+sig+".js"});
	//loader.loadManifest(lib.properties.manifest);
	/*
	if(znThisPage == 1){
		for (i = 0; i < audios_totales.length; i++) {
			for (int = 0; int < audios_totales[i].length; int++) {
				//console.log(sig,audios_totales[sig-1]) 
				if(audios_totales[i][int]!=0){
					loader.loadFile({src:"pages/page"+i+"/sounds/audio"+i+"_"+int+".mp3"});
					console.log("pages/page"+i+"/sounds/audio"+i+"_"+int+".mp3")
				}	
			}
		}
	} else {
	*/
		for (int = 0; int < audios_totales[sig-1].length; int++) {
			//console.log(sig,audios_totales[sig-1]) 
			if(audios_totales[sig-1][int]!=0){

				loader2.loadFile({src:"pages/page"+sig+"/sounds/audio"+sig+"_"+int+".mp3"});
				//console.log("pages/page"+sig+"/sounds/audio"+sig+"_"+int+".mp3")
			}	
		}


		
	//}
	//loader.loadManifest({src:"pages/page"+sig+"/index"+sig+".js"});

	}
	//loader.loadManifest(lib.properties.manifest);
	/*if(znThisPage<znPages){
	ifrm2 = document.createElement('IFRAME');
	ifrm2.setAttribute("src", pagina_sig);
	ifrm2.setAttribute('id', 'ifrm2'); 
	ifrm2.style.position = "absolute";
	ifrm2.style.width = 0+"px";
	ifrm2.style.height = 0+"px";
	//ifrm.style.marginLeft = 130+"px";
	
	//ifrm.style.top = 125+"px";
	//ifrm.style.left = 0;
	//ifrm.style.right = 0;
	ifrm2.style.zIndex = 1;
	ifrm2.scrolling = "no";
	ifrm2.style.border = "none";
	ifrm2.style.visibility = "hidden";
	ifrm2.style.zIndex = 0;


	//var_paginas_frame2 = document.getElementById("IFRAME");
	document.body.appendChild(ifrm2);
	}
	*/
	/////////////////
	frame_leido = true;

	var_paginas_frame = document.getElementById("IFRAME");
	document.body.appendChild(ifrm);

	//ifrm_2 = document.getElementById('ifrm');

	paginas_frame = new createjs.DOMElement(ifrm);
	//paginas_frame2 = new createjs.DOMElement(ifrm2);
	paginas_frame.alpha = 0;

	if(!con_menunumeros_v2){
	x_frame_final = 0;
	} else {
	x_frame_final = 95;

	}
	
	y_frame_final = 50;
	if (adelante){
		//x_paginas_frame = 700;
		y_paginas_frame = 200;
	} else if (atras){
		//x_paginas_frame = -450;
		y_paginas_frame = 0;
	}	else {
		//x_paginas_frame = x_frame_final;
		y_paginas_frame = y_frame_final;
	}



	paginas_frame.x = x_frame_final;
	paginas_frame.y = y_frame_final;
	//paginas_frame.alpha = 0;
	createjs.Tween.get(paginas_frame,{override:true}).to({alpha:1,y:y_frame_final},velocidad_media);
	//createjs.Tween.get(paginas_frame2,{override:true}).to({alpha:1,x:x_frame_final+400},velocidad_media);
	
	

	stage_principal.addChild(paginas_frame)
	//stage_principal.update();
	if(con_botonesavance){
		if(znThisPage==1){
			

		} else {
		createjs.Tween.get(arrow_anterior,{override:true}).to({scaleX:1,scaleY:1},velocidad_lenta, createjs.Ease.backOut);
		anterior_activo = true;
		var_arrow_anterior.className = "flecha_activa";
		
		}

		if(znThisPage<pagina_superior&&znThisPage<znPages){
			//if(znThisPage<znPages){
				var_arrow_siguiente.className = "flecha_activa";

				createjs.Tween.get(arrow_siguiente,{override:true}).to({scaleX:1,scaleY:1},velocidad_lenta, createjs.Ease.backOut);
				siguiente_activo = true;
			//}
		} else if(znThisPage==pagina_superior&&znThisPage<znPages&&znThisPage>1) {
				siguiente_activo = false;

				createjs.Tween.get(arrow_siguiente,{override:true}).to({scaleX:1,scaleY:1},velocidad_lenta, createjs.Ease.backOut);

				var_arrow_siguiente.className = "flecha_inactiva";

		} else if(znThisPage==znPages) {
				siguiente_activo = false;

				createjs.Tween.get(arrow_siguiente,{override:true}).to({scaleX:0,scaleY:0},velocidad_lenta, createjs.Ease.backOut);

				var_arrow_siguiente.className = "flecha_inactiva";

		}
	}

}

	



var activa_ifrm = true;



function paginas(pagina){

	/*
	var imagenes = new createjs.SpriteSheet({
	
	images: ["../../images/index_atlas_.png"], 
	frames: ["../../images/index_atlas_.png"], "frames": [[49,926,51,37],[102,926,51,37],[91,965,51,37],[0,1081,51,37],[813,628,51,38],[46,1026,51,37],[53,1065,51,37],[679,849,19,11],[49,965,33,11],[99,1024,34,34],[748,632,35,35],[0,981,42,52],[0,926,47,53],[144,965,2,33],[44,981,45,43],[0,1035,44,44],[559,483,187,184],[155,946,41,41],[785,632,23,35],[748,483,63,147],[813,566,62,60],[669,740,61,107],[0,0,1126,481],[559,884,185,200],[559,669,108,119],[559,790,90,71],[813,483,81,81],[669,669,166,69],[651,849,26,17],[732,740,34,115],[99,1004,97,18],[155,926,97,18],[289,483,268,440],[1128,442,300,440],[1128,0,340,440],[0,483,287,441]]
	});
	*/
	

	var_flecha_arriba = document.getElementById("flecha_arriba");
	var_flecha_abajo = document.getElementById("flecha_abajo");
	//znThisPage = Number(document.getElementById("pagina_actual").innerHTML);
	var_paginas_totales = parent.znPages;
	
	
	
	if (!activa_ifrm){
		//locucion.stop();
		//document.body.removeChild(ifrm);
		ifrm.setAttribute("src", "");

		//ifrm.innerHTML = "";
	} else {activa_ifrm = false}
	

	if (znThisPage > 1) {
		document.getElementById("flecha_arriba").style.visibility = "visible";
	}

	if(titulos_modulos.length>0){
		if(znThisPage<6){
			nuevo_txtmod = titulos_modulos[0];
		} else if(znThisPage<16){
			nuevo_txtmod = titulos_modulos[1];
		} else if(znThisPage<29){
			nuevo_txtmod = titulos_modulos[2];
		} else {
			nuevo_txtmod = titulos_modulos[3];
		}

		if(nuevo_txtmod!=$("#txt_mod").html()){
			$("#txt_mod").addClass("col_trans");
			$("#txt_mod").removeClass("col_white");

			setTimeout(function(){
					$("#txt_mod").html(nuevo_txtmod);
					$("#txt_mod").removeClass("col_trans");
					$("#txt_mod").addClass("col_white");

			}, 410);
		}
	}
	if(tipo_curso=="isometrico"){
		createjs.Tween.get(mapa_completo).to({x:coordenadas_mapa[znThisPage-1][0],y:coordenadas_mapa[znThisPage-1][1]},velocidad_lenta);
	}
	f_iframe();
	

	/*
	stage.setBounds( 10,  10,  10,  10 );
	bounds_stage = stage.getBounds();
	console.log(bounds_stage);
	*/


	

	
}





///CONTENIDOS

function resultadosEvalISF(){
	$(".nota_max").text(parent.parent.puntaje_maximo);

	leerEstilos();
	$( ".descarga" ).hide();
	$( ".descarga" ).click(function() {
		console.log("clic")
		$(this).attr("class","descarga_visto"); // OVER CUANDO YA SE VIERON

		//parent.parent.completado = true;
		if($( ".descarga_visto" ).length==2){
		parent.suma_total();
		}

		$(".inst_fin").fadeIn("slow");

	});

	console.log(parent.parent.puntaje,"puntaje total %")
	//console.log(parent.puntaje_pregunta,"puntajes preguntas")

	//document.getElementById("porc_isf").innerHTML = parent.parent.puntaje+"%";
	$(".porc_isf").html(parent.parent.puntaje+"%");

	if(parent.parent.puntaje<60){
		$(".mensaje_resulta").html("A partir de sus respuestas, su salud financiera se encuentra en el nivel rojo. Esto significa que se enfrenta a una situación financiera compleja que requiere su atención inmediata y exige un cambio urgente de sus hábitos financieros.<br/>Le invitamos a mejorar estas conductas financieras y a aplicar las recomendaciones que encontrará en los módulos 2 y 3.")
	}else if(parent.parent.puntaje<80){
		$(".mensaje_resulta").html("A partir de sus respuestas, su salud financiera se encuentra en el nivel amarillo. Esto significa que su situación financiera se encuentra en precaución, por lo tanto, se requiere hacer cambios de sus conductas financieras.<br/>Le invitamos a mejorar estas conductas financieras y a aplicar las recomendaciones que encontrará en los módulos 2 y 3.")

	}else if(parent.parent.puntaje<=100){
		$(".mensaje_resulta").html("A partir de sus respuestas, su salud financiera se encuentra en el nivel verde. Esto significa que su situación financiera es saludable. ¡Felicitaciones!<br/>Le invitamos a mejorar sus conductas financieras y a aplicar las recomendaciones que encontrará en los módulos 2 y 3.")

	}


	for (i = 0; i < parent.objetos_recomendaop.length; i++) { 
		if(i<3){
			parent.objetos_temasev[0].score_temaev += parent.objetos_recomendaop[i].puntopsel;
		} else if(i>=3&&i<5){
			parent.objetos_temasev[1].score_temaev += parent.objetos_recomendaop[i].puntopsel;
		} else if(i>=5&&i<10){
			parent.objetos_temasev[2].score_temaev += parent.objetos_recomendaop[i].puntopsel;
		} else if(i>=10){
			parent.objetos_temasev[3].score_temaev += parent.objetos_recomendaop[i].puntopsel;
		}

		/*
		if(i<3){
			parent.objetos_temasev[0].score_temaev += parent.puntaje_pregunta[i];
		} else if(i>=3&&i<5){
			parent.objetos_temasev[1].score_temaev += parent.puntaje_pregunta[i];
		} else if(i>=5&&i<10){
			parent.objetos_temasev[2].score_temaev += parent.puntaje_pregunta[i];
		} else if(i>=10){
			parent.objetos_temasev[3].score_temaev += parent.puntaje_pregunta[i];
		}
		*/
	}


	parent.objetos_temasev[0].porc_temaev = parseInt((parent.objetos_temasev[0].score_temaev/parent.objetos_temasev[0].max_temaev)*100,10);
	parent.objetos_temasev[1].porc_temaev = parseInt((parent.objetos_temasev[1].score_temaev/parent.objetos_temasev[1].max_temaev)*100,10);
	parent.objetos_temasev[2].porc_temaev = parseInt((parent.objetos_temasev[2].score_temaev/parent.objetos_temasev[2].max_temaev)*100,10);
	parent.objetos_temasev[3].porc_temaev = parseInt((parent.objetos_temasev[3].score_temaev/parent.objetos_temasev[3].max_temaev)*100,10);


	$("#cat_isf0").find(".cat_nom").html(parent.objetos_temasev[0].tit_temaev+":");
	$("#cat_isf1").find(".cat_nom").html(parent.objetos_temasev[1].tit_temaev+":");
	$("#cat_isf2").find(".cat_nom").html(parent.objetos_temasev[2].tit_temaev+":");
	$("#cat_isf3").find(".cat_nom").html(parent.objetos_temasev[3].tit_temaev+":");

	$("#cat_isf0").find(".cat_num").html(parent.objetos_temasev[0].porc_temaev + "%");
	$("#cat_isf1").find(".cat_num").html(parent.objetos_temasev[1].porc_temaev  + "%");
	$("#cat_isf2").find(".cat_num").html(parent.objetos_temasev[2].porc_temaev  + "%");
	$("#cat_isf3").find(".cat_num").html(parent.objetos_temasev[3].porc_temaev  + "%");
	
	
	$("#cat_isfx0").find(".cat_nom").html(parent.objetos_temasev[0].tit_temaev+":");
	$("#cat_isfx1").find(".cat_nom").html(parent.objetos_temasev[1].tit_temaev+":");
	$("#cat_isfx2").find(".cat_nom").html(parent.objetos_temasev[2].tit_temaev+":");
	$("#cat_isfx3").find(".cat_nom").html(parent.objetos_temasev[3].tit_temaev+":");

	$("#cat_isfx0").find(".cat_numx").html(parent.objetos_temasev[0].porc_temaev + "%");
	$("#cat_isfx1").find(".cat_numx").html(parent.objetos_temasev[1].porc_temaev  + "%");
	$("#cat_isfx2").find(".cat_numx").html(parent.objetos_temasev[2].porc_temaev  + "%");
	$("#cat_isfx3").find(".cat_numx").html(parent.objetos_temasev[3].porc_temaev  + "%");

	//if(($("#escena_r").find(".item_r").eq(1).text().trim().length!=0||$("#escena_r").find(".item_r").eq(1).find("img").length!=0)&&parent.parent.puntaje>=parent.parent.puntaje_aprueba){
		$("#escena_r").find(".item_r").eq(0).css("width","50%");
		$("#escena_r").find(".item_r").eq(0).css("opacity","1");
		$("#escena_r").find(".item_r").eq(1).css("width","50%");
		$("#escena_r").find(".item_r").eq(1).css("opacity","1");
		
	//} else {
	//	$("#escena_r").find(".item_r").eq(0).css("width","100%");
	//	$("#escena_r").find(".item_r").eq(0).css("opacity","1");
	//	$("#escena_r").find(".item_r").eq(1).fadeOut(0);
	//}
	console.log(parent.objetos_temasev,"objetos_temasevobjetos_temasev");
	
	setTimeout(function(){
		animaBarraCat();
	},300);

	function animaBarraCat(){
		$("#cat_isf0").find(".cat_bar>div>div").width(((parent.objetos_temasev[0].porc_temaev/100)*200)+"px");
		$("#cat_isf1").find(".cat_bar>div>div").width(((parent.objetos_temasev[1].porc_temaev/100)*200)+"px");
		$("#cat_isf2").find(".cat_bar>div>div").width(((parent.objetos_temasev[2].porc_temaev/100)*200)+"px");
		$("#cat_isf3").find(".cat_bar>div>div").width(((parent.objetos_temasev[3].porc_temaev/100)*200)+"px");


		$("#cat_isfx0").find(".cat_barx>div>div").width(((parent.objetos_temasev[0].porc_temaev/100)*200)+"px");
		$("#cat_isfx1").find(".cat_barx>div>div").width(((parent.objetos_temasev[1].porc_temaev/100)*200)+"px");
		$("#cat_isfx2").find(".cat_barx>div>div").width(((parent.objetos_temasev[2].porc_temaev/100)*200)+"px");
		$("#cat_isfx3").find(".cat_barx>div>div").width(((parent.objetos_temasev[3].porc_temaev/100)*200)+"px");

		//$(".indica_result").css({ WebkitTransform: 'rotate(' + (((parent.parent.puntaje/100)*225)-20) + 'deg)'});
		$(".indica_result").css({ WebkitTransform: 'rotate(' + (((parent.parent.puntaje/100)*180)) + 'deg)'});

		setTimeout(function(){
			$( ".descarga" ).show("slow");
		},3000);

	}

	for (i = 0; i < parent.objetos_recomendaop.length; i++) { 
		//console.log(parent.objetos_recomendaop[i].recopev[parent.objetos_recomendaop[i].opselev], i);
		for (int = 0; int < parent.objetos_recomendaop[i].recopev[parent.objetos_recomendaop[i].opselev].length; int++) { 

			parent.listado_recomendafin.push(parent.objetos_recomendaop[i].recopev[parent.objetos_recomendaop[i].opselev][int])
		}
	}

	

			//console.log(parent.listado_recomendafin)

		parent.listado_recomendafin = [...new Set(parent.listado_recomendafin)];
			//console.log(parent.listado_recomendafin)
		//parent.listado_recomendafin.sort();
		parent.listado_recomendafin.sort((a, b) => a - b);
			//console.log(parent.listado_recomendafin)

		for (i = 0; i < parent.listado_recomendafin.length; i++) { 
			//$("#list_recomenda").append("<p><span><i class='fad fa-square'></i></span>"+ parent.recomendaciones_ev[parent.listado_recomendafin[i]]+"</p>");

		}

		if(parent.parent.puntaje<60){
			$("#list_recomenda").append("<p><span><i class='fad fa-square'></i></span>Elabore una lista de gastos no esenciales para identificar cuáles pueden ser eliminados o reducidos.</p><p><span><i class='fad fa-square'></i></span>Elabore un presupuesto del negocio y otro de sus finanzas personales para encontrar oportunidades de ahorro y cumplir sus metas. </p><p><span><i class='fad fa-square'></i></span>Establezca un plan para reducir el alto endeudamiento: emparejando fechas en que se reciben pagos, cuantificando el costo de pagar con atraso, eliminando gastos innecesarios y unificando deudas con tasas y plazos más favorables.</p><p><span><i class='fad fa-square'></i></span>Si empeñó un bien, cuantifique el costo y el riesgo de perder sus bienes. </p><p><span><i class='fad fa-square'></i></span>Recuerde que controlar sus gastos y deudas le proporciona salud física y mental.</p><p><span><i class='fad fa-square'></i></span>Ingrese de forma gratuita a la página www.midatacredito.com, regístrese e infórmese del estado actual de sus obligaciones.</p><p><span><i class='fad fa-square'></i></span>Evalúe la posibilidad de solicitar un crédito con una entidad legalmente establecida para cancelar el crédito del gota a gota y no volver a hacer uso de este tipo de financiación.</p><p><span><i class='fad fa-square'></i></span>Ingrese de forma gratuita a la página www.vue.gov.co y realice los trámites legales que requiera.</p>");












		}else if(parent.parent.puntaje<80){
			$("#list_recomenda").append("<p><span><i class='fad fa-square'></i></span>Elabore una lista de gastos no esenciales para identificar cuáles pueden ser eliminados o reducidos.</p><p><span><i class='fad fa-square'></i></span>Elabore un presupuesto del negocio y otro de sus finanzas personales para encontrar oportunidades de ahorro y cumplir sus metas. </p><p><span><i class='fad fa-square'></i></span>Establezca un plan para reducir el alto endeudamiento: emparejando fechas en que se reciben pagos, cuantificando el costo de pagar con atraso, eliminando gastos innecesarios y unificando deudas con tasas y plazos más favorables.</p><p><span><i class='fad fa-square'></i></span>Ingrese de forma gratuita a la página www.midatacredito.com, regístrese e infórmese del estado actual de sus obligaciones.</p><p><span><i class='fad fa-square'></i></span>Evalúe la posibilidad de solicitar un crédito con una entidad legalmente establecida para cancelar el crédito del gota a gota y no volver a hacer uso de este tipo de financiación.</p><p><span><i class='fad fa-square'></i></span>Ingrese de forma gratuita a la página www.vue.gov.co y realice los trámites legales que requiera.</p>");




		}else if(parent.parent.puntaje<=100){
			$("#list_recomenda").append("<p><span><i class='fad fa-square'></i></span>Elabore una lista de gastos no esenciales para identificar cuáles pueden ser eliminados o reducidos.</p><p><span><i class='fad fa-square'></i></span>Elabore un presupuesto del negocio y otro de sus finanzas personales para encontrar oportunidades de ahorro y cumplir sus metas. </p><p><span><i class='fad fa-square'></i></span>Si tiene deudas, propóngase pagarlas anticipadamente o haga abonos extraordinarios. De igual manera, busque negociar descuentos por pronto pago.</p><p><span><i class='fad fa-square'></i></span>Evalúe la posibilidad de adquirir un seguro para proteger los bienes del negocio y de la familia.</p><p><span><i class='fad fa-square'></i></span>Ingrese de forma gratuita a la página www.vue.gov.co y realice los trámites legales que requiera.</p>");
				






		}

}



function resultadosEval(){
	$(".nota_max").text(parent.parent.puntaje_maximo);

	leerEstilos();

parent.parent.cantidad_intentos_evact++

	bigsimbolo_retro_incorr = document.getElementsByClassName("bigsimbolo_retro_incorr");
	
	//if(($("#escena_r").find(".item_r").eq(1).text().trim().length!=0||$("#escena_r").find(".item_r").eq(1).find("img").length!=0)&&parent.parent.puntaje>=parent.parent.puntaje_aprueba){
	if(($("#escena_r").find(".item_r").eq(1).text().trim().length!=0||$("#escena_r").find(".item_r").eq(1).find("img").length!=0)){
		$("#escena_r").find(".item_r").eq(0).css("width","50%");
		$("#escena_r").find(".item_r").eq(0).css("opacity","1");
		$("#escena_r").find(".item_r").eq(1).css("width","35%");
		$("#escena_r").find(".item_r").eq(1).css("opacity","1");
		$("#escena_r").find(".item_r").eq(2).css("width","15%");
		$("#escena_r").find(".item_r").eq(2).css("opacity","1");
		
	} else {
		$("#escena_r").find(".item_r").eq(0).css("width","100%");
		$("#escena_r").find(".item_r").eq(0).css("opacity","1");
		$("#escena_r").find(".item_r").eq(1).fadeOut(0);
	}


								for (i = 0; i < bigsimbolo_retro_incorr.length; i++) {
									//if(!(($("#bigsimbolo_retro_incorr").text().trim().length!=0||$("#bigsimbolo_retro_incorr").find("img").length!=0))){
								 		 bigsimbolo_retro_incorr[i].innerHTML = parent.parent.icono_wrong;
								 	//	}
								}
								
								bigsimbolo_retro_corr = document.getElementsByClassName("bigsimbolo_retro_corr");
					
								for (i = 0; i < bigsimbolo_retro_corr.length; i++) {

									//if(!(($("#bigsimbolo_retro_corr").text().trim().length!=0||$("#bigsimbolo_retro_corr").find("img").length!=0))){

									//if($("#bigsimbolo_retro_corr").html()){
								  		bigsimbolo_retro_corr[i].innerHTML = parent.parent.icono_check;
								  	//}
								}
					

								if(parent.parent.puntaje_maximo<=10){
									parent.parent.puntaje = parent.parent.puntaje.toFixed(1);
									parent.parent.puntaje_maximo = parent.parent.puntaje_maximo.toFixed(1);
									document.getElementById("nota_fin").innerHTML = parent.parent.puntaje;
								} else {
									parent.parent.puntaje = parseInt(parent.parent.puntaje);

								}
								document.getElementById("nota_fin").innerHTML = parent.parent.puntaje;
						
								//if(parent.parent.puntaje>=parent.parent.puntaje_aprueba){
								if(parent.parent.puntaje>=parent.parent.puntaje_aprueba){
								
								document.getElementById("mensaje_aprueba").style.visibility = "visible";
								document.getElementById("bigsimbolo_retro_corr").style.visibility = "visible";

								$("#bigsimbolo_retro_corr").addClass("color_correcto")
								$("#nota_fin").addClass("color_correcto")
								
								document.getElementById("mensaje_noaprueba").style.display = "none";
								//document.getElementById("mensaje_medio").style.display = "none";
								document.getElementById("bigsimbolo_retro_incorr").style.display = "none";

								//document.getElementById("img_noaprueba").style.display = "none";
								//document.getElementById("img_medio").style.display = "none";

									if($("#mensaje_aprueba").find("audio").length>0){
										//$("#mensaje_aprueba").find("audio").get(0).play();
									}
									
								} else if (parent.parent.puntaje>=parent.parent.puntaje_medio){

									//document.getElementById("mensaje_medio").style.visibility = "visible";
									document.getElementById("mensaje_aprueba").style.display = "none";
									document.getElementById("mensaje_noaprueba").style.display = "none";

									//document.getElementById("img_noaprueba").style.display = "none";
								//document.getElementById("img_aprueba").style.display = "none";
								
									if($("#mensaje_medio").find("audio").length>0){
										//$("#mensaje_medio").find("audio").get(0).play();
									}
								} else {
									if(parent.parent.cantidad_intentos_ev>0){
										if(parent.parent.cantidad_intentos_evact>=parent.parent.cantidad_intentos_ev){
											$("#mensaje_noaprueba").find("div").eq(1).html("Los intentos se han agotado.")
										} else {
											$(".instruccion_interna").fadeOut(0);
											if(parent.parent.cantidad_intentos_evact+1==parent.parent.cantidad_intentos_ev){
												$("#mensaje_noaprueba").find("div").eq(1).html(""+parent.parent.tx_tienesmay+" un intento disponible.")
											} else {
												$("#mensaje_noaprueba").find("div").eq(1).html(""+parent.parent.tx_tienesmay+ parent.parent.cantidad_intentos_ev-parent.parent.cantidad_intentos_evact +" intentos disponibles.")

											}

											$("#mensaje_noaprueba").append("<div class='btn_reintentar'>Reintentar</div>");

											$( ".btn_reintentar" ).click(function() {
												if(parent.parent.con_sonidoclic){
													parent.parent.audio_clic.play();
												}
												parent.document.getElementById("cantidad_preguntas_cuest").style.visibility = "visible";
												parent.parent.nuevo_puntaje = 0;
												parent.pregunta_actual = 1;
												parent.document.getElementById("preg_actual_c").innerHTML = parent.pregunta_actual;

												parent.ifrmp.setAttribute("src", "preg"+parent.pregunta_actual+".html");

											});

										}
									}
								document.getElementById("mensaje_noaprueba").style.visibility = "visible";
								document.getElementById("bigsimbolo_retro_incorr").style.visibility = "visible";

								$("#bigsimbolo_retro_incorr").addClass("color_incorrecto")

								$("#nota_fin").addClass("color_incorrecto")
								
								
								document.getElementById("mensaje_aprueba").style.display = "none";
								//document.getElementById("mensaje_medio").style.display = "none";
								document.getElementById("bigsimbolo_retro_corr").style.display = "none";

								//document.getElementById("img_aprueba").style.display = "none";
								//document.getElementById("img_medio").style.display = "none";
								
								
								if($("#mensaje_noaprueba").find("audio").length>0){
									
										//$("#mensaje_noaprueba").find("audio").get(0).play();
									}

								
								}
}
function leerEstilos(){
	$("body").height("400px");
	//document.getElementById("contenedor_loaderint").style.visibility = "hidden";
	//document.getElementById("escena").style.visibility = "visible";
			

	$('audio').each(function(index){
		$(this).attr('id', 'audio'+index);
		parent_audio = $(this).closest(".audio_c");
		parent_audio.append( $( "<div class='btn_cc'>"+parent.parent.icono_cc+"</div>" ) );

	}); 

	$('.btn_cc').each(function(index){
		//console.log(index,"index")
		$(this).click(function() {
			console.log("clic cc audio")
			if($(this).hasClass("btn_ccvisto")){
				$(this).closest(".cont_audio").find(".subs_audio").removeClass("subs_audioopen");
				$(this).removeClass("btn_ccvisto");
			
			} else {
				$(this).closest(".cont_audio").find(".subs_audio").addClass("subs_audioopen");
				$(this).addClass("btn_ccvisto");
			
			}
			  
		});
	});  

	parent.$("#contenedor_loaderint").fadeOut(0);
	$("#escena").fadeTo(300,1);
	
	txt_vin = document.getElementsByClassName("vineta");

	for (i = 0; i < txt_vin.length; i++) {
	  txt_vin[i].innerHTML = parent.parent.icono_vineta;
	}

	
	$('.instruccion_interna').each(function(){
		txt_instinterna = $(this).text();
		html_instinterna = $(this).html();

		$(this).html("<div>"+html_instinterna+"</div>");
	}); 
	
	$('#escena').prepend("<div id='contenedor_loaderint_2' class='contenedor_loaderint_2'></div> ")

	$('.enunciado_vf').each(function(index){
			$(this).closest(".item_c").css("margin-top","70px");
			
			html_re = $(this).html();
			rta_vf = $(this).attr("data-rta");

			if(rta_vf=="v"){
				op_ver = "correcto"+index;
				op_false = "incorrecto"+index;
			} else {
				op_ver = "incorrecto"+index;
				op_false = "correcto"+index;
			}

			$(this).html("<p>"+html_re+"</p><div class='indica_vf'>"+parent.parent.icono_indica_right+"</div>");

			$(this).append( "<div id='"+op_ver+"' class='verdadero'>V</div><div id='"+op_false+"' class='falso'>F</div>" );

		});


	$('.opcion_preg').each(function(index){
		tiene_imgop = $(this).find("img").length;
		id_opcsel = $(this).attr("id");
		f_id_opcsel = id_opcsel.charAt(0);

		if(f_id_opcsel=="c"){
			num_idselop = parseInt(id_opcsel.replace("correcto", ""),10);
			txt_idselop = "corr";
		} else {
			num_idselop = parseInt(id_opcsel.replace("incorrecto", ""),10);
			txt_idselop = "incorr";
		}

		letra_opcionsel = "<span id='"+txt_idselop+num_idselop+"' class='negrilla'>"+parent.abc[index]+".</span> "

		if(tiene_imgop>0){
			$(this).prepend(letra_opcionsel)

			//$(letra_opcionsel).insertBefore($(this).find("img").eq(0));
		} else {
			$(this).prepend(letra_opcionsel)
		}
	});

}


function arrastreMultipleCols(cantidad_circulos,con_over){
	leerEstilos();
	ancho_espacio = $(".espacio").get(0).getBoundingClientRect().width;

	tieneRetroPrEv()


		mensaje_instruccion = document.getElementById("instruccion_interna").innerHTML;

	//var frequency = 100;
	//stage.enableMouseOver(frequency);


	function actualizaBoundsEnunciados(){

		for (i = 0; i < cantidad_circulos; i++) { 
				
				var bounds_enunciado = document.getElementById('enunciado'+i).getBoundingClientRect();
				bounds_enunciados[i] = bounds_enunciado;
				bounds_enunciados.push(bounds_enunciados[i]);

				x_enunciados=[]
				//var x_texto_enunciado = document.getElementById('enunciado'+i).offsetLeft - document.getElementById('enunciado'+i).scrollLeft + document.getElementById('enunciado'+i).clientLeft;
				x_enunciados[i] = bounds_enunciados[i].left;
				x_enunciados.push(x_enunciados[i]);

				


				y_enunciados=[]
				//var y_texto_enunciado = document.getElementById('enunciado'+i).offsetTop - document.getElementById('enunciado'+i).scrollTop + document.getElementById('enunciado'+i).clientTop+150;
				y_enunciados[i] = bounds_enunciados[i].top;
				y_enunciados.push(y_enunciados[i]);

			}

	}
	

	alto_enunciados = []

			ancho_enunciados = []

			x_enunciados = []

			y_enunciados = []

			bounds_enunciados = []

			enunciados_html = []
			
			for (i = 0; i < cantidad_circulos; i++) { 
				cont_oparr = $("#opcion"+i).html();
				$("#opcion"+i).html("<p>"+cont_oparr+"</p><span></span>")
				//$("#opcion"+i).append("<div class='simbretvf'></div>")

				cont_enarr = $("#enunciado"+i).find("div").eq(0).text();
				$("#enunciado"+i).find("div").eq(0).html("<p>"+cont_enarr+"</p><span></span>")
				$("#enunciado"+i).find(".espacio").append("<div class='simbretvf'></div>")

				var enunciado_html = document.getElementById('enunciado'+i);
				enunciados_html[i] = enunciado_html;

				var alto_texto_enunciado = document.getElementById('enunciado'+i).clientHeight;
				alto_enunciados[i] = alto_texto_enunciado;
				alto_enunciados.push(alto_enunciados[i]);

				var ancho_texto_enunciado = document.getElementById('enunciado'+i).clientWidth;
				ancho_enunciados[i] = ancho_texto_enunciado;
				ancho_enunciados.push(ancho_enunciados[i]);

				
				//c  = element.offsetLeft - element.scrollLeft + element.clientLeft
				//var hola = document.getElementById('enunciado'+i)
				//var x_texto_enunciado = getPosition(hola)
				
				
				var bounds_enunciado = document.getElementById('enunciado'+i).getBoundingClientRect();
				bounds_enunciados[i] = bounds_enunciado;
				bounds_enunciados.push(bounds_enunciados[i]);

				


				x_enunciados=[]
				//var x_texto_enunciado = document.getElementById('enunciado'+i).offsetLeft - document.getElementById('enunciado'+i).scrollLeft + document.getElementById('enunciado'+i).clientLeft;
				x_enunciados[i] = bounds_enunciados[i].left;
				x_enunciados.push(x_enunciados[i]);

				


				y_enunciados=[]
				//var y_texto_enunciado = document.getElementById('enunciado'+i).offsetTop - document.getElementById('enunciado'+i).scrollTop + document.getElementById('enunciado'+i).clientTop+150;
				y_enunciados[i] = bounds_enunciados[i].top;
				y_enunciados.push(y_enunciados[i]);
			}



		//var_globo_texto_personaje = document.getElementById('cont_globo_texto');
		//ancho_globo_texto_personaje = var_globo_texto_personaje.clientWidth;
		
		//globo_texto_personaje = new createjs.DOMElement(var_globo_texto_personaje);
		
		contenidos_circulos = []
		contenidos_circulos_html = []
		
		contenidos_circulos_masinfo = []
		contenidos_circulos_html_masinfo = []
		

		alto_opciones = 10;
		//ancho_opciones = 200;
		padding_opciones = 12;

		actual_down = false;

		x_original = [];
	
		y_original = [];
		top_opciones = 0;

		activar_opacidad_enunciados = false;

		bounds_opciones = []

		respuestas_arrastre =[]

		respuestas_anterior = []

		respuestas_anterior_html = []


		opciones = []
		opciones_html = []

		top_originales = [];
		left_originales = [];

		top_originales_p = [];
		left_originales_p = [];

		width_originales = [];

		top_originales_off = [];
		left_originales_off = [];

		top_actuales = [];
		left_actuales = [];

		mas_top_enunciado = 0;
		mas_top_opcion = 0;

		offset_espacios = [];



	function valoresOcupados(){

		correctas_arr = [];		
			incorrectas_arr = [];		



		contador_arrastre =0;
			nota_arrastre = 0;

    		for (i = 0; i < cantidad_circulos; i++) { 
    			respuestas_arrastre_html[i] = null;
    		}


			for (i = 0; i < cantidad_circulos; i++) { 

		
				bounds_opcion = document.getElementById('opcion'+i).getBoundingClientRect();

				for (ind = 0; ind < cantidad_circulos; ind++) { 
					//console.log(ind)

					bounds_enunciado = document.getElementById('enunciado'+ind).getBoundingClientRect();

					
	    			if (bounds_opcion.left > bounds_enunciado.left && bounds_opcion.left < bounds_enunciado.left + bounds_enunciado.width && bounds_opcion.top > bounds_enunciado.top && bounds_opcion.top < bounds_enunciado.top + bounds_enunciado.height){
    					respuestas_arrastre_html[ind] = opciones_html[i];
    						if (i == ind) {
    							correctas_arr.push(i)

								nota_arrastre++
							} else {
    							incorrectas_arr.push(i)

							}
    				}

	    		}

	    	}

	    	for (i = 0; i < cantidad_circulos; i++) { 
	    		if (respuestas_arrastre_html[i] != null){
    				contador_arrastre += 1;
    			}
    		}






			if (contador_arrastre == cantidad_circulos){
				
				for (i = 0; i < correctas_arr.length; i++) { 
					$("#opcion"+correctas_arr[i]).css("z-index","0")
					$("#enunciado"+correctas_arr[i]).find(".simbretvf").html(parent.parent.icono_check);
					$("#enunciado"+correctas_arr[i]).find(".simbretvf").html(parent.parent.icono_check);

					
				}

				for (i = 0; i < incorrectas_arr.length; i++) { 
					$("#opcion"+incorrectas_arr[i]).css("z-index","0")
					$("#enunciado"+incorrectas_arr[i]).find(".simbretvf").html(parent.parent.icono_wrong);
					id_corr = $("#opcion"+incorrectas_arr[i]).closest(".enunciado").attr("id");
					id_corr = id_corr.replace("enunciado", "");
					//console.log(id_corr,$("#opcion"+id_corr).find("p").text())
					$("#opcion"+incorrectas_arr[i]).find("span").text($("#opcion"+id_corr).find("p").text());
					$("#opcion"+incorrectas_arr[i]).find("p").addClass("tachado");

					$("#opcion"+incorrectas_arr[i]).find("span").css("display","initial")

				}
				$(".simbretvf").css("display","initial")

				if(tiene_retopev){
					if($(".instruccion_interna").closest("tr").length){
						$(".instruccion_interna").width("110px");
					}

					if(correctas_arr.length==cantidad_circulos){
						$(".msj_rpev").html("Correcto. " + parent.parent.icono_messagecheck)

					} else {
						$(".msj_rpev").html("Incorrecto. "+parent.parent.tx_recuerdmay+" que:")

					}
					ancho_total = $(".escena").width();
					ancho_retro = $(".reto_pev").attr("data-ancho");
					if(ancho_retro==undefined){
						ancho_retro = 300;
					}
					ancho_escenafin = ancho_total - ancho_retro;
					ancho_retro = ancho_retro-20;
					apareceRetroPrEv(ancho_escenafin,ancho_retro);
					//apareceRetroPrEv(980,200);
				}

				parent.parent.audio_boton.play();




				

				
				actualizaPuntajeTxt(nota_arrastre/cantidad_circulos);

					document.getElementById("contenedor_loaderint_2").innerHTML = "";
					document.getElementById("contenedor_loaderint_2").style.visibility = "visible";

					alto_intrint = $("#instruccion_interna").height();

					if(parent.pregunta_actual<parent.cantidad_preguntas){
					document.getElementById("instruccion_interna").innerHTML = "<div> "+parent.parent.tx_puedesmay+" avanzar a la siguiente pregunta. </div>"
						$("#instruccion_interna").height(alto_intrint);

						parent.var_boton_sig.innerHTML = "Ir a la siguiente pregunta "+parent.parent.icono_indica_right;
						parent.var_boton_sig.style.visibility = "visible";

				} else{
					if(parent.tipo=="cuestionario"){
					document.getElementById("instruccion_interna").innerHTML = "<div> "+parent.parent.tx_puedesmay+" avanzar a la pantalla de resultados. </div>"
					parent.var_boton_sig.innerHTML = "Ir a los resultados "+parent.parent.icono_indica_right;
						parent.var_boton_sig.style.visibility = "visible";
					} else if(parent.parent.tipo_curso=="isometrico"||parent.parent.tipo_curso=="plataformas") {
						document.getElementById("instruccion_interna").innerHTML = "<div> "+parent.parent.tx_hasmay+" completado las preguntas. </div>"
						parent.control_flechas(parent.circulo_actual_ok,"clic");
					}
				}
				
						$("#instruccion_interna").height(alto_intrint);


					for (in2 = 0; in2 < cantidad_circulos; in2++) { 
			    		document.getElementById('enunciado'+in2).style.opacity = 1;
    				}

				/*
	
				document.getElementById("contenedor_loaderint").innerHTML = "";
					document.getElementById("contenedor_loaderint").style.visibility = "visible";


					if(parent.pregunta_actual<parent.cantidad_preguntas-1){
					document.getElementById("instruccion_interna").innerHTML = "<div> "+parent.tx_puedesmay+" avanzar a la siguiente pregunta. </div>"

						parent.var_boton_sig.innerHTML =  "Ir a la siguiente pregunta "+parent.parent.icono_indica_right;
						parent.var_boton_sig.style.visibility = "visible";

				} else{
					document.getElementById("instruccion_interna").innerHTML = "<i class='fas fa-angle-right'></i> "+parent.tx_puedesmay+" avanzar a la pantalla de resultados. <i class='fas fa-angle-left'></i>"
					parent.var_boton_sig.innerHTML = "Ir a los resultados "+parent.parent.icono_indica_right;
						parent.var_boton_sig.style.visibility = "visible";
				}


							if(nuevo_puntaje>parent.puntaje){
					parent.puntaje = nuevo_puntaje;
				}
				*/

				//console.log(nuevo_score_arrastre)
				//suma_total();
				

				if (nota_arrastre == cantidad_circulos){
					 
				

					
				} else if (nota_arrastre>0) {

					
					
					
				} else if (nota_arrastre == 0){

					
				}

			} else {
					
					//document.getElementById("instruccion_circulos").innerHTML = "<table class='tabla_instruccion' style='border:none'><td style='border:none' class='corchetes_instrucciones'>{</td><td style='border:none'>Arrastre cada opción hasta el lugar que corresponde.</td><td style='border:none' class='corchetes_instrucciones'>}</td></table>"
					document.getElementById("instruccion_interna").innerHTML = mensaje_instruccion;
					//simbolo_retroalimentacion.visible = false;
					//simbolo_retroalimentacion.alpha = 0;
					
					


			}



	    	//console.log(respuestas_arrastre_html)
					
	    	
		}

		for (i = 0; i < cantidad_circulos; i++) { 

			respuestas_arrastre[i] = -1;
		}

		
		for (i = 0; i < cantidad_circulos; i++) { 

			respuestas_anterior[i] = -1;
		}
		

		for (i = 0; i < cantidad_circulos; i++) { 

			respuestas_anterior[i] = -1;
		}	

		respuestas_arrastre_html = []

		//createjs.Ticker.addEventListener("tick", valoresOcupados);

		
		
		for (i = 0; i < cantidad_circulos; i++) { 


		////DRAG
		
		actual_down = false;

		//var elemento_dragable = new Draggable('opcion'+i);
		var elemento_dragable = $('#opcion'+i).draggable({scroll: false, containment: "document"});

		
  	document.getElementById("opcion"+i).style.visibility = "visible";


		//elemento_dragable.destroy();

		document.getElementById("opcion"+i).addEventListener("click", function(){
    		//console.log("CLIC")
    		if(parent.parent.con_sonidoclic){
				parent.parent.audio_clic.play();
			}

		});

		document.getElementById("opcion"+i).addEventListener("mousedown", function(){
			if(parent.parent.con_sonidoclic){
				parent.parent.audio_clic.play();
			}
			actualizaBoundsEnunciados();

    		//console.log("CLIC")
    		//numero_arreglo_opcion_arrastre_clic = opciones_html.indexOf(this);
    		//activar_opacidad_enunciados = false;
    		//valoresOcupados();
    		numero_arreglo_opcion_arrastre_clic = opciones_html.indexOf(this);

    		//valoresOcupados();
    		//console.log(numero_arreglo_opcion_arrastre_clic)
    		
    		bounds_opcion_actual = document.getElementById('opcion'+numero_arreglo_opcion_arrastre_clic).getBoundingClientRect();
    		for (i = 0; i < cantidad_circulos; i++) { 
    			document.getElementById('opcion'+i).style.zIndex = 3;
    		}
    		document.getElementById('opcion'+numero_arreglo_opcion_arrastre_clic).style.zIndex = 4;

    		top_opa = $('#opcion'+numero_arreglo_opcion_arrastre_clic).offset().top;
    		left_opa = $('#opcion'+numero_arreglo_opcion_arrastre_clic).offset().left;


    		
          	$('#opcion'+numero_arreglo_opcion_arrastre_clic).appendTo("#escena");
			$('#opcion'+numero_arreglo_opcion_arrastre_clic).css("top",top_opa);
			$('#opcion'+numero_arreglo_opcion_arrastre_clic).css("left",left_opa);
			$('#opcion'+numero_arreglo_opcion_arrastre_clic).css("position","absolute");
    		$('#opcion'+numero_arreglo_opcion_arrastre_clic).width(width_originales[numero_arreglo_opcion_arrastre_clic]);
    		/*
    		/*
    		for (i = 0; i < cantidad_circulos; i++) { 
	    		if (bounds_opcion_actual.left > bounds_enunciados[i].left && bounds_opcion_actual.left < bounds_enunciados[i].left + bounds_enunciados[i].width && bounds_opcion_actual.top > bounds_enunciados[i].top && bounds_opcion_actual.top < bounds_enunciados[i].top + bounds_enunciados[i].height) {
	    			
	    			ocupados[i].val = false;
    				if (i == numero_arreglo_opcion_arrastre_clic) {
    					//console.log(i, ind)
    					//ocupados[ind].val = false;

    				}
    			}
    		}
    		*/

    		
    		activar_opacidad_enunciados = true;

    		for (i = 0; i < cantidad_circulos; i++) { 
    			document.getElementById("opcion"+i).style.opacity = 1;
    		}
    		//this.style.opacity = 0.5;
    		//this.style.opacity = 1;
		});

		document.getElementById("opcion"+i).addEventListener("mousemove", function(event){

    		//console.log("MOVE")
    		//valoresOcupados();
    		
    		if (actual_down){

    			x_mouse = event.clientX;
    		y_mouse = event.clientY;
    			//activar_opacidad_enunciados = false;
    			for (i = 0; i < cantidad_circulos; i++) { 
	    			if (x_mouse > bounds_enunciados[i].left && x_mouse < bounds_enunciados[i].left + bounds_enunciados[i].width && y_mouse > bounds_enunciados[i].top && y_mouse < bounds_enunciados[i].top + bounds_enunciados[i].height){
	    				
	    				document.getElementById("enunciado"+i).style.opacity = 0.5;
	    			} else {
	    				document.getElementById("enunciado"+i).style.opacity = 1;
	    			}
	    		}
    		//	console.log("OK")
    		} else {
    		//	console.log("NO_OK")
    		}

		});

		document.getElementById("opcion"+i).addEventListener("mouseup", function(){


			x_mouse = event.clientX;
    		y_mouse = event.clientY;

    		numero_arreglo_opcion_arrastre = opciones_html.indexOf(this);
			
		

			if(left_actuales[numero_arreglo_opcion_arrastre] == left_originales[numero_arreglo_opcion_arrastre] && top_actuales[numero_arreglo_opcion_arrastre] == top_originales[numero_arreglo_opcion_arrastre]){
				intercambio = false;
			} else {
				intercambio = true;

			}
			

			actual_down = false;
			var_en_zona = false;
			disponible = false;
    		for (i = 0; i < cantidad_circulos; i++) { 
	    				
	    			document.getElementById("enunciado"+i).style.opacity = 1;

    				en_zona = x_mouse > bounds_enunciados[i].left && x_mouse < bounds_enunciados[i].left + bounds_enunciados[i].width && y_mouse > bounds_enunciados[i].top - mas_top_enunciado && y_mouse < bounds_enunciados[i].top - mas_top_enunciado + bounds_enunciados[i].height;
    				
    				if(en_zona){
    					lugar_zona = i;
    					var_en_zona = true;
    					disponible = respuestas_arrastre_html[lugar_zona] == null || respuestas_arrastre_html[lugar_zona] == this;
    					numero_arreglo_actual = opciones_html.indexOf(respuestas_arrastre_html[lugar_zona]);
    				}  
    				
	    		} 


    			//console.log(lugar_zona,disponible,respuestas_arrastre_html[lugar_zona]);

	    		if(var_en_zona){
	    			
	    			if(disponible){
	    				
	    				mueveOpcion($( this ),lugar_zona,numero_arreglo_opcion_arrastre);

						
          			} else if(intercambio){
	    				
	    				top_opa = $('#opcion'+numero_arreglo_actual).offset().top;
			    		left_opa = $('#opcion'+numero_arreglo_actual).offset().left;
			    		
			          	$('#opcion'+numero_arreglo_actual).appendTo("#escena");
						$('#opcion'+numero_arreglo_actual).css("top",top_opa);
						$('#opcion'+numero_arreglo_actual).css("left",left_opa);
	    				
						$('#opcion'+numero_arreglo_actual).css("position","absolute");
			    		$('#opcion'+numero_arreglo_actual).width(width_originales[numero_arreglo_actual]);
						
						$("#opcion"+numero_arreglo_actual).stop(true, true).animate( { 'left': offset_espacios[lugar_previo].left+2, 'top': offset_espacios[lugar_previo].top+2}, 'fast',function(){
							agregaAEspacio($("#opcion"+numero_arreglo_actual),lugar_previo)
						});
	    				
	    				mueveOpcion($( this ),lugar_zona,numero_arreglo_opcion_arrastre);
						
	    			}  else {

	    				top_opa = $('#opcion'+numero_arreglo_actual).offset().top;
			    		left_opa = $('#opcion'+numero_arreglo_actual).offset().left;
			    		
			          	$('#opcion'+numero_arreglo_actual).appendTo("#escena");
						$('#opcion'+numero_arreglo_actual).css("top",top_opa);
						$('#opcion'+numero_arreglo_actual).css("left",left_opa);
	    				
						$('#opcion'+numero_arreglo_actual).css("position","absolute");
			    		$('#opcion'+numero_arreglo_actual).width(width_originales[numero_arreglo_actual]);

						$("#opcion"+numero_arreglo_actual).stop(true, true).animate( { 'left': left_originales[numero_arreglo_actual], 'top':top_originales[numero_arreglo_actual]}, 'fast');
	    				
	    				mueveOpcion($( this ),lugar_zona,numero_arreglo_opcion_arrastre);
						

	    			}
	    			
	    			
	    		}  else {
						//$("#txt_arrastre"+numero_arreglo_txt_actual).animate( { 'left': left_originales[numero_arreglo_txt_actual], 'top': top_originales[numero_arreglo_txt_actual]}, 'fast');
						$( this ).stop(true, true).animate( {  'left': left_originales_off[numero_arreglo_opcion_arrastre], 'top': top_originales_off[numero_arreglo_opcion_arrastre]}, 'fast', function()
	    				
          				{
	    				valoresOcupados();
                			
          				});

	    		}

    		//////
    		

    		numero_arreglo_opcion_arrastre = opciones_html.indexOf(this);
    		
    		actual_down = false;

    		
    		

		});

		function mueveOpcion(elemento_dr,l_zona,num_arr_op_arrastre){
			//elemento_dr.stop(true, true).animate( { 'left': bounds_enunciados[l_zona].left - left_originales_off[num_arr_op_arrastre] + 20, 'top': offset_espacios[l_zona].top-bounds_opciones[num_arr_op_arrastre].top+3}, 'fast', function(){
			elemento_dr.stop(true, true).animate( { 'left': offset_espacios[l_zona].left+2, 'top': offset_espacios[l_zona].top+2}, 'fast', function(){
          			agregaAEspacio(elemento_dr,l_zona) 
          					//bounds_enunciados[lugar_zona].top/2
	    			valoresOcupados();
                			
          		});
		}

		function agregaAEspacio(elemento_d,l_zona){
			elemento_d.css("top","2px")
          	elemento_d.css("left","3px")
          	elemento_d.css("margin","0")
          	elemento_d.css('width', 'calc(100% - 30px');
          	
          					
          	elemento_d.appendTo($("#enunciado"+l_zona).find(".espacio").eq(0));
		}
		
		

		document.getElementById("opcion"+i).addEventListener("mousedown", function(){
    		//console.log("DOWN")

    		if(parent.parent.con_sonidoclic){
				parent.parent.audio_clic.play();
			}
    		numero_arreglo_opcion_arrastre = opciones_html.indexOf(this);
    		x_mouse = event.clientX;
    		y_mouse = event.clientY;

    		actual_down = true;


    		for (i = 0; i < cantidad_circulos; i++) { 

    			en_zona_previa = x_mouse > bounds_enunciados[i].left && x_mouse < bounds_enunciados[i].left + bounds_enunciados[i].width && y_mouse > bounds_enunciados[i].top - mas_top_enunciado && y_mouse < bounds_enunciados[i].top - mas_top_enunciado + bounds_enunciados[i].height;
	    		if(en_zona_previa){
	    			lugar_previo = i;
	    		
	    		}
				    		
				document.getElementById("opcion"+i).style.zIndex = 1;

				//left_actuales[i] = $("#opcion"+i).position().left;
				//top_actuales[i] = $("#opcion"+i).position().top;
				
				//left_actuales[i] = document.getElementById('opcion'+i).style.left;
				//top_actuales[i] = document.getElementById('opcion'+i).style.top;


				left_actuales[i] = $('#opcion'+i).offset().left;
				top_actuales[i] = $('#opcion'+i).offset().top;
    		}
    		
    		this.style.zIndex = 2;
    		

		});
		document.getElementById("enunciado"+i).addEventListener("mouseover", function(){

    		

		});


		document.getElementById("opcion"+i).addEventListener("mouseout", function(){
			this.style.opacity = 1;
		});
		document.getElementById("enunciado"+i).addEventListener("mouseout", function(){
			this.style.opacity = 1;
		});

		document.getElementById("opciones_arrastre").addEventListener("click", function(){
    		//console.log("DOWN")
    		//numero_arreglo_opcion_arrastre_clic = opciones_html.indexOf(this);



    		if(parent.parent.con_sonidoclic){
				parent.parent.audio_clic.play();
			}

    		if (activar_opacidad_enunciados){

    			//activar_opacidad_enunciados = false;
    			document.getElementById("opcion"+numero_arreglo_opcion_arrastre_clic).style.left = x_original[numero_arreglo_opcion_arrastre];
	    		document.getElementById("opcion"+numero_arreglo_opcion_arrastre_clic).style.top = 0+"px";

    		} 

    		
    		
    		

		});


		

		///FIN DRAG


		
			var var_opciones = document.getElementById("opcion"+i)//.innerHTML;
			opciones_html[i] = var_opciones;
			opciones_html.push(opciones_html[i]);
			//opciones_html[i].style.left = (i*188) + 21 + "px"
			//opciones_html[i].style.top = 145 + "px"
			x_original[i] = opciones_html[i].style.left;


			bounds_opcion = document.getElementById('opcion'+i).getBoundingClientRect();
			bounds_opciones[i] = bounds_opcion;
			bounds_opciones.push(bounds_opciones[i]);


			left_originales[i] = $("#opcion"+i).position().left;
			top_originales[i] = $("#opcion"+i).position().top - mas_top_opcion;


			//console.log(x_original[i])
			
			//f_opciones_arrastre(var_opciones);	

		/*
			
			opcion_arrastre =   new createjs.DOMElement(var_opciones);//new createjs.Text(var_opciones, "16px ProximaNova-Light", "#FFFFFF");//var_opciones;
			opcion_arrastre.alpha = 1;
			
			opcion_arrastre.x = 0;
			opcion_arrastre.y = top_opciones;
			//opcion_arrastre.regX = 85;
			//opcion_arrastre.regY = 0;

			opciones.push(opcion_arrastre);
			total_textos.push(opcion_arrastre);	

			
			y_original.push(opciones[i].y);

			

			if (i==0){
				opciones[i].x = 0;
				x_original.push(opciones[i].x);
			}
			else {
				
				opciones[i].x = (i*200) ;
				x_original.push(opciones[i].x);

				//console.log(contenedor_opciones[i].x)		
				
				} 
			
		*/
		}

		
		/*	
			
			//opciones.push(opcion_arrastre);
			//opciones_html.push(var_opciones);
			//total_textos.push(opcion_arrastre);
			var bounds_opciones = opcion_arrastre.getBounds();
			//opciones[i].regX = bounds_opciones.width/2;
			//opciones[i].textAlign = "center";
			//opcion_actual = opciones_html[i];
			//f_opciones_arrastre(opcion_actual);

			document.getElementById("enunciado"+i).addEventListener("mouseover", over_opcion_prueba);


			//var_volver.addEventListener("mouseover", over_volver);
			//var_volver.addEventListener("mouseout", out_volver);
			
		} 

		

		opciones.splice(-1, 1);

	*/
		


		
		ocupados = []
		//console.log(bounds_contenedor_opciones[0].width);
		for (i = 0; i < cantidad_circulos; i++) { 
			ocupados[i] = {val: false};
			//console.log(ocupados[i].val);
		}

		actualizaPosOpcArr();
		function actualizaPosOpcArr(){
			ix_p = 0;
			for (i = 0; i < cantidad_circulos; i++) { 
				var var_opciones = document.getElementById("opcion"+i)//.innerHTML;
				opciones_html[i] = var_opciones;
				opciones_html.push(opciones_html[i]);
				//opciones_html[i].style.left = (i*188) + 21 + "px"
				//margin_left_opciones = document.getElementById('opcion'+i).clientWidth+48.5;

				//opciones_html[i].style.left = (i*margin_left_opciones) + 25 + "px"
				//opciones_html[i].style.top = 75 + "px"
				x_original[i] = opciones_html[i].style.left;


				bounds_opcion = document.getElementById('opcion'+i).getBoundingClientRect();
				bounds_opciones[i] = bounds_opcion;
				bounds_opciones.push(bounds_opciones[i]);


				//left_originales[i] = $("#opcion"+i).position().left;
				//top_originales[i] = $("#opcion"+i).position().top - mas_top_opcion;

				//width_originales[i] = $('#opcion'+i).width();
				if(ancho_espacio==0){
					width_originales[i] = $('#opcion'+i).width();
				} else {
					$('#opcion'+i).width(ancho_espacio - 30)
					width_originales[i] = ancho_espacio - 30;//20;//$('#opcion'+i).width();
				}
				
				left_originales[i] = $('#opcion'+i).offset().left;
				top_originales[i] = $('#opcion'+i).offset().top;
				
				left_originales_p[i] = $('#opcion'+i).position().left+30;
				top_originales_p[i] = $('#opcion'+i).position().top;

				left_originales_off[i] = $('#opcion'+i).offset().left;
				top_originales_off[i] = $('#opcion'+i).offset().top;

				left_actuales[i] = $('#opcion'+i).offset().left;
				top_actuales[i] = $('#opcion'+i).offset().top;
				

				var enunciado_html = document.getElementById('enunciado'+i);
				enunciados_html[i] = enunciado_html;

				var alto_texto_enunciado = document.getElementById('enunciado'+i).clientHeight;
				alto_enunciados[i] = alto_texto_enunciado;
				alto_enunciados.push(alto_enunciados[i]);

				var ancho_texto_enunciado = document.getElementById('enunciado'+i).clientWidth;
				ancho_enunciados[i] = ancho_texto_enunciado;
				ancho_enunciados.push(ancho_enunciados[i]);

				
				//c  = element.offsetLeft - element.scrollLeft + element.clientLeft
				//var hola = document.getElementById('enunciado'+i)
				//var x_texto_enunciado = getPosition(hola)
				
				
				var bounds_enunciado = document.getElementById('enunciado'+i).getBoundingClientRect();
				bounds_enunciados[i] = bounds_enunciado;
				bounds_enunciados.push(bounds_enunciados[i]);

				


				//var x_texto_enunciado = document.getElementById('enunciado'+i).offsetLeft - document.getElementById('enunciado'+i).scrollLeft + document.getElementById('enunciado'+i).clientLeft;
				x_enunciados[i] = bounds_enunciados[i].left;
			

				


				//var y_texto_enunciado = document.getElementById('enunciado'+i).offsetTop - document.getElementById('enunciado'+i).scrollTop + document.getElementById('enunciado'+i).clientTop+150;
				y_enunciados[i] = bounds_enunciados[i].top;
				y_enunciados.push(y_enunciados[i]);

				//$(".opciones_arrastre").closest(".xcl").stop(true, true).animate( { 'height':0}, velocidad_lenta, "easeOutBounce", function(){
				//		});
				//if(!arr_hzt){

					//$('#enunciado'+i).find(".espacio").css("flex","0 0 "+(width_originales[i]+30)+"px")
					//nuev_ancopar = (width_originales[i]+30)+"px"
					//$('#enunciado'+i).find(".espacio").stop(true, true).animate( { 'flex-basis':nuev_ancopar}, velocidad_lenta, "easeInOutCubic", function(){

					//$('#enunciado'+i).find(".espacio").stop(true, true).animate( { 'width':(width_originales[i]+30)+"px"}, velocidad_lenta, "easeOutBounce", function(){

						actualizaOffEspacio(ix_p);
						ix_p++
					//});
				//} else {
				//		actualizaOffEspacio(i);
				

				//}
				






			}


			function actualizaOffEspacio(ix_px){
				offset_espacios[ix_px] = $('#enunciado'+ix_px).find(".espacio").eq(0).offset();

			}
          	//$(".opciones_arrastre").attr("class","opciones_arrastre_c")

			for (i = 0; i < cantidad_circulos; i++) { 
				//console.log(left_originales[i])
          		$('#opcion'+i).appendTo("#escena");
				
				$('#opcion'+i).width(width_originales[i]);
				$('#opcion'+i).css("position","absolute");
				$('#opcion'+i).css("left",left_originales[i]);
				$('#opcion'+i).css("top",top_originales[i]);
				$('#opcion'+i).css("margin",0);
				
          		

			}
			//console.log(offset_espacios,bounds_enunciados)
		}

}

function actualizaPuntajeTxt(nota_act){
	console.log(nota_act,"nota_act")

	puntaje_old = parent.parent.puntaje;

	if(parent.parent.znThisPage==parent.parent.pagina_superior && !parent.parent.completado){
		if(parent.tipo=="cuestionario"){

		parent.parent.nuevo_puntaje += (nota_act)*parent.parent.puntaje_maximo/(parent.cantidad_preguntas);
		} else {
		parent.parent.nuevo_puntaje += (nota_act)*parent.parent.puntaje_maximo/(parent.parent.total_preguntas);

		}

		
		
		if(parent.parent.nuevo_puntaje>parent.parent.puntaje_maximo-0.1){
			parent.parent.nuevo_puntaje = parent.parent.puntaje_maximo;
		}

		if(parent.parent.nuevo_puntaje>parent.parent.puntaje){
			parent.parent.puntaje = parent.parent.nuevo_puntaje;
		}

		
		if(puntaje_old != parent.parent.puntaje){
			parent.parent.$(".puntaje_actual").addClass("anima_puntact")

			setTimeout(function(){
				parent.parent.$(".puntaje_actual").text(parseInt(parent.parent.puntaje));
											
			}, 150);

			setTimeout(function(){
				parent.parent.$(".puntaje_actual").removeClass("anima_puntact")
											
			}, 300);
		}

	}
}


function arrastreMultiple(opciones,con_over){
	leerEstilos();

	//var enunciado_html = document.getElementById('enunciado0');
	//enunciados_html[i] = enunciado_html;

	//alto_texto_enunciado = document.getElementById('enunciado0').clientHeight;
	//ancho_texto_enunciado = document.getElementById('enunciado0').clientWidth;
	respuestas_arrastre_html = [];
	top_originales = [];
	left_originales = [];

	activo_arrastre = true;

	top_actuales = [];
	left_actuales = [];

	bounds_enunciados = [];
	enunciados_html = [];
	for (i = 0; i < opciones; i++) { 
	enunciados_html = document.getElementById('enunciado'+i);
	bounds_enunciados[i] = document.getElementById('enunciado'+i).getBoundingClientRect();

	}
	bounds_opciones = [];
	opciones_html = [];
	actual_down = false;




	function valoresOcupadosAM(){

				if(activo_arrastre){	


		contador_arrastre =0;
			nota_arrastre = 0;

    		for (i = 0; i < opciones; i++) { 
    			respuestas_arrastre_html[i] = null;
    		}


			for (i = 0; i < opciones; i++) { 

		
				bounds_opcion = document.getElementById('opcion'+i).getBoundingClientRect();

				for (ind = 0; ind < opciones; ind++) { 
					//console.log(ind)

					bounds_enunciado = document.getElementById('enunciado'+ind).getBoundingClientRect();

					
	    			if (bounds_opcion.left > bounds_enunciado.left && bounds_opcion.left < bounds_enunciado.left + bounds_enunciado.width && bounds_opcion.top > bounds_enunciado.top && bounds_opcion.top < bounds_enunciado.top + bounds_enunciado.height){
    					respuestas_arrastre_html[ind] = opciones_html[i];
    						if (i == ind) {
								nota_arrastre++
							}
    				}

	    		}

	    	}

	    	for (i = 0; i < opciones; i++) { 
	    		if (respuestas_arrastre_html[i] != null){
    				contador_arrastre += 1;
    			}
    		}






			if (contador_arrastre == opciones){
				activo_arrastre = false;

					for (i = 0; i < opciones; i++) { 
		var elemento_dragable = $('#opcion'+i).draggable('disable');
	}


				parent.parent.nuevo_puntaje += (nota_arrastre/opciones)*parent.parent.puntaje_maximo/(parent.cantidad_preguntas);

				if(parent.parent.nuevo_puntaje>parent.parent.puntaje_maximo-0.1){
					parent.parent.nuevo_puntaje = parent.parent.puntaje_maximo;
				}

				if(parent.parent.nuevo_puntaje>parent.parent.puntaje){
					parent.parent.puntaje = parent.parent.nuevo_puntaje;
				}
				/*
	

	//parent.puntaje += parseInt((nota_arrastre/cantidad_circulos)*100/(parent.znPages-2));
					//document.getElementById("contenido_c0").style.zIndex = -1;
					//	suma_total();	
				parent.parent.audio_boton.play();

					document.getElementById("contenedor_loaderint").innerHTML = "";
					document.getElementById("contenedor_loaderint").style.visibility = "visible";


					if(parent.pregunta_actual<parent.cantidad_preguntas-1){
					document.getElementById("instruccion_circulos").innerHTML = "<div> "+parent.tx_puedesmay+" avanzar a la siguiente pregunta. </div>"

				}
	    		for (i = 0; i < opciones; i++) { 

				//document.getElementById("enunciado"+i).style.backgroundColor = "#cccccc";
				}
				//document.getElementById("contenedor_loaderint").innerHTML = "";
				//document.getElementById("contenedor_loaderint").style.visibility = "visible";

				//document.getElementById("retro_aprend"+parent.numero_arreglo_personaje_actual).className = "retro_aprend2";

				/*
				nuevo_puntaje = Math.round(nota_arrastre/cantidad_circulos*100);
				if(nuevo_puntaje>parent.puntaje){
					parent.puntaje = nuevo_puntaje;
				}

				*/

				if (nota_arrastre == opciones){
					
					/* 
					document.getElementById("instruccion_circulos").innerHTML = "<table class='tabla_instruccion' style='border:none'><td style='border:none' class='corchetes_instrucciones'>{</td><td style='border:none'>!Muy bien"+parent.tx_hasmay+" ubicado de forma correcta todas las opciones.</td><td style='border:none' class='corchetes_instrucciones'>}</td></table>"
					document.getElementById("contenido_c0").style.zIndex = -1;
					//elemento_dragable.destroy();
					document.getElementById("simbolo_retroalimentacion").style.backgroundColor = "#06CFDC";
					document.getElementById("simbolo_retroalimentacion").innerHTML = "å";

					if (simbolo_retroalimentacion.alpha != 1){
					simbolo_retroalimentacion.visible = true;
					simbolo_retroalimentacion.scaleX = 3;
					simbolo_retroalimentacion.scaleY = 3;

					createjs.Tween.get(simbolo_retroalimentacion).to({alpha:1,scaleX:1,scaleY:1},velocidad_lenta);
					}

					suma_total();

					if(parent.znThisPage == parent.znPages){
							parent.completado = true;

						}

					*/

					


					
				} else {
					
							}
							


						


						

			
			} else {
					
					//document.getElementById("instruccion_circulos").innerHTML = "<table class='tabla_instruccion' style='border:none'><td style='border:none' class='corchetes_instrucciones'>{</td><td style='border:none'>Arrastre cada opción hasta el lugar que corresponde.</td><td style='border:none' class='corchetes_instrucciones'>}</td></table>"
					//document.getElementById("instruccion_circulos").innerHTML = mensaje_instruccion;
					//simbolo_retroalimentacion.visible = false;
					//simbolo_retroalimentacion.alpha = 0;
					
						
							



			}
		


	    	//console.log(respuestas_arrastre_html)
					
	    	}
		}

	for (i = 0; i < opciones; i++) { 
		var elemento_dragable = $('#opcion'+i).draggable({scroll: false, containment: "document"});
		opciones_html[i] = document.getElementById('opcion'+i);
		bounds_opciones[i] = document.getElementById('opcion'+i).getBoundingClientRect();
		
		left_originales[i] = $("#opcion"+i).position().left;
		top_originales[i] = $("#opcion"+i).position().top;

		document.getElementById("opcion"+i).addEventListener("mousemove", function(event){

			if(activo_arrastre){
			//console.log(parent.stage.mouseX,parent.stage.mouseY)
			x_mouse = event.clientX;
    		y_mouse = event.clientY;
    		if(actual_down){
				for (int = 0; int < opciones; int++) { 

		   			if (x_mouse > bounds_enunciados[int].left && x_mouse < bounds_enunciados[int].left + bounds_enunciados[int].width && y_mouse > bounds_enunciados[int].top && y_mouse < bounds_enunciados[int].top + bounds_enunciados[int].height){
			    				
		   				document.getElementById("enunciado"+int).style.backgroundColor = "#666666";
		   			} else {
		   				document.getElementById("enunciado"+int).style.backgroundColor = "#cccccc";
			    	}
		    	}
	    	}
	    	if(con_over){

    		numero_arreglo_opcion_arrastre = opciones_html.indexOf(this);

    		x_mouse = event.clientX;
    		y_mouse = event.clientY;

    		alto_pop = document.getElementById("pop"+numero_arreglo_opcion_arrastre).clientHeight;
			ancho_pop = document.getElementById("pop"+numero_arreglo_opcion_arrastre).clientWidth;
			
			
			document.getElementById("pop"+numero_arreglo_opcion_arrastre).style.left = (x_mouse-(ancho_pop/2))+"px";
			document.getElementById("pop"+numero_arreglo_opcion_arrastre).style.top = (y_mouse-alto_pop-10)+"px";
			
		}
		}
		});



		document.getElementById("opcion"+i).addEventListener("mouseover", function(event){
		if(con_over){

    		numero_arreglo_opcion_arrastre = opciones_html.indexOf(this);

    		
			document.getElementById("pop"+numero_arreglo_opcion_arrastre).className = "pop_activ_aparece";
			
			
		}
		});

		document.getElementById("opcion"+i).addEventListener("mouseout", function(event){
		if(con_over){

    		numero_arreglo_opcion_arrastre = opciones_html.indexOf(this);

    		
			document.getElementById("pop"+numero_arreglo_opcion_arrastre).className = "pop_activ";
			
			
		}
		});
	


		document.getElementById("opcion"+i).addEventListener("mouseup", function(event){
			if(activo_arrastre){
			//console.log(parent.stage.mouseX,parent.stage.mouseY)
    		numero_arreglo_opcion_arrastre = opciones_html.indexOf(this);

    		if(left_actuales[numero_arreglo_opcion_arrastre] == left_originales[numero_arreglo_opcion_arrastre] && top_actuales[numero_arreglo_opcion_arrastre] == top_originales[numero_arreglo_opcion_arrastre]){
				intercambio = false;
			} else {
				intercambio = true;

			}
			

    		actual_down = false;
    		var_en_zona = false;
			disponible = false;

			x_mouse = event.clientX;
    		y_mouse = event.clientY;


    			for (intb = 0; intb < opciones; intb++) { 

    				en_zona = x_mouse > bounds_enunciados[intb].left && x_mouse < bounds_enunciados[intb].left + bounds_enunciados[intb].width && y_mouse > bounds_enunciados[intb].top && y_mouse < bounds_enunciados[intb].top + bounds_enunciados[intb].height;
    				
    				if(en_zona){
    					lugar_zona = intb;
    					var_en_zona = true;
    					disponible = respuestas_arrastre_html[lugar_zona] == null || respuestas_arrastre_html[lugar_zona] == this;
    					numero_arreglo_actual = opciones_html.indexOf(respuestas_arrastre_html[lugar_zona]);
    				}  
    				
	    		} 
	    		
	    		if(var_en_zona){
	    			
	    			if(disponible){
						$( this ).animate( { 'left': bounds_enunciados[lugar_zona].left + 4, 'top': bounds_enunciados[lugar_zona].top-11}, 'fast', function()
          				{
	    				valoresOcupadosAM();
                			
          				});
          			} else if(intercambio){
	    				
	    				$("#opcion"+numero_arreglo_actual).animate( { 'left': bounds_enunciados[lugar_previo].left+4, 'top': bounds_enunciados[lugar_previo].top-11}, 'fast');
						$( this ).animate( { 'left': bounds_enunciados[lugar_zona].left + 4, 'top': bounds_enunciados[lugar_zona].top-11}, 'fast', function()
	    				
          				{
	    				valoresOcupadosAM();
                			
          				});
	    			}  else {
						$("#opcion"+numero_arreglo_actual).animate( { 'left': left_originales[numero_arreglo_actual], 'top': top_originales[numero_arreglo_actual]}, 'fast');
						$( this ).animate( { 'left': bounds_enunciados[lugar_zona].left + 4, 'top': bounds_enunciados[lugar_zona].top-11}, 'fast', function()
	    				
          				{
	    				valoresOcupadosAM();
                			
          				});

	    			}
	    			
	    			
	    		}  else {
						//$("#txt_arrastre"+numero_arreglo_txt_actual).animate( { 'left': left_originales[numero_arreglo_txt_actual], 'top': top_originales[numero_arreglo_txt_actual]}, 'fast');
						$( this ).animate( {  'left': left_originales[numero_arreglo_opcion_arrastre], 'top': top_originales[numero_arreglo_opcion_arrastre]}, 'fast', function()
	    				
          				{
	    				valoresOcupadosAM();
                			
          				});

	    		}

    		//////
    		

    		numero_arreglo_opcion_arrastre = opciones_html.indexOf(this);
    		
    		actual_down = false;
    		/*
			for (intb = 0; intb < opciones; intb++) { 
					console.log(intb,opciones)

		   			if (x_mouse > bounds_enunciados[intb].left && x_mouse < bounds_enunciados[intb].left + bounds_enunciados[intb].width && y_mouse > bounds_enunciados[intb].top && y_mouse < bounds_enunciados[intb].top + bounds_enunciados[intb].height){
			    				
						$( this ).animate( { 'left': bounds_enunciados[intb].left + 4, 'top': bounds_enunciados[intb].top - 11}, 'fast', function()
						{

							this.className = "opcion_preg2";
							console.log(intb)
							document.getElementById("enunciado"+intb).style.backgroundColor = "#cccccc";

							document.getElementById("contenedor_loaderint").innerHTML = "";
							document.getElementById("contenedor_loaderint").style.visibility = "visible";

							document.getElementById("retro_aprend"+parent.numero_arreglo_personaje_actual).className = "retro_aprend2";

							if(numero_arreglo_opcion_arrastre==0){
								parent.parent.audio_correcto.play();

								document.getElementById("retro_preg"+parent.numero_arreglo_personaje_actual).className = "retro_preg2";
								document.getElementById("retro_preg"+parent.numero_arreglo_personaje_actual).innerHTML = "¡Correcto!<br/>"+parent.tx_tienesmay+" claro que:";	

								if(parent.parent.estado_preguntas[parent.parent.znThisPage-1][parent.numero_arreglo_personaje_actual][parent.num_reto-1].val == false){
								parent.parent.estado_preguntas[parent.parent.znThisPage-1][parent.numero_arreglo_personaje_actual][parent.num_reto-1].val = true;
								//razon_correctos = cant_correctas_elegidas / opciones_correctas.length;
								nota_actual = parent.parent.puntaje_pregunta * 1;
								nota_actual = parseInt(nota_actual);

								if(parent.parent.znThisPage<5){
									nota_actual = 5;
								} else {
									if(parent.numero_arreglo_personaje_actual==3){
										nota_actual = 5;

									} else if (parent.numero_arreglo_personaje_actual==4){
										nota_actual = 6;

									}
								}

								sumaPuntos(nota_actual);
								}
							} else {
								parent.parent.audio_incorrecto.play();

								document.getElementById("retro_preg"+parent.numero_arreglo_personaje_actual).className = "retro_preg2";
								document.getElementById("retro_preg"+parent.numero_arreglo_personaje_actual).innerHTML = "Incorrecto.<br/>"+parent.tx_recuerdmay+" que:";
							}
							
							document.getElementById("corr0").innerHTML = "<span class='simbolos'>å</span>";	
							
							for (i = 0; i < opciones-1; i++) {
								document.getElementById("incorr"+i).innerHTML = "<span class='simbolos'>ã</span>";	
										
							}


							if(parent.num_reto<parent.parent.preguntas_pantallas[parent.parent.znThisPage-1][parent.numero_arreglo_personaje_actual]){
							parent.document.getElementById("txt_btnsig"+parent.numero_arreglo_personaje_actual).innerHTML = "SIGUIENTE PREGUNTA";
							setTimeout(function(){
								parent.parent.audio_mapa.play();

								parent.document.getElementById("cont_reto"+parent.numero_arreglo_personaje_actual).style.visibility = "visible";							
							}, 3100);
							} else {
								apareceMiniMapaActividad(parent.numero_arreglo_personaje_actual);
							}
							


						});
		   				
		   			} else {
			    		

		   				$( this ).animate( { 'left': bounds_opciones[numero_arreglo_opcion_arrastre].left, 'top': bounds_opciones[numero_arreglo_opcion_arrastre].top-15}, 'fast', function()
			    		{
			    				//valoresOcupados();
		                });
			    	}
			    	
	    	}
	    	*/
	    	}
		});
		document.getElementById("opcion"+i).addEventListener("mousedown", function(event){
			if(activo_arrastre){

			if(parent.parent.con_sonidoclic){
				parent.parent.audio_clic.play();
			}
		
    		//console.log("DOWN")
    		numero_arreglo_opcion_arrastre = opciones_html.indexOf(this);
    		
    		x_mouse = event.clientX;
    		y_mouse = event.clientY;

    		actual_down = true;
    		for (i = 0; i < opciones; i++) { 

    			en_zona_previa = x_mouse > bounds_enunciados[i].left && x_mouse < bounds_enunciados[i].left + bounds_enunciados[i].width && y_mouse > bounds_enunciados[i].top && y_mouse < bounds_enunciados[i].top + bounds_enunciados[i].height;
	    		if(en_zona_previa){
	    			lugar_previo = i;
	    		
	    		}
				    		
				document.getElementById("opcion"+i).style.zIndex = 1;

				left_actuales[i] = $("#opcion"+i).position().left;
				top_actuales[i] = $("#opcion"+i).position().top;
				
    		}
    		
    		this.style.zIndex = 2;
    		}
		});
		document.getElementById("enunciado"+i).addEventListener("mouseout", function(event){

	
    		//numero_arreglo_enunciado_arrastre = enunciados_html.indexOf(this);

			
	   		//document.getElementById("enunciado"+numero_arreglo_enunciado_arrastre).style.backgroundColor = "#cccccc";
			
			});
		
	}

	
	
	

}




function verdaderoFalso(cantidad_circulos){
	leerEstilos();

	correctos = [];
		incorrectos = [];

			
			for (i = 0; i < cantidad_circulos; i++) { 
				var_correcta = document.getElementById("correcto"+i);
				correctos[i] = var_correcta;
				correctos.push(correctos[i]);
				
				//total_textos.push(correctos[i]);
				

				opcion_actual = correctos[i];
				f_opciones_vf2(opcion_actual);

			}

			correctos.splice(-1, 1);

			for (i = 0; i < cantidad_circulos; i++) { 
				var_incorrecta = document.getElementById("incorrecto"+i);
				incorrectos[i] = var_incorrecta;
				incorrectos.push(incorrectos[i]);

				//total_textos.push(incorrectos[i]);
				
				opcion_actual = incorrectos[i];
				f_opciones_vf2(opcion_actual);
		
			}

			incorrectos.splice(-1, 1);

			correctos_vf = []
			for (i = 0; i < cantidad_circulos; i++) { 
				correctos_vf[i] = {val: false};
				//console.log(ocupados[i].val);
				correctos_vf.push(correctos_vf[i]);
			}
			correctos_vf.splice(-1, 1);

			incorrectos_vf = []
			for (i = 0; i < cantidad_circulos; i++) { 
				incorrectos_vf[i] = {val: false};
				//console.log(ocupados[i].val);
				incorrectos_vf.push(incorrectos_vf[i]);
			}
			incorrectos_vf.splice(-1, 1);








			function f_opciones_vf2(opcion_actual){

		opcion_actual.addEventListener("mouseover", over_vf);
		function over_vf(){
			

			numero_arreglo_vf1 = incorrectos.indexOf(opcion_actual);
			numero_arreglo_vf2 = correctos.indexOf(opcion_actual);


			if (numero_arreglo_vf1 != -1 && incorrectos_vf[numero_arreglo_vf1].val == true){
				
			} else if (numero_arreglo_vf2 != -1 && correctos_vf[numero_arreglo_vf2].val == true){
				
			} else {
				//opcion_actual.style.color = "#FFFFFF"
				//opcion_actual.style.backgroundColor = "#999999";
				//opcion_actual.className = "#999999";
			}
			
			
		}
		
		opcion_actual.addEventListener("mouseout", out_vf);
		function out_vf(){
			numero_arreglo_vf1 = incorrectos.indexOf(opcion_actual);
			numero_arreglo_vf2 = correctos.indexOf(opcion_actual);


			if (numero_arreglo_vf1 != -1 && incorrectos_vf[numero_arreglo_vf1].val == true){
				
			} else if (numero_arreglo_vf2 != -1 && correctos_vf[numero_arreglo_vf2].val == true){
				
			} else {
				//opcion_actual.style.color = "#0063A9"
				//opcion_actual.style.backgroundColor = "#e5e0df";

			}
			
			
			
		}
		
		opcion_actual.addEventListener("click", clic_vf);
		function clic_vf()
		{
			
			if(parent.parent.con_sonidoclic){
				parent.parent.audio_clic.play();
			}

			selecciones = 0;
			selecciones_correctas = 0;
			numero_arreglo_vf1 = incorrectos.indexOf(opcion_actual);
			numero_arreglo_vf2 = correctos.indexOf(opcion_actual);

			numero_arreglo_vf = numero_arreglo_vf1 + numero_arreglo_vf2 + 1;
			




		

						//console.log(color_seleccion, color_no_seleccion)

			if (numero_arreglo_vf2 == -1) {
				document.getElementById("incorrecto"+numero_arreglo_vf).className = "vf_seleccionado";
				document.getElementById("correcto"+numero_arreglo_vf).className = "verdadero";

				//document.getElementById("incorrecto"+numero_arreglo_vf).style.color = color_seleccion;
				//document.getElementById("correcto"+numero_arreglo_vf).style.color = color_no_seleccion;

				//document.getElementById("incorrecto"+numero_arreglo_vf).style.backgroundColor = bgcolor_seleccion;
				//document.getElementById("correcto"+numero_arreglo_vf).style.backgroundColor = bgcolor_no_seleccion;
				
				correctos_vf[numero_arreglo_vf].val = false;
				incorrectos_vf[numero_arreglo_vf].val = true;
			} else {
				//document.getElementById("incorrecto"+numero_arreglo_vf).style.color = color_no_seleccion;
				//document.getElementById("correcto"+numero_arreglo_vf).style.color = color_seleccion;
				
				document.getElementById("incorrecto"+numero_arreglo_vf).className = "verdadero";
				document.getElementById("correcto"+numero_arreglo_vf).className = "vf_seleccionado";

				//document.getElementById("incorrecto"+numero_arreglo_vf).style.backgroundColor= bgcolor_no_seleccion;
				//document.getElementById("correcto"+numero_arreglo_vf).style.backgroundColor = bgcolor_seleccion;
				
				correctos_vf[numero_arreglo_vf].val = true;
				incorrectos_vf[numero_arreglo_vf].val = false;
			}

			selecciones_correctas = 0;
			coun_inc = 0;
			for (i = 0; i < cantidad_circulos; i++) { 
				if (correctos_vf[i].val == true) {
					selecciones_correctas += 1;
				}
				if (incorrectos_vf[i].val == true) {
					coun_inc += 1;
				}

			}

			selecciones = selecciones_correctas + coun_inc;
			//console.log(selecciones,selecciones_correctas,coun_inc)

			/*
			for (i = 0; i < cantidad_circulos; i++) { 
				variable1 = document.getElementById("incorrecto"+i).style.backgroundColor;
				variable2 = document.getElementById("correcto"+i).style.backgroundColor;
				
				if (variable1 != variable2){
					selecciones += 1;
				}	


				if (variable2 == color_seleccion)
				{
					selecciones_correctas += 1;
					
				}
			}
			*/

			
				
				if (selecciones == cantidad_circulos) {



						parent.parent.audio_boton.play();


				parent.parent.nuevo_puntaje += (selecciones_correctas/cantidad_circulos)*parent.parent.puntaje_maximo/(parent.cantidad_preguntas);
				
				if(parent.parent.nuevo_puntaje>parent.parent.puntaje_maximo-0.1){
					parent.parent.nuevo_puntaje = parent.parent.puntaje_maximo;
				}


				if(parent.parent.nuevo_puntaje>parent.parent.puntaje){
					parent.parent.puntaje = parent.parent.nuevo_puntaje;
				}


					document.getElementById("contenedor_loaderint_2").innerHTML = "";
					document.getElementById("contenedor_loaderint_2").style.visibility = "visible";

					alto_intrint = $("#instruccion_interna").height();
					if(parent.pregunta_actual<parent.cantidad_preguntas){
					document.getElementById("instruccion_interna").innerHTML = "<div> "+parent.parent.tx_puedesmay+" avanzar a la siguiente pregunta. </div>"
						parent.var_boton_sig.innerHTML = "Ir a la siguiente pregunta "+parent.parent.icono_indica_right;
						parent.var_boton_sig.style.visibility = "visible";

				} else{
					if(parent.tipo=="cuestionario"){
					document.getElementById("instruccion_interna").innerHTML = "<div> "+parent.parent.tx_puedesmay+" avanzar a la pantalla de resultados. </div>"
					parent.var_boton_sig.innerHTML = "Ir a los resultados "+parent.parent.icono_indica_right;
						parent.var_boton_sig.style.visibility = "visible";
					} else if(parent.parent.tipo_curso=="isometrico") {
						document.getElementById("instruccion_interna").innerHTML = "<div> "+parent.parent.tx_hasmay+" completado las preguntas. </div>"

					}
				}
				


						$("#instruccion_interna").height(alto_intrint);




					//parent.puntaje += parseInt((selecciones/cantidad_circulos)*100/(parent.znPages-2));
				//	document.getElementById("contenido_c0").style.zIndex = -1;
				//		suma_total();	
				//	document.getElementById("instruccion_circulos").innerHTML = "<div> "+parent.tx_puedesmay+" avanzar a la siguiente pregunta. </div>"
				

					
				} else {
					//mensaje_actual_vf = mensaje_instruccion == document.getElementById("instruccion_circulos").innerHTML;
					
					//if(!mensaje_actual_vf){
					//createjs.Tween.get(instruccion_circulos).to({alpha:0},velocidad_lenta).call(fInstruccion2);
				    //function fInstruccion2() {
					//document.getElementById("instruccion_circulos").style.color = "red";
					
					//document.getElementById("instruccion_circulos").innerHTML = mensaje_instruccion;
					//createjs.Tween.get(instruccion_circulos).to({alpha:1},velocidad_lenta);
					//}
					//}
					//SimboloRetroalimentacionDesaparece();

				}

				


			

		}



	}



}

function resetActivInt(){
	parent.parent.audio_incorrecto.play();
}


function preguntaSeleccion(cantidad_correctas,cantidad_incorrectas){
	leerEstilos();
	total_opciones = $(".opcion_preg").length;
	$(".opcion_preg").append("<div class='simb_pev'></div>");

	
	

	
	opciones_correctas = [];
	opciones_incorrectas = [];

	correctas_elegidas = [];	
	incorrectas_elegidas = [];
	
	for (i = 0; i < cantidad_correctas; i++) {
		correctas_elegidas[i] = {val: false};
		opciones_correctas[i] = document.getElementById("correcto"+i); 
		document.getElementById("correcto"+i).addEventListener("click", clicOpcionSeleccion);		
	}
	for (i = 0; i < cantidad_incorrectas; i++) {
		incorrectas_elegidas[i] = {val: false};
		opciones_incorrectas[i] = document.getElementById("incorrecto"+i); 
		document.getElementById("incorrecto"+i).addEventListener("click", clicOpcionSeleccion);			
	}

	tieneRetroPrEv();
	
	/*

		opcion_actual.addEventListener("click", clic_correcto_preg);

		function clic_correcto_preg(){
    		numero_arreglo_opcion_actual = total_correctos.indexOf(opcion_actual);

			if(seleccionados_opciones[numero_arreglo_opcion_actual].val==false){
    		seleccionados_opciones[numero_arreglo_opcion_actual].val = true;
			control_flechas(numero_arreglo_opcion_actual,"clic_pregunta");

			this.style.backgroundColor = "#0074d3";
			document.getElementById("incorrecto"+numero_arreglo_opcion_actual).style.backgroundColor = "#666666";
			document.getElementById("retro_preg"+numero_arreglo_opcion_actual).className = "retro_preg2";
			document.getElementById("retro_preg"+numero_arreglo_opcion_actual).innerHTML = "¡Correcto!";
			siguientePregunta();
			sumaPuntos(numero_arreglo_opcion_actual);

			numero_en_arreglo=parent.grupos_preguntas[parent.znThisPage-1][numero_arreglo_opcion_actual];

			}
		}
	
	*/

	function clicOpcionSeleccion(){
	cantidad_elegidas = 0;
	cant_correctas_elegidas = 0;



	numero_arreglo_opcion_actual = opciones_correctas.indexOf(this);
	if(numero_arreglo_opcion_actual!=-1){
		if(correctas_elegidas[numero_arreglo_opcion_actual].val){
			correctas_elegidas[numero_arreglo_opcion_actual].val = false;
			this.className = "opcion_preg"
		} else {
			correctas_elegidas[numero_arreglo_opcion_actual].val = true;
			this.className = "opcion_preg2"
		}
	} else {
		numero_arreglo_opcion_actual = opciones_incorrectas.indexOf(this);
		if(incorrectas_elegidas[numero_arreglo_opcion_actual].val){
			incorrectas_elegidas[numero_arreglo_opcion_actual].val = false;
			this.className = "opcion_preg"
		} else {
			incorrectas_elegidas[numero_arreglo_opcion_actual].val = true;
			this.className = "opcion_preg2"
		}
	}

	for (i = 0; i < correctas_elegidas.length; i++) {
		if(correctas_elegidas[i].val){
			cantidad_elegidas++;
			cant_correctas_elegidas++;
		}
	}

	for (i = 0; i < incorrectas_elegidas.length; i++) {
		if(incorrectas_elegidas[i].val){
			cantidad_elegidas++;
		}	
	}
	
	
	if(parent.parent.hasta_acertaractiv&&cantidad_elegidas == correctas_elegidas.length){
		if(cant_correctas_elegidas<cantidad_elegidas){
			resetActivInt();
				$(".opcion_preg2").attr("class","opcion_preg")

			for (i = 0; i < correctas_elegidas.length; i++) {
				correctas_elegidas[i].val = false;
			}

			for (i = 0; i < incorrectas_elegidas.length; i++) {
				incorrectas_elegidas[i].val = false;
			}

			cant_erroractivint = cantidad_elegidas - cant_correctas_elegidas;
			if(cant_erroractivint==1){
				num_errortxt = "error"
			} else {
				num_errortxt = "errores"
			}
			if(cantidad_elegidas==1){
				if(total_opciones==2){
					document.getElementById("instruccion_interna").innerHTML = "<div> "+parent.parent.tx_seleccionastemin+" la opción incorrecta. "+ parent.parent.tx_siguelomay+" intentando. </div>"

				} else {
					document.getElementById("instruccion_interna").innerHTML = "<div> "+parent.parent.tx_seleccionastemin+" una opción incorrecta. "+ parent.parent.tx_siguelomay+" intentando. </div>"
				}

			} else {
				document.getElementById("instruccion_interna").innerHTML = "<div> "+parent.parent.tx_tuvistemay+" "+cant_erroractivint +" "+ num_errortxt+". "+ parent.parent.tx_siguelomay+" intentando. </div>"
			}

			cantidad_elegidas = 0;
			cant_correctas_elegidas = 0;

		} else {
			document.getElementById("instruccion_interna").innerHTML = "<div> ¡Muy bien! </div>"

		}
	}
	
	if(cantidad_elegidas == correctas_elegidas.length){
		parent.parent.audio_boton.play();

		if(tiene_retopev){
			ancho_total = $(".escena").width();
			ancho_retro = $(".reto_pev").attr("data-ancho");
			if(ancho_retro==undefined){
				ancho_retro = 300;
			}
			ancho_escenafin = ancho_total - ancho_retro;
			ancho_retro = ancho_retro-20;
			apareceRetroPrEv(ancho_escenafin,ancho_retro);
			//apareceRetroPrEv(780,400);

			for (i = 0; i < cantidad_correctas; i++) {
			$("#correcto"+i).find(".simb_pev").html(parent.parent.icono_check)
		}
		for (i = 0; i < cantidad_incorrectas; i++) {
			$("#incorrecto"+i).find(".simb_pev").html(parent.parent.icono_wrong)
			
		}
		}


		for (i = 0; i < cantidad_correctas; i++) {
			$("#correcto"+i).find(".simb_pev").html(parent.parent.icono_check)
		}
		for (i = 0; i < cantidad_incorrectas; i++) {
			$("#incorrecto"+i).find(".simb_pev").html(parent.parent.icono_wrong)
			
		}
		if(!parent.parent.hasta_acertaractiv){
			$(".simb_pev").fadeIn(velocidad_media)
		}
		
		puntaje_custom = $("div[data-puntos]").length;

		//console.log(parent.pregunta_actual,"pregunta_actual")
		
		if(puntaje_custom>0){

			parent.parent.nuevo_puntaje += parseInt($(".opcion_preg2").attr("data-puntos"),10);
			console.log(parent.parent.nuevo_puntaje);

			//if((parent.parent.nuevo_puntaje/150)*100>99.9){
			//	parent.parent.nuevo_puntaje = 100;
			//}

			$('.opciones_preg > div').each(function(index) { 
				console.log(index)
				//console.log(this.className)
				if(this.className=="opcion_preg2"){
					parent.objetos_recomendaop[parent.pregunta_actual-1].opselev = index;
					console.log(index)

				}
			});


			if((parent.parent.nuevo_puntaje/150)*parent.parent.puntaje_maximo>parent.parent.puntaje){
				parent.parent.puntaje = parseInt(((parent.parent.nuevo_puntaje/150)*parent.parent.puntaje_maximo),10);
			} 
			
			//console.log(parent.parent.puntaje);

			//console.log(parent.puntaje_pregunta,parent.pregunta_actual-1)
			//parent.puntaje_pregunta[parent.pregunta_actual-1] = parseInt($(".opcion_preg2").attr("data-puntos"),10);

			//console.log(parent.puntaje_pregunta)


			parent.objetos_recomendaop[parent.pregunta_actual-1].puntopsel = parseInt($(".opcion_preg2").attr("data-puntos"),10);

			console.log(parent.objetos_recomendaop[parent.pregunta_actual-1].puntopsel)
			console.log(parent.objetos_recomendaop)


		} else {	

				/*parent.parent.nuevo_puntaje += (cant_correctas_elegidas/cantidad_elegidas)*parent.parent.puntaje_maximo/(parent.cantidad_preguntas);
				
				if(parent.parent.nuevo_puntaje>parent.parent.puntaje_maximo-0.1){
					parent.parent.nuevo_puntaje = parent.parent.puntaje_maximo;
				}

				if(parent.parent.nuevo_puntaje>parent.parent.puntaje){
					parent.parent.puntaje = parent.parent.nuevo_puntaje;

				}*/
				actualizaPuntajeTxt(cant_correctas_elegidas/cantidad_elegidas);


			}
				if(cant_correctas_elegidas==cantidad_elegidas){
					$(".msj_rpev").html("Muy bien " + parent.parent.icono_messagecheck)

				} else {
					$(".msj_rpev").html(""+parent.parent.tx_recuerdmay+"")

				}
				
					document.getElementById("contenedor_loaderint_2").innerHTML = "";
					document.getElementById("contenedor_loaderint_2").style.visibility = "visible";

					alto_intrint = $("#instruccion_interna").height();
				
	setTimeout(function(){

					if(parent.pregunta_actual<parent.cantidad_preguntas){
					document.getElementById("instruccion_interna").innerHTML = "<div>"+ parent.parent.tx_puedesmay+" avanzar a la siguiente pregunta. </div>"
						
						parent.var_boton_sig.innerHTML = "Ir a la siguiente pregunta "+parent.parent.icono_indica_right;
						parent.var_boton_sig.style.visibility = "visible";

				} else{


					if(parent.tipo=="cuestionario"){
					document.getElementById("instruccion_interna").innerHTML = "<div> "+parent.parent.tx_puedesmay+" avanzar a la pantalla de resultados. </div>"
					parent.var_boton_sig.innerHTML = "Ir a los resultados "+parent.parent.icono_indica_right;
						parent.var_boton_sig.style.visibility = "visible";
					} else if(parent.parent.tipo_curso=="isometrico"||parent.parent.tipo_curso=="plataformas") {
						console.log(parent.parent.preguntas_pantallas)
						console.log(parent.parent.preguntas_pantallas[parent.parent.znThisPage-1][parent.circulo_actual_ok])
						console.log(parent.num_reto)

						if(parent.num_reto<parent.parent.preguntas_pantallas[parent.parent.znThisPage-1][parent.circulo_actual_ok]){
							//parent.var_boton_sig.innerHTML = "Siguiente pregunta";
							parent.$(".boton_siguiente").text("Siguiente pregunta")
							parent.$(".boton_siguiente").fadeIn("velocidad_media");

						} else {
							document.getElementById("instruccion_interna").innerHTML = "<div> "+parent.parent.tx_hasmay+" completado las preguntas. </div>"


						}
						

						//parent.$(".boton_volver").fadeIn(velocidad_media);


		
						parent.control_flechas(parent.circulo_actual_ok,"clic");

					}

							
				}
			},tiempo_btnsig);
				
						$("#instruccion_interna").height(alto_intrint);
				
				
		//console.log(parent.parent.estado_preguntas[parent.parent.znThisPage-1][parent.numero_arreglo_personaje_actual][parent.num_reto-1].val)
		
	}

	
}

}
















function arrastreCategorias(cantidad_circulos,con_over){
	leerEstilos();

	//tieneRetroPrEv()


	activo_arrastre = true;

		cont_txt_prin = document.getElementById('txt_prin').style.top;
			cont_txt_prin = cont_txt_prin.split( 'px' );
			cont_txt_prin = cont_txt_prin[0];
			cont_txt_prin = Number(cont_txt_prin);



			cont_opciones_top = document.getElementById('cont_opciones').style.top;
			cont_opciones_top = cont_opciones_top.split( 'px' );
			cont_opciones_top = cont_opciones_top[0];
			cont_opciones_top = Number(cont_opciones_top);


			cont_opciones_left = document.getElementById('cont_opciones').style.left;
			cont_opciones_left = cont_opciones_left.split( 'px' );
			cont_opciones_left = cont_opciones_left[0];
			cont_opciones_left = Number(cont_opciones_left);

			
		alto_enunciados = []

			ancho_enunciados = []

			x_enunciados = []

			y_enunciados = []

			bounds_enunciados = []

			enunciados_html = []

			txt_arrastre_html = [];
			opcionestxt_html = [];

			cantidad_circulos_original = cantidad_circulos;
		cantidad_circulos_original_2 = cantidad_circulos;
		cantidad_espacios_opciones = cantidad_circulos_original.length
		cantidad_circulos = 0;
		acumula_opciones = [];


		c_carr = [];
		correcto_carr = [];
		mov_carr = [];
		narr = 0;
		
		for (i = 0; i < cantidad_circulos.length; i++) { 
			c_carrb = [];
		
			
			for (ib = 0; ib < cantidad_circulos[i]; ib++) { 
			
				c_carrb.push(narr);
				narr++

			}
			c_carr.push(c_carrb);

		}


		for (i = 0; i < cantidad_espacios_opciones; i++) { 
			cantidad_circulos += cantidad_circulos_original[i];
			acumula_opciones[i] = cantidad_circulos;
						
		}

		
		
			


		
		//console.log(cantidad_circulos_original,cantidad_circulos)





			alto_enunciados = []

			ancho_enunciados = []

			x_enunciados = []

			y_enunciados = []

			bounds_enunciados = []

			enunciados_html = []

			txt_arrastre_html = [];
			opcionestxt_html = [];
			
			for (i = 0; i < cantidad_circulos; i++) { 

				var var_txt_arrastre = document.getElementById("txt_arrastre"+i)//.innerHTML;
				txt_arrastre_html[i] = var_txt_arrastre;

				cont_txtarr = $("#txt_arrastre"+i).html()
				$("#txt_arrastre"+i).html("<div>"+cont_txtarr+"</div>")
				$("#txt_arrastre"+i).find("div").append("<div class='simbretvf'></div>")
			}
			for (i = 0; i < cantidad_espacios_opciones; i++) { 

				var var_opciontxt_html = document.getElementById('opcion_arrastretxt'+i);
				opcionestxt_html[i] = var_opciontxt_html;

				
			}


		//var_globo_texto_personaje = document.getElementById('cont_globo_texto');
		//ancho_globo_texto_personaje = var_globo_texto_personaje.clientWidth;
		
		//globo_texto_personaje = new createjs.DOMElement(var_globo_texto_personaje);
		
		contenidos_circulos = []
		contenidos_circulos_html = []
		
		contenidos_circulos_masinfo = []
		contenidos_circulos_html_masinfo = []
		

		alto_opciones = 10;
		//ancho_opciones = 200;
		padding_opciones = 12;

		actual_down = false;

		x_original = [];
	
		y_original = [];
		top_opciones = 0;

		activar_opacidad_enunciados = false;

		bounds_opciones = []

		respuestas_arrastre =[]

		respuestas_anterior = []

		respuestas_anterior_html = []


		opciones = []
		opciones_html = []

		opciones_html_txt = []
		
		respuestas_arrastre_html_txt = [];

		mas_top_enunciado = 0;
		mas_top_opcion = 500;
		cantidad_ocupados = []
		elementos_ocupados = []
		elementos_posiciones_actual = []
		elementos_posiciones =[];

		elementos_ubicados = []
		elementos_ubicados_actuales = []

		verdadero_ubicados = [];
		verdadero_ubicados_posicion = [];

		verdaderos_ubicados = [];
		/*
		for (i = 0; i < cantidad_circulos_original.length; i++) { 
				
				//i2 = i.toString();
					//console.log(i, "i")

	    		for (ind = 0; ind < cantidad_circulos_original[ind]; ind++) { 
					//console.log(ind, "ind")
					//ind2 = ind.toString();
					verdadero_ubicados_posicion[ind] = 0;
					
					//console.log(i)
					//console.log(ind)
					
					
	    		}
	    		
	    		verdadero_ubicados.push(verdadero_ubicados_posicion);
	    			

	    		//verdadero_ubicados[i] = arreglo_arrastre;
	    		
	    	}
				console.log(verdadero_ubicados)
				nuevo_verdadero_ubicados = verdadero_ubicados
				verdadero_ubicados = [[0,0],[0,0],[0,0],[0,0],[0,0]]
				console.log(verdadero_ubicados)
		*/
		
		

		for (i = 0; i < cantidad_espacios_opciones; i++) { 
		cantidad_ocupados[i] = 0;
		elementos_ubicados[i] = "x";
		}

		//console.log(elementos_ubicados)

		
		for (i = 0; i < cantidad_espacios_opciones; i++) { 

			numero_elementos = cantidad_circulos_original[i];
			//variable_acumula = numero_elementos * (i+1);
			if(i != 0){
			acumulado = acumula_opciones[i-1];	
			} else {
			acumulado = 0;
			}
			

			elementos_posiciones_actual = [];
			for (ind = acumulado; ind < acumula_opciones[i]; ind++) { 
				elementos_posiciones_actual.push('txt_arrastre'+acumulado);
				
				acumulado++

				
				

			}
			
				

				elementos_posiciones[i] = elementos_posiciones_actual;
			
			

			//console.log(elementos_posiciones_actual,i)

			

		
		}
		
			
			

	function valoresOcupados_txt(){



		

		
			mov_carr =[];
			correcto_carr = [];

			totales_usados = []
			elementos_arrastre = 0;
			arr_elementos_ubicados = [];
			for (i = 0; i < cantidad_espacios_opciones; i++) { 

				cantidad_ocupados[i] = 0;
				
				

			}
			//cantidad_arreglo = 0;
			for (i = 0; i < cantidad_circulos_original_2.length; i++) { 

				cantidad_arreglo = "";

				int_cantidad_circulos_original_2 = parseInt(cantidad_circulos_original_2[i]);
					

				for (ind = 0; ind <= int_cantidad_circulos_original_2; ind++) { 
					//console.log(cantidad_circulos_original_2[i],ind)
					cantidad_arreglo += "0,";
					cantidad_circulos_original_2[i] = cantidad_arreglo;
					
				}
				
				
				verdadero_ubicados[i] = cantidad_circulos_original_2[i];
				

				arreglo_cantidad_arrastre = verdadero_ubicados[i].split(",");
				arreglo_cantidad_arrastre.pop();
				verdadero_ubicados[i] = arreglo_cantidad_arrastre;

				
		    					
			}



			//console.log(verdadero_ubicados)

			for (i = 0; i < cantidad_espacios_opciones; i++) { 
			
			elementos_ubicados[i] = "x";

			}
			for (i = 0; i < cantidad_circulos_original.length; i++) { 
				
	    		verdaderos_ubicados = 0;
	    	}

			//console.log(elementos_ubicados[i][0],elementos_posiciones[i][0],elementos_ubicados[i][0] == elementos_posiciones[i][0])
	    		
    		

			contador_arrastre =0;
			nota_arrastre = 0;

    		for (i = 0; i < cantidad_circulos; i++) { 
    			respuestas_arrastre_html_txt[i] = null;
    		}
    		
			//elementos_ubicados_actuales = [];
			shuffle(arreglo_numero_opciones);
			for (i = 0; i < cantidad_circulos; i++) { 

				i_original = i;
				

				//i = arreglo_numero_opciones[i]
				//console.log(i)

		
				bounds_opcion = document.getElementById('txt_arrastre'+i).getBoundingClientRect();
				//elementos_ubicados_actuales = []
				//elementos_ubicados_actuales = [];
				for (ind = 0; ind < cantidad_espacios_opciones; ind++) { 
					//console.log(ind)
					
					
    				

					bounds_enunciado = document.getElementById('opcion_arrastretxt'+ind).getBoundingClientRect();

					
	    			if (bounds_opcion.left > bounds_enunciado.left && bounds_opcion.left < bounds_enunciado.left + bounds_enunciado.width && bounds_opcion.top > bounds_enunciado.top && bounds_opcion.top < bounds_enunciado.top + bounds_enunciado.height){
    					
	    				$( "#txt_arrastre"+i ).animate( { 'left': bounds_enunciados_txt[ind].left + cantidad_ocupados[ind]*55 + 8, 'top': bounds_enunciados_txt[ind].top+7}, 'fast', function()
	          				{
		    				//valoresOcupados_txt();
	                			
	          				});

	    				cantidad_ocupados[ind] += 1;

	    				
	    				
	    				
	    				if(elementos_ubicados[ind] == "x"){
	    					elementos_ubicados_actuales = "txt_arrastre"+i;
	    					totales_usados.push(elementos_ubicados_actuales)
	    					elementos_ubicados[ind] = elementos_ubicados_actuales;
	    					arreglo_elementos = elementos_ubicados[ind].split();
	    				} else {
	    					elementos_ubicados_actuales = ","+"txt_arrastre"+i;
	    					totales_usados.push(elementos_ubicados_actuales)
	    					elementos_ubicados[ind] += elementos_ubicados_actuales;	
	    					arreglo_elementos = elementos_ubicados[ind].split(",");
	    					
	    				}

	    				
	    				
	    				elementos_ubicados[ind] = arreglo_elementos;

	    				/*
	    				if(arreglo_elementos[arreglo_elementos.length-1] == ""){
	    					arreglo_elementos.pop(); 
	    				}
	    				*/
	    				//
	    				
	    				mov_carr[i] = 1;

	    				
	    				/*
	    				if(c_carr[ind].includes(i)){
	    				
	    					correcto_carr[i] = 1;
	    				
	    				} else {
	    					correcto_carr[i] = 0;

	    				}
	    				*/

	    				
	    				


	    				//elementos_ocupados[cantidad_circulos_original[]].push(document.getElementById('txt_arrastre'+i));

	    				
	    				
    					

    					respuestas_arrastre_html_txt[ind] = txt_arrastre_html[i];
    						if (i == ind) {
								nota_arrastre++
							}
    				}

	    		}

	    		i = i_original;

	    	}

	    	txt_elementos_ubicados = elementos_ubicados.toString();
	    	arr_elementos_ubicados = txt_elementos_ubicados.split(",");
	    	contador_movidos = 0;
	    	for (i = 0; i < arr_elementos_ubicados.length; i++) { 
	    		if(arr_elementos_ubicados[i] != "x"){
	    			contador_movidos += 1;
	    		}
	    	}


	    	
	    		//console.log(elementos_ubicados)
	    		//console.log(elementos_posiciones)
	    	cantidad_ubicados = 0;
	    	
	    	

	    	
	    		//cantidad_ubicados += elementos_ubicados[i].length;
	    	

	    	

	    	for (i = 0; i < cantidad_circulos; i++) { 

	    		if (respuestas_arrastre_html_txt[i] != null){
    				contador_arrastre += 1;
    				//console.log(contador_arrastre,respuestas_arrastre_html_txt,i)
    			}
    		}

    		

	    	for (i = 0; i < elementos_posiciones.length; i++) { 
	    		//console.log(elementos_posiciones.length,elementos_posiciones)
	    		/*
	    		elementos_ubicados_texto = elementos_ubicados[i].toString();
	    		elementos_posiciones_texto = elementos_posiciones[i].toString();

	    		//console.log(elementos_ubicados_texto,elementos_posiciones_texto,elementos_ubicados_texto==elementos_posiciones_texto);

	    		arreglo_ubicados_texto = elementos_ubicados_texto.split(",");
	    		arreglo_posiciones_texto = elementos_posiciones_texto.split(",");

	    		console.log(arreglo_ubicados_texto,arreglo_posiciones_texto,arreglo_ubicados_texto==arreglo_posiciones_texto);

				*/
				/*
	    		if(elementos_ubicados_texto==elementos_posiciones_texto){
	    			verdadero_ubicados[i] = 1; 
	    		}
	    		*/
	    		/*
	    		if(elementos_ubicados[i] === elementos_posiciones[i]){
	    				for (var ind = 0; ind < elementos_ubicados[i].length; ++ind) {
   						 if (elementos_ubicados[ind] !== elementos_posiciones[i]) 
	    				console.log("kjkjj")

  						}
	    			}
	    			*/

	    		cantidad_iter_ubicados = elementos_ubicados[i].length;
	    		//console.log(i,cantidad_iter_ubicados)
	    		//console.log(elementos_ubicados[i].length, elementos_ubicados[i],elementos_ubicados)
	    		for (ind = 0; ind < cantidad_iter_ubicados; ind++) { 
		    			/////CAMBIO ACÁ
		    			//console.log(ind)
	    			for (ind2 = 0; ind2 < elementos_posiciones[i].length; ind2++) { 
	    			//console.log(elementos_posiciones,ind2,elementos_posiciones[ind],elementos_posiciones[ind].length)	
	    			//console.log(i,ind,ind2,elementos_posiciones,elementos_posiciones[ind2].length)	

	    				if(elementos_ubicados[i][ind] == elementos_posiciones[i][ind2]){
	    				
	    					//console.log(i,ind,ind2)

		    				verdadero_actual = verdadero_ubicados[i]
		    				
							verdadero_actual[ind] = 1// = {val: true};

						
	    				//verdadero_ubicados[0][1].val = "x";

	    				} 
	    			}
	    			
	    		}

	    		
	    		//console.log(elementos_ubicados[i][0],elementos_posiciones[i][0],elementos_ubicados[i][0] == elementos_posiciones[i][0])
	    		//console.log(verdadero_actual)
    		}
    		
    		//console.log(verdadero_ubicados)

    		txt_verdadero_ubicados = verdadero_ubicados.toString();
    		arr_verdadero_ubicados = txt_verdadero_ubicados.split(",");

    		

	    	for (i = 0; i < arr_verdadero_ubicados.length; i++) { 
	    		
	    		arr_verdadero_ubicados[i]  = parseInt(arr_verdadero_ubicados[i]);
	    		
	    	}

	    	arr_verdadero_ubicados = correcto_carr;
	    	//console.log(arr_verdadero_ubicados)
	    	suma_correctos = 0;
	    	
	    	for (i = 0; i < cantidad_circulos; i++) { 
	    		if(correcto_carr[i]==1){
	    		suma_correctos += correcto_carr[i];
	    		}
	    	}


	    	suma_correctos = 0;
	    	id_corrarrcat = [];
	    	id_incorrarrcat = [];

	    	for (i = 0; i < elementos_ubicados.length; i++) { 
	    		
	    		for (intx = 0; intx < elementos_ubicados[i].length; intx++) { 
	    			//console.log(elementos_posiciones[i].includes(elementos_ubicados[i][intx]))
	    			if(elementos_posiciones[i].includes(elementos_ubicados[i][intx])){
	    				//console.log("es correcto")
	    				suma_correctos++
	    				id_corrarrcat.push(elementos_ubicados[i][intx])
	    			} else {
	    				//console.log("es incorrecto")
	    				id_incorrarrcat.push(elementos_ubicados[i][intx])

	    			}
	    		}
	    		
	    	}
	    	//for (i = 0; i < arr_verdadero_ubicados.length; i++) {
	    	//	if(isNaN(arr_verdadero_ubicados[i])){
	    	//		arr_verdadero_ubicados[i] = 0;
	    	//	}
	    	//	suma_correctos += arr_verdadero_ubicados[i];
	    		

	    	//}


	    	//console.log(suma_correctos,arr_verdadero_ubicados,txt_elementos_ubicados)
	    		
    		/*
			
    		verdadero_actual = verdadero_ubicados[0]
	    				
						verdadero_actual[0] = {val: true};
    					console.log(verdadero_ubicados)
			*/

			//console.log(contador_movidos,cantidad_circulos)
			if (contador_movidos == cantidad_circulos){


				activo_arrastre = false;

					for (i = 0; i < cantidad_circulos; i++) { 
		var elemento_dragable = $('#txt_arrastre'+i).draggable('disable');
	}


	    		for (i = 0; i < opciones; i++) { 

				document.getElementById("enunciado"+i).style.backgroundColor = "#cccccc";
				}
				
/*
				nuevo_puntaje = Math.round(nota_arrastre/cantidad_circulos*100);
				if(nuevo_puntaje>parent.puntaje){
					parent.puntaje = nuevo_puntaje;
				}
*/
				//document.getElementById("retro_aprend"+parent.numero_arreglo_personaje_actual).className = "retro_aprend2";





				parent.parent.audio_boton.play();

				for (i = 0; i < id_corrarrcat.length; i++) { 
					$("#"+id_corrarrcat[i]).find(".simarrcat").html(parent.parent.icono_check);
					$("#"+id_corrarrcat[i]).find(".simarrcat").html(parent.parent.icono_check);
			
				}

				for (i = 0; i < id_incorrarrcat.length; i++) { 
					
			    	for (ix = 0; ix < elementos_posiciones.length; ix++) { 
			    		
			    		for (intx = 0; intx < elementos_posiciones[ix].length; intx++) { 
			    			//console.log(elementos_posiciones[i].includes(elementos_ubicados[i][intx]))
			    			if(id_incorrarrcat[i].includes(elementos_posiciones[ix][intx])){
			    				pos_corr = ix+1;
			    			}
			    		}
			    	}

					$("#"+id_incorrarrcat[i]).find(".simarrcat").html(parent.parent.icono_wrong+"<br/>"+pos_corr);

				}
				$(".simarrcat").css("display","initial");
				


				tiene_retopev = $(".reto_arrcat").text().trim().length!=0||$(".reto_arrcat").find("img").length!=0||$(".reto_arrcat").find("video").length!=0;
				
				if(tiene_retopev){
					margin_left_mayor = 670;
					$(".reto_arrcat").prepend("<div class='msj_rpev'></div>")

					$(".reto_arrcat").fadeIn(100);

					
					
					for (i = 0; i < cantidad_circulos; i++) { 
						//console.log($("#txt_arrastre"+i).position().left)
						left_actarr = $("#txt_arrastre"+i).offset().left;
						//console.log(left_actarr)
						//console.log(left_actarr-300)
						//$("#txt_arrastre"+i).css("marginLeft", -(left_actarr-300)+"px");
						$("#txt_arrastre"+i).css("marginLeft", -(300)+"px");
					}


					if(contador_movidos==id_corrarrcat.length){
						$(".msj_rpev").html("Correcto. " + parent.parent.icono_messagecheck)

					} else {
						$(".msj_rpev").html("Incorrecto. "+parent.parent.tx_recuerdmay+" que:")

					}

					$(".fondo_opciones").fadeOut(0);
					$(".texto_principal").css("marginLeft","0px");

				}


				parent.parent.nuevo_puntaje += (suma_correctos/cantidad_circulos)*parent.parent.puntaje_maximo/(parent.cantidad_preguntas);
				
				if(parent.parent.nuevo_puntaje>parent.parent.puntaje_maximo-0.1){
					parent.parent.nuevo_puntaje = parent.parent.puntaje_maximo;
				}

				if(parent.parent.nuevo_puntaje>parent.parent.puntaje){
					parent.parent.puntaje = parent.parent.nuevo_puntaje;
				}

					alto_intrint = $("#instruccion_interna").height();

				if(parent.pregunta_actual<parent.cantidad_preguntas){
					document.getElementById("instruccion_interna").innerHTML = "<div> "+parent.parent.tx_puedesmay+" avanzar a la siguiente pregunta. </div>"

						parent.var_boton_sig.innerHTML = "Ir a la siguiente pregunta "+parent.parent.icono_indica_right;
						parent.var_boton_sig.style.visibility = "visible";

				} else{
					if(parent.tipo=="cuestionario"){
					document.getElementById("instruccion_interna").innerHTML = "<div> "+parent.parent.tx_puedesmay+" avanzar a la pantalla de resultados. </div>"
					parent.var_boton_sig.innerHTML = "Ir a los resultados "+parent.parent.icono_indica_right;
						parent.var_boton_sig.style.visibility = "visible";
					} else if(parent.parent.tipo_curso=="isometrico") {
						document.getElementById("instruccion_interna").innerHTML = "<div> "+parent.parent.tx_hasmay+" completado las preguntas. </div>"

					}
				}
						$("#instruccion_interna").height(alto_intrint);
				
				if (suma_correctos == cantidad_circulos){
					 
						//parent.parent.audio_correcto.play();

								//document.getElementById("retro_preg"+parent.numero_arreglo_personaje_actual).className = "retro_preg2";
								//document.getElementById("retro_preg"+parent.numero_arreglo_personaje_actual).innerHTML = "¡Correcto!<br/>"+parent.tx_tienesmay+" claro que:";	
								/*
								if(parent.parent.estado_preguntas[parent.parent.znThisPage-1][parent.numero_arreglo_personaje_actual][parent.num_reto-1].val == false){
								parent.parent.estado_preguntas[parent.parent.znThisPage-1][parent.numero_arreglo_personaje_actual][parent.num_reto-1].val = true;
								//razon_correctos = cant_correctas_elegidas / opciones_correctas.length;
								//razon_correctos = contador_arrastre / opciones_correctas.length;
			nota_actual = parent.parent.puntaje_pregunta// * razon_correctos;
			nota_actual = parseInt(nota_actual);

								sumaPuntos(nota_actual);
								}
								*/
						for (i = 0; i < cantidad_espacios_opciones; i++) { 

	    				document.getElementById("opcion_arrastretxt"+i).style.opacity = 1;
						
						}
					
				

					
				} else {
					//parent.parent.audio_incorrecto.play();

								//document.getElementById("retro_preg"+parent.numero_arreglo_personaje_actual).className = "retro_preg2";
								//document.getElementById("retro_preg"+parent.numero_arreglo_personaje_actual).innerHTML = "Incorrecto.<br/>"+parent.tx_recuerdmay+" que:";
							}
							


							for (i = 0; i < opciones; i++) { 

		
				bounds_opcion = document.getElementById('txt_arrastre2'+i).getBoundingClientRect();

				for (ind = 0; ind < opciones; ind++) { 
					//console.log(ind)

					bounds_enunciado = document.getElementById('opcion_arrastretxt2'+ind).getBoundingClientRect();
					
					
	    			

	    		}

	    	}

	    	//console.log(arr_verdadero_ubicados,verdadero_actual)

	    	for (ind2 = 0; ind2 < cantidad_circulos; ind2++) { 
	    		
	    					if (arr_verdadero_ubicados[ind2] == 1) {
							//document.getElementById("txt_arrastre"+ind2).innerHTML = "<span class='simbolos'>å</span>";	
								
							} else {
							//document.getElementById("txt_arrastre"+ind2).innerHTML = "<span class='simbolos'>ã</span>";	

							}
	    		

	    			}
	    			/*
	    	if(parent.num_reto<parent.parent.preguntas_pantallas[parent.parent.znThisPage-1][parent.numero_arreglo_personaje_actual]){
							parent.document.getElementById("txt_btnsig"+parent.numero_arreglo_personaje_actual).innerHTML = "SIGUIENTE PREGUNTA";
							setTimeout(function(){
								parent.parent.audio_mapa.play();

								parent.document.getElementById("cont_reto"+parent.numero_arreglo_personaje_actual).style.visibility = "visible";							
							}, 3100);
							} else {
								apareceMiniMapaActividad(parent.numero_arreglo_personaje_actual);
							}
*/

			} else {
					
					//document.getElementById("instruccion_circulos").innerHTML = "<table class='tabla_instruccion' style='border:none'><td style='border:none' class='corchetes_instrucciones'>{</td><td style='border:none'>Arrastre cada opción hasta el lugar que corresponde.</td><td style='border:none' class='corchetes_instrucciones'>}</td></table>"
					//document.getElementById("instruccion_circulos_span").innerHTML = mensaje_instruccion;

					//simbolo_retroalimentacion.alpha = 0;
					//simbolo_retroalimentacion.visible = false;

					
					


			}


			
	    
					
	    	
		}

		for (i = 0; i < cantidad_circulos; i++) { 

			respuestas_arrastre[i] = -1;
		}

		
		for (i = 0; i < cantidad_circulos; i++) { 

			
		}
		

		for (i = 0; i < cantidad_circulos; i++) { 

			respuestas_anterior[i] = -1;
		}	

		respuestas_arrastre_html = []

		//createjs.Ticker.addEventListener("tick", valoresOcupados);

		array_Txtarrastre = [];
		elementos_Txtarrastre = [];
		top_originales = [];
		left_originales = [];

		top_actuales = [];
		left_actuales = [];
		
		bounds_enunciados_txt = [];

		for (i = 0; i < cantidad_espacios_opciones; i++) { 
		
		
		var bounds_enunciado_txt = document.getElementById('opcion_arrastretxt'+i).getBoundingClientRect();
		bounds_enunciados_txt[i] = bounds_enunciado_txt;
		bounds_enunciados_txt.push(bounds_enunciados_txt[i]);
		}

		arreglo_numero_opciones=[];
		for (i = 0; i < cantidad_circulos; i++) { 
		arreglo_numero_opciones[i] = i;
		}

		

		
		function shuffle(a) {
		    for (let i = a.length; i; i--) {
		        let j = Math.floor(Math.random() * i);
		        [a[i - 1], a[j]] = [a[j], a[i - 1]];
		    }
		}

		shuffle(arreglo_numero_opciones);


		for (i = 0; i < cantidad_circulos; i++) { 

			var elemento_dragable = $('#opcion'+i).draggable({scroll: false, containment: "document"});

			elemento_txtdrag = $('#txt_arrastre'+i);


	

		/////////////////////////////////
		function ElementosTxt(elemento) {
			

			$('#txt_arrastre'+elemento).css({ position: 'absolute'});

			//bounds_enunciado = document.getElementById('txt_arrastre'+elemento).getBoundingClientRect();


 		 	this.elemento = $('#txt_arrastre'+elemento);

 		 	//this.ancho = this.elemento.width();

 		 	
 		 	elementos_Txtarrastre[elemento] = document.getElementById('txt_arrastre'+elemento);
 		 	
 		 	this.creaDrag = function() {
				txt_dragable = this.elemento.draggable({scroll: false, containment: "parent"});
				
				//$("<span class='txt_arrastreclon'> "+this.texto+" </span>").insertAfter("#txt_arrastre"+i);


				};

				//$( "#txt_arrastre"+elemento ).draggable({ revert: "invalid" });

			this.posicion = this.elemento.position();
 		  	this.texto = $( "#txt_arrastre"+elemento ).text();
 		 	
 		 	elemento_actual = this.elemento;
 		 	ix = arreglo_numero_opciones[i];

 		 	if(cantidad_circulos % 2 == 0){
 		 		suma_val = 0;
 		 	} else {
 		 		suma_val = 0.5;

 		 	}

primer_top = 120;
segundo_top = 160;
tercero_top = 200;
cuarto_top = 240;
quinto_top = 280;
 			
primer_left = 60;
segundo_left = 120;
tercero_left = 180;
cuarto_left = 240;
quinto_left = 300;


if(ix==0){
	left_originales[elemento] = primer_left;
	top_originales[elemento] = primer_top;
} else if(ix==1){
	left_originales[elemento] = segundo_left;
	top_originales[elemento] = primer_top;
} else if(ix==2){
	left_originales[elemento] = primer_left;
	top_originales[elemento] = segundo_top;
} else if(ix==3){
	left_originales[elemento] = segundo_left;
	top_originales[elemento] = segundo_top;
} else if(ix==4){
	left_originales[elemento] = tercero_left;
	top_originales[elemento] = primer_top;
} else if(ix==5){
	left_originales[elemento] = tercero_left;
	top_originales[elemento] = segundo_top;
} else if(ix==6){
	left_originales[elemento] = primer_left;
	top_originales[elemento] = tercero_top;
} else if(ix==7){
	left_originales[elemento] = segundo_left;
	top_originales[elemento] = tercero_top;
} else if(ix==8){
	left_originales[elemento] = tercero_left;
	top_originales[elemento] = tercero_top;
} else if(ix==9){
	left_originales[elemento] = cuarto_left;
	top_originales[elemento] = primer_top;
} else if(ix==10){
	left_originales[elemento] = cuarto_left;
	top_originales[elemento] = segundo_top;
} else if(ix==11){
	left_originales[elemento] = cuarto_left;
	top_originales[elemento] = tercero_top;
} 

 		 	

			
			elemento_actual.animate( { 'left': left_originales[elemento], 'top': top_originales[elemento]}, 10*elemento, function()
	          				{
		document.getElementById("txt_arrastre"+elemento).style.visibility = "visible";
		    				
	                			
	          				});

			
			
		}	

	
		array_Txtarrastre[i] = new ElementosTxt(i);
		array_Txtarrastre[i].creaDrag();

		left_actual = left_originales[i];
		top_actual = top_originales[i];

		
		}
		bounds_enunciados_txt[0].y = bounds_enunciados_txt[0].y - 22;
		bounds_enunciados_txt[0].top = bounds_enunciados_txt[0].top - 22;
		//bounds_enunciados_txt[1].y = bounds_enunciados_txt[1].y - 22;
		//bounds_enunciados_txt[1].top = bounds_enunciados_txt[1].top - 22;
		
		//console.log(bounds_enunciados_txt);

		for (i = 0; i < cantidad_circulos; i++) { 


		////DRAG
		
		actual_down = false;

		//var elemento_dragable = new Draggable('opcion'+i);
		
		elemento_txtdrag = $('#txt_arrastre'+i);

		document.getElementById("txt_arrastre"+i).addEventListener("mouseup", function(event){
if(activo_arrastre){
		x_mouse = event.clientX;
    		y_mouse = event.clientY;
		//elemento_txtdrag.mouseup(function() {
			
			
			numero_arreglo_opcion_arrastre_txt = elementos_Txtarrastre.indexOf(this);
			if(left_actuales[numero_arreglo_opcion_arrastre_txt] == left_originales[numero_arreglo_opcion_arrastre_txt] && top_actuales[numero_arreglo_opcion_arrastre_txt] == top_originales[numero_arreglo_opcion_arrastre_txt]){
				intercambio = false;
			} else {
				intercambio = true;

			}
			

			actual_down = false;
			var_en_zona = false;
			disponible = false;
    		for (i = 0; i < cantidad_espacios_opciones; i++) { 

    				en_zona = x_mouse > bounds_enunciados_txt[i].left && x_mouse < bounds_enunciados_txt[i].left + bounds_enunciados_txt[i].width && y_mouse > bounds_enunciados_txt[i].top - mas_top_enunciado && y_mouse < bounds_enunciados_txt[i].top - mas_top_enunciado + bounds_enunciados_txt[i].height;
    				
    				if(en_zona){
    					lugar_zona = i;

    					var_en_zona = true;
    					disponible = respuestas_arrastre_html_txt[lugar_zona] == null || respuestas_arrastre_html_txt[lugar_zona] == this;
    					disponible = true;
    					numero_arreglo_txt_actual = elementos_Txtarrastre.indexOf(respuestas_arrastre_html_txt[lugar_zona]);
    				}  
    				
	    		} 



    			//console.log(lugar_zona,disponible,respuestas_arrastre_html_txt[lugar_zona]);

	    		if(var_en_zona){

	    			if(disponible){

	    				if(lugar_previo != "lugar_zona"){
          					//console.log("1")
		    				
							$( this ).animate( { 'left': bounds_enunciados_txt[lugar_zona].left + 10, 'top': bounds_enunciados_txt[lugar_zona].top+7}, 'fast', function()
	          				{
		    				valoresOcupados_txt();
	                			
	          				});
          				} else {
          					//console.log("2")
          					//console.log(left_actuales[numero_arreglo_opcion_arrastre_txt],top_actuales[numero_arreglo_opcion_arrastre_txt])

	    					$(this).animate( { 'left': left_actuales[numero_arreglo_opcion_arrastre_txt], 'top': top_actuales[numero_arreglo_opcion_arrastre_txt]}, 'fast');

          				}
          			} else if(intercambio){
	    				
	    				$("#txt_arrastre"+numero_arreglo_txt_actual).animate( { 'left': bounds_enunciados_txt[lugar_previo].left +10, 'top': bounds_enunciados_txt[lugar_previo].top+20}, 'fast');
						$( this ).animate( { 'left': bounds_enunciados_txt[lugar_zona].left + 10, 'top': bounds_enunciados_txt[lugar_zona].top+7}, 'fast', function()
	    				
          				{
	    				valoresOcupados_txt();
                			
          				});
	    			}  else {
	    				
						$("#txt_arrastre"+numero_arreglo_txt_actual).animate( { 'left': left_originales[numero_arreglo_txt_actual], 'top': top_originales[numero_arreglo_txt_actual]}, 'fast');
						$( this ).animate( { 'left': bounds_enunciados_txt[lugar_zona].left + +10, 'top': bounds_enunciados_txt[lugar_zona].top+7}, 'fast', function()
	    				
          				{
	    				valoresOcupados_txt();
                			
          				});

	    			}

	    		}  else {
						//$("#txt_arrastre"+numero_arreglo_txt_actual).animate( { 'left': left_originales[numero_arreglo_txt_actual], 'top': top_originales[numero_arreglo_txt_actual]}, 'fast');
						$( this ).animate( {  'left': left_originales[numero_arreglo_opcion_arrastre_txt], 'top': top_originales[numero_arreglo_opcion_arrastre_txt]}, 'fast', function()
	    				
          				{
	    				valoresOcupados_txt();
                			
          				});

	    		}

	    	}
    		
		});

		actual_down = false;

		document.getElementById("txt_arrastre"+i).addEventListener("mousemove", function(event){

				if(activo_arrastre){
    		x_mouse = event.clientX;
    		y_mouse = event.clientY;
    		if (actual_down){
    			//activar_opacidad_enunciados = false;
    			for (i = 0; i < cantidad_espacios_opciones; i++) { 
    				
    					menos_alto = 0;
    				

	    			if (x_mouse > bounds_enunciados_txt[i].left && x_mouse < bounds_enunciados_txt[i].left + bounds_enunciados_txt[i].width && y_mouse > bounds_enunciados_txt[i].top - menos_alto && y_mouse < bounds_enunciados_txt[i].top - menos_alto + bounds_enunciados_txt[i].height){
	    				
	    				document.getElementById("opcion_arrastretxt"+i).style.opacity = 0.5;
	    			} else {
	    				document.getElementById("opcion_arrastretxt"+i).style.opacity = 1;
	    			}
	    		}
    		//	console.log("OK")
    		} else {
    		//	console.log("NO_OK")
    		}
    	}
    		if(con_over){

    		numero_arreglo_opcion_arrastre = txt_arrastre_html.indexOf(this);

    		x_mouse = event.clientX;
    		y_mouse = event.clientY;

    		alto_pop = document.getElementById("pop"+numero_arreglo_opcion_arrastre).clientHeight;
			ancho_pop = document.getElementById("pop"+numero_arreglo_opcion_arrastre).clientWidth;
			
			
			document.getElementById("pop"+numero_arreglo_opcion_arrastre).style.left = (x_mouse+10)+"px";
			document.getElementById("pop"+numero_arreglo_opcion_arrastre).style.top = (y_mouse+10)+"px";
			
		}


		});


		document.getElementById("txt_arrastre"+i).addEventListener("mouseover", function(event){
		if(con_over){

    		numero_arreglo_opcion_arrastre = txt_arrastre_html.indexOf(this);

    		
			document.getElementById("pop"+numero_arreglo_opcion_arrastre).className = "pop_activ_aparece";
			
			document.getElementById("pop"+numero_arreglo_opcion_arrastre).style.zIndex = 3;
			
		}


		});

		document.getElementById("txt_arrastre"+i).addEventListener("mouseout", function(event){
		if(con_over){

    		numero_arreglo_opcion_arrastre = txt_arrastre_html.indexOf(this);

    		
			document.getElementById("pop"+numero_arreglo_opcion_arrastre).className = "pop_activ";
			
			
		}
    		
		});
		
		document.getElementById("txt_arrastre"+i).addEventListener("mousedown", function(event){
	if(activo_arrastre){
		if(parent.parent.con_sonidoclic){
			parent.parent.audio_clic.play();
		}
		x_mouse = event.clientX;
    		y_mouse = event.clientY;

	
    		//console.log("DOWN")

    		for (i = 0; i < cantidad_espacios_opciones; i++) { 

				var bounds_enunciado_txt = document.getElementById('opcion_arrastretxt'+i).getBoundingClientRect();
				bounds_enunciados_txt[i] = bounds_enunciado_txt;
				bounds_enunciados_txt.push(bounds_enunciados_txt[i]);

			}
			numero_arreglo_opcion_arrastre_txt = elementos_Txtarrastre.indexOf(this);

    		actual_down = true;
    		lugar_previo = 100;
    		for (i = 0; i < cantidad_espacios_opciones; i++) { 

    			en_zona_previa = x_mouse > bounds_enunciados_txt[i].left && x_mouse < bounds_enunciados_txt[i].left + bounds_enunciados_txt[i].width && y_mouse > bounds_enunciados_txt[i].top - mas_top_enunciado && y_mouse < bounds_enunciados_txt[i].top - mas_top_enunciado + bounds_enunciados_txt[i].height;
	    		if(en_zona_previa){
	    			lugar_previo = i;
	    		
	    		}
				    		
				document.getElementById("txt_arrastre"+i).style.zIndex = 1;

				left_actuales[i] = $("#txt_arrastre"+i).position().left;
				top_actuales[i] = $("#txt_arrastre"+i).position().top;
				
    		}
    		
    		this.style.zIndex = 2;
}
		});

				

		//console.log(i,array_Txtarrastre[i]);
		//$( '#txt_arrastre0' ).data( 'left', $( '#txt_arrastre0' ).offset( ).left ).data( 'top', $( '#txt_arrastre0' ).offset( ).top);



		

		//, 'top': bounds_txtdrag.top

		/////////////////////////////////
	}
		
	for (i = 0; i < cantidad_espacios_opciones; i++) { 
		
		document.getElementById("opcion_arrastretxt"+i).addEventListener("mouseout", function(){
			this.style.opacity = 1;
    		if (actual_down){
    			//this.style.opacity = 0;
  			//console.log("HOLA")
  			}
		});
		}

		/*
		contenidos_circulos = [];

		var var_contenidos = document.getElementById("contenido_c0");
		contenidos_circulo = new createjs.DOMElement(var_contenidos);
		contenidos_circulo.alpha = 0;
		contenidos_circulo.x = 0;
		contenidos_circulo.y = y_contenidos_final_2+1240;
		contenidos_circulos.push(contenidos_circulo);
		total_textos.push(contenidos_circulos[0]);
		*/





		
		
	}




function globosSeleccion(total_globos_correctos,total_globos_incorrectos){
	leerEstilos();
	$(".esfera").append("<div class='simb_pevesf'></div>");

			
		mensaje_instruccion = document.getElementById("instruccion_interna").innerHTML;


		total_globos = total_globos_correctos + total_globos_incorrectos;

		margin_top_menor = 0;
		margin_top_mayor = 145;

		margin_left_menor = 10;
		margin_left_mayor = 960;
		
		html_correctos = [];

		seleccionado_correcto = [];


		html_incorrectos = [];
		seleccionado_incorrecto = [];


		tiempo_maximo = 20000;
		tiempo_minimo = 11000;

		contador_seleccionados = 0;
		contador_correctos = 0;

		for (i = 0; i < total_globos_correctos; i++) {
			var_globo_correcto = document.getElementById("correcto"+i);
			
			alto_azar = parseInt( Math.random() * (margin_top_mayor - margin_top_menor) + margin_top_menor );
			left_azar = parseInt( Math.random() * (margin_left_mayor - margin_left_menor) + margin_left_menor );

			var_globo_correcto.style.marginTop = alto_azar+"px"
			var_globo_correcto.style.marginLeft = left_azar+"px"
			html_correctos[i] = var_globo_correcto;
			
			id_actual= "#"+var_globo_correcto.id;
			animacionGlobo(id_actual);	

			seleccionado_correcto[i] = {val: false};

			var_globo_correcto.addEventListener("click", clicGlobo);


		};

		/*
		setInterval(function(){
			duracion_int = 5000;
			$( "#correcto0" ).removeClass("animacion1");
						
			$( "#correcto0" ).addClass("animacion1");
			console.log("hjk")
		}, 5000);
		*/
		
		

		html_incorrectos = [];
		seleccionado_incorrecto = [];

		for (i = 0; i < total_globos_incorrectos; i++) {
			var_globo_incorrecto = document.getElementById("incorrecto"+i);
			
			alto_azar = parseInt( Math.random() * (margin_top_mayor - margin_top_menor) + margin_top_menor );
			left_azar = parseInt( Math.random() * (margin_left_mayor - margin_left_menor) + margin_left_menor );
			
			var_globo_incorrecto.style.marginTop = alto_azar+"px"
			var_globo_incorrecto.style.marginLeft = left_azar+"px"

			html_incorrectos[i] = var_globo_incorrecto;
			
			id_actual= "#"+var_globo_incorrecto.id;
			animacionGlobo(id_actual);

			seleccionado_incorrecto[i] = {val: false};

			var_globo_incorrecto.addEventListener("click", clicGlobo);


		};


		function clicGlobo(){
			
			if(parent.parent.con_sonidoclic){
				parent.parent.audio_clic.play();
			}
			id_actual= "#"+this.id;
			numero_arreglo_globo_correcto = html_correctos.indexOf(this);
			numero_arreglo_globo_incorrecto = html_incorrectos.indexOf(this);

			

			if(numero_arreglo_globo_correcto!=-1){
				if(seleccionado_correcto[numero_arreglo_globo_correcto].val == false){
					$( id_actual ).removeClass("esfera");
					$( id_actual ).addClass("esfera_selec");

					seleccionado_correcto[numero_arreglo_globo_correcto].val = true;

					contador_seleccionados += 1;
					contador_correctos += 1;
				} else {
					$( id_actual ).removeClass("esfera_selec");
					$( id_actual ).addClass("esfera");

					seleccionado_correcto[numero_arreglo_globo_correcto].val = false;	

					contador_seleccionados -= 1;
					contador_correctos -= 1;
				}
				
			} else {
				if(seleccionado_incorrecto[numero_arreglo_globo_incorrecto].val == false){
					$( id_actual ).removeClass("esfera");
					$( id_actual ).addClass("esfera_selec");

					seleccionado_incorrecto[numero_arreglo_globo_incorrecto].val = true;	

					contador_seleccionados += 1;
				} else {
					$( id_actual ).removeClass("esfera_selec");
					$( id_actual ).addClass("esfera");

					seleccionado_incorrecto[numero_arreglo_globo_incorrecto].val = false;	
					contador_seleccionados -= 1;
				}
			}
			
			
			seleccionadosGlobos()
			
		}

		function seleccionadosGlobos(){
			if(contador_seleccionados == total_globos_correctos){
				parent.parent.audio_boton.play();

				for (i = 0; i < total_globos_correctos; i++) {
					$("#correcto"+i).find(".simb_pevesf").html(parent.parent.icono_check)
				}
				for (i = 0; i < total_globos_incorrectos; i++) {
					$("#incorrecto"+i).find(".simb_pevesf").html(parent.parent.icono_wrong)
				}

				//$(".simb_pevesf").css("display","initial");


				tiene_retopev = $(".reto_pevesf").text().trim().length!=0||$(".reto_pevesf").find("img").length!=0||$(".reto_pevesf").find("video").length!=0;
				
				if(tiene_retopev){
					margin_left_mayor = 670;
					$(".reto_pevesf").prepend("<div class='msj_rpev'></div>")

					$(".reto_pevesf").fadeIn(100);

					if(contador_correctos==total_globos_correctos){
						$(".msj_rpev").html("Correcto. " + parent.parent.icono_messagecheck)

					} else {
						$(".msj_rpev").html("Incorrecto. "+parent.parent.tx_recuerdmay+" que:")

					}

					tiempo_maximo = 1000;
					tiempo_minimo = 800;
					for (i = 0; i < total_globos_correctos; i++) {
						console.log(parseInt($("#correcto"+i).css("marginLeft"),10),margin_left_mayor)

						if(parseInt($("#correcto"+i).css("marginLeft"),10)>margin_left_mayor){
							animacionGlobo("#correcto"+i)
						}
					
					}
					for (i = 0; i < total_globos_incorrectos; i++) {
						if(parseInt($("#incorrecto"+i).css("marginLeft"),10)>margin_left_mayor){
							animacionGlobo("#incorrecto"+i)
						}
					
					
					}

					tiempo_maximo = 20000;
					tiempo_minimo = 11000;

				}


				parent.parent.nuevo_puntaje += (contador_correctos/total_globos_correctos)*parent.parent.puntaje_maximo/(parent.cantidad_preguntas);
				
				if(parent.parent.nuevo_puntaje>parent.parent.puntaje_maximo-0.1){
					parent.parent.nuevo_puntaje = parent.parent.puntaje_maximo;
				}

				if(parent.parent.nuevo_puntaje>parent.parent.puntaje){
					parent.parent.puntaje = parent.parent.nuevo_puntaje;
				}

					document.getElementById("contenedor_loaderint_2").innerHTML = "";
					document.getElementById("contenedor_loaderint_2").style.visibility = "visible";

					alto_intrint = $("#instruccion_interna").height();

					if(parent.pregunta_actual<parent.cantidad_preguntas){
					document.getElementById("instruccion_interna").innerHTML = "<div> "+parent.parent.tx_puedesmay+" avanzar a la siguiente pregunta. </div>"
						$("#instruccion_interna").height(alto_intrint);

						parent.var_boton_sig.innerHTML = "Ir a la siguiente pregunta "+parent.parent.icono_indica_right;
						parent.var_boton_sig.style.visibility = "visible";

				} else{
					if(parent.tipo=="cuestionario"){
					document.getElementById("instruccion_interna").innerHTML = "<div> "+parent.parent.tx_puedesmay+" avanzar a la pantalla de resultados. </div>"
					parent.var_boton_sig.innerHTML = "Ir a los resultados "+parent.parent.icono_indica_right;
						parent.var_boton_sig.style.visibility = "visible";
					} else if(parent.parent.tipo_curso=="isometrico") {
						document.getElementById("instruccion_interna").innerHTML = "<div> "+parent.parent.tx_hasmay+" completado las preguntas. </div>"

					}
				}
				
				/*
	
					//document.getElementById("contenido_c0").style.zIndex = -1;

					document.getElementById("contenedor_loaderint").innerHTML = "";
					document.getElementById("contenedor_loaderint").style.visibility = "visible";


					if(parent.pregunta_actual<parent.cantidad_preguntas-1){
					document.getElementById("instruccion_interna").innerHTML = "<div> "+parent.tx_puedesmay+" avanzar a la siguiente pregunta. </div>"

						parent.var_boton_sig.innerHTML =  "Ir a la siguiente pregunta "+parent.parent.icono_indica_right;
						parent.var_boton_sig.style.visibility = "visible";

				} else{
					document.getElementById("instruccion_interna").innerHTML = "<i class='fas fa-angle-right'></i> "+parent.tx_puedesmay+" avanzar a la pantalla de resultados. <i class='fas fa-angle-left'></i>"
					parent.var_boton_sig.innerHTML = "Ir a los resultados "+parent.parent.icono_indica_right;
						parent.var_boton_sig.style.visibility = "visible";
				}
						//suma_total();	
						/*
				}
				if(contador_correctos == total_globos_correctos){



					document.getElementById("contenido_c0").style.zIndex = -1;
					if (parent.znThisPage != parent.var_paginas_totales){
					document.getElementById("instruccion_circulos").innerHTML = "¡Excelente! Todas las respuestas son correctas. "+parent.tx_puedesmay+" avanzar a la siguiente pantalla."

					
					
					} else {
					document.getElementById("instruccion_circulos").innerHTML = "Excelente"+parent.tx_hasmay+" finalizado el módulo. "+parent.tx_puedesmay+" cerrar esta ventana para finalizar.";	

						if(parent.znThisPage==parent.znThisPage && cantidad_maspersonaje>0){
							parent.audio_correcto.play();
							setTimeout(function(){
								clic_btnpersonaje();
								//document.getElementById("contenido_c0").style.zIndex = -1;

							}, 700);

						} else {
						suma_total();	
						}
					}

					if (parent.znThisPage != parent.var_paginas_totales) {
					//parent.document.getElementById("flecha_abajo").style.visibility = "visible";
					suma_total();
					}

					document.getElementById("simbolo_retroalimentacion").style.backgroundColor = "#06CFDC";
					document.getElementById("simbolo_retroalimentacion").innerHTML = "å";

					
					simbolo_retroalimentacion.visible = true;
					simbolo_retroalimentacion.scaleX = 0;
					simbolo_retroalimentacion.scaleY = 0;

					createjs.Tween.get(simbolo_retroalimentacion).to({alpha:1,scaleX:1,scaleY:1},velocidad_lenta);
					

		
					parent.puntaje += 100;
				} else {

				
					

					for (i = 0; i < total_globos_correctos; i++) {
							var_globo_correcto = document.getElementById("correcto"+i);

							id_actual= "#"+var_globo_correcto.id;
							$( id_actual ).removeClass("esfera_selec");
							$( id_actual ).addClass("esfera");
							seleccionado_correcto[i].val = false;
						};
						for (i = 0; i < total_globos_incorrectos; i++) {
							var_globo_incorrecto = document.getElementById("incorrecto"+i);

							id_actual= "#"+var_globo_incorrecto.id;
							$( id_actual ).removeClass("esfera_selec");
							$( id_actual ).addClass("esfera");
							seleccionado_incorrecto[i].val = false;
						};

					diferencia_globos = total_globos_correctos - contador_correctos;

					document.getElementById("simbolo_retroalimentacion").style.backgroundColor = "#0063A9";
					document.getElementById("simbolo_retroalimentacion").innerHTML = "~";
					

					
					simbolo_retroalimentacion.visible = true;
					simbolo_retroalimentacion.scaleX = 0;
					simbolo_retroalimentacion.scaleY = 0;

					createjs.Tween.get(simbolo_retroalimentacion).to({alpha:1,scaleX:1,scaleY:1},velocidad_lenta);
					
					


					if(diferencia_globos==1){
					document.getElementById("instruccion_circulos").innerHTML = ""+parent.tx_tuvistemay+" "+ diferencia_globos +" respuesta incorrecta. Vuélvelo a intentar."

					

					} else {

					document.getElementById("instruccion_circulos").innerHTML = ""+parent.tx_tuvistemay+" "+ diferencia_globos +" respuestas incorrectas. Vuélvelo a intentar."

					

					}

					contador_seleccionados = 0;
					contador_correctos = 0;



				}*/
			} else {
					//simbolo_retroalimentacion.visible = false;

					document.getElementById("instruccion_interna").innerHTML = mensaje_instruccion;

						

			}
		}

		function animacionGlobo(id_actual){
			azar_tiempo_actual = parseInt( Math.random() * (tiempo_maximo - tiempo_minimo) + tiempo_minimo);
			azar_animacion = parseInt( Math.random() * (3 - 1) + 1);
			

			$( id_actual ).removeClass("animacion1");
			$( id_actual ).removeClass("animacion2");
			$( id_actual ).removeClass("animacion3");
			
			$( id_actual ).addClass("animacion"+azar_animacion);

			alto_azar = parseInt( Math.random() * (margin_top_mayor - margin_top_menor) + margin_top_menor );
			left_azar = parseInt( Math.random() * (margin_left_mayor - margin_left_menor) + margin_left_menor );


			$( id_actual ).stop(true,false).animate({
			
		        marginTop: alto_azar,
		        marginLeft: left_azar,

			  }, azar_tiempo_actual, function() {
				

			    animacionGlobo(id_actual)
			  });
		};

}

function siguientePregunta(){
	parent.document.getElementById("cont_sig1").style.visibility = "visible";

}


function ingresaDatosMult(){
	leerEstilos();
	cantidad_datoing = $('.ingresa_dato').length;

	//console.log(cantidad_datoing)

	cantidad_corrding = 0;

	$('.ingresa_dato').each(function(index){


		html_ingdato = $(".cont_idato").html();
		$(this).closest(".cont_idato").append("<div class='cont_idato2'></div>")
		$(this).siblings(".cont_idato2").append("<div class='simb_pev'>aaaaaaaaaaaaa</div>");
		$(this).siblings(".cont_idato2").append($(this))
		//$(this).html("<div class='cont_idato2'>"+html_ingdato+"</div>");
	});

	var_boton_enviarta = document.getElementById("boton_enviarta");
	var_boton_enviarta.addEventListener("click", clic_boton_enviartamult);
	$(".boton_enviarta").fadeIn(0);

	tieneRetroPrEv();


}

function clic_boton_enviartamult(){


	if(parent.parent.con_sonidoclic){
				parent.parent.audio_clic.play();
			}


	document.getElementById("contenedor_loaderint_2").innerHTML = "";
	document.getElementById("contenedor_loaderint_2").style.visibility = "visible";
	$("#boton_enviarta").fadeOut(0);


	$('.ingresa_dato').each(function(index){

		var_contenido_textarea = $(this).val();
		modificada = var_contenido_textarea.replace(/,/g, '.').replace(/\./g, '\.').replace(/ /g, '').replace(/\$/g, '').replace(/-/g, '').replace(/'/g, '').replace(/\%/g, '');

		res_correcta = $(this).attr("dato-corr")

		//console.log(modificada,tiene_retopev)

	if(tiene_retopev){
		if(modificada==res_correcta){
			$(this).siblings(".simb_pev").html(parent.parent.icono_check)
			cantidad_corrding++
			
		} else {
			$(this).siblings(".simb_pev").html(parent.parent.icono_wrong)
			
			$(this).get(0).type = 'text';
			$(this).val(var_contenido_textarea +" ("+res_correcta+")")

		}

		$(this).siblings(".simb_pev").fadeIn();
	}

	//console.log(cantidad_datoing,cantidad_corrding,"cantidad_corrding")
		if(modificada==res_correcta){
			//cantidad_corrding++
			parent.parent.nuevo_puntaje += (parent.parent.puntaje_maximo/(parent.cantidad_preguntas))/cantidad_datoing;
			if(parent.parent.nuevo_puntaje>parent.parent.puntaje_maximo-0.1){
				parent.parent.nuevo_puntaje = parent.parent.puntaje_maximo;
			}

			if(parent.parent.nuevo_puntaje>parent.parent.puntaje){
				parent.parent.puntaje = parent.parent.nuevo_puntaje;
			}
		}

	});


			
	//if(tipo_num=="sindecimales"){
	//modificada = var_contenido_textarea.replace(/,/g, '').replace(/\./g, '').replace(/ /g, '').replace(/\$/g, '').replace(/-/g, '').replace(/'/g, '').replace(/\%/g, '');
	//} else if(tipo_num=="undecimal"){

	//}

	//modificada = Number(modificada);
	//console.log(tiene_retopev,"tiene_retopev")
	if(tiene_retopev){
		ancho_total = $(".escena").width();
		ancho_retro = $(".reto_pev").attr("data-ancho");
		if(ancho_retro==undefined){
			ancho_retro = 300;
		}
		ancho_escenafin = ancho_total - ancho_retro;
		ancho_retro = ancho_retro-20;

		apareceRetroPrEv(ancho_escenafin,ancho_retro);
		
	}

//	console.log(cantidad_datoing,cantidad_corrding,"cantidad_corrdingb")

		if(cantidad_datoing==cantidad_corrding){
			//parent.parent.nuevo_puntaje += parent.parent.puntaje_maximo/(parent.cantidad_preguntas);
			//if(parent.parent.nuevo_puntaje>parent.parent.puntaje_maximo-0.1){
			//	parent.parent.nuevo_puntaje = parent.parent.puntaje_maximo;
			//}

			//if(parent.parent.nuevo_puntaje>parent.parent.puntaje){
			//	parent.parent.puntaje = parent.parent.nuevo_puntaje;
			//}

			//$(".msj_rpev").text("Muy bien")
			$(".msj_rpev").html("Correcto. " + parent.parent.icono_messagecheck)

		} else {
			$(".msj_rpev").html("Incorrecto. "+parent.parent.tx_recuerdmay+" que:")
			
		}
	

		
	
	setTimeout(function(){

	if(parent.pregunta_actual<parent.cantidad_preguntas){
					document.getElementById("instruccion_interna").innerHTML = "<div> "+parent.parent.tx_puedesmay+" avanzar a la siguiente pregunta. </div>"
						//$("#instruccion_interna").height(alto_intrint);

						parent.var_boton_sig.innerHTML = "Ir a la siguiente pregunta "+parent.parent.icono_indica_right;
						parent.var_boton_sig.style.visibility = "visible";

				} else{
					if(parent.tipo=="cuestionario"){
					document.getElementById("instruccion_interna").innerHTML = "<div> "+parent.parent.tx_puedesmay+" avanzar a la pantalla de resultados. </div>"
					} else if(parent.parent.tipo_curso=="isometrico") {
						document.getElementById("instruccion_interna").innerHTML = "<div> "+parent.parent.tx_hasmay+" completado las preguntas. </div>"

					}

					parent.var_boton_sig.innerHTML = "Ir a los resultados "+parent.parent.icono_indica_right;
						parent.var_boton_sig.style.visibility = "visible";
				}
			},tiempo_btnsig);
	//parent.document.getElementById("retro_preg").className = "retro_amim";

	//parent.document.getElementById("retro_resp").className = "retro_anima";
	

}





function ingresaDato(respuesta_correcta){
	res_correcta = respuesta_correcta;
	leerEstilos();
	var_boton_enviarta = document.getElementById("boton_enviarta");
	var_boton_enviarta.addEventListener("click", clic_boton_enviarta);
	
	
	
	html_ingdato = $(".cont_idato").html();

	$(".cont_idato").html("<div class='cont_idato2'>"+html_ingdato+"</div>");
	$(".cont_idato2").append("<div class='simb_pev'></div>");

	
	
	//parent.document.getElementById("retro_resp").style.opacity = "1";
	tieneRetroPrEv();

	respuesta_correctatxt = respuesta_correcta.toString()
	cantidad_decimales = respuesta_correcta.countDecimals();

	$('.ingresa_dato').on('keyup', function() {
		ingdato_count = $('.ingresa_dato').val()
		ultima_ingdato_count = ingdato_count.slice(-1);
		
		//console.log(ultima_ingdato_count)
		//if($('.ingresa_dato').val().length>0){
		if(ultima_ingdato_count!="."&&ultima_ingdato_count!=","&&ultima_ingdato_count!=""){
				console.log(parseFloat(ingdato_count))
				ingdato_count = parseFloat(ingdato_count)
				ingdato_count = ingdato_count.countDecimals()
			  //if($('.ingresa_dato').val().length==respuesta_correctatxt.length){
			  if(ingdato_count==cantidad_decimales){
			  //if($('.ingresa_dato').val().length>0){
			  	if($(".boton_enviarta").css("display")=="none"){
			  		$(".boton_enviarta").fadeIn(0);
			  	}
			  } else {
			  	$(".boton_enviarta").fadeOut(0);

			  }

	  	} else {
			  	$(".boton_enviarta").fadeOut(0);

	  	}
	 	
	});

	$("#ingresa_dato").focus();

}

Number.prototype.countDecimals = function () {
    if(Math.floor(this.valueOf()) === this.valueOf()) return 0;
    return this.toString().split(".")[1].length || 0; 
}


function tieneRetroPrEv(){
	$(".escena").addClass("escena_flex");
	$("body").addClass("body_flex");

	tiene_retopev = $(".reto_pev").text().trim().length!=0||$(".reto_pev").find("img").length!=0||$(".reto_pev").find("video").length!=0;

	if(tiene_retopev){
		$(".reto_pev").prepend("<div class='msj_rpev'></div>")
		html_rpev = $(".reto_pev").html();
		$(".reto_pev").addClass("resaltado_especial");
		$(".reto_pev").html("<div>"+html_rpev+"</div>");
		tiempo_btnsig = 1000;
	} else {
		tiempo_btnsig = 0;
	}

}

function clic_boton_enviarta(){

	if(parent.parent.con_sonidoclic){
				parent.parent.audio_clic.play();
			}


	document.getElementById("contenedor_loaderint_2").innerHTML = "";
	document.getElementById("contenedor_loaderint_2").style.visibility = "visible";
	$("#boton_enviarta").fadeOut(0);

	var_contenido_textarea = document.getElementById("ingresa_dato").value;
			
	//if(tipo_num=="sindecimales"){
	//modificada = var_contenido_textarea.replace(/,/g, '').replace(/\./g, '').replace(/ /g, '').replace(/\$/g, '').replace(/-/g, '').replace(/'/g, '').replace(/\%/g, '');
	//} else if(tipo_num=="undecimal"){
	modificada = var_contenido_textarea.replace(/,/g, '.').replace(/\./g, '\.').replace(/ /g, '').replace(/\$/g, '').replace(/-/g, '').replace(/'/g, '').replace(/\%/g, '');

	//}

	//modificada = Number(modificada);

	if(tiene_retopev){
		ancho_total = $(".escena").width();
		ancho_retro = $(".reto_pev").attr("data-ancho");
		if(ancho_retro==undefined){
			ancho_retro = 300;
		}
		ancho_escenafin = ancho_total - ancho_retro;
		ancho_retro = ancho_retro-20;
		apareceRetroPrEv(ancho_escenafin,ancho_retro);
		//apareceRetroPrEv(880,300);
		
		if(modificada==res_correcta){
			$(".simb_pev").html(parent.parent.icono_check)
			
			
		} else {
			$(".simb_pev").html(parent.parent.icono_wrong)
			

		}
	}
		if(modificada==res_correcta){
			parent.parent.nuevo_puntaje += parent.parent.puntaje_maximo/(parent.cantidad_preguntas);
			if(parent.parent.nuevo_puntaje>parent.parent.puntaje_maximo-0.1){
				parent.parent.nuevo_puntaje = parent.parent.puntaje_maximo;
			}


			if(parent.parent.nuevo_puntaje>parent.parent.puntaje){
				parent.parent.puntaje = parent.parent.nuevo_puntaje;
			}

			$(".msj_rpev").html("Correcto. " + parent.parent.icono_messagecheck)

		} else {
			$(".msj_rpev").html("Incorrecto. "+parent.parent.tx_recuerdmay+" que:")
			
		}
	


	
	setTimeout(function(){

	if(parent.pregunta_actual<parent.cantidad_preguntas){
					document.getElementById("instruccion_interna").innerHTML = "<div> "+parent.parent.tx_puedesmay+" avanzar a la siguiente pregunta. </div>"
						//$("#instruccion_interna").height(alto_intrint);

						parent.var_boton_sig.innerHTML =  "Ir a la siguiente pregunta "+parent.parent.icono_indica_right;
						parent.var_boton_sig.style.visibility = "visible";

				} else{
					if(parent.tipo=="cuestionario"){
					document.getElementById("instruccion_interna").innerHTML = "<div> "+parent.parent.tx_puedesmay+" avanzar a la pantalla de resultados. </div>"
					parent.var_boton_sig.innerHTML = "Ir a los resultados "+parent.parent.icono_indica_right;
						parent.var_boton_sig.style.visibility = "visible";
					} else if(parent.parent.tipo_curso=="isometrico") {
						document.getElementById("instruccion_interna").innerHTML = "<div> "+parent.parent.tx_hasmay+" completado las preguntas. </div>"

					}
				}
			},tiempo_btnsig);
	//parent.document.getElementById("retro_preg").className = "retro_amim";

	//parent.document.getElementById("retro_resp").className = "retro_anima";
	

}

function apareceRetroPrEv(an_1,an_2){
	$(".reto_pev").fadeIn(0);
	$('.escena').animate( { 'width': an_1+"px"}, 'slow', function(){});
	$('.reto_pev').animate( { 'width': an_2+"px"}, 'slow', function(){});
}


cant_loadyt = 0;

function onYouTubeIframeAPIReady() {
      	//player = [];
		for(i = 0; i < $('.video_yt').length; i++){
		//$('.video_yt').each(function(index){
		
			videoyt_id = $('.video_yt').eq(i).attr("data-idyt");
			//console.log(videoyt_id,i)
			player_yt[i] = new YT.Player('video'+i, {
	          height: '360',
	          width: '640',
	          videoId: videoyt_id,
	          events: {
	            'onReady': onPlayerReady,
	            'onStateChange': onPlayerStateChange
	          }
	        });

	    }//);

      }

      // 4. The API will call this function when the video player is ready.
      function onPlayerReady(event) {
        //event.target.playVideo();
        cant_loadyt++

       }

      // 5. The API calls this function when the player's state changes.
      //    The function indicates that when playing a video (state=1),
      //    the player should play for six seconds and then stop.
      var done = false;
      function onPlayerStateChange(event) {
        arr_eventvideo = [event.target.h,event.target.i,event.target.m,event.target.o];

        console.log(arr_eventvideo)
		for (i = 0; i < arr_eventvideo.length; i++) { 
        	if(arr_eventvideo[i]!=undefined){
        		if(arr_eventvideo[i].id!=undefined){
        			id_vyt = arr_eventvideo[i].id.replace("video", "")	
        			break;
        		}
        	}
        }
        

        //id_vyt = event.target.h.id.replace("video", "")

        if(event.data == 0){
			control_flechas(id_vyt,"fin_video");

        }
        if (event.data == YT.PlayerState.PLAYING && !done) {

          //setTimeout(stopVideo, 3000);
          done = true;
        }
      }
      function stopVideo() {
      	//player.stopVideo();

        
      }

function isNumber(evt) {
    evt = (evt) ? evt : window.event;
    var charCode = (evt.which) ? evt.which : evt.keyCode;
    if (charCode > 31 && (charCode < 48 || charCode > 57)) {
        return false;
    }
    	return true;
	}



function contenidos() {
	console.log(parent.znInt,"parent.znInt");
	//parent.dispositivo_movil = true;


	if(parent.tipo_curso == "isometrico" || parent.tipo_curso=="plataformas"){
		//parent.$(".cubre_imgfondo").css("background-color",parent.bg_cubreimgfondo);
    	parent.$(".cubre_imgfondo").addClass("cubre_imgfondoact");
	} 

	icono_check = parent.icono_check;
	icono_candadoab = parent.icono_candadoab;
	icono_candadocerr = parent.icono_candadocerr;
	//console.log("safsd")
	cuenta_intentos_act = 0;

	if(parent.videos_youtube){
		$('.video_yt').each(function(index){
			$(this).attr('id', 'video'+index);
		})
	  var tag = document.createElement('script');

      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      // 3. This function creates an <iframe> (and YouTube player)
      //    after the API code downloads.
      player_yt = [];



     }
	var canvas = document.getElementsByTagName('canvas')[0];

	if(!parent.con_botonesavance&&!parent.con_menunumeros_v2&&!parent.con_menunumeros_vhz){
		canvas.width  = 1260;
		canvas.height = 550;
	} else if(parent.con_menunumeros_v2){
		canvas.width  = 1165;
		canvas.height = 550;
	} else {
		canvas.width  = 1260;
		canvas.height = 505;
	}
	
	
	createjs.Ticker.useRAF = true;
	createjs.Ticker.setFPS(30);
	////////////////
	/*
	if(parent.znThisPage==1){
		parent.txt_leccion.alpha = 0;
	} else {
		parent.txt_leccion.alpha = 1;

	}
	*/
	/*
	var allElements = document.getElementsByTagName("*");
	var allIds = [];
	for (var i = 0, n = allElements.length; i < n; ++i) {
	  var el = allElements[i];
	  console.log(el.id)
	  if (el.id) { allIds.push(el.id); }
	}
	*/


	//////BOTONES ANIMADOS
	ini_especial = $(".btn_iniespecial").length>0;
	btn_zonaper = $(".zp").length>0;

	clic_btnesp = false;
	if(ini_especial){

	
if(btn_zonaper){
		console.log(btn_zonaper,"btn_zonaper");
		x_btnanima = [487,650,487,650,487,650,487,650,487,650,487,650,487,650,487,650];
		y_btnanima = [220,220,382.5,382.5,220,220,382.5,382.5,220,220,382.5,382.5,220,220,382.5,382.5];
	} else {
	sprites_total_an = [];
	total_sprites_an = [];
	for(inanx = 0; inanx < total_frames_anim.length; inanx++){
		
		arr_anima = [];
		anima_cerrado = [];
		anima_abierto = [];
		anima_visto = [];
		anima_selfin = [];
		
		for(int = 0; int < total_frames_anim[inanx].length; int++){
			arr_anima[int] = int;
			if(int<32){
				anima_abierto.push(int);
			} else if(int==32){
				anima_cerrado.push(int);
			} else if(int==33){
				anima_visto.push(int);
			} else {
				//anima_over.push(int);
			}
		}
		

		total_sprites_an[inanx] = new createjs.SpriteSheet({
				images: ["images/"+inanx+"_anim_atlas_.png"],
				frames: ["images/"+inanx+"_anim_atlas_.png"], "frames": total_frames_anim[inanx],
				animations: {
					"status_cerrado": {
						frames: anima_cerrado,
						next: false,
		            	speed: 1
					},
					"status_abierto": {
						frames: anima_abierto,
						next: "status_abierto",
		            	speed: 0.5
					},
					"status_visto": {
						frames: anima_visto,
						next: "status_visto",
						speed: 1
					},
					"status_selfin": {
						frames: anima_selfin,
						next: false,
						speed: 1
					}
					//"idle": [0, 10, "idle", 4]
					
				}
			});
		
		sprites_total_an[inanx] = new createjs.Sprite(total_sprites_an[inanx]);
		
		bounds_sprites_total_an = sprites_total_an[inanx].getBounds();
		
		x_btnanima = [487,650,487,650];
		y_btnanima = [220,220,382.5,382.5];
	

		if(parent.znThisPage<parent.pagina_superior){
			if(inanx==0){
			sprites_total_an[inanx].x = x_btnanima[0];
			sprites_total_an[inanx].y = y_btnanima[0];
			sprites_total_an[inanx].rotation = 0;
			} else if(inanx==1) {
			sprites_total_an[inanx].x = x_btnanima[1];
			sprites_total_an[inanx].y = y_btnanima[1];
			sprites_total_an[inanx].rotation = 0;
			} else if(inanx==2) {
			sprites_total_an[inanx].x = x_btnanima[2];
			sprites_total_an[inanx].y = y_btnanima[2];
			sprites_total_an[inanx].rotation = 0;
			} else if(inanx==3) {
			sprites_total_an[inanx].x = x_btnanima[3];
			sprites_total_an[inanx].y = y_btnanima[3];
			sprites_total_an[inanx].rotation = 0;
			}
		} else {
			if(inanx==0){
			sprites_total_an[inanx].x = x_btnanima[0]-50;
			sprites_total_an[inanx].y = y_btnanima[0]-50;
			sprites_total_an[inanx].rotation = -5;
			} else if(inanx==1) {
			sprites_total_an[inanx].x = x_btnanima[1]+50;
			sprites_total_an[inanx].y = y_btnanima[1]-50;
			sprites_total_an[inanx].rotation = 5;
			} else if(inanx==2) {
			sprites_total_an[inanx].x = x_btnanima[2]-50;
			sprites_total_an[inanx].y = y_btnanima[2]+50;
			sprites_total_an[inanx].rotation = 5;
			} else if(inanx==3) {
			sprites_total_an[inanx].x = x_btnanima[3]+50;
			sprites_total_an[inanx].y = y_btnanima[3]+50;
			sprites_total_an[inanx].rotation = -5;
			}
		}
		//coord_elem_drag[inanx][0];// (ancho_canvas/total_frames_anim.length)-(bounds_sprites_total_an.width/2)+(bounds_sprites_total_an.width)*inanx 
		y_sta_fin = 320
		sprites_total_an[inanx].regX = bounds_sprites_total_an.width/2;
		sprites_total_an[inanx].regY = bounds_sprites_total_an.height/2;
		sprites_total_an[inanx].scaleX = 1;
		sprites_total_an[inanx].scaleY = 1;
		sprites_total_an[inanx].cursor = "pointer";
		sprites_total_an[inanx].visible = true;
		sprites_total_an[inanx].alpha = 1;
		

		//for (i = 0; i < total_imagenes.length; i++) { 
			stage.addChild(sprites_total_an[inanx]);

		if(parent.znThisPage<parent.pagina_superior){
			sprites_total_an[inanx].gotoAndPlay("status_visto");
		
		} else {
			sprites_total_an[inanx].gotoAndPlay("status_cerrado");
			sprites_total_an[0].gotoAndPlay("status_abierto");
		}


			sprites_total_an[inanx].addEventListener("click", function(event){
				index_elemanim = sprites_total_an.indexOf(event.currentTarget);
				if(!permitido_btn[index_elemanim].val){

					mensajeRestringeCirc(index_elemanim);
				}
				

				clic_circulos_grandes(document.getElementById("circ_btn"+index_elemanim));
				
			});

	}
	}


	$( ".btn_iniespecial" ).click(function() {

		if(parent.con_sonidoclic){
				parent.audio_clic.play();
			}
		clic_btnesp = true;
  		///Desaparecen
  		$(this).fadeOut(0);
  		
		if(!btn_zonaper){

			for (intit = 0; intit < cantidad_circulos; intit++) { 
				
				titulos_circulos[intit].visible = true;
				titulos_circulos[intit].alpha = 1;
				document.getElementById("titulo_c"+intit).className = "titulo_c2";
				document.getElementById("titulo_c"+intit).style.width = width_titulos_circulos+"px";
				document.getElementById("titulo_c"+intit).style.fontSize = 23+"px";
				
				document.getElementById("titulo_c"+intit).style.textAlign = "center";
				document.getElementById("titulo_c"+intit).style.minWidth = width_titulos_circulos+"px";
					document.getElementById("titulo_c"+intit).style.maxWidth = width_titulos_circulos+"px";

				createjs.Tween.get(titulos_circulos[intit]).to({x:orig_xtit[intit],y:orig_ytit[intit]},velocidad_lenta);	

	  		}
	  	}
		//instruccion_circulos.visible = false;
		document.getElementById("indica_circ").style.visibility = "hidden";
		
		
		//console.log(circulo_actual_ok)

		/////Aparecen
		instruccion_circulos.visible = true;
		instruccion_circulos.alpha = 1;
		$("#instruccion_circulos").width("100%");
		$("#instruccion_circulos").html("<div>"+txt_instinterna+"</div>");
		if(btn_zonaper){
			for(intx = 0; intx < cantidad_circulos; intx++){
				createjs.Tween.get(contenedor_circulos[intx],{override:true}).to({scaleX:scale_circulos_grandes_no_over,scaleY:scale_circulos_grandes_no_over},velocidad_lenta, createjs.Ease.bounceOut);
				
			}
		} else {
			for(intx = 0; intx < sprites_total_an.length; intx++){
				createjs.Tween.get(sprites_total_an[intx],{override:true}).to({scaleX:1,scaleY:1},velocidad_rapida, createjs.Ease.bounceOut);
			}
		}
		circulo_g = true;

		control_flechas(circulo_actual_ok,"clic");


		if (cantidad_masinfo>0){
			//console.log(clic_en_masinfo,"clic_en_masinfo")
			if(!clic_en_masinfo){
				clic_masinfo()
			}
		
			for (i = 0; i < cantidad_masinfo; i++) { 
				document.getElementById("accion_btnmasinfo"+i).innerHTML = "Ver";

				createjs.Tween.get(total_masinfo[i],{override:true}).to({y:y_botones_mas_ini},velocidad_rapida,createjs.Ease.elasticOut);	
				createjs.Tween.get(total_texto_masinfo[circulo_actual_ok],{override:true}).to({x:x_botones_masini,alpha:0},velocidad_rapida);	
					createjs.Tween.get(contenidos_circulos_masinfo[i],{override:true}).to({y:y_botones + 260,scaleX:0,scaleY:0},velocidad_rapida);

				}
			
			}

		$('.c_principal').each(function(index){

			initialValueAnima("#contenido_c",index,"");//para contenido principal
			document.getElementById('contenido_c'+index).style.zIndex = "-1";
			//console.log(index)

			$('.c_principal').find(".texto_masinfo").each(function(){	
			//initialValueAnima("#contenido_c",0,"_0");//para contenido en más info
			//document.getElementById('contenido_c'+0+"_0").style.zIndex = "-1";

			});
			
			
			if(cantidad_audiop[circulo_actual_ok]!=0){
				initialValueAnima("#contenido_c",circulo_actual_ok,"_mp");//para contenido en más mas per
				document.getElementById('contenido_c'+circulo_actual_ok+"_mp").style.zIndex = "-1";

			}
		
		});

  	});



	}

  	

	///////////////////////

	////VARIABLES
	cantidad_audiop = parent.audios_totales[parent.znThisPage-1];
	numero_arreglo_maspersonajeactual = 0;
	
	cantidad_circulos = $('.c_principal').length;

	cuenta_clic_c = 0;
	cuenta_clic_cb = 0;
	arr_primeros_clic = [];
	arr_primeros_clic_b = [];
	


	function crearClics(elem_parent,index,indc){
		clic_abs = false;
		
		//cl_ep = elem_parent[0].className;
		cl_ep = $(elem_parent).find(">.item_cont")[0].className;
		cl_ep = cl_ep.split(/\s+/);		
		cl_ep = cl_ep[0];	
		cl_ep = cl_ep.split("_").length;
		cl_ep = cl_ep - 3;

		cant_clcx_circ = elem_parent.find(".txt_interno").length;



		if(cant_clcx_circ>0){
			//$(this).find(".item_c").eq(1).append( $( "<p class='cubre_clic'></p>" ) );
			//$(this).find(".cubre_clic").attr('id', 'cubre_clic'+index);
			//$(this).find(".cubre_clic").text("dsfds");
		}

		h2_clic = elem_parent.find(".item_c").eq(0).find("h2").length;
		arr_h2_clic = [];
		for (i = 0; i < h2_clic; i++) {
			arr_h2_clic[i] = parseInt(elem_parent.find(".item_c").eq(0).find("h2").eq(i).attr("data-clic"),10);
		}
		//console.log(arr_h2_clic)
		for (i = 0; i < cant_clcx_circ; i++) {
			pos_abs = elem_parent.find(".txt_interno").eq(i).find("h1").attr("data-posabs");
			if(pos_abs==undefined || pos_abs == null){

			} else {
				clic_abs = true;
			}
		}
		

		if(elem_parent.find(".txt_interno").length > 0){
			//for (i = 0; i < h2_clic; i++) {
				if(clic_abs){
					
					elem_parent.find(".item_c").eq(cl_ep).find("div").append("<div id='contenedor_clics_scroll"+cuenta_clic_c+"' class='contenedor_clics_scroll' style='width:100%;height:400px;'></div");
					for (i = 0; i < cant_clcx_circ; i++) {

					
						pos_abs = elem_parent.find(".txt_interno").eq(i).find("h1").attr("data-posabs");
						pos_abs = pos_abs.split(",");		
						
						
						elem_parent.find(".contenedor_clics_scroll").eq(0).append("<div class='clic_abs' style='width:"+pos_abs[0]+"px;left:"+pos_abs[1]+"px; top:"+pos_abs[2]+"px'><div class='divcont_c'><table class='cont_clic'></table></div></div>");
					//elem_parent.find(".contenedor_clics_scroll").eq(0).find(".posabsclic").append("<table class='cont_clic'></table>");
					

					}
				} else {

					elem_parent.find(".item_c").eq(cl_ep).find("div").append("<div id='contenedor_clics_scroll"+cuenta_clic_c+"' class='contenedor_clics_scroll'></div");
					elem_parent.find(".contenedor_clics_scroll").eq(0).append("<div class='divcont_c'><table class='cont_clic'></table></div>");

						
					
				}
			//}
			
		}
		

		cant_clcx_circb = 0;
		entra_cb = -1


		for (i = 0; i < cant_clcx_circ; i++) {
		}

		for (i = 0; i < cant_clcx_circ; i++) {
			for (itx = 0; itx < h2_clic; itx++) {
				if(i==arr_h2_clic[itx]){
					txt_h2clic = elem_parent.find(".item_c").eq(0).find("h2").eq(itx).html();
					
						elem_parent.find(".contenedor_clics_scroll").eq(0).find(".cont_clic").append("<tr><td colspan='2'><div class='subtitulo_c_tabla'>"+txt_h2clic+"</div></td></tr>");


				}
			}

			txt_clic = elem_parent.find(".txt_interno").eq(i).find("h1").eq(0).html();
			//console.log(elem_parent)
				if(clic_abs){
					
					elem_parent.find(".contenedor_clics_scroll").eq(0).find(".cont_clic").eq(i).append("<tr><td colspan='2'><div class='clic'>"+txt_clic+"</div></td><td><div id=indicador_c"+cuenta_clic_c+" class='indicador_c'>"+parent.icono_indica_clic+"</div></td></tr>");
			          	elem_parent.find(".item_c").eq(0).find("img").appendTo(elem_parent.find(".contenedor_clics_scroll"));

				} else {
					elem_parent.find(".contenedor_clics_scroll").eq(0).find(".cont_clic").append("<tr><td colspan='2'><div class='clic'>"+txt_clic+"</div></td><td><div id=indicador_c"+cuenta_clic_c+" class='indicador_c'>"+parent.icono_indica_clic+"</div></td></tr>");
						//console.log(cuenta_clic_c,cant_clcx_circ-1)
						
				}				
			
				

			if(i==0){

				if(elem_parent.hasClass("c_principal")){
					ixct = 0;
				} else {
					ixct = 1;
				}
				arr_primeros_clic[indc][ixct] = cuenta_clic_c;
			}
			
			cuenta_clic_c++

			if(i==0){
				txt_cliciniintx = elem_parent.find(".txt_interno").eq(0).find("h1").eq(0);
				txt_cliciniint = elem_parent.find(".txt_interno").eq(0).find("h1").eq(0).text();
				if(txt_cliciniint.trim().length>0){
					if(clic_abs){
						elem_parent.find(".contenedor_clics_scroll").eq(0).find(".cont_clic").eq(0).append("<tr><td colspan='2'><div class='space_c'></div></td><td></tr>");

					} else {
						elem_parent.find(".contenedor_clics_scroll").eq(0).find(".cont_clic").append("<tr><td colspan='2'><div class='space_c'></div></td><td></tr>");
					}
					
				} else {
					elem_parent.find(".clic").eq(0).fadeOut(0);
					elem_parent.find(".indicador_c").eq(0).fadeOut(0);
				}
			}

			elem_parent.find(".txt_interno").eq(i).find("h1").eq(0).html("");

			cant_clcx_circb = elem_parent.find(".txt_interno").eq(i).find(".txt_internob").length;
			
			if(cant_clcx_circb>0){
				elem_parent.find(".txt_interno").eq(i).append("<div id='contenedor_clics_scroll_hz"+i+"' class='contenedor_clics_scroll_hz'></div");
				elem_parent.find(".txt_interno").eq(i).find(".contenedor_clics_scroll_hz").append("<div class='divcont_c'><table class='cont_clic'><tr></tr><tr></tr></table></div>");


				for (int = 0; int < cant_clcx_circb; int++) {

					txt_clicb = elem_parent.find(".txt_interno").eq(i).find(".txt_internob").eq(int).find("h1").eq(0).html();

					elem_parent.find(".txt_interno").eq(i).find(".cont_clic").find("tr").eq(0).append("<td><div id=indicador_cb"+cuenta_clic_cb+" class='indicador_cb'>"+parent.icono_indica_clicb+"</div></td>");
					elem_parent.find(".txt_interno").eq(i).find(".cont_clic").find("tr").eq(1).append("<td><div id=clicb"+cuenta_clic_cb+" class='clicb'>"+txt_clicb+"</div></td>");

					if(int==0){
						entra_cb++

					arr_primeros_clic_b.push(cuenta_clic_cb);
					
			
					txt_cliciniintbx = elem_parent.find(".txt_internob").eq(0).find("h1").eq(0);
					txt_cliciniintb = elem_parent.find(".txt_internob").eq(0).find("h1").eq(0).text();
					//console.log(txt_cliciniintb,txt_cliciniintb.trim().length,entra_cb)
					
					if(txt_cliciniintb.trim().length>0){
						elem_parent.find(".contenedor_clics_scroll_hz").eq(entra_cb).find(".cont_clic").find("tr").eq(0).append("<td rowspan='2'><div class='space_cb'></div></td>");
					
					} else {
					elem_parent.find(".contenedor_clics_scroll_hz").eq(entra_cb).find(".clicb").eq(0).fadeOut(0);
					elem_parent.find(".contenedor_clics_scroll_hz").eq(entra_cb).find(".indicador_clicb").eq(0).fadeOut(0);
					}
					}

					//if(cuenta_clic_cb == cant_clcx_circb-1){
						
					//	}
					cuenta_clic_cb++

					//elem_parent.find(".txt_interno").eq(i).find(".txt_internob").eq(int).find("h1").eq(0).html("")
				}

			}
		}


		

	}

	

	function scrollMenuClic(elem_clic){
		//console.log(elem_clic)
		es_pclic = elem_clic.find("div[class*=clic]").eq(0).attr("id")==elem_clic.find(".selected_clic").eq(0).attr("id");
		//console.log(elem_clic.find("div[class*=clic]").eq(0).attr("id"),elem_clic.find(".selected_clic").eq(0).attr("id"))

		//console.log(elem_clic.find("div[class*=clic]").eq(0))
		//console.log(elem_clic.find("div[class*=clic]").eq(0).attr("id"),$("#clic"+clic_actual_ok).attr("id"))
		if(es_pclic){
			scroll_clic = $("#"+elem_clic.find(".selected_clic").eq(0).attr("id")).position().top-10;
		} else {
			scroll_clic = $("#"+elem_clic.find(".selected_clic").eq(0).attr("id")).position().top;//-10;
		}
		
		//console.log(scroll_clic,"scroll_clic")
		elem_clic.mCustomScrollbar("scrollTo",scroll_clic,{
   			scrollEasing:"easeOut",
   			scrollInertia: 300
		});

			
	}

	function scrollMenuClicB(elem_clicb){
		//console.log(elem_clic)
		
		es_pclicb = elem_clicb.find("div[class*=clic]").eq(0).attr("id")==elem_clicb.find(".selected_clicb").attr("id");
		//console.log(elem_clicb.find("div[class*=clic]").eq(0).attr("id"),elem_clicb.find(".selected_clicb").attr("id"))

//console.log(es_pclicb,clic_actual_okb)
//console.log(elem_clicb.attr("id"),clic_actual_okb)
//console.log(elem_clicb.find("div[class*=clic]").eq(0).attr("id"))
//console.log(elem_clicb.find("div[class*=clic]").eq(0))
//console.log($("#clicb"+clic_actual_okb).attr("id"))
		if(es_pclicb){
			scroll_clicb = $("#"+elem_clicb.find(".selected_clicb").attr("id")).position().left;//-10;
		} else {
			scroll_clicb = $("#"+elem_clicb.find(".selected_clicb").attr("id")).position().left;//+200;//-20;//+50;//-10;
		}
		
		elem_clicb.mCustomScrollbar("scrollTo",scroll_clicb,{
   			scrollEasing:"easeOut",
   			scrollInertia: 300
		});

			
	}



	if($(".nota_fin").length==1){
			
		if(parent.puntaje_maximo<=10){
			parent.puntaje = parent.puntaje.toFixed(1);
			parent.puntaje_maximo = parent.puntaje_maximo.toFixed(1);
		} else {
			parent.puntaje = parseInt(parent.puntaje);

		}
		
		$(".nota_fin").text(parent.puntaje)
		$(".nota_max").text(parent.puntaje_maximo)


		if(parent.puntaje<parent.puntaje_medio){
			$("#mensaje_aprueba").remove();
			$("#mensaje_medio").remove();

			$("#img_aprueba").remove();
			$("#img_medio").remove();

			
		} else if(parent.puntaje<parent.puntaje_aprueba){
			$("#mensaje_aprueba").remove();
			$("#mensaje_noaprueba").remove();

			$("#img_aprueba").remove();
			$("#img_noaprueba").remove();
		} else if(parent.puntaje>=parent.puntaje_aprueba){
			$("#mensaje_noaprueba").remove();
			$("#mensaje_medio").remove();

			$("#img_noaprueba").remove();
			$("#img_medio").remove();
		}
	}


	$('.c_principal').height(canvas.height);

	abc = ["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];

	cantidad_circulos = $('.c_principal').length;

	cantidad_arrastrecat = $('.txt_arrastre2').length;
	cantidad_crucigrama = $('.crucigrama').length;
	cantidad_evalfin = $('.inicia_cuestionario').length;
	cantidad_opsel = $('.opcion_preg').length;
	con_retro_opsel = $('.opcion_preg').find("p").length;
	cantidad_oparr = $('.opcion').length;
	cantidad_vf = $('.enunciado_vf').length;
	cantidad_svar = $('.enunciado_selvar').length;
	cantidad_comporacion = $('.txt_arrastre').length;

	posabs_btncirc = false;

	
	if(cantidad_comporacion>0){
		
		tipo = "arrastre_txt2";
		cantidad_circulos = cantidad_comporacion;

		txt_maxlength_txt = "";
		$('.txt_arrastre').each(function(index){
			if($(this).text().length>txt_maxlength_txt.length){
				txt_maxlength_txt = $(this).text();
			}

			data_prev = $(this).html();
			$(this).html("");

			//$(this).append("<div style='position:relative'><div class='txt_opc'>"+data_prev+"</div><div class='corr_orac'></div><div class='simbretvf'></div></div>")

			$(this).append("<div style='position:relative'><div class='txt_opc'>"+data_prev+"</div><p></p><div class='corr_orac'></div><div class='simbretvf'></div></div>")
				
		}); 

		$('.opcion_arrastretxt2').each(function(index){
			data_prev = $(this).attr("data-prev");
			$(this).append("<span class='pistatxt2'><span>"+data_prev+"</span></span>")

		});
		
		txt_maxlength_txt = txt_maxlength_txt.substring(3)
		
		
		$('.pistatxt2').each(function(index){
			$(this).append(txt_maxlength_txt)
		});
	} else if(cantidad_svar>0){
		tipo = "varias_sel";
		cantidad_circulos = [];
		
		if($(".reto_ovsel").length>0){
		
			$(".c_principal").find('.item_c').eq(2).append("<div id='next_svel' class='next_svel'>Siguiente</div>")


		} 

			$(".c_principal").find('.item_c').eq(2).append("<div class='est_selvars'></div>")


		$(".c_principal").find('[id^=opcion_sel]').each(function(index){
				$(this).addClass('opcion_vsel');
			});


		if($(".group_vsel").length>0){
			$('.opciones_vsel').each(function(index){
				$(this).addClass("opciones_vselgr");
			});
		}	
		

		$('.opciones_vsel').each(function(index){

			$(this).find('.opcion_vsel').each(function(index){
				if($(".group_vsel").length==0){
					$(this).prepend("<span class='negrilla'>"+abc[index]+".</span> ")
				} else {
					$(this).prepend("<span class='negrilla'>"+""+"</span> ")

				}
			});
			cantidad_circulos[index] = $(this).find(".opcion_vsel").length;
			$(this).append("<div id='cubre_pregselvar"+index+"' class='cubre_pregselvar'></div>");
			if(index!=0){
				$(this).fadeOut(0);
			} else {
				$(this).find(".cubre_pregselvar").fadeOut(0);
			}
			
				$(".est_selvars").append("<div id='est_selvar"+index+"' class='est_selvar'>"+parent.icono_preg+"</div>")
			
		});
		$('.enunciado_selvar').each(function(index){
			if(index!=0){
				$(this).fadeOut(0);
			} 
		});
		$(".c_principal").find('.item_c').eq(1).css("margin-top","60px")
		$(".c_principal").find('.item_c').eq(1).css("height","390px")

		//console.log($(".opciones_vsel").eq(0).attr("data-ccvsel"))
		if($(".reto_ovsel").length>0){

			if($(".opciones_vsel").eq(0).attr("data-ccvsel")==1){
				
				$("#instruccion_circulos").html(""+parent.tx_seleccionamay+" la opción que "+parent.tx_consideresmin+" correcta.");
			} else {
				
				$("#instruccion_circulos").html(""+parent.tx_seleccionamay+" las "+
					$(".opciones_vsel").eq(0).attr("data-ccvsel") +" opciones que "+parent.tx_consideresmin+" correctas.");

			}
		} else {
			if($(".opciones_vsel").eq(0).attr("data-ccvsel")==1){
				
				$("#instruccion_circulos").html(""+parent.tx_seleccionamay+" la opción correcta.");
			} else {
				
				$("#instruccion_circulos").html(""+parent.tx_seleccionamay+" las "+
					$(".opciones_vsel").eq(0).attr("data-ccvsel") +" opciones correctas.");

			}
		}
		
		$("#instruccion_circulos>div").removeClass("color_correcto");
							$("#instruccion_circulos>div").removeClass("color_incorrecto");	

	} else if(cantidad_vf>0){
		tipo = "vf";
		cantidad_circulos = cantidad_vf;

		$('.enunciado_vf').each(function(index){
			$(this).closest(".item_c").css("margin-top","70px");
			
			html_re = $(this).html();
			rta_vf = $(this).attr("data-rta");

			if(rta_vf=="v"){
				op_ver = "correcto"+index;
				op_false = "incorrecto"+index;
			} else {
				op_ver = "incorrecto"+index;
				op_false = "correcto"+index;
			}

			$(this).html("<p>"+html_re+"</p><div class='indica_vf'>"+parent.icono_indica_right+"</div>");

			$(this).append( "<div id='"+op_ver+"' class='verdadero'>V</div><div id='"+op_false+"' class='falso'>F</div>" );

			if($(".retro_vf").length>0){
				con_retrovf = true;
			} else {
				con_retrovf = false;
			}

		});
	} else if(cantidad_oparr>0){
		tipo = "arrastre";
		cantidad_circulos = cantidad_oparr;
		//$('#opcion0').closest(".item_c").css("z-index","1");
		$('.opcion').each(function(index){
			$(this).closest(".item_c").css("margin-top","70px");

			//$('#enunciado'+index).find(".espacio").width($(this).width()+4)
			//console.log($(this).width()+4)

		});
		classList = $(".c_principal").attr('class').split(/\s+/);		
		classList_p = classList[0];	
		classList_s = classList[1];	

		if(cantidad_circulos==3||cantidad_circulos==2){
			$(".c_principal").attr('class',classList_p+" c_1_4")
		} else if(cantidad_circulos==4){
			$(".c_principal").attr('class',classList_p+" c_2_5_5")

			$(".c_principal").append( "<div class='item_c'><div class='textos_arrastre'></div></div>" );

			$(".c_principal").find('.textos_arrastre').eq(0).find('.enunciado').each(function(index){
				if(index>1){
					$(this).appendTo($(".c_principal").find('.textos_arrastre').eq(1));
				}
			});		
		} 

		classList = $(".c_principal").attr('class').split(/\s+/);		
		classList_p = classList[0];	
		classList_s = classList[1];	

		if (classList_s.indexOf('-') == -1) {
			//$(".opcion").css("margin","10px 0");
  			$(".opciones_arrastre").attr("class","opciones_arrastre_ver");
  			$(".textos_arrastre").attr("class","textos_arrastre_ver");
			
			$(".enunciado").closest(".item_c").css("margin-top","80px");

			//$(".opcion").css("margin","10px");
  			arr_hzt = false;
		} else {
  			arr_hzt = true;

		}

	} else if(cantidad_opsel>0){
		tipo = "selecciones";
		cantidad_circulos = [];
		if(con_retro_opsel>0){
			con_retro_opsel = true;
		} else {
			con_retro_opsel = false;
		}
		cantidad_circulos[0] = $(".c_principal").find('[id^=correcto]').length;
		cantidad_circulos[1] = $(".c_principal").find('[id^=incorrecto]').length;


	} else if(cantidad_evalfin>0){
		tipo = "cuestionario";
		$(".inicia_cuestionario").fadeOut();

		cantidad_circulos = parseInt($("#total_preg_c").text());
		$(".c_principal").find(".item_c").eq(1).attr("id","instruccion_evaluacion");
		$(".c_principal").find(".inicia_cuestionario").eq(0).attr("id","inicia_cuestionario");
		$(".inicia_cuestionario").closest(".item_c").height(40);
		
		if(!parent.con_botonesavance&&!parent.con_menunumeros_vhz){
			$("#instruccion_evaluacion").find(".item_c").eq(0).height("420px");
		} else {
			$("#instruccion_evaluacion").find(".item_c").eq(0).height("350px");

		}


		if(preg_azar!=false){
			arr_preg = []
			for (i = 0; i < preg_azar; i++) {
				arr_preg[i] = i+1;
			}
			console.log(arr_preg,"arr_preg")

			dif_azarpr = preg_azar-cantidad_circulos;

			console.log(dif_azarpr,"dif_azarpr")
			for (i = 0; i < dif_azarpr; i++) {
				delRandomArr();
			}

			function delRandomArr(){
				const random = Math.floor(Math.random() * arr_preg.length);
				console.log(arr_preg[random]); //prints the random item

				var value = arr_preg[random]
				arr_preg = arr_preg.filter(function(item) {
				  return item !== value
				})
			}

			console.log(arr_preg) //prints the array after removing the random item

			function shuffleArray(array) {
			    for (let i = array.length - 1; i > 0; i--) {
			        const j = Math.floor(Math.random() * (i + 1));
			        [array[i], array[j]] = [array[j], array[i]];
			    }
			}
			shuffleArray(arr_preg)

			console.log(arr_preg) //prints the array after removing the random item
		}
		
	} else if(cantidad_arrastrecat>0){
		tipo = "arrastre_txt_varios";
		cantidad_circulos = [];
		$('.opcion_arrastretxt2').each(function(index){
			cantidad_circulos[index] = parseInt($(this).attr("data-corr"));
		});	

		c_carr = [];
		correcto_carr = [];
		mov_carr = [];
		narr = 0;
		
		for (i = 0; i < cantidad_circulos.length; i++) { 
			c_carrb = [];
		
			
			for (ib = 0; ib < cantidad_circulos[i]; ib++) { 
			
				c_carrb.push(narr);
				narr++

			}
			c_carr.push(c_carrb);

		}
	} else if(cantidad_crucigrama>0){
		tipo="crucigrama";
		primer_clic_cruc = true;
		

		classList = $(".c_principal").attr('class').split(/\s+/);		
		classList_p = classList[0];	
		classList_s = classList[1];	
		

		class_acx = classList_s.replace("c_", "")
		arr_class_acx_or = class_acx.split("-")
		arr_class_acx = class_acx.split("-")

		
		for (i = 0; i < arr_class_acx.length; i++) { 
			arr_class_acx[i] = arr_class_acx[i].split("_");
		}

		suma_orgcruc = parseInt(arr_class_acx[1][0],10) + parseInt(arr_class_acx[1][1],10);
		orig_itm1 = (arr_class_acx[1][0] / suma_orgcruc) * 100 + "%";
		orig_itm2 = (arr_class_acx[1][1] / suma_orgcruc) * 100 + "%";
		
		//console.log(orig_itm1,orig_itm2)

		$(".c_principal").attr('class',classList_p+" c_1-1_0")

		$('.c_principal').find(".item_c").eq(2).fadeTo(0,0);
		
		objetos_intcruci = [];
		
		$('.span_pista').each(function(index){

			cont_spanpinta = $('.span_pista').eq(index).html();
			$('.span_pista').eq(index).html("");

			$('.span_pista').eq(index).append("<div><div>"+ cont_spanpinta+"</div><div class='txt_intentoscruci'>Intento <b>0</b> de <span>"+parent.cantidad_intentos_act+"</span></div><div class='cont_retrocruci'><div class='retro_cruci'></div></div><div class='cont_respcruci'>Respuesta: <span class='respuesta_cruci'></span></div></div>");

			$(".cont_retrocruci").height("0")

			//$('.span_pista').eq(index).append("<div class='txt_intentoscruci'>Intento <b>0</b> de <span>"+parent.cantidad_intentos_act+"</span></div><br/><div class='cont_retrocruci'><div class='retro_cruci'></div></div><div class='cont_respcruci'>Respuesta: <span class='respuesta_cruci'></span></div>");

			id_cruci = $('.span_pista').eq(index).attr("id");
			
			
			function objetosIntCruci(id_cruci,intentos_actuales){
				this.id_cruci = id_cruci;
				this.intentos_actuales = 0;
				
			}

			objetos_intcruci[index] = new objetosIntCruci(id_cruci,0);
			if(parent.cantidad_intentos_act>0){
				$('.span_pista').eq(index).find(".txt_intentoscruci").fadeIn(0);
					
								}

		});

																
	} else if(cantidad_circulos==1){
		if($(".c_principal").text().trim().length==0&&$(".c_principal").find("img").length==0&&$(".c_principal").find("video").length==0&&$(".c_principal").find("iframe").length==0&&$(".c_principal").find(".video_yt").length==0){
		
			tipo = "tipoA";
		} else {
			tipo="tipo2";		
		}

		if(!parent.con_botonesavance&&!parent.con_menunumeros_v2&&!parent.con_menunumeros_vhz){
			$('.c_principal').height("549px");
						
		} else if(!parent.con_menunumeros_v2){
			$('.c_principal').height("509px");
			//$('.c_principal').height("469px");

		} else {
		$('.c_principal').height("549px");
		//$('.c_principal').height("509px");
		}
		cantidad_circulos = cantidad_circulos-1;

	} else if(cantidad_circulos>1){
		//if no es actividad
		tipo="tipo3";
		if(!parent.con_botonesavance&&!parent.con_menunumeros_v2&&!parent.con_menunumeros_vhz){
			$('.c_principal').height("449px")

		} else if(!parent.con_menunumeros_v2){
			$('.c_principal').height("399px")

		} else {
			$('.c_principal').height("449px")
		}

		$('body').append("<div class='boton_volver'>"+parent.icono_volver+"</div>")
		$(".boton_volver").fadeOut(0);

		

		$('.c_principal').each(function(index){
			//console.log("hkhikhiuyiuy")

			data_posabsbtn = $(this).find("h1").eq(0).attr("data-posabsbtn");
			if(data_posabsbtn!=undefined){
				posabs_btncirc = true;
				$(this).attr("data-posabsbtn",data_posabsbtn);
				

			}
		})


	}
	
	if(tipo=="selecciones"||tipo=="arrastre"||tipo=="vf"||tipo=="varias_sel"||tipo=="arrastre_txt2"||tipo=="arrastre_txt_varios"){
	
	//if(tipo=="selecciones"||tipo=="arrastre"||tipo=="vf"||tipo=="varias_sel"||tipo=="arrastre_txt2"){
		
		html_re_orig = $("#instruccion_circulos").html();		
		$("#instruccion_circulos").html("<div id='instruccion_circulos_span'>"+html_re_orig+"</div>");

		$("body").append("<div class='txt_intentosact'>Intento <b>0</b> de <span>"+parent.cantidad_intentos_act+"</span></div>")

	}
	
	//abc = ["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];
	
	$('.opcion_preg').each(function(index){
		tiene_imgop = $(this).find("img").length;
		id_opcsel = $(this).attr("id");
		f_id_opcsel = id_opcsel.charAt(0);

		if(f_id_opcsel=="c"){
			num_idselop = parseInt(id_opcsel.replace("correcto", ""),10);
			txt_idselop = "corr";
		} else {
			num_idselop = parseInt(id_opcsel.replace("incorrecto", ""),10);
			txt_idselop = "incorr";
		}

		letra_opcionsel = "<span id='"+txt_idselop+num_idselop+"' class='negrilla'>"+abc[index]+".</span> "

		if(tiene_imgop>0){
			$(letra_opcionsel).insertAfter($(this).find("img").eq(0));
		} else {
			$(this).prepend(letra_opcionsel)
		}
	});


	$('.item_c').each(function(index){

		classList = $(this).attr('class').split(/\s+/);		
		classList_s = classList[1];	
		html_re = $(this).html();
		
		if(classList_s!=undefined){
		$(this).html("<div class='"+classList_s+" item_cont'>"+html_re+"</div>");
		
		} else {
		$(this).html("<div>"+html_re+"</div>");
		}
	}); 

	
	



	entro_encirc = [];
	
	$('.c_principal').each(function(index){
		$(this).attr('id', 'contenido_c'+index);
		document.getElementById('contenido_c'+index).zIndex = "0";
		entro_encirc[index] = 0;
		
		if(cantidad_audiop[index]!=0&&(tipo=="tipo2"||tipo=="tipo3")){
			if(!parent.con_menunumeros_v2){
		document.getElementById('contenido_c'+index).style.width = "1110px";

			} else {
		document.getElementById('contenido_c'+index).style.width = "1015px";

			}
		} else {
			if(!parent.con_botonesavance&&!parent.con_menunumeros_v2&&!parent.con_menunumeros_vhz){
				document.getElementById('contenido_c'+index).style.width = "1260px";	

			} else if(!parent.con_menunumeros_v2){
				document.getElementById('contenido_c'+index).style.width = "1260px";	

			} else {
				document.getElementById('contenido_c'+index).style.width = "1165px";	

			}
		}

		arr_int_pclic = []
		arr_primeros_clic.push(arr_int_pclic);

		//crearClics($(this),index,index)		

		classList = $(this).attr('class').split(/\s+/);
		classList_s = classList[1];	

		$(this).attr('class',classList[0]);
		html_re = $(this).html();
		$(this).html("<div class='"+classList_s+" item_cont'>"+html_re+"</div>");

		$(this).prepend( $( "<div class='cubre_cont'></div>" ) );
		$(this).find(".cubre_cont").attr('id', 'cubre_cont'+index);

		displayCont(classList_s,$(this));
	}); 

	$('.c_masinfo').each(function(index){

		if(parent.con_botonesavance||parent.con_menunumeros_vhz){
			$(this).css("height","350px")
		}
		tit_masinfo = $(this).find("h1").eq(0).html();
		
		id_masi = $(this).prevAll('.c_principal').first().attr('id');
		$(this).attr('id', id_masi+"_0");

		id_masix = id_masi.replace("contenido_c","")
		id_masix = parseInt(id_masix);

		//crearClics($(this),index,id_masix)		

		classList = $(this).attr('class').split(/\s+/);
		classList_s = classList[1];	
		$(this).attr('class',classList[0]);
		html_re = $(this).html();
		$(this).html("<div class='"+classList_s+" item_cont'>"+html_re+"</div>");


		$( "#"+id_masi ).append( $( "<div id='masinfo"+index+"' class='boton_masinfo'></div><div id='texto_masinfo"+index+"' class='texto_masinfo'> <span id='estado_btnmasinfo"+index+"' class='estado_btnmasinfo'><span></span></span> <span id='accion_btnmasinfo"+index+"' class='accion_btnmasinfo'>Ver</span>: "+tit_masinfo+"</div>" ) );

		$(this).prepend( $( "<div class='cubre_masinfo'></div>" ) );
		$(this).find(".cubre_masinfo").attr('id', 'cubre_masinfo'+index);


		$(this).append( "<div class='cierra_mi'>"+parent.icono_cerrar+"</div>" );

		displayCont(classList_s,$(this));

		

	});

	$('.cierra_mi').each(function(index){
		//clic_masinfo();
	});
	$( ".cierra_mi" ).click(function() {
		clic_masinfo();

	});


	$(".c_principal").each(function(index){
		//console.log("holaaa",index,$(".c_principal").eq(index).find('[id^=masinfo]').length)
		if($(".c_principal").eq(index).find('[id^=masinfo]').length>0){

			$(".c_principal").eq(index).find(".contenedor_clics_scroll").css("max-height","255px");	
		}

	});


	$('.c_principal').each(function(index){
		//if($('.clic').length>0){
			crearClics($(this),index,index)
		//}
		//if($(this).next())

		id_masi = $(this).attr('id');
		id_masix = id_masi.replace("contenido_c","")
		id_masix = parseInt(id_masix);
		next_if = $(this).next();

		if(next_if[0].className=="c_masinfo"){
			$('.c_masinfo').each(function(indexm){
				//console.log($(this).attr('id'),next_if.attr('id'))
				if($(this).attr('id')==next_if.attr('id')){

					crearClics(next_if,indexm,id_masix)
				}
			});

		}
	});

	$('.mas_personaje').each(function(index){
		if(parent.con_botonesavance||parent.con_menunumeros_vhz){
			$(this).css("height","350px")
		}

		id_masi = $(this).prevAll('.c_principal').first().attr('id');
		//console.log(id_masi,"id_masi")
		$(this).attr('id', id_masi+"_mp");

	
		
		$(this).prevAll('.c_principal').first().prepend("<div id='mas_per"+index+"' class='mas_per'></div>");

		classList = $(this).attr('class').split(/\s+/);
		classList_s = classList[1];	
		$(this).attr('class',classList[0]);
		html_re = $(this).html();
		$(this).html("<div class='"+classList_s+" item_cont'>"+html_re+"</div>");


		$(this).prepend( $( "<div class='cubre_masper'></div>" ) );
		$(this).find(".cubre_masper").attr('id', 'cubre_masper'+index);



		displayCont(classList_s,$(this));

	});


	cuenta_clictotal = 0;

	$('.txt_interno').each(function(index){
		$(this).attr('id', 'txt_interno'+cuenta_clictotal);
		cuenta_clictotal++
		classList = $(this).attr('class').split(/\s+/);
		classList_s = classList[1];	
		$(this).attr('class',classList[0]);

		html_re = $(this).html();
		$(this).html("<div class='"+classList_s+" item_cont'>"+html_re+"</div>");
		if(index == 0 && $(this).find(".txt_internob").length==0){
			//$(this).find(">div>div").eq(0).prepend( "<div class='instruccion_interna'><span class='arrow animated bounce'><span class='indica_instclic'></span></span>"+parent.txt_instruccion_clic+"</div>")
			//if(parent.znThisPage==parent.pagina_superior){
			//	$(this).find(">div>div").eq(0).find(".instruccion_interna").eq(0).fadeTo(0,0);
			//}
		}
		displayCont(classList_s,$(this));

		$(this).find(".item_c").append( "<p class='cubre_index'></p>" );
		$(this).find(".item_c").each(function(index2){
			html_re = $(this).html();
			$(this).html("<div>"+html_re+"</div>");
		});

		//$(this).closest(".item_c").find("div").eq(0).css("display","block");
		//$(this).parent().height("450px");
		

		if ($(this).parents('.c_principal').length>0) {
			if($(this).parents('.c_principal').length==1){
				if(tipo=="tipo2"){
				$(this).closest(".item_c").find("div").eq(0).height("549px");
				} else if (tipo=="tipo3"){
					if(($(this).parents('.c_principal').find(".mas_per").length)==1){
						if(!parent.con_menunumeros_v2){
						$(this).closest(".item_c").find("div").eq(0).height("409px");	

						} else {
						$(this).closest(".item_c").find("div").eq(0).height("439px");	
						}
					} else {
						if(!parent.con_menunumeros_v2){
						$(this).closest(".item_c").find("div").eq(0).height("409px");	
							$(this).closest(".item_c").find("div").eq(0).height("418px");	

						} else {
							$(this).closest(".item_c").find("div").eq(0).height("448px");	
						}
					}
				}
			} else {
				$(this).closest(".item_c").find("div").eq(0).height("349px");
			}
		} else if($(this).parents('.c_masinfo').length>0){
			$(this).closest(".item_c").find("div").eq(0).height("397px");

		}

	}); 

	

	cuenta_clictotalb = 0;

	$('.txt_internob').each(function(index){
		$(this).attr('id', 'txt_internob'+cuenta_clictotalb);
		cuenta_clictotalb++
		classList = $(this).attr('class').split(/\s+/);
		classList_s = classList[1];	
		$(this).attr('class',classList[0]);

		html_re = $(this).html();
		$(this).html("<div class='"+classList_s+" item_cont'>"+html_re+"</div>");

		if($(this).closest(".txt_interno").find(".txt_internob").eq(0).attr("id")==$(this).attr("id")){
		

		//if(index == 0){
			//$(this).find(">div>div").eq(1).append( "<div class='instruccion_interna'>"+parent.txt_instruccion_clicb+" <span class='arrow animated bounceup3'><span class='indica_instclicb'></span></span></div>")
			//if(parent.znThisPage==parent.pagina_superior){
			//	$(this).find(">div>div").eq(1).find(".instruccion_interna:last").fadeTo(0,0);
			//}
		}

		displayCont(classList_s,$(this));

		//$(this).find(".item_c").append( "<p class='cubre_index'></p>" );
		$(this).find(".item_c").each(function(index){
			//console.log(index)
			html_re = $(this).html();
			$(this).html("<div>"+html_re+"</div>");
		});
	}); 

	
	
	$('.c_img').each(function(index){
		$('.c_img').find("div").each(function(inx){
			if(inx==0){

			} else {
				$(this).fadeOut(0);
			}
		}); 
	}); 
	
	
	 

	cantidad_sensibles = $('.negrilla_sensible').length + $('.infografia').find("area").length;
	cantidad_videos = 0;
	index_vid = -1;
	if(parent.videos_vimeo){
		$('iframe').each(function(index){
			src_videovimeo = this.src;
			if(src_videovimeo.includes("vimeo")){
				index_vid++
				$(this).attr('id', 'video'+index_vid);
				cantidad_videos = index_vid+1;//$('video').length;
				$(this).attr('src', src_videovimeo+"&player_id="+'video'+index_vid);
				//src_videovimeo
			}
		});
	} else if (parent.videos_youtube){
		cantidad_videos = $('.video_yt').length;//$('video').length;
	} else {
		$('video').each(function(index){
			
			if(!$(this).prop("muted")){
				index_vid++
				$(this).attr('id', 'video'+index_vid);
				cantidad_videos = index_vid+1;//$('video').length;
			}
		}); 
	}

	cantidad_audios = $('audio').length;
	$('audio').each(function(index){
		$(this).attr('id', 'audio'+index);
		parent_audio = $(this).closest(".audio_c");
		parent_audio.append( $( "<div class='btn_cc'>"+parent.icono_cc+"</div>" ) );

		finaudiopopact = false;
		
		if($(this).parents(".pop").length==1){
			$(this).closest(".pop").prepend($("<div class='contprogaudiopop'><div class='progaudiopop'></div></div>"))
		}

	}); 
	
	
	cantidad_descargas = $('.descarga').length;
	$('.descarga').each(function(index){
		$(this).attr('id', 'descarga'+index);
	}); 
	

	////ENLACE DE POP
	div_invisible = document.createElement('DIV');
	div_invisible.setAttribute('id', 'div_invisible'); 
	div_invisible.className = "div_invisible"
	document.body.appendChild(div_invisible);
	


	cantidad_zoom = $('.boton_zoom').length;
	$('.boton_zoom').each(function(index){
		$(this).attr('id', 'boton_zoom'+index);

		src_imgz = $(this).attr('data-src');
		//console.log(src_imgz)
		$("#div_invisible").prepend("<div id='zoom"+index+"' class='contenido_interno_zoom'></div>");
		
		$("#zoom"+index).prepend("<img id='img_zoom"+index+"'>")

		$("#img_zoom"+index).attr("src",'images/'+src_imgz);
	}); 
		
	parent.$("#zoom").addClass("scale0x");

	cantidad_infografias = $('.infografia').length;
	cantidad_masinfo = $('.c_masinfo').length;

	


	//console.log(tipo,cantidad_circulos,cantidad_sensibles,cantidad_audiop,cantidad_videos,cantidad_descargas,cantidad_clics,cantidad_clicsb,cantidad_zoom,cantidad_infografias,cantidad_masinfo)
	//console.log(cantidad_descargas)

	//CREA ELEMENTOS COMUNES PANTALLAS
	
	

	////ENLACE DE POP
	indicador_principal = document.createElement('DIV');
	indicador_principal.setAttribute('id', 'indicador_principal'); 
	indicador_principal.className = "indicador_principal"
	document.body.appendChild(indicador_principal);
	indicador_principal.innerHTML = parent.icono_indica_down;
	$("#indicador_principal").fadeOut(0);
	////ENLACE DE POP
	enlace = document.createElement('DIV');
	enlace.setAttribute('id', 'enlace'); 
	enlace.className = "enlace-arriba"
	document.body.appendChild(enlace);
	
	////BOTON DE AUDIO
	boton_audiob = document.createElement('DIV');
	boton_audiob.setAttribute('id', 'boton_audiob'); 
	boton_audiob.className = "boton_audio"
	document.body.appendChild(boton_audiob);

	contiene_boton_audio = document.createElement('DIV');
	contiene_boton_audio.setAttribute('id', 'contiene_boton_audio'); 
	contiene_boton_audio.className = "contiene_boton_audio"
	document.getElementById("boton_audiob").appendChild(contiene_boton_audio);

	btn_play_perb = document.createElement('DIV');
	btn_play_perb.setAttribute('id', 'btn_play_perb'); 
	btn_play_perb.className = "btn_play_per"
	btn_play_perb.innerHTML = parent.icono_play;
	document.getElementById("contiene_boton_audio").appendChild(btn_play_perb);
	
	btn_stop_perb = document.createElement('DIV');
	btn_stop_perb.setAttribute('id', 'btn_stop_perb'); 
	btn_stop_perb.className = "btn_stop_per"
	btn_stop_perb.innerHTML = parent.icono_stop;
	document.getElementById("contiene_boton_audio").appendChild(btn_stop_perb);
	
	////CERRAR PERSONAJE
	equis_p = document.createElement('DIV');
	equis_p.setAttribute('id', 'equis_p'); 
	equis_p.className = "equis_p";
	equis_p.innerHTML = parent.icono_cerrar;
	document.body.appendChild(equis_p);

	////GLOBO PERSONAJE
	cont_globo_texto = document.createElement('DIV');
	cont_globo_texto.setAttribute('id', 'cont_globo_texto'); 
	cont_globo_texto.className = "cont_globo_texto"
	document.body.appendChild(cont_globo_texto);

	cont_enlace_globo_texto = document.createElement('DIV');
	cont_enlace_globo_texto.setAttribute('id', 'cont_enlace_globo_texto'); 
	cont_enlace_globo_texto.className = "cont_enlace_globo_texto"
	document.getElementById("cont_globo_texto").appendChild(cont_enlace_globo_texto);

	enlace_globo_texto = document.createElement('DIV');
	enlace_globo_texto.setAttribute('id', 'enlace_globo_texto'); 
	enlace_globo_texto.className = "enlace_globo_texto"
	document.getElementById("cont_enlace_globo_texto").appendChild(enlace_globo_texto);
	
	globo_texto = document.createElement('DIV');
	globo_texto.setAttribute('id', 'globo_texto'); 
	globo_texto.className = "globo_texto"
	globo_texto.innerHTML = globo_personaje;
	document.getElementById("cont_globo_texto").appendChild(globo_texto);

	cont_enlace_globo_texto2 = document.createElement('DIV');
	cont_enlace_globo_texto2.setAttribute('id', 'cont_enlace_globo_texto2'); 
	cont_enlace_globo_texto2.className = "cont_enlace_globo_texto"
	document.getElementById("cont_globo_texto").appendChild(cont_enlace_globo_texto2);

	enlace_globo_texto2 = document.createElement('DIV');
	enlace_globo_texto2.setAttribute('id', 'enlace_globo_texto2'); 
	enlace_globo_texto2.className = "enlace_globo_texto2"
	document.getElementById("cont_enlace_globo_texto2").appendChild(enlace_globo_texto2);
	//document.getElementById("crucigrama").appendChild(linea_crucigrama);
		
	////TÍTULO PÁGINA
	titulo_pag = document.createElement('DIV');
	titulo_pag.setAttribute('id', 'titulo_pagina'); 
	titulo_pag.className = "titulo_pagina"
	document.body.appendChild(titulo_pag);


  	txt_vin = document.getElementsByClassName("vineta");

	for (i = 0; i < txt_vin.length; i++) {
	  txt_vin[i].innerHTML = parent.icono_vineta;
	}

	indica_instclic = document.getElementsByClassName("indica_instclic");

	for (i = 0; i < indica_instclic.length; i++) {
	  indica_instclic[i].innerHTML = parent.icono_indica;
	}

	indica_instclicb = document.getElementsByClassName("indica_instclicb");

	for (i = 0; i < indica_instclicb.length; i++) {
	  indica_instclicb[i].innerHTML = parent.icono_indica_down;
	}

	$(".indica_instclic").each(function(index){
			html_re = $(this).html();
			$(this).html("<span class='arrow animated bounce'><span>"+html_re+"</span></span>");
	});

	$(".indica_instclicb").each(function(index){
			html_re = $(this).html();
			$(this).html("<span class='arrow animated bounceup3'><span>"+html_re+"</span></span>");
	});

	
	ir_evalu = document.getElementsByClassName("ir_evalu");

	for (i = 0; i < ir_evalu.length; i++) {
	  ir_evalu[i].innerHTML = parent.icono_go;
	}
	
	cantidad_infografias = $('.infografia').length;
	
	$('.infografia').each(function(index){
		$( "<div class='cont_infografia'></div>" ).insertBefore( $(this) );
		$(this).appendTo($(this).prev('.cont_infografia'));

		if($(this).find("p").length!=0){
			if($(this).find("p").text().trim().length!=0){
				$(this).prepend("<div class='instruccion_interna'>"+$(this).find("p").text()+"</div> ");
			}
		} else {
			$(this).prepend("<div class='instruccion_interna'>"+parent.txt_instruccion_infog+"</div> ");
		}

		$(this).find("img").attr("id","Mapa"+index);		
		$(this).find("img").attr("usemap","#Map"+index);		
		
		$(this).find("map").attr("id","infografia"+index);		
		$(this).find("map").attr("name","Map"+index);		

		$(this).find("area").attr("href","javascript:void(0)");		

		
	}); 

	$('.tabla_estilo').each(function(){
		$( "<div class='cont_tabla'></div>" ).insertBefore( $(this) );
		$(this).appendTo($(this).prev('.cont_tabla'));
	}); 
	
	$('.tabla_estilo').find("th").each(function(){
		txt_th = $(this).html();
		
		if($(this).text().trim().length!=0||$(this).find("img").length!=0||$(this).find("i").length!=0){
			$(this).html("<div class='th_decora'><div>"+txt_th+"</div></div>");
		}
	}); 
	
	$('.tabla_estilo').find("td").each(function(){
		txt_td = $(this).html();

		if($(this).text().trim().length!=0||$(this).find("img").length!=0||$(this).find("i").length!=0){
			$(this).html("<div class='td_decora'><div>"+txt_td+"</div></div>");
		} else {
				$(this).addClass("bg_tdvacio")
		}

	});  

	$('.instruccion_interna').each(function(){
		txt_instinterna = $(this).text();
		html_instinterna = $(this).html();

		if(txt_instinterna.trim().length==0){
			html_instinterna = parent.txt_instruccion_interna;
		}
		$(this).html("<div>"+html_instinterna+"</div>");
	}); 
	$( ".instruccion_interna" ).find(">div").prepend( parent.icono_ini_instruc + " " );
	$( ".instruccion_interna" ).find(">div").append( " " + parent.icono_fin_instruc );
	
	

	$('#instruccion_circulos').each(function(){
		txt_instinterna = $(this).text();
		if(txt_instinterna.trim().length==0){
			if(tipo=="tipo3"){
			txt_instinterna = parent.txt_instruccion_circulos;
			$(this).html("<div>"+txt_instinterna+"</div>");

			}
		} else {
			if(tipo=="tipo2"||tipo=="tipo3"){
				$(this).html("<div>"+txt_instinterna+"</div>");
			}

		}
		

		
	}); 

	$('.enunciado_preg').each(function(){
		txt_re = $(this).html();
		$(this).html("<div>"+txt_re+"</div>");
	});

	$('.enunciado_selvar').each(function(){
		txt_re = $(this).html();
		$(this).html("<div>"+txt_re+"</div>");
	});

	$('.resaltado_especial').each(function(){
		txt_re = $(this).html();
		$(this).html("<div>"+txt_re+"</div>");
	});



	$('.resaltado_especial2').each(function(){
		txt_re = $(this).html();
		$(this).html("<div>"+txt_re+"</div>");
	}); 
	$('div.negrilla_sensible').each(function(){
		tiene_icono = $( this ).attr( "data-graf" );
		if(tiene_icono=="si"){
			$( "<div class='cont_sensdivico'></div>" ).insertBefore( $(this) );
			$(this).appendTo($(this).prev('.cont_sensdiv'));
			
		} else {
			txt_rx = $(this).html();
			$(this).html("<div>"+txt_rx+"</div>");

			$( "<div class='cont_sensdiv'></div>" ).insertBefore( $(this) );
			$(this).appendTo($(this).prev('.cont_sensdiv'));
			
		}
	});
	
	$('.icono_graf').each(function(){
		id_nsact = $(this).closest(".negrilla_sensible").attr('id');
		id_nsact = id_nsact.replace("zona_sensible", "");
		$(this).attr('id', 'icono_graf'+id_nsact);
	});
	$('.txt_graf').each(function(){
		id_nsact = $(this).closest(".negrilla_sensible").attr('id');
		id_nsact = id_nsact.replace("zona_sensible", "");
		$(this).attr('id', 'txt_graf'+id_nsact);
		txt_txt_graf = $(this).text();
		if(txt_txt_graf.trim().length>0){
			txt_re = $(this).text();
			$(this).html("<div>"+txt_re+"</div>")
		}
	});

	$('video').each(function(index){
		if($(this).attr("autoplay")!="autoplay"){
		$( "<div class='cont_video'><div class='cubre_video'></div></div>" ).insertBefore( $(this) );

		$(this).appendTo($(this).prev('.cont_video'));
		}
		
	}); 




	sig_interact = 0;
	cant_inteact = 0;

	if(parent.navega_lineal){

		$('.negrilla_sensible').each(function(){
			if(tipo!="arrastre_txt_varios"){
			$(this).prepend("<span class='indicaint animated bounceup4'>"+parent.icono_indica_down+"</span>");
			$(this).attr('data-orden', '');
			}
		});
		$('.boton_zoom').each(function(){
			$(this).prepend("<span class='indicaint animated bounceup4'>"+parent.icono_indica_down+"</span>");
			$(this).attr('data-orden', '');

		});
		$('.clic').each(function(){
			$(this).prepend("<span class='indicaintclic animated bounceleft'>"+parent.icono_indica_right+"</span>");
			//$(this).attr('data-orden', '');

		});

		$('.txt_interno').find("h1").each(function(){
			$(this).attr('data-orden', '');

		});

		if(tipo=="tipo3"){
			$('.c_principal').each(function(){
				$(this).attr('data-orden', '');
			});
		}
		$('.clicb').each(function(){
			$(this).prepend("<span class='indicaintclicb animated bounceup4'>"+parent.icono_indica_down+"</span>");
			//$(this).attr('data-orden', '');

		});
		$('.txt_internob').find("h1").each(function(){
			$(this).attr('data-orden', '');

		});

		$('.descarga').each(function(){
			$(this).prepend("<span class='indicaint animated bounceup4'>"+parent.icono_indica_down+"</span>");
			$(this).attr('data-orden', '');

		});

		$('audio').each(function(){
			$(this).prepend("<span class='indicaint animated bounceup4'>"+parent.icono_indica_down+"</span>");
			$(this).attr('data-orden', '');

		});

		$('.boton_masinfo').each(function(){
			//$(this).prepend("<span class='indicaint animated bounceup4'>"+parent.icono_indica_down+"</span>");
			$(this).attr('data-orden', '');

		});

		$('.mas_personaje').each(function(){
			//$(this).prepend("<span class='indicaint animated bounceup4'>"+parent.icono_indica_down+"</span>");
			$(this).attr('data-orden', '');

		});

		$('.cont_video').each(function(){
			$(this).prepend("<span class='indicaintclic animated bounceleft'>"+parent.icono_indica_right+"</span>");
			$(this).attr('data-orden', '');

		});

		$('.infografia').find("area").each(function(index){
			
			$(this).attr('data-orden', '');
    		
			$(this).prepend("<span class='indicaint animated bounceup4'>"+parent.icono_indica_down+"</span>");


			//console.log($(this).closest(".infografia").find("img").height(),"height")

			height_actimg = $(this).closest(".infografia").find("img").height();

			//console.log($(this).closest(".infografia").find("img").prop('naturalHeight'),"natheight")
			natheight_actimg = $(this).closest(".infografia").find("img").prop('naturalHeight');

			scaleinf = height_actimg/natheight_actimg;

			//console.log(scaleinf,"scaleinf")


			//$(this).prepend("<span class='indicaint animated bounceup4'>"+parent.icono_indica_down+"</span>");
			//	console.log($(this).attr("coords"),$(this).closest(".infografia").offset().top)
				arr_coords = $(this).attr("coords").split(",");
			//	console.log(arr_coords,"arr_coords")
			if(arr_coords.length==3){
				top_info = -$(this).closest(".infografia").height()+$(this).closest(".infografia").find("img").position().top + parseInt(arr_coords[1],10)*scaleinf - parseInt(arr_coords[2],10)*scaleinf - $(".indicaint").height();// - $(".indicaint").height();//$(this).closest(".infografia").find("img").offset().top + parseInt(arr_coords[1],10) - parseInt(arr_coords[2],10) + $(".indicaint").height();
				left_info = -$(this).closest(".infografia").width()/2 + $(this).closest(".infografia").find("img").position().left + parseInt(arr_coords[0],10)*scaleinf - $(".indicaint").width()/2// - parseInt(arr_coords[2],10);//$(this).closest(".infografia").find("img").offset().left + parseInt(arr_coords[0],10) - $(".indicaint").width()/2; 
				//console.log(top_info)
				$(this).find(".indicaint").css({"top":top_info+"px", "left":left_info+"px"});
			} else {
				top_info = -$(this).closest(".infografia").height()+$(this).closest(".infografia").find("img").position().top + parseInt(arr_coords[1],10)*scaleinf - $(".indicaint").height() /*- parseInt(arr_coords[2],10)*/ /*- $(".indicaint").height()*/;// - $(".indicaint").height();//$(this).closest(".infografia").find("img").offset().top + parseInt(arr_coords[1],10) - parseInt(arr_coords[2],10) + $(".indicaint").height();
				//top_info = top_info*scaleinf;

				left_info = -$(this).closest(".infografia").width()/2 + $(this).closest(".infografia").find("img").position().left + parseInt(arr_coords[0],10)*scaleinf + ((parseInt(arr_coords[2],10)*scaleinf - parseInt(arr_coords[0],10)*scaleinf)/2) - $(".indicaint").width()/2// - parseInt(arr_coords[2],10);//$(this).closest(".infografia").find("img").offset().left + parseInt(arr_coords[0],10) - $(".indicaint").width()/2; 
				//left_info = left_info*scaleinf;
				//console.log(top_info)
				//$(this).find(".indicaint").css({"top":top_info+"px", "left":left_info+"px"});
				$(this).find(".indicaint").css({"top":top_info+"px", "left":left_info+"px"});
			}
				
				//$(this).attr('data-orden', '');
    		

		});
	}

	
	$('[data-orden]').each(function(index){
		//console.log(index,$(this))
		$(this).attr('data-orden', index);
		cant_inteact = index;
	});	




	$('.descarga').each(function(){
		$( "<div class='cont_descarga'><div class='cubre_contdesc'></div></div>" ).insertBefore( $(this) );
		$(this).appendTo($(this).prev('.cont_descarga'));
		$(this).prepend("<span class='ico_download'></span> ")	
	}); 


	ico_download = document.getElementsByClassName("ico_download");

	for (i = 0; i < ico_download.length; i++) {
		if(parent.znThisPage==parent.pagina_superior){
			class_bounceup2 = "arrow animated bounceup2";
		} else {
			class_bounceup2 = "arrow";
		}
	  ico_download[i].innerHTML = "<div class='"+class_bounceup2+"'>"+parent.icono_download+"</div>";
	}


	$('.boton_zoom').each(function(){
		//txt_rx = $(this).html();
		//$(this).html("<div>"+txt_rx+"</div>");

		$( "<div class='cont_zoom'></div>" ).insertBefore( $(this) );
		$(this).appendTo($(this).prev('.cont_zoom'));
		$(this).prepend("<span class='ico_amplia'></span> ")

	}); 

	num_reto = 0;

	if($(".boton_siguiente").length>0){
		
		$(".boton_siguiente").attr("id","boton_siguiente")

		$( "#boton_siguiente" ).closest(".c_principal").append("<div id='contenedor_loaderint' class='contenedor_loaderint'><div id='loaderint' class='loaderint'></div></div>");
			$("#contenedor_loaderint").fadeOut(0);
		$( "#boton_siguiente" ).closest(".c_principal").append("<div class='contador_preguntas'>Pregunta <span class='preg_act'></span> de <span class='preg_total'></span></div>")
		$(".contador_preguntas").fadeOut(0);
		$(".preg_act").text(num_reto);
		
		secc_act = $( "#boton_siguiente" ).closest(".c_principal");
		secc_act = $(".c_principal").index(secc_act);
		
		$(".preg_total").text(parent.preguntas_pantallas[parent.znThisPage-1][secc_act]);

		$( "#boton_siguiente" ).click(function() {
			if(num_reto==0){
				$(".contador_preguntas").fadeIn(parent.velocidad_lenta);
			}

			$(this).fadeOut(0);
			$("#contenedor_loaderint").fadeIn(velocidad_media);

			ifrmp = document.createElement('IFRAME');
			console.log(circulo_actual_ok,"circulo_actual_ok")
			ifrmp.setAttribute("src", "int"+circulo_actual_ok+"_"+num_reto+".html");
			ifrmp.setAttribute('id', 'ifrm'); 
			ifrmp.style.position = "absolute";
			ifrmp.style.width = 100+"%"//1242;
			ifrmp.style.height = 100+"%";
			ifrmp.style.zIndex = 1;
			ifrmp.scrolling = "no";
			ifrmp.style.border = "none";
			ifrmp.style.borderRadius = "5px";
			ifrmp.style.zIndex = 3;

			elem_contframe = $(this).closest(".item_cont").find(".item_c").eq(0);
			elem_contframe.html("");
			elem_contframe.css("height", "100%");
			elem_contframe.closest(".xcl").css("height", "100%");
			elem_contframe.append(ifrmp)


			num_reto++
			$(".preg_act").text(num_reto);

		});
	}

	ico_amplia = document.getElementsByClassName("ico_amplia");

	for (i = 0; i < ico_amplia.length; i++) {
		if(parent.znThisPage==parent.pagina_superior){
			class_amplia2 = "arrow animated amplia2";
		} else {
			class_amplia2 = "arrow";
		}

		//class_amplia2 = "arrow animated amplia2";

	  ico_amplia[i].innerHTML = "<div class='"+class_amplia2+"'>"+parent.icono_amplia+"</div>";
	}

	function mTopItem(elemt){

		if($(elemt).css("align-self")=="flex-start"){
			if (parent.titulos_pantallas[parent.znThisPage-1].includes('<br>')) { 
				$(elemt).find("div").eq(0).css("margin-top", "90px");
			} else {
				$(elemt).find("div").eq(0).css("margin-top", "60px");
	 		}
		}
	}

	function displayCont(class_ac,elem_ac){
		
		//class_acx = class_ac.replace(/,/g, " ")
	//	console.log(class_ac,elem_ac)
		class_acx = class_ac.replace("c_", "")
		arr_class_acx_or = class_acx.split("-")
		arr_class_acx = class_acx.split("-")
		
		//console.log(arr_class_acx_or)

		for (i = 0; i < arr_class_acx.length; i++) { 
			arr_class_acx[i] = arr_class_acx[i].split("_");
		}
		
		


		for (i = 0; i < arr_class_acx.length; i++) { 
			
			//console.log($(elem_ac),$(elem_ac).find("div.item_cont").attr('class'))
			classList_o = $(elem_ac).find(">.item_cont").attr('class')
			
			
			if(arr_class_acx.length>1){
				alto_max = "";
			} else {
				alto_max = " alto_max";

			}

			if(classList_o!=undefined){
				classList = $(elem_ac).find(">.item_cont").attr('class').split(/\s+/);		
				//console.log(classList)
				classList_s = classList[0];	
				//classList_x = classList[1];

				$(elem_ac).find(">.item_cont").append("<div></div>")
				$(elem_ac).find(">.item_cont").find("div").last().attr("class","xcl c_"+arr_class_acx_or[i]+alto_max);
				//$(elem_ac).find(">.item_cont").removeClass(classList_s)
			}

			for (int = 0; int < arr_class_acx[i].length; int++) { 
				arr_class_acx[i][int] = parseInt(arr_class_acx[i][int], 10)
			}	
		}
		//console.log(arr_class_acx)
		suma_item = 0;


		for (i = 0; i < arr_class_acx.length; i++) { 
			suma_class = 0;
			//arr_class_acx[i] = parseInt(arr_class_acx[i], 10)
			arr_class_acx[i].forEach (function(numero){
       		suma_class += numero;
    		});

			//console.log(elem_ac)

			for (int = 0; int < arr_class_acx[i].length; int++) { 
				ancho_item = (arr_class_acx[i][int]/suma_class)*100; 
				ancho_item = ancho_item.toFixed(1)
				ancho_item = ancho_item+"%"

				actual_ic = $(elem_ac).find(".item_c").eq( 0 );
				
				actual_ic.width(ancho_item);

				destino_ic = $(elem_ac).find("div.xcl").eq(i);

				actual_ic.appendTo(destino_ic);

				suma_item++


			}	
		}

		
		//console.log(class_ac,elem_ac,arr_class_acx)
		mTopItem($(elem_ac).find(".item_c").eq( 0 ));

	}



	translate_contenido = ["t_n","t_ne","t_e","t_se","t_s","t_so","t_o","t_no"]
	txt_translate_contenido = translate_contenido.toString();
	txt_translate_contenido = txt_translate_contenido.replace(/,/g, " ");
	txt_reset_translate = "reset_translate reset_translate2";
	delay_transcont = [0,70,170,270,370,470]
	delay_anima = 500;
	duracion_anima = delay_anima+705;

	///Acá iba más info.
	

	
	$('.item_c').each(function(index){

		classList = $(this).attr('class').split(/\s+/);		
		classList_s = classList[1];	

		if(classList_s!=undefined){

			//$(this).attr('class',classList[0]);
			html_re = $(this).html();
			//$(this).html("<div><div class='"+classList_s+"'>'"+html_re+"</div></div>");}
			$(this).html("<div class='"+classList_s+" item_cont'>"+html_re+"</div>");

			displayCont(classList_s,$(this));
		}
	}); 


	$('.clic').each(function(index){
		$(this).attr('id', "clic"+index);
	});

	$('.clicb').each(function(index){
		$(this).attr('id', "clicb"+index);
	});

	cantidad_clics = $('.clic').length;
	cantidad_clicsb = $('.clicb').length;
	
	una_vezsc = true;

	function initialValueAnima(div_c,act_cont,t_c){
		//console.log("initial",div_c,act_cont,t_c)

		
		/*
		if (cantidad_masinfo>0){
			for (i = 0; i < cantidad_masinfo; i++) { 
				total_masinfo[i].y = y_botones_mas_ini;
				total_texto_masinfo[i].x = x_botones_masini;
				total_texto_masinfo[i].alpha = 0;
				contenidos_circulos_masinfo.y = y_botones + 260;
				contenidos_circulos_masinfo.scaleX = 0;
				contenidos_circulos_masinfo.scaleY = 0;
				

				//createjs.Tween.get(total_masinfo[i]).to({y:y_botones_mas_ini},0,createjs.Ease.elasticOut);	
				//createjs.Tween.get(total_texto_masinfo[i]).to({x:x_botones_masini,alpha:0},0*2);	
				//createjs.Tween.get(contenidos_circulos_masinfo[i]).to({y:y_botones + 260,scaleX:0,scaleY:0},0);

				}


			
		}
		*/
		if(div_c=="#contenido_c"){
			//$(this).css("z-index","-1");

			$(div_c+act_cont+t_c).find("iframe").each(function(){
				$(this).css("opacity","0");
			});
		}


		if(div_c=="#txt_interno"||div_c=="#txt_internob"){
			$(div_c+act_cont+t_c).each(function(){
				azar_trans_c = Math.floor((Math.random() * (translate_contenido.length)));

				$(this).removeClass(txt_translate_contenido+" "+txt_reset_translate).addClass(translate_contenido[azar_trans_c]);
				$(this).removeClass(txt_translate_contenido+" "+txt_reset_translate).addClass("opa_0");
			});
		}
		if(div_c=="#txt_interno"){
			azar_trans_c = Math.floor((Math.random() * (translate_contenido.length)));
			$(div_c+act_cont+t_c).find('.contenedor_clics_scroll_hz').removeClass(txt_translate_contenido+" "+txt_reset_translate).addClass(translate_contenido[azar_trans_c]);
		}

		$(div_c+act_cont+t_c).find('>.item_cont>.xcl>.item_c').each(function(idx){
		//$(div_c+act_cont+t_c).find('.item_c').each(function(){
			azar_trans_c = Math.floor((Math.random() * (translate_contenido.length)));
			//if($(this).find(".contenedor_clics_scroll").length>0){
			//	$(this).removeClass(txt_translate_contenido+" "+txt_reset_translate).addClass("t_o");
			//} else {
				$(this).removeClass(txt_translate_contenido+" "+txt_reset_translate).addClass(translate_contenido[azar_trans_c]);

			//}
		});
		$(div_c+act_cont+t_c).find('.enunciado_vf').each(function(){
			azar_trans_c = Math.floor((Math.random() * (translate_contenido.length)));
			$(this).removeClass(txt_translate_contenido+" "+txt_reset_translate).addClass(translate_contenido[azar_trans_c]);
			
		});
		$(div_c+act_cont+t_c).find('.opcion_preg').each(function(){
			azar_trans_c = Math.floor((Math.random() * (translate_contenido.length)));
			$(this).removeClass(txt_translate_contenido+" "+txt_reset_translate).addClass(translate_contenido[azar_trans_c]);
			
		});
		$(div_c+act_cont+t_c).find('.celda_crucigrama_cont').each(function(){
			azar_trans_c = Math.floor((Math.random() * (translate_contenido.length)));
			$(this).removeClass(txt_translate_contenido+" "+txt_reset_translate).addClass(translate_contenido[azar_trans_c]);
			
		});
		$(div_c+act_cont+t_c).find('.verdadero').each(function(){
			$(this).removeClass("scale1").addClass("scale3");
		});
		$(div_c+act_cont+t_c).find('.falso').each(function(){
			$(this).removeClass("scale1").addClass("scale3");
		});
		$(div_c+act_cont+t_c).find('.opcion').each(function(){
			$(this).removeClass("scale1").addClass("scale3");
		});
		$(div_c+act_cont+t_c).find('.enunciado').each(function(){
			azar_trans_c = Math.floor((Math.random() * (translate_contenido.length)));
			$(this).removeClass(txt_translate_contenido+" "+txt_reset_translate).addClass(translate_contenido[azar_trans_c]);
			
		});
		$(div_c+act_cont+t_c).find('.th_decora').each(function(){
			azar_trans_c = Math.floor((Math.random() * (translate_contenido.length)));
			$(this).removeClass(txt_translate_contenido+" "+txt_reset_translate).addClass(translate_contenido[azar_trans_c]);
		});
		$(div_c+act_cont+t_c).find('.td_decora').each(function(){
			azar_trans_c = Math.floor((Math.random() * (translate_contenido.length)));
			$(this).removeClass(txt_translate_contenido+" "+txt_reset_translate).addClass(translate_contenido[azar_trans_c]);
		});
		$(div_c+act_cont+t_c).find('code').each(function(){
			azar_trans_c = Math.floor((Math.random() * (translate_contenido.length)));
			$(this).removeClass(txt_translate_contenido+" "+txt_reset_translate).addClass(translate_contenido[azar_trans_c]);
		});
		
		$(div_c+act_cont+t_c).find('video').each(function(){
			$(this).removeClass("scale1").addClass("scale5");
		}); 

		$(div_c+act_cont+t_c).find('.cont_audio').each(function(){
			$(this).removeClass("scale1").addClass("scale0");
		}); 

		$(div_c+act_cont+t_c).find('img').each(function(){
			$(this).removeClass("scale1").addClass("scale2");
		}); 

		$(div_c+act_cont+t_c).find('.resaltado_especial').each(function(){
			$(this).removeClass("scale1").addClass("scale6");
		});
		$(div_c+act_cont+t_c).find('.resaltado_especial2').each(function(){
			$(this).removeClass("scale1").addClass("scale3");
		}); 

		$(div_c+act_cont+t_c).find('.lista_vinetas').find("td").each(function(){
			$(this).removeClass(txt_translate_contenido+" "+txt_reset_translate).addClass("t_se");
		});

		$(div_c+act_cont+t_c).find('.vineta').each(function(){
			$(this).removeClass(txt_translate_contenido+" "+txt_reset_translate).addClass("scale4 t_o");
		});
		$(div_c+act_cont+t_c).find('.instruccion_interna').each(function(){
			$(this).removeClass(txt_translate_contenido+" "+txt_reset_translate).addClass("t_n");
		});
		$(div_c+act_cont+t_c).find('.cont_descarga').each(function(){
			$(this).removeClass(txt_translate_contenido+" "+txt_reset_translate).addClass("t_s");
		});

		$(div_c+act_cont+t_c).find('.cont_zoom').each(function(){
			$(this).removeClass(txt_translate_contenido+" "+txt_reset_translate).addClass("t_s");
		});

		$(div_c+act_cont+t_c).find('.icono_graf').each(function(){
			$(this).removeClass(txt_translate_contenido+" "+txt_reset_translate).addClass("t_n");
		});
		$(div_c+act_cont+t_c).find('.icono_graf_visto').each(function(){
			$(this).removeClass(txt_translate_contenido+" "+txt_reset_translate).addClass("t_n");
		});

		
		


		$(div_c+act_cont+t_c).find('.negrilla_sensible').each(function(){
			//azar_trans_c = Math.floor((Math.random() * (translate_contenido.length)));
			//$(this).removeClass(txt_translate_contenido+" "+txt_reset_translate).addClass(translate_contenido[azar_trans_c]);
			$(this).removeClass("scale1").addClass("scale8");
		});
		$(div_c+act_cont+t_c).find('.negrilla_sensible2').each(function(){
			//azar_trans_c = Math.floor((Math.random() * (translate_contenido.length)));
			//$(this).removeClass(txt_translate_contenido+" "+txt_reset_translate).addClass(translate_contenido[azar_trans_c]);
			$(this).removeClass("scale1").addClass("scale8");

		});
		$(div_c+act_cont+t_c).find('.negrilla').each(function(){
			$(this).removeClass("scale1").addClass("scale8");
		}); 

		//setTimeout(function(){
		if(una_vezsc){
			una_vezsc = false;
			heightScrollClic()
		}
		//}, 1000);

		if(!parent.con_restinternas){
			setTimeout(function(){
				suma_total();
			}, velocidad_lenta);
		}

	}
		
		$(".contenedor_clics_scroll").each(function(index){
			pos_abs = $(this).find(".clic_abs").length;
			
			if(pos_abs>=1){
				
			} else {
				$(".contenedor_clics_scroll").mCustomScrollbar({
			   	  	//theme:"inset-3-dark",
		      		theme:"light-thin",

					scrollButtons:{
						enable:true
					},
					setWidth: true
				});

				$( ".contenedor_clics_scroll" ).mouseleave(function() {
					//console.log("hola")
			  		scrollMenuClic($(this))
				});
			}
			
			

		}); 
						//		setTimeout(function(){
		function heightScrollClic(){
			$(".contenedor_clics_scroll").each(function(index){
				
				$(this).find(".cont_clic").append("<tr><td colspan='3'><div class='clcx'></div></td></tr>");
			
				clic_encont = $(this).find('[id^=clic]').length - 1;
				idclic_encont = $(this).find('[id^=clic]').eq(clic_encont).attr("id");
				height_cs = parseInt($(this).css("max-height"),10)-$("#"+idclic_encont).outerHeight()-25;
				//console.log(height_cs)
				$(this).find(".clcx").height(height_cs);
		
			});

			$(".contenedor_clics_scroll_hz").each(function(index){
				
				//$(this).find(".cont_clic").append("<tr><td colspan='3'><div class='clcbx'></div></td></tr>");
				$(this).find(".cont_clic").find("tr").eq(0).append("<td colspan='2'><div class='clbcx'></div></td>");
				
				clic_encont = $(this).find('[id^=clic]').length - 1;
				idclic_encont = $(this).find('[id^=clic]').eq(clic_encont).attr("id");
				width_cs = $(this).closest(".txt_interno ").width()-$("#"+idclic_encont).outerWidth()-50;//-$("#"+idclic_encont).outerWidth()-27;
				//console.log(width_cs)
				$(this).find(".clbcx").width(width_cs);
			
				
			});

		}
		//		console.log($("#"+"clic2").height(),$("#"+"clic2").outerHeight(),$("#"+"clic2").innerHeight())
		

			$(".contenedor_clics_scroll_hz").mCustomScrollbar({
		      axis:"x",
		      theme:"light-thin",
				scrollButtons:{
					enable:true
				},
				setWidth: true//,
				//advanced:{ autoExpandHorizontalScroll:true }
		    });

			//$(".contenedor_clics_scroll_hz").each(function(index){
				$(".contenedor_clics_scroll_hz").mouseleave(function() {
					var_ccshz = $(this)
					setTimeout(function(){
						scrollMenuClicB(var_ccshz)
					},450);
				});
			//});

	$('.contenedor_clics_scroll').each(function(index){
		$(this).parent().addClass("nodecora");

	})

	indica_circ = document.createElement("DIV");
	indica_circ.id = "indica_circ";
	indica_circ.className = "indica_circ animated bounceup3"

	indica_circ.innerHTML = parent.icono_indica_circ;
	//numero_menu_principal.innerHTML = i+1;
    document.body.appendChild(indica_circ);
    
    document.getElementById("indica_circ").style.visibility = "hidden";

	

	parent.$( "#loader" ).fadeOut( "fast" );
	/////
	/////

	instruccion_vista = false;
	instruccion_vistab1 = false;
	instruccion_vistab2 = false;



	personaje_cerrado = false;
	
	parent.document.getElementById("cerrar_ic").addEventListener("click", clic_cerrar_ic);


	function clic_cerrar_ic(){
		parent.document.getElementById("instruccion_circ").style.visibility = "hidden";
		instruccion_vista = true;
		cerrar_personaje();
	}


	parent.document.getElementById("cerrar_inf").addEventListener("click", clic_cerrar_inf);


	function clic_cerrar_inf(){
		parent.document.getElementById("instruccion_inf").style.visibility = "hidden";
		parent.document.getElementById("instruccion_ov").style.visibility = "visible";
		
		instruccion_vistab1 = true;
		
		//f_circulos_clic(circulo_actual).clic_circulos_grandes();
	}

	parent.document.getElementById("cerrar_ov").addEventListener("click", clic_cerrar_ov);


	function clic_cerrar_ov(){
		parent.document.getElementById("instruccion_ov").style.visibility = "hidden";
		parent.document.getElementById("instruccion_mas").style.visibility = "visible";
		


	}

		parent.document.getElementById("cerrar_mas").addEventListener("click", clic_cerrar_mas);


	function clic_cerrar_mas(){
		parent.document.getElementById("instruccion_mas").style.visibility = "hidden";
		
		instruccion_vistab2 = true;
		//f_circulos_clic.clic_circulos_grandes();
		clic_circulos_grandes(actual_circ);
		
	}


	parent.document.getElementById("cerrar_per").addEventListener("click", clic_cerrar_per);


	function clic_cerrar_per(){
		parent.document.getElementById("instruccion_per").style.visibility = "hidden";
		instruccion_vista = true;
		cerrar_personaje()

	}


	parent.document.getElementById("cerrar_clics").addEventListener("click", clic_cerrar_clics);


	function clic_cerrar_clics(){
		parent.document.getElementById("instruccion_clics").style.visibility = "hidden";
		instruccion_vista = true;
		cerrar_personaje()

	}

	if(parent.tipo_curso=="plataformas"){
		//$(".c_principal, .instruccion_circulos").addClass("moveplat");
	}

		animacion_cierre = false;
		
	clic_en_masinfo = true;

	over_en_per = [];
	clic_en_per = [];
	clic_en_perb = [];
	video_en_per = [];
	audio_en_per = [];

	zoom_en_mas_info = [];
	over_en_mas_info = [];
	descarga_en_mas_info = [];
	clic_en_mas_info = [];
	clic_en_mas_infob = [];
	video_en_mas_info = [];
	audio_en_mas_info = [];

	zoom_en_clics = [];
	over_en_clics = [];
	descarga_en_clics = [];
	descarga_en_clicsb = [];
	clics_en_clics = [];
	video_en_clics = [];
	audio_en_clics = [];

	zoom_en_clicsb = [];
	over_en_clicsb = [];
	video_en_clicsb =[];
	audio_en_clicsb =[];

	zoom_en_circ = [];
	over_en_circ = [];
	clic_en_circ = [];
	clic_en_circb = [];
	clic_en_clic = [];
	mas_en_circ = [];
	video_en_circ = [];
	descarga_en_circ = [];
	video_en_circ = [];
	audio_en_circ = [];
	
	cantidad_sensibles_original = cantidad_sensibles;
	cantidad_clics_original = cantidad_clics;
	cantidad_clics_originalb = cantidad_clicsb;
	cantidad_masinfo_original = cantidad_masinfo;
	cantidad_zoom_original = cantidad_zoom;
	cantidad_descargas_original = cantidad_descargas;
	cantidad_videos_original = cantidad_videos;
	cantidad_audios_original = cantidad_audios;


	arreglo_videos = [];
	arreglo_audios = [];
	arreglo_sensibles = [];
	arreglo_videos_mas = [];
	arreglo_audios_mas = [];
	arreglo_sensibles_mas = [];
	arreglo_zoom_mas = []
	arreglo_clics_mas = [];
	arreglo_clics_masb = [];
	arreglo_descargas_mas = [];
	
	arreglo_videos_per = [];
	arreglo_audios_per = [];
	arreglo_descargas_per = [];
	arreglo_sensibles_per = [];
	arreglo_clics_per = [];
	arreglo_zoom_per = [];
	arreglo_descargas_clic = [];
	arreglo_descargas_clicb = [];
	arreglo_videos_clic = [];
	arreglo_videos_clicb = [];
	arreglo_audios_clic = [];
	arreglo_audios_clicb = [];
	

	function contieneElemento(elemento,parentObj,parentObj2,parentObj3,type){

	 	while (elemento != undefined && elemento != null && elemento.tagName.toUpperCase() != 'BODY'){
					//parentObj2 = parentObj + "_0";
				        if (elemento == parentObj || elemento == parentObj2 || elemento == parentObj3){
				        	if(type=="zoom_clic"){
				        	arreglo_zoom_clic.push(int);
				            zoom_en_clics[i] = arreglo_zoom_clic;
				          
				            }

				            if(type=="zoom_clicb"){
				        	arreglo_zoom_clicb.push(int);
				            zoom_en_clicsb[i] = arreglo_zoom_clicb;
				          
				            }


				              if(type=="audio_clic"){
				        	arreglo_audios_clic.push(int);
				            audio_en_clics[i] = arreglo_audios_clic;

				            }

				            if(type=="audio_clicb"){
				        	arreglo_audios_clicb.push(int);
				            audio_en_clicsb[i] = arreglo_audios_clicb;

				            }

				             if(type=="video_clic"){
				        	arreglo_videos_clic.push(int);
				            video_en_clics[i] = arreglo_videos_clic;

				            }

				            if(type=="video_clicb"){
				        	arreglo_videos_clicb.push(int);
				            video_en_clicsb[i] = arreglo_videos_clicb;

				            }

				             if(type=="descarga_clic"){
				        	arreglo_descargas_clic.push(int);
				            descarga_en_clics[i] = arreglo_descargas_clic;

				            }
				             if(type=="descarga_clicb"){

				        	arreglo_descargas_clicb.push(int);
				            descarga_en_clicsb[i] = arreglo_descargas_clicb;

				            }
				            if(type=="ov_clic"){
				        	arreglo_sensibles_clic.push(int);
				            over_en_clics[i] = arreglo_sensibles_clic;

				            }
				            if(type=="ov_clicb"){
				        	arreglo_sensibles_clicb.push(int);
				            over_en_clicsb[i] = arreglo_sensibles_clicb;
				            //console.log(over_en_clics)
				            }
				            if(type=="clic_clic"){
				        	arreglo_clic_clic.push(int);
				            clics_en_clics[i] = arreglo_clic_clic;
				            //console.log(over_en_clics)
				            }

				            if(type=="video_circ"){
				        	video_en_circ[i] = int+1;
				        		if(elemento == parentObj2){
									arreglo_videos_mas.push(int);
				           			video_en_mas_info[i] = arreglo_videos_mas;
					        		//clic_en_masinfo[i] = int+1;
						        	
								}
								if(elemento == parentObj3){
									arreglo_videos_per.push(int);
				           			video_en_per[i] = arreglo_videos_per;
					        		//clic_en_masinfo[i] = int+1;
						        	
								}
							}


							if(type=="audio_circ"){
				        	audio_en_circ[i] = int+1;
				        		if(elemento == parentObj2){
									arreglo_audios_mas.push(int);
				           			audio_en_mas_info[i] = arreglo_audios_mas;
					        		//clic_en_masinfo[i] = int+1;
						        	
								}
								if(elemento == parentObj3){
									arreglo_audios_per.push(int);
				           			audio_en_per[i] = arreglo_audios_per;
					        		//clic_en_masinfo[i] = int+1;
						        	
								}
							}

				            if(type=="zoom_circ"){
				            	//console.log("HOLA")
				           
				        	zoom_en_circ[i] = int+1;
							

								if(elemento == parentObj2){
									arreglo_zoom_mas.push(int);
				           			zoom_en_mas_info[i] = arreglo_zoom_mas;
						        	//clic_en_masinfo[i] = int+1;
								}
								if(elemento == parentObj3){
									arreglo_zoom_per.push(int);
				           			zoom_en_per[i] = arreglo_zoom_per;
						        	//clic_en_masinfo[i] = int+1;
								}
							}
							//console.log(zoom_en_circ)
							if(type=="ov_circ"){
				            //	console.log("HOLA")

				        	over_en_circ[i] = int+1;
							

								if(elemento == parentObj2){
									arreglo_sensibles_mas.push(int);
				           			over_en_mas_info[i] = arreglo_sensibles_mas;
						        	//clic_en_masinfo[i] = int+1;
								}
								if(elemento == parentObj3){
									arreglo_sensibles_per.push(int);
				           			over_en_per[i] = arreglo_sensibles_per;
						        	//clic_en_masinfo[i] = int+1;
								}
							}
							//console.log(over_en_circ)

							if(type=="clic_circ"){
				        	clic_en_circ[i] = int+1;
				        		if(elemento == parentObj2){
									arreglo_clics_mas.push(int);
				           			clic_en_mas_info[i] = arreglo_clics_mas;
					        		//clic_en_masinfo[i] = int+1;
						        	
								}
								if(elemento == parentObj3){
									arreglo_clics_per.push(int);
				           			clic_en_per[i] = arreglo_clics_per;
					        		//clic_en_masinfo[i] = int+1;
						        	
								}
							}
							if(type=="clic_circb"){
				        	clic_en_circb[i] = int+1;
				        		if(elemento == parentObj2){
				        			
									arreglo_clics_masb.push(int);
				           			clic_en_mas_infob[i] = arreglo_clics_masb;
					        		//clic_en_masinfo[i] = int+1;
						        	
								}
								if(elemento == parentObj3){
									arreglo_clics_perb.push(int);
				           			clic_en_perb[i] = arreglo_clics_perb;
					        		//clic_en_masinfo[i] = int+1;
						        	
								}
							}
							if(type=="mas_circ"){
				        	mas_en_circ[i] = int+1;
							}

							if(type=="descarga_circ"){
				        	descarga_en_circ[i] = int+1;
				        	
				        		if(elemento == parentObj2){
									arreglo_descargas_mas.push(int);
				           			descarga_en_mas_info[i] = arreglo_descargas_mas;
					        		//clic_en_masinfo[i] = int+1;
						        	
								}
								if(elemento == parentObj3){
									arreglo_descargas_per.push(int);
				           			descargas_en_per[i] = arreglo_descargas_per;
					        		//clic_en_masinfo[i] = int+1;
						        	
								}
								
							}
							
				        }
				        elemento = elemento.parentNode;
				    }

		//console.log(clics_en_clics)

			
	}
	//console.log(clic_en_per)
	if(tipo=="tipo3"){
		cantidad_circulos_act = cantidad_circulos;
	} else if (tipo=="tipo2"){
		cantidad_circulos_act = cantidad_circulos+1;
	} else {
		cantidad_circulos_act = cantidad_circulos;

	}
	

	for (i = 0; i < cantidad_circulos_act; i++) { 
		
		clic_en_circ[i] = "a";
		clic_en_circb[i] = "a";
		mas_en_circ[i] = "a";
		over_en_circ[i] = "a";
		zoom_en_circ[i] = "a";
		descarga_en_circ[i] = "a";
		video_en_circ[i] = "a";
		audio_en_circ[i] = "a";


		parentObj = document.getElementById("contenido_c"+i);
		parentObj2 = document.getElementById("contenido_c"+i+"_0");
		parentObj3 = document.getElementById("contenido_c"+i+"_mp");

		arreglo_audios_mas = [];
		for (int = 0; int < cantidad_audios_original; int++) { 
			//console.log(i,int)
			elemento = document.getElementById("audio"+int);
			contieneElemento(elemento,parentObj,parentObj2,parentObj3,"audio_circ")


		}
		cantidad_audios = audio_en_circ;


		arreglo_videos_mas = [];
		for (int = 0; int < cantidad_videos_original; int++) { 
			//console.log(i,int)
			elemento = document.getElementById("video"+int);
			contieneElemento(elemento,parentObj,parentObj2,parentObj3,"video_circ")


		}
		cantidad_videos = video_en_circ;


		arreglo_zoom_mas = [];
		for (int = 0; int < cantidad_zoom_original; int++) { 
			//console.log(i,int)
			elemento = document.getElementById("boton_zoom"+int);
			contieneElemento(elemento,parentObj,parentObj2,parentObj3,"zoom_circ")


		}
		cantidad_zoom = zoom_en_circ;


		arreglo_sensibles_mas = [];
		for (int = 0; int < cantidad_sensibles_original; int++) { 
			//console.log(i,int)
			elemento = document.getElementById("zona_sensible"+int);
			contieneElemento(elemento,parentObj,parentObj2,parentObj3,"ov_circ")


		}
		cantidad_sensibles = over_en_circ;
		//console.log(cantidad_zoom,cantidad_sensibles)

		//arreglo_sensibles = []

		arreglo_clics_mas = [];
		for (int = 0; int < cantidad_clics_original; int++) { 
		//console.log(i,int)
			elemento = document.getElementById("clic"+int);
			contieneElemento(elemento,parentObj,parentObj2,parentObj3,"clic_circ")


		}
		cantidad_clics = clic_en_circ;

		for (int = 0; int < cantidad_clics_originalb; int++) { 
		//console.log(i,int)
			elemento = document.getElementById("clicb"+int);
			contieneElemento(elemento,parentObj,parentObj2,parentObj3,"clic_circb")


		}
		cantidad_clicsb = clic_en_circb;

		for (int = 0; int < cantidad_masinfo_original; int++) { 
		//console.log(i,int)
			elemento = document.getElementById("masinfo"+int);
			contieneElemento(elemento,parentObj,parentObj2,parentObj3,"mas_circ")


		}
		cantidad_masinfo = mas_en_circ;

		arreglo_clics_mas = [];
		for (int = 0; int < cantidad_clics_original; int++) { 
		//console.log(i,int)
			elemento = document.getElementById("clic"+int);
			contieneElemento(elemento,parentObj,parentObj2,parentObj3,"clic_circ")


		}
		cantidad_clics = clic_en_circ;

		for (int = 0; int < cantidad_descargas_original; int++) { 
		//console.log(i,int)
			elemento = document.getElementById("descarga"+int);
			contieneElemento(elemento,parentObj,parentObj2,parentObj3,"descarga_circ")


		}
		cantidad_descargas = descarga_en_circ;
	}

	for (i = 0; i < cantidad_circulos; i++) { 
		if(cantidad_audios[i]=="a"){
			if(i==0){
				cantidad_audios[i] = 0;
			} else {
				cantidad_audios[i] = cantidad_audios[i-1];
			}
		}

		if(cantidad_videos[i]=="a"){
			if(i==0){
				cantidad_videos[i] = 0;
			} else {
				cantidad_videos[i] = cantidad_videos[i-1];
			}
		}
		if(cantidad_zoom[i]=="a"){
			if(i==0){
				cantidad_zoom[i] = 0;
			} else {
				cantidad_zoom[i] = cantidad_zoom[i-1];
			}
		}
		//console.log(cantidad_zoom)
		if(cantidad_sensibles[i]=="a"){
			if(i==0){
				cantidad_sensibles[i] = 0;
			} else {
				cantidad_sensibles[i] = cantidad_sensibles[i-1];
			}
		}
		if(cantidad_clics[i]=="a"){
			if(i==0){
				cantidad_clics[i] = 0;
			} else {
				cantidad_clics[i] = cantidad_clics[i-1];
			}
		}
		if(cantidad_clicsb[i]=="a"){
			if(i==0){
				cantidad_clicsb[i] = 0;
			} else {
				cantidad_clicsb[i] = cantidad_clicsb[i-1];
			}
		}
		if(cantidad_masinfo[i]=="a"){
			if(i==0){
				cantidad_masinfo[i] = 0;
			} else {
				cantidad_masinfo[i] = cantidad_masinfo[i-1];
			}
		}
		if(cantidad_descargas[i]=="a"){
			if(i==0){
				cantidad_descargas[i] = 0;
			} else {
				cantidad_descargas[i] = cantidad_descargas[i-1];
			}
		}
	}


	if(cantidad_audios=="a"){
							cantidad_audios=0;
						}

	if(cantidad_videos=="a"){
							cantidad_videos=0;
						}

	if(cantidad_sensibles=="a"){
							cantidad_sensibles=0;
						}

						if(cantidad_clics=="a"){
							cantidad_clics=0;
						}


						if(cantidad_masinfo=="a"){
							cantidad_masinfo=0;
						}
	if(cantidad_zoom=="a"){
							cantidad_zoom=0;
						}
						if(cantidad_descargas=="a"){
							cantidad_descargas=0;
						}



	

	//console.log(cantidad_masinfo)
	//console.log(cantidad_clics);
	//console.log(cantidad_sensibles);
	//console.log(cantidad_masinfo);
	
	////////////////////////////


	//console.log("HOLA")

	cumple_over_clic = false;

	if(tipo=="tipo3"){
		actual_circ = -1;
	} else {
		actual_circ = 0;

	}
	circulo_actual_ok = 0;
	clic_actual_ok = 0;
	clic_mayor_actual = 0;
	clic_actual_okb = 0;
	clic_mayor_actualb = 0;

	numero_arreglo_circulos_anterior = 100;
	pausas_audio_nuevo = pausas_audio;
	cantidad_maspersonaje = 0;
	cantidad_clics_suma = 0;
	cantidad_clics_original = cantidad_clics;
	cantidad_clics_originalb = cantidad_clicsb;


	permitido_btn = [];
	permitido_clic = [];
	permitido_clicb = [];
	
	arreglo_masper = [];

	for (ix = 0; ix < cantidad_audiop.length; ix++) { 

		//console.log(i,"i")
			//arreglo_masper[i] = 0;
		if(cantidad_audiop[ix]!=0){
			//console.log(ix,"ix")
	
			cantidad_maspersonaje++;
			mas_per = document.createElement('DIV');
			mas_per.setAttribute('id', 'mas_per'+ix); 
			mas_per.className = "mas_per"
			//document.getElementById("contenido_c"+ix).appendChild(mas_per);
		}
		arreglo_masper[ix] = cantidad_maspersonaje;

	}

	//console.log(cantidad_audiop)
	//console.log(cantidad_maspersonaje,"cantidad_maspersonajex")
	/*
	for (i = 0; i < cantidad_clics.length; i++) { 
		if(cantidad_clics[i]!=0){

				cantidad_clics_suma += cantidad_clics[i];

		}
	}
	*/
	if(cantidad_circulos>0){
	cantidad_masinfo_original = cantidad_masinfo; 
	cantidad_masinfo = cantidad_masinfo[cantidad_masinfo.length-1];

	cantidad_clics = cantidad_clics[cantidad_clics.length-1];
	cantidad_clicsb = cantidad_clicsb[cantidad_clicsb.length-1];

	cantidad_descargas_original = cantidad_descargas; 
	cantidad_descargas = cantidad_descargas[cantidad_descargas.length-1];

	cantidad_sensibles_suma = 0;
	cantidad_sensibles_original = cantidad_sensibles;
	/*
	for (i = 0; i < cantidad_sensibles.length; i++) { 
		if(cantidad_sensibles[i]!=0){

				cantidad_sensibles_suma += cantidad_sensibles[i];

		}
	}
	*/
	cantidad_sensibles = cantidad_sensibles[cantidad_sensibles.length-1];

	cantidad_zoom_original = cantidad_zoom;

	cantidad_zoom = cantidad_zoom[cantidad_zoom.length-1];
	
	cantidad_videos_original = cantidad_videos;

	cantidad_videos = cantidad_videos[cantidad_videos.length-1];

	cantidad_audios_original = cantidad_audios;
	cantidad_audios = cantidad_audios[cantidad_audios.length-1];
	
	//cantidad_descargas = cantidad_descargas[cantidad_descargas.length-1];;

	}

	//console.log(parent.znThisPage)
	//if(parent.znThisPage!=1){
	locucion = createjs.Sound.play("sounds/audio"+parent.znThisPage+".mp3");
	locucion.stop();
	//}
	//duracion_actual = locucion.getDuration();
	//cant_pausas = pausas_audio_nuevo[0].length;
	//pausas_audio_nuevo[1][cant_pausas-1] = duracion_actual;

	total_zooms = [];
	zoom_consultados = [];
	una_vez_personaje = true;

	
	bgtxt_visto = "#6A696A";
	bgtxt_novisto = "#D10019";

	boton_abierto = parent.btn_infografia;
	
	boton_opaco = parent.btn_infografia;
	boton_cerrado = parent.btn_infografia;
	
	boton_visto = parent.btn_infografia;
	boton_libre = parent.btn_infografia;

	boton_highlight = boton_visto;//"ffffff"

	objetos_over = [];

	function Objetosover(elemento,ident){
		this.elemento = elemento;
		this.ident = ident;
		this.colorBgTxt = function(bgcolor){
			elemento.style.backgroundColor = this.bgcolor;
		};
		this.colorBgInfo = function(bgcolor){
			elemento.style.backgroundColor = this.bgcolor;
		}
	}


	Objetosover.prototype.restriccion = "no";
	Objetosover.prototype.lugar = "otro";

	una_vez_globo = true;
	icono_personaje_activo = false;
	fondo_equis_activo = true;
	infografias = [];
	mapas = [];
	tipos_infografias = [];
	elementos_infografias = [];

	primeros_elementos_infografias =[];
	ultimos_elementos_infografias =[];

	total_zonas_infografias = [];

	if(cantidad_infografias>0){
		for (i = 0; i < cantidad_infografias; i++) { 
			infografias[i] = document.getElementById("infografia"+i);
			mapas[i] = "Mapa"+i;
			zonas_infografia = document.getElementById("infografia"+i).childElementCount;
			total_zonas_infografias[i] = zonas_infografia;

			tipos_infografias[i] =infografias[i].getAttribute("data-restriccion"); 


			primer_over_infografia = infografias[i].firstElementChild.id;
			ultimo_over_infografia = infografias[i].lastElementChild.id;

			primeros_elementos_infografias.push(primer_over_infografia);
			ultimos_elementos_infografias.push(ultimo_over_infografia);



			//////////////////



			//////////////////
			
			//agragarElementosInfografias(cantidad_child_infografia);
		}
	}
	

	
	sensibles_restriccion = [];
	vistos_over_completo = [];
	cantidad_visto_over = []
	coordenadas_areas = [];	

	zonas_sensibles_restringidas = [];

	areas_infografias_totales = [];
	areas_infografias_restringidas = [];

	opacidad_icono_baja_2 = 0.1;
	opacidad_icono_baja = 0.35;
	opacidad_icono_alta = 0.4;
	
	function Areas(key,selected,render_select,render_highlight) {
    this.key = key;
    this.selected = selected;
    this.render_select = render_select;
    this.render_highlight = render_highlight;


	}

	activa_animacion_icono = false;

	

	aumentando = true;


	

	/*
	if(parent.znThisPage<parent.pagina_superior){
		boton_abierto = boton_libre;
		boton_opaco = boton_libre;
	}
	*/



	if(cantidad_sensibles>0){
		for (i = 0; i < cantidad_sensibles; i++) { 
			//arreglo_sensibles_clic = [];

			tipo_elemento = document.getElementById("zona_sensible"+i).parentNode.nodeName;
			elemento = document.getElementById("zona_sensible"+i);
			id_elemento = document.getElementById("zona_sensible"+i).id;
			tipo_infografia_actual = document.getElementById("zona_sensible"+i).parentNode.getAttribute("data-restriccion"); 	

			id_infografia_actual = document.getElementById("zona_sensible"+i).parentNode.id;
			id_infografia_actual = id_infografia_actual.replace("infografia", "#Mapa");
			num_infografia_actual = id_infografia_actual.replace("#Mapa", "");
			num_infografia_actual = Number(num_infografia_actual);

			
			objetos_over[i] = new Objetosover(elemento,id_elemento);

			//if(cantidad_clics>0){
				
			//}
			//console.log(over_en_clics)

			//////TIPO, RESTRICCIÓN, COLOR

			if(tipo_elemento == "MAP"){
				objetos_over[i].tipo = "infografia";
				objetos_over[i].infografia = id_infografia_actual;
				objetos_over[i].numero_infografia = num_infografia_actual;
				objetos_over[i].coordenadas = document.getElementById("zona_sensible"+i).getAttribute('coords');
				document.getElementById("zona_sensible"+i).className = "negrilla_sensible";
				
				primeros_elementos = primeros_elementos_infografias.indexOf(id_elemento);
				ultimos_elementos = ultimos_elementos_infografias.indexOf(id_elemento);
				
				if(primeros_elementos != -1){
					objetos_over[i].lugar = "primero";

				} else if(ultimos_elementos != -1){
					objetos_over[i].lugar = "ultimo";
				}

				if(tipo_infografia_actual == "si") {
					objetos_over[i].restriccion = "si";

					if(primeros_elementos != -1){
						objetos_over[i].estado = "abierto";
						objetos_over[i].bgcolor = boton_abierto;
						//objetos_over[i].opacidad = opacidad_icono_baja;

		
						objetos_over[i].render_highlight = {fillOpacity: opacidad_icono_alta,fillColor:boton_highlight,strokeColor:boton_highlight,strokeOpacity:0}
						objetos_over[i].render_select = {fillOpacity: opacidad_icono_baja,fillColor:boton_abierto,strokeColor:boton_abierto,strokeOpacity: 1}

						objetos_over[i].area = new Areas(id_elemento, true, objetos_over[i].render_select,objetos_over[i].render_highlight);				

					} else {
						objetos_over[i].estado = "cerrado";
						objetos_over[i].bgcolor = boton_cerrado;
						//objetos_over[i].opacidad = opacidad_icono_baja;
						
						objetos_over[i].render_highlight = {fillOpacity: opacidad_icono_alta,fillColor:boton_highlight,strokeColor:boton_highlight,strokeOpacity:0}
						objetos_over[i].render_select = {fillOpacity: opacidad_icono_baja,fillColor:boton_cerrado,strokeColor:boton_cerrado,strokeOpacity: 1}

						objetos_over[i].area = new Areas(id_elemento, true, objetos_over[i].render_select,objetos_over[i].render_highlight);
					}

					
				} else {
					objetos_over[i].estado = "abierto";
					objetos_over[i].bgcolor = boton_abierto;
					//objetos_over[i].opacidad = opacidad_icono_baja;
					
					objetos_over[i].render_highlight = {fillOpacity: opacidad_icono_alta,fillColor:boton_highlight,strokeColor:boton_highlight,strokeOpacity:0}
					objetos_over[i].render_select = {fillOpacity: opacidad_icono_baja,fillColor:boton_abierto,strokeColor:boton_abierto,strokeOpacity: 1}

					objetos_over[i].area = new Areas(id_elemento, true, objetos_over[i].render_select,objetos_over[i].render_highlight);

				}

				
			} else {
				objetos_over[i].tipo = "texto";
				//objetos_over[i].bgcolor = bgtxt_novisto;

				//objetos_over[i].colorBgTxt(bgtxt_novisto);

				//objetos_over[i].elemento.className = "negrilla_sensible";


			}

			////DESPUÉS DE HABER VISTO LA PÁGINA
			
			if(parent.completado || parent.znThisPage < parent.pagina_superior){
				objetos_over[i].estado = "visto";
				objetos_over[i].bgcolor = boton_visto;
				//objetos_over[i].opacidad = opacidad_icono_baja;
					
				objetos_over[i].render_highlight = {fillOpacity: opacidad_icono_alta,fillColor:boton_highlight,strokeColor:boton_highlight,strokeOpacity:0}
				objetos_over[i].render_select = {fillOpacity: opacidad_icono_baja_2,fillColor:boton_visto,strokeColor:boton_visto,strokeOpacity: 1}
				objetos_over[i].area = new Areas(id_elemento, true, objetos_over[i].render_select,objetos_over[i].render_highlight);
							document.getElementById("zona_sensible"+i).className = "negrilla_sensible2";
							if(!parent.con_restinternas){
								document.getElementById("zona_sensible"+i).className = "negrilla_sensible";
							}

			} else {

			
				if(parent.navega_lineal){
					if(tipo!="arrastre_txt_varios"){
					if($("#zona_sensible"+i).attr('data-orden')!=0){
						if(parent.con_restinternas){
							document.getElementById("zona_sensible"+i).className = "negrilla_sensiblex";	
						}
							//document.getElementById("zona_sensible"+i).className = "negrilla_sensiblex";	


					}
				}


				}
			}
			//console.log(objetos_over)

			/*
			if (parent.znThisPage<parent.pagina_superior){
			tipo_infografia_actual = "no";

			} else {
			tipo_infografia_actual = document.getElementById("zona_sensible"+i).parentNode.getAttribute("data-restriccion"); 	
			}
			*/



			



			
			


			primeros_elementos = primeros_elementos_infografias.indexOf(id_elemento);
			ultimos_elementos = ultimos_elementos_infografias.indexOf(id_elemento);

			//console.log(id_elemento,primeros_elementos,primeros_elementos_infografias)
			
			vistos_over_completo[i] = {val: false};

				cantidad_visto_over[i] = 0;
			

			if(tipo_elemento == "MAP" && tipo_infografia_actual=="si"){

				if(primeros_elementos !== -1){
					sensibles_restriccion[i] = {val: false};			
					zonas_sensibles_restringidas.push('zona_sensible'+i);
					areas_infografias_totales[i] = new Areas("zona_sensible"+i, true, boton_abierto,opacidad_icono_baja);				

				} else {
					sensibles_restriccion[i] = {val: true};
					areas_infografias_totales[i] = new Areas("zona_sensible"+i, true, boton_opaco,opacidad_icono_alta);
				}
			
				
			} else {

				sensibles_restriccion[i] = {val: false};
				areas_infografias_totales[i] = new Areas("zona_sensible"+i, true, boton_abierto,opacidad_icono_baja);

			}



			if(tipo_elemento == "MAP"){

			    coordenadas_areas[i] = document.getElementById("zona_sensible"+i).getAttribute('coords');
    			coordenadas_areas[i] = coordenadas_areas[i].split(',');


    			
    			
			} else {

				if(tipo!="arrastre_txt_varios"){
				
				if(parent.completado || parent.znThisPage < parent.pagina_superior){
			vistos_over_completo[i] = {val: true};
				cantidad_visto_over[i] = 1;
			
				
					//color_boton = "#662518";

					//document.getElementById("zona_sensible"+i).style.backgroundColor = color_boton; // OVER CUANDO YA SE VIERON
					document.getElementById("zona_sensible"+i).className = "negrilla_sensible2";
					if(!parent.con_restinternas){
								document.getElementById("zona_sensible"+i).className = "negrilla_sensible";
							}

					//vistos_over_completo[i].val = true;
					var tiene_icono = document.getElementById("zona_sensible"+i).getAttribute("data-graf");
						
						if(tiene_icono=="si"){
							document.getElementById("icono_graf"+i).className = "icono_graf_visto";
							document.getElementById("txt_graf"+i).className = "txt_graf_visto";
						}


						var tiene_sig = document.getElementById("zona_sensible"+i).getAttribute("data-sig");
						if(tiene_sig!=null){
							
							partes_tiene_sig = tiene_sig.split(',');

							//console.log(partes_tiene_sig.length)

							for (ixn = 0; ixn < partes_tiene_sig.length; ixn++) { 
								//document.getElementById(partes_tiene_sig[i]).style.visibility = "visible";
							
								

						//		setTimeout(function(){
								estilo_div = document.getElementById(partes_tiene_sig[ixn]).className;

  									estilo_div2 = estilo_div.substring(0, 8);

  								//	console.log(estilo_div2)
  									if(estilo_div2=="img-graf"){
								document.getElementById(partes_tiene_sig[ixn]).className = "img-graf-fadein";

  									} else {
								document.getElementById(partes_tiene_sig[ixn]).className = "zona-grow";

  									}



							}
						}
						


						//////BORRAR
/*	var tiene_scala = document.getElementById("zona_sensible"+i).getAttribute("data-scale");
						
						if(tiene_scala=="si"){
					document.getElementById("zona_sensible"+i).className = "negrilla_sensible escala0";

}
*/
///////////////////

				} else {
					//color_boton = "#bdbf00";
					//document.getElementById("zona_sensible"+i).style.backgroundColor = color_boton; // OVER CUANDO YA SE VIERON

					var tiene_scala = document.getElementById("zona_sensible"+i).getAttribute("data-scale");
						
						if(tiene_scala=="si"){
					document.getElementById("zona_sensible"+i).className = "negrilla_sensible escala0";

} else {
					var zs_eninfo = document.getElementById("zona_sensible"+i).getAttribute("data-eninfo");
					if(zs_eninfo=="true"){
					document.getElementById("zona_sensible"+i).className = "negrilla_sensiblesec";

				} else {
					document.getElementById("zona_sensible"+i).className = "negrilla_sensible";

					if(parent.navega_lineal){
						if(tipo!="arrastre_txt_varios"){
						if($("#zona_sensible"+i).attr('data-orden')!=0){
							if(parent.con_restinternas){
								document.getElementById("zona_sensible"+i).className = "negrilla_sensiblex";	
							}

						}
						}


						}
				}

}
				}
				

				}

			}
			//crearMapa(id_infografia_actual);

			
		}
			//crearMapa(id_infografia_actual);

	}



	total_zonas_info = [];
	zonas_info = [];

	//function ActualizaMapas(){

		if(cantidad_infografias>0){
			

			for (i = 0; i < cantidad_infografias; i++) { 
			 	zonas_infografia = "#Mapa"+i;
			 	zonas_info = [];
				for (ind = 0; ind < cantidad_sensibles; ind++) {
					
					if(objetos_over[ind].infografia == zonas_infografia){
						zonas_info.push(objetos_over[ind].area);

					}
				}

				total_zonas_info[i] = zonas_info;
				//console.log(zonas_infografia,total_zonas_info[i]);
				if((parent.tipo_curso=="plataformas"||parent.tipo_curso=="isometrico")&&parent.znPages==1){
					
				} else {
					crearMapa(zonas_infografia,total_zonas_info[i]);
				}
				

			}

		}
	//}
	//ActualizaMapas();

	//if(tipo=="tipo2"||tipo=="tipo3"){
	
		
	//}
	

	$( ".btn_cc" ).click(function() {
		//console.log("clic cc audio")
		if($(this).hasClass("btn_ccvisto")){
			$(this).closest(".cont_audio").find(".subs_audio").removeClass("subs_audioopen");
			$(this).removeClass("btn_ccvisto");
		
		} else {
			$(this).closest(".cont_audio").find(".subs_audio").addClass("subs_audioopen");
			$(this).addClass("btn_ccvisto");
		
		}
		  
	});
	
			    


	

	x_botones = 40;
	x_botones_masini = x_botones+210;
	
	if (cantidad_circulos > 0) {
		y_botones = 260;	
	} else {
		y_botones = 260;	
	}
	

	if (cantidad_circulos > 0) {
		if(!parent.con_menunumeros_v2&&!parent.con_botonesavance&&!parent.con_menunumeros_vhz){
			y_botones_mas = 405;
			
		} else if(!parent.con_menunumeros_v2){
			y_botones_mas = 360;
			
		} else {
			y_botones_mas = 405;
			
		}
		y_botones_mas_ini = y_botones_mas+85;
	} else {
		if(!parent.con_menunumeros_v2&&!parent.con_botonesavance&&!parent.con_menunumeros_vhz){
			y_botones_mas = 505;

		} else if(!parent.con_menunumeros_v2){
			y_botones_mas = 460;
			
		} else {
			y_botones_mas = 505;
		}
		y_botones_mas_ini = y_botones_mas+85;

	}

	if(cantidad_circulos==0){
		x_div_mas_info = x_botones + 50;
		y_div_mas_info = y_botones + 80;
	
	} else {
		x_div_mas_info = x_botones + 50;
		y_div_mas_info = y_botones + 80;
	}
	

	control_animacion_pantalla_final = true;
	sobre_circulo_interno = false;

	//var_canvas = document.getElementById("canvas");
	//var_mensaje_avance_2 = parent.document.getElementById("mensaje_avance");
	//console.log(ifrm_2)
	//var_canvas.addEventListener("click", cerrarMensaje_2);
	//var_canvas.addEventListener("mouseover", cerrarMensaje_2);
	//var_canvas.addEventListener("mouseover", overCanvas);	
	//var_canvas.addEventListener("mouseout", outCanvas);	

	function cerrarMensaje_2(){
		
		//parent.cerrarMensaje();
		//parent.mensaje_avance.alpha = 0;
		//parent.mensaje_avance.visible = false;
		//createjs.Tween.get(parent.mensaje_avance).to({scaleX:0.1,scaleY:0.1,alpha:0,y:100},velocidad_lenta).call(mensajeInvisible_2);
		//console.log("HOLA")
		//parent.var_equis_mensaje.style.visibility = "hidden";
		//parent.var_mensaje_avance.style.opacity = 0; 
		//parent.var_texto_mensaje_avance.style.visibility = "hidden";
		//parent.var_texto_mensaje_avance.style.opacity = 0;
		//parent.var_mensaje_avance.style.color = "red";
		//createjs.Tween.get(mensaje_avance,{override:true}).to({scaleX:0.1,scaleY:0.1,alpha:0,y:100},velocidad_lenta);
	}

	function overCanvas(){
		//parent.pop_adelante.alpha  = 0;
		//parent.pop_atras.alpha = 0;
		/*
		if (parent.pop_adelante.alpha > 0) {
		parent.out_flecha_adelante();
		//parent.outCirculosMenu();
		}
		if(parent.pop_atras.alpha > 0){
		parent.out_flecha_atras();
		//parent.outCirculosMenu();
		}
		*/
		
	}
	function outCanvas(){
		
		//parent.over_flecha_adelante();
		//parent.out_flecha_adelante();
		
		//parent.over_flecha_atras();
		//parent.out_flecha_atras();
	}
	

	if(tipo=="arrastre_final"||tipo=="s_final"||tipo=="vf_final"){
		parent.document.getElementById("flecha_arriba").style.visibility = "hidden";
	}
	

	//var total_textos=[];

	bounds_contenedor_opciones = [];
	sensibles_over = [];
	sensibles_clic = [];
				

	duracion_audio=0;
	//var contenido_iframe = document.getElementById("ifrm");
	
	//var stage_pagina = contenido_iframe.contentWindow.stage;

	//var stage_pagina = stage;

	//Creación de pointer

	var frequency = 100;
	stage.enableMouseOver(frequency);
	//stage_pagina.enableMouseOver(frequency);

	/// Audio

	var audio_activo = true;
	
	///
	
	if(!parent.con_menunumeros_v2){
	var ancho_canvas = 1260;

	} else {
	var ancho_canvas = 1163;
	}
	var alto_canvas = 520;

	
	var x_personaje = 170;
	var desplazamiento_x = 30;

	var ruta;
				if($(".isf").length>0){
					$(".inicia_cuestionario").fadeIn("slow");
					
				} 
		
		if (sin_personaje && cantidad_descargas==0 && cantidad_masinfo==0 && cantidad_clics==0 && cantidad_zoom==0 && cantidad_sensibles==0 && cantidad_maspersonaje==0 && cantidad_videos==0 && cantidad_audios==0 && tipo != "arrastre" && tipo !="crucigrama" && tipo != "vf" && tipo !="cuestionario" && tipo != "arrastre_txt2" && tipo != "arrastre_txt_varios" && tipo !="selecciones" && tipo != "arrastre_txt2" && tipo != "ruleta" && tipo != "varias_sel" && tipo != "tipo3"){

		//if (sin_personaje && cantidad_descargas==0 && cantidad_masinfo==0 && cantidad_clics==0 && cantidad_zoom==0 && cantidad_sensibles==0 && cantidad_maspersonaje==0 && cantidad_videos==0 && cantidad_audios==0 && tipo != "crucigrama" && tipo != "tipo3"){
		//if (sin_personaje && cantidad_descargas==0 && cantidad_masinfo==0 && cantidad_clics==0 && cantidad_zoom==0 && cantidad_circulos==0 && cantidad_sensibles==0 && cantidad_maspersonaje==0 && cantidad_videos==0 && cantidad_audios==0 && tipo != "crucigrama"){
					
						
						//suma_total();
						
						console.log("inicia_cuest")

						setTimeout(function(){ 
					
					//parent.document.getElementById("flecha_abajo").style.visibility = "visible";
					//contenedores_circulos_menu[znThisPage].

					//parent.contenedores_circulos_menu[parent.znThisPage]
				//	control_animacion_pantalla_final = true;
					if(tipo=="cuestionario"){
					$(".inicia_cuestionario").fadeIn("slow");
				} else {
					suma_total();

				}
				//	if(parent.znThisPage==1&&parent.estados_numeros[parent.znThisPage+1].val=="cerrado"){
						
				//		parent.numerosVistos();
				//	}
					
					}, velocidad_lenta);

					}
	
	var imagenes = new createjs.SpriteSheet({
	images: ["../../images/index_atlas_.png"], 
	frames: ["../../images/index_atlas_.png"], "frames": parent.frames_principal//[[126,926,51,37],[49,1065,51,37],[179,926,51,37],[142,965,51,37],[36,980,51,38],[96,1011,51,37],[89,972,51,37],[686,862,19,11],[686,849,33,11],[732,740,70,70],[813,566,70,72],[36,926,42,52],[0,1043,47,53],[721,849,2,33],[49,1020,45,43],[80,926,44,44],[559,483,187,184],[0,1098,41,41],[102,1050,23,35],[748,483,63,147],[732,812,62,60],[669,740,61,107],[0,0,1126,481],[559,884,185,200],[559,669,108,119],[559,790,90,71],[813,483,81,81],[669,669,166,69],[658,849,26,17],[0,926,34,115],[748,640,97,18],[559,863,97,18],[289,483,268,440],[1128,442,300,440],[1128,0,340,440],[0,483,287,441]]
	});
	
	
	var imagenes_pantalla;

	var var_frames;

	//var var_frames_page2 = [[121,0,84,137],[0,108,113,106],[0,0,119,106]];
	//var var_frames_page2 = frames_pagina_actual;

	
	
	//imagenes_pantalla = new createjs.SpriteSheet({
	//images: ["images/page"+parent.znThisPage+"_atlas_.png"], 
	//frames: frames_pagina_actual
	//});	
	

	//var fondo_p1  = new createjs.Bitmap("../../images/fondo_p1.png");
	var fondo_p1 = new createjs.Sprite(imagenes);
	
	fondo_p1.gotoAndStop(parent.lib.fondo_p1.prototype.id);
	fondo_p1.alpha = parent.opacidad_fondop1;
	fondo_p1.y = 0;

	

	/////PANTALLA ESPECIAL
	var total_imagenes=[];
	if(parent.znThisPage == 26){
		var fondo_p2 = new createjs.Sprite(imagenes);
		//fondo_p2 = new createjs.Bitmap("images/fondo2.png");
		fondo_p2.gotoAndStop(parent.lib.fondo_personaje.prototype.id);
		fondo_p2.alpha = 1;
		fondo_p2.y = 25;

		total_imagenes.push(fondo_p2)

	}
	
	/*
	var circulo_negro = new createjs.Sprite(imagenes);
	circulo_negro.gotoAndStop(38);
	*/
	/*
	var circulo_amarillo = new createjs.Sprite(imagenes);
	circulo_negro.gotoAndStop(37);
	*/
	radio_circulo_negro = 45;
	x_circulo_negro = 0;
	y_circulo_negro = 0;

	/*

	var circulo_negro = new createjs.Shape();
	circulo_negro.graphics.beginFill("rgb(0,0,0)").drawCircle (x_circulo_negro, y_circulo_negro, radio_circulo_negro);
	//bounds_circulo_negro = circulo_negro.getBounds();
	//console.log(bounds_circulo_negro)
	radio_circulo_amarillo = radio_circulo_negro*0.7;	
	x_circulo_amarillo = radio_circulo_negro*0.4;
	y_circulo_amarillo = y_circulo_negro+radio_circulo_negro-radio_circulo_amarillo;	
	circulo_negro.alpha = 0;
	circulo_negro.scaleX = 0.1;
	circulo_negro.scaleY = 0.1;
	
	var circulo_amarillo = new createjs.Shape();
	circulo_amarillo.graphics.beginFill("rgb(255,231,1)").drawCircle (x_circulo_amarillo, y_circulo_amarillo, radio_circulo_amarillo);
	//circulo_amarillo.x = circulo_negro.x/2;
	circulo_amarillo.alpha = 0;
	circulo_amarillo.scaleX = 0.1;
	circulo_amarillo.scaleY = 0.1;
	*/

	//var var_numero_titulo_pagina = document.getElementById("numero_pagina");
	//var_numero_titulo_pagina.innerHTML = parent.znThisPage+".";
	//var_numero_titulo_pagina.style.color = "red";

	//numero_titulo_pagina = new createjs.Text(parent.znThisPage + ".", "55px ql", "rgba(218,37,29,1)");
	//console.log(bounds_numero_titulo_pagina)
	//var numero_titulo_pagina = new createjs.DOMElement(var_numero_titulo_pagina);
	//numero_titulo_pagina.x = 10//x_circulo_amarillo-bounds_numero_titulo_pagina.width/2;//0//circulo_amarillo.x;
	//numero_titulo_pagina.y = 5;//circulo_amarillo.y;
	//numero_titulo_pagina.alpha = 1;
	//numero_titulo_pagina.scaleX = 0;
	//numero_titulo_pagina.scaleY = 0;
	


	/*
	var contenedor_circulos_titulo = new createjs.Container();
	contenedor_circulos_titulo.addChild(circulo_negro,circulo_amarillo,numero_titulo_pagina);
	contenedor_circulos_titulo.x = radio_circulo_negro;
	contenedor_circulos_titulo.y = radio_circulo_negro;
	//contenedor_circulos_titulo.regX = 0;
	//contenedor_circulos_titulo.regY = 0;
	
	//contenedor_circulos_titulo.x = 30;
	//contenedor_circulos_titulo.y = 85;
	//contenedor_circulos_titulo.scaleX = scale_personaje;
	contenedor_circulos_titulo.mouseChildren = false;
	*/
	


	


	

	//azar = Math.floor((Math.random() * 100) + 1);
	
	//if (azar >=0 && azar < 100) {
		numero_personaje = 45;
		

/////Personaje 1
x_ceja_derecha_per1 = parent.x_ceja_derecha_per1;
x_ceja_izquierda_per1 = parent.x_ceja_izquierda_per1;
x_ojos_per1 = parent.x_ojos_per1;
x_boca_per1 = parent.x_boca_per1;
x_tronco_per1 = parent.x_tronco_per1; 

y_ceja_derecha_per1 = parent.y_ceja_derecha_per1;
y_ceja_izquierda_per1 = parent.y_ceja_izquierda_per1;
y_ojos_per1 = parent.y_ojos_per1;
y_boca_per1 = parent.y_boca_per1;
y_tronco_per1 = parent.y_tronco_per1; 

/////Personaje 2
x_ceja_derecha_per2 = parent.x_ceja_derecha_per2;
x_ceja_izquierda_per2 = parent.x_ceja_izquierda_per2;
x_ojos_per2 = parent.x_ojos_per2;
x_boca_per2 = parent.x_boca_per2;
x_tronco_per2 = parent.x_tronco_per2; 


y_ceja_derecha_per2 = parent.y_ceja_derecha_per2;
y_ceja_izquierda_per2 = parent.y_ceja_izquierda_per2;
y_ojos_per2 = parent.y_ojos_per2;
y_boca_per2 = parent.y_boca_per2;
y_tronco_per2 = parent.y_tronco_per2; 


/////Personaje 3
x_ceja_derecha_per3 = parent.x_ceja_derecha_per3;
x_ceja_izquierda_per3 = parent.x_ceja_izquierda_per3;
x_ojos_per3 = parent.x_ojos_per3;
x_boca_per3 = parent.x_boca_per3;
x_tronco_per3 = parent.x_tronco_per3; 


y_ceja_derecha_per3 = parent.y_ceja_derecha_per3;
y_ceja_izquierda_per3 = parent.y_ceja_izquierda_per3;
y_ojos_per3 = parent.y_ojos_per3;
y_boca_per3 = parent.y_boca_per3;
y_tronco_per3 = parent.y_tronco_per3; 


/////Personaje 4
x_ceja_derecha_per4 = parent.x_ceja_derecha_per4;
x_ceja_izquierda_per4 = parent.x_ceja_izquierda_per4;
x_ojos_per4 = parent.x_ojos_per4;
x_boca_per4 = parent.x_boca_per4;
x_tronco_per4 = parent.x_tronco_per4; 


y_ceja_derecha_per4 = parent.y_ceja_derecha_per4;
y_ceja_izquierda_per4 = parent.y_ceja_izquierda_per4;
y_ojos_per4 = parent.y_ojos_per4;
y_boca_per4 = parent.y_boca_per4;
y_tronco_per4 = parent.y_tronco_per4; 
		

		
	//} 


	/*
	else if (azar >= 25 && azar < 50){
		numero_personaje = 34;
		x_ceja_derecha = 165;
		x_ceja_izquierda = 122;
		x_ojos = 92;
		x_boca = 134;
	} else if (azar >= 50 && azar < 75){
		numero_personaje = 35;
		x_ceja_derecha = 148;
		x_ceja_izquierda = 105;
		x_ojos = 77;
		x_boca = 119;
	} else {
		numero_personaje = 36;
		x_ceja_derecha = 149;
		x_ceja_izquierda = 106;
		x_ojos = 79;
		x_boca = 119;
		
	}
	*/
	///BRAZOS

	rotaciones_cabezas = [-2,0,0,0,2]
	
	tiempos_cabeza = [1600, 3400, 4200]

	tiempo_cabeza_actual = tiempos_cabeza[Math.floor(Math.random()*tiempos_cabeza.length)];


	tiempos_brazos = [1800, 2500, 3800]

	tiempo_brazo_actual = tiempos_brazos[Math.floor(Math.random()*tiempos_brazos.length)];

	posiciones_personaje=[1,2];


	//DCRI
	//posicion_personaje_actual = posiciones_personaje[Math.floor(Math.random()*posiciones_personaje.length)];

	posicion_personaje_actual = 1;



	rotaciones_iniciales_antebrazo_derecho = [-70];

	rotaciones_antebrazo_derecho_0 = [-10, -10, -25, 20] 
	rotaciones_antebrazo_derecho_1 = [220, 220, 235, 200] 
	rotaciones_antebrazo_derecho_2 = [130, 130, 180, 120] 

	rotaciones_brazo_derecho = -50;

	pos_bi1 = true;
	pos_bi2 = false;
	pos_bi3 = false;

	pos_bd1 = true;
	pos_bd2 = false;
	pos_bd3 = false;




	rotaciones_iniciales_antebrazo_izquierdo = [-90]//-10,, 220, 130] 

	rotaciones_antebrazo_izquierdo_0 = [-10, -10, -20, 20] 
	rotaciones_antebrazo_izquierdo_1 = [215, 215, 235, 190] 
	rotaciones_antebrazo_izquierdo_2 = [170, 170, 190, 120] 

	rotaciones_brazo_izquierdo = 40;

	manos_derecha_abiertas = [35,36]
	manos_izquierdas_abiertas = [39,40]

	mano_derecha_actual = parent.lib.mano_d2.prototype.id;
	mano_izquierda_actual = parent.lib.mano_i4.prototype.id;

	rotacion_brazo_derecho = rotaciones_brazo_derecho;
	rotacion_brazo_izquierdo = rotaciones_brazo_izquierdo;



	rotacion_antebrazo_derecho_actual = rotaciones_iniciales_antebrazo_derecho[Math.floor(Math.random()*rotaciones_iniciales_antebrazo_derecho.length)];
	rotacion_antebrazo_izquierdo_actual = rotaciones_iniciales_antebrazo_izquierdo[Math.floor(Math.random()*rotaciones_iniciales_antebrazo_izquierdo.length)];






	/*
	if(posicion_personaje_actual == 1 || posicion_personaje_actual == 2){
		rotacion_antebrazo_derecho_actual = rotaciones_iniciales_antebrazo_derecho[Math.floor(Math.random()*rotaciones_iniciales_antebrazo_derecho.length)];
		
		numero_arreglo_rotaciones_iniciales_antebrazo_derecho = rotaciones_iniciales_antebrazo_derecho.indexOf(rotacion_antebrazo_derecho_actual);

		//console.log(numero_arreglo_rotaciones_iniciales_antebrazo_derecho);

		if (numero_arreglo_rotaciones_iniciales_antebrazo_derecho == 1){
			rotacion_brazo_derecho = rotaciones_brazo_derecho[1];
			mano_derecha_actual = 34;



		} else if (numero_arreglo_rotaciones_iniciales_antebrazo_derecho == 2) {
			rotacion_brazo_derecho = rotaciones_brazo_derecho[1];
			mano_derecha_actual = 33;
			
		} else {
			rotacion_brazo_derecho = rotaciones_brazo_derecho[Math.floor(Math.random()*rotaciones_brazo_derecho.length)];
			mano_derecha_actual = manos_derecha_abiertas[Math.floor(Math.random()*manos_derecha_abiertas.length)];
			
		}


		rotacion_antebrazo_izquierdo_actual = rotaciones_iniciales_antebrazo_izquierdo[Math.floor(Math.random()*rotaciones_iniciales_antebrazo_izquierdo.length)];
		
		numero_arreglo_rotaciones_iniciales_antebrazo_izquierdo = rotaciones_iniciales_antebrazo_izquierdo.indexOf(rotacion_antebrazo_izquierdo_actual);

		//console.log(numero_arreglo_rotaciones_iniciales_antebrazo_derecho);

		if (numero_arreglo_rotaciones_iniciales_antebrazo_izquierdo == 1){
			rotacion_brazo_izquierdo = rotaciones_brazo_izquierdo[1];
			mano_izquierda_actual = 38;

		} else if (numero_arreglo_rotaciones_iniciales_antebrazo_izquierdo == 2) {
			rotacion_brazo_izquierdo = rotaciones_brazo_izquierdo[1];
			mano_izquierda_actual = 37;
			
		} else {
			rotacion_brazo_izquierdo = rotaciones_brazo_izquierdo[Math.floor(Math.random()*rotaciones_brazo_izquierdo.length)];
			mano_izquierda_actual = manos_izquierdas_abiertas[Math.floor(Math.random()*manos_izquierdas_abiertas.length)];
			
		}

		//console.log(rotacion_antebrazo_derecho_actual, numero_arreglo_rotaciones_iniciales_antebrazo_derecho)

	} else {
		
	}
	*/

	var cabeza_per1 = new createjs.Sprite(imagenes);
	cabeza_per1.gotoAndStop(parent.lib.cabeza_per1.prototype.id);
	//var cabeza = new createjs.Bitmap("../../images/cabeza.png");

	cabeza_per1.alpha = 1;
	cabeza_per1.x = parent.x_cabeza_per1;
	cabeza_per1.y = parent.y_cabeza_per1;

	var cabeza_per2 = new createjs.Sprite(imagenes);
	cabeza_per2.gotoAndStop(parent.lib.cabeza_per2.prototype.id);
	//var cabeza = new createjs.Bitmap("../../images/cabeza.png");

	cabeza_per2.alpha = 1;
	cabeza_per2.x = parent.x_cabeza_per2;
	cabeza_per2.y = parent.y_cabeza_per2;



	var cabeza_per3 = new createjs.Sprite(imagenes);
	cabeza_per3.gotoAndStop(parent.lib.cabeza_per3.prototype.id);
	//var cabeza = new createjs.Bitmap("../../images/cabeza.png");

	cabeza_per3.alpha = 1;
	cabeza_per3.x = parent.x_cabeza_per3;
	cabeza_per3.y = parent.y_cabeza_per3;


	var cabeza_per4 = new createjs.Sprite(imagenes);
	cabeza_per4.gotoAndStop(parent.lib.cabeza_per4.prototype.id);
	//var cabeza = new createjs.Bitmap("../../images/cabeza.png");

	cabeza_per4.alpha = 1;
	cabeza_per4.x = parent.x_cabeza_per4;
	cabeza_per4.y = parent.y_cabeza_per4;


	var cabello_per1 = new createjs.Sprite(imagenes);
	cabello_per1.gotoAndStop(parent.lib.cabello_per1.prototype.id);
	//var cabeza = new createjs.Bitmap("../../images/cabeza.png");

	cabello_per1.alpha = 1;
	cabello_per1.x = parent.x_cabello_per1;
	cabello_per1.y = parent.y_cabello_per1;
	cabello_per1.visible = parent.visible_cabello_per1;
	//cabello_per1.scaleX = parent.scalex_cabello_per1;
	//cabello_per1.scaleY = parent.scaley_cabello_per1;
	//cabello_per1.scaleY = 0.95;
	//cabello_per1.scaleX = 0.95;


	var cabello_per2 = new createjs.Sprite(imagenes);
	cabello_per2.gotoAndStop(parent.lib.cabello_per2.prototype.id);
	//var cabeza = new createjs.Bitmap("../../images/cabeza.png");

	cabello_per2.alpha = 1;
	cabello_per2.x = parent.x_cabello_per2;
	cabello_per2.y = parent.y_cabello_per2;
	cabello_per2.visible = parent.visible_cabello_per2;

	//cabello_per2.scaleX = parent.scalex_cabello_per2;
	//cabello_per2.scaleY = parent.scaley_cabello_per2;




	var cabello_per3 = new createjs.Sprite(imagenes);
	cabello_per3.gotoAndStop(parent.lib.cabello_per3.prototype.id);
	//var cabeza = new createjs.Bitmap("../../images/cabeza.png");

	cabello_per3.alpha = 1;
	cabello_per3.x = parent.x_cabello_per3;
	cabello_per3.y = parent.y_cabello_per3;
	//cabello_per3.scaleX = parent.scalex_cabello_per3;
	//cabello_per3.scaleY = parent.scaley_cabello_per3;
	cabello_per3.visible = parent.visible_cabello_per3;


	var cabello_per4 = new createjs.Sprite(imagenes);
	cabello_per4.gotoAndStop(parent.lib.cabello_per4.prototype.id);
	//var cabeza = new createjs.Bitmap("../../images/cabeza.png");

	cabello_per4.alpha = 1;
	cabello_per4.x = parent.x_cabello_per4;
	cabello_per4.y = parent.y_cabello_per4;
	//cabello_per4.scaleX = parent.scalex_cabello_per4;
	//cabello_per4.scaleY = parent.scaley_cabello_per4;
	cabello_per4.visible = parent.visible_cabello_per4;



	var cabeza_2_per1 = new createjs.Sprite(imagenes);
	cabeza_2_per1.gotoAndStop(parent.lib.cabeza_per1.prototype.id);
	//cabeza_2 = new createjs.Bitmap("../../images/cabeza.png");

	cabeza_2_per1.alpha = 1;
	cabeza_2_per1.x = parent.x_cabeza_per1;
	cabeza_2_per1.y = parent.y_cabeza_per1;


	var cabeza_2_per2 = new createjs.Sprite(imagenes);
	cabeza_2_per2.gotoAndStop(parent.lib.cabeza_per2.prototype.id);
	//cabeza_2 = new createjs.Bitmap("../../images/cabeza.png");

	cabeza_2_per2.alpha = 1;
	cabeza_2_per2.x = parent.x_cabeza_per2;
	cabeza_2_per2.y = parent.y_cabeza_per2;


	var cabeza_2_per3 = new createjs.Sprite(imagenes);
	cabeza_2_per3.gotoAndStop(parent.lib.cabeza_per3.prototype.id);
	//cabeza_2 = new createjs.Bitmap("../../images/cabeza.png");

	cabeza_2_per3.alpha = 1;
	cabeza_2_per3.x = parent.x_cabeza_per3;
	cabeza_2_per3.y = parent.y_cabeza_per3;


	var cabeza_2_per4 = new createjs.Sprite(imagenes);
	cabeza_2_per4.gotoAndStop(parent.lib.cabeza_per4.prototype.id);
	//cabeza_2 = new createjs.Bitmap("../../images/cabeza.png");

	cabeza_2_per4.alpha = 1;
	cabeza_2_per4.x = parent.x_cabeza_per4;
	cabeza_2_per4.y = parent.y_cabeza_per4;


	var cabello_2_per1 = new createjs.Sprite(imagenes);
	cabello_2_per1.gotoAndStop(parent.lib.cabello_per1.prototype.id);
	//var cabeza = new createjs.Bitmap("../../images/cabeza.png");

	cabello_2_per1.alpha = 1;
	cabello_2_per1.x = parent.x_cabello_per1;
	cabello_2_per1.y = parent.y_cabello_per1;
	cabello_2_per1.scaleX = parent.scalex_cabello_per1;
	cabello_2_per1.scaleY = parent.scaley_cabello_per1;
	cabello_2_per1.visible = parent.visible_cabello_per1;



	var cabello_2_per2 = new createjs.Sprite(imagenes);
	cabello_2_per2.gotoAndStop(parent.lib.cabello_per2.prototype.id);
	//var cabeza = new createjs.Bitmap("../../images/cabeza.png");

	cabello_2_per2.alpha = 1;
	cabello_2_per2.x = parent.x_cabello_per2;
	cabello_2_per2.y = parent.y_cabello_per2;
	cabello_2_per2.scaleX = parent.scalex_cabello_per2;
	cabello_2_per2.scaleY = parent.scaley_cabello_per2;
	cabello_2_per2.visible = parent.visible_cabello_per2;


	var cabello_2_per3 = new createjs.Sprite(imagenes);
	cabello_2_per3.gotoAndStop(parent.lib.cabello_per3.prototype.id);
	//var cabeza = new createjs.Bitmap("../../images/cabeza.png");

	cabello_2_per3.alpha = 1;
	cabello_2_per3.x = parent.x_cabello_per3;
	cabello_2_per3.y = parent.y_cabello_per3;
	cabello_2_per3.scaleX = parent.scalex_cabello_per3;
	cabello_2_per3.scaleY = parent.scaley_cabello_per3;
	cabello_2_per3.visible = parent.visible_cabello_per3;



	var cabello_2_per4 = new createjs.Sprite(imagenes);
	cabello_2_per4.gotoAndStop(parent.lib.cabello_per4.prototype.id);
	//var cabeza = new createjs.Bitmap("../../images/cabeza.png");

	cabello_2_per4.alpha = 1;
	cabello_2_per4.x = parent.x_cabello_per4;
	cabello_2_per4.y = parent.y_cabello_per4;
	cabello_2_per4.scaleX = parent.scalex_cabello_per4;
	cabello_2_per4.scaleY = parent.scaley_cabello_per4;
	cabello_2_per4.visible = parent.visible_cabello_per4;



	var hombro_derecho = new createjs.Sprite(imagenes);
	hombro_derecho.gotoAndStop(parent.lib.brazo_derecho.prototype.id);
	bounds_hombro_derecho = hombro_derecho.getBounds();
	hombro_derecho.alpha = 1; 
	//hombro_derecho.roation = 0;
	hombro_derecho.x = 0;
	hombro_derecho.y = 0;

	var antebrazo_derecho = new createjs.Sprite(imagenes);
	antebrazo_derecho.gotoAndStop(parent.lib.antebrazo_derecho.prototype.id);
	bounds_antebrazo_derecho = antebrazo_derecho.getBounds();

	antebrazo_derecho.alpha = 1;
	antebrazo_derecho.regX = 0;//bounds_antebrazo_derecho.width/2;
	antebrazo_derecho.regY = 0//6.1;
	antebrazo_derecho.x = 0;
	antebrazo_derecho.y = 0;

	var mano_derecha1 = new createjs.Sprite(imagenes);
	mano_derecha1.gotoAndStop(parent.lib.mano_d1.prototype.id);
	bounds_mano_derecha1 = mano_derecha1.getBounds();
	mano_derecha1.alpha =0;

	var mano_derecha2 = new createjs.Sprite(imagenes);
	mano_derecha2.gotoAndStop(parent.lib.mano_d2.prototype.id);
	bounds_mano_derecha2 = mano_derecha2.getBounds();
	mano_derecha2.alpha = 0;
	
	var mano_derecha3 = new createjs.Sprite(imagenes);
	mano_derecha3.gotoAndStop(parent.lib.mano_d3.prototype.id);
	bounds_mano_derecha3 = mano_derecha3.getBounds();
	mano_derecha3.alpha = 0;
	
	var mano_derecha4 = new createjs.Sprite(imagenes);
	mano_derecha4.gotoAndStop(parent.lib.mano_d4.prototype.id);
	bounds_mano_derecha4 = mano_derecha4.getBounds();
	mano_derecha4.alpha = 0;
	
	var contenedor_manos_derecha = new createjs.Container();
	contenedor_manos_derecha.addChild(mano_derecha1,mano_derecha2,mano_derecha3,mano_derecha4);


	contenedor_manos_derecha.regX = 5//bounds_mano_izquierda.width*1/2; 

	reg_y_mano_derecha = 2.5;

	/*
	if (mano_izquierda_actual == 35 || mano_izquierda_actual == 36) {
		reg_y_mano_izquierda = 0;
	} else if (mano_izquierda_actual == 37) {
		reg_y_mano_izquierda = bounds_mano_izquierda.height*1/2;
	} else if (mano_izquierda_actual == 38) {
		reg_y_mano_izquierda = bounds_mano_izquierda.height*1/2;
	}
	*/

	contenedor_manos_derecha.regY = reg_y_mano_derecha;//bounds_mano_derecha.height// - 10;
	


	contenedor_manos_derecha.x =  bounds_antebrazo_derecho.x +4; //- (bounds_mano_izquierda.width/2);//- bounds_antebrazo_izquierdo.width// - (bounds_mano_izquierda.width/2);
	contenedor_manos_derecha.y = bounds_antebrazo_derecho.height -1 //bounds_mano_izquierda.height;


	
	var contenedor_antebrazo_mano_derecha = new createjs.Container();
	
	contenedor_antebrazo_mano_derecha.addChild(antebrazo_derecho,contenedor_manos_derecha);
	bounds_contenedor_antebrazo_mano_derecha = contenedor_antebrazo_mano_derecha.getBounds();

	contenedor_antebrazo_mano_derecha.regX = bounds_antebrazo_derecho.width/2;
	contenedor_antebrazo_mano_derecha.regY = 6;
	
	contenedor_antebrazo_mano_derecha.x = bounds_hombro_derecho.x + bounds_antebrazo_derecho.width/2 + 7;
	contenedor_antebrazo_mano_derecha.y = bounds_hombro_derecho.height-6;

	

	contenedor_antebrazo_mano_derecha.rotation = 0;//rotacion_antebrazo_derecho_actual;
	//contenedor_antebrazo_mano_derecha.rotation = 90;
	//contenedor_personaje.scaleX = scale_personaje;
	contenedor_antebrazo_mano_derecha.mouseChildren = false;
	
	var contenedor_brazo_derecho = new createjs.Container();
	contenedor_brazo_derecho.addChild(hombro_derecho,contenedor_antebrazo_mano_derecha);
	contenedor_brazo_derecho.x = 140;
	contenedor_brazo_derecho.y = 95;
	contenedor_brazo_derecho.regX = bounds_hombro_derecho.width/2;
	contenedor_brazo_derecho.regY = 8;
	contenedor_brazo_derecho.alpha = 0;
	contenedor_brazo_derecho.rotation = 0;//rotacion_brazo_derecho;
	//contenedor_brazo_derecho.regX = 0;
	//contenedor_brazo_derecho.regY = 0;
	//contenedor_brazo_derecho.rotation = -10;
	//contenedor_personaje.scaleX = scale_personaje;
	contenedor_brazo_derecho.mouseChildren = false;
	


	var hombro_izquierdo = new createjs.Sprite(imagenes);
	hombro_izquierdo.gotoAndStop(parent.lib.brazo_izquierdo.prototype.id);
	bounds_hombro_izquierdo = hombro_izquierdo.getBounds();
	hombro_izquierdo.alpha = 1; 
	hombro_izquierdo.x = 0;
	hombro_izquierdo.y = 0;

	var antebrazo_izquierdo = new createjs.Sprite(imagenes);
	antebrazo_izquierdo.gotoAndStop(parent.lib.antebrazo_izquierdo.prototype.id);
	bounds_antebrazo_izquierdo = antebrazo_izquierdo.getBounds();
	antebrazo_izquierdo.alpha = 1;
	antebrazo_izquierdo.x = 0;
	antebrazo_izquierdo.y = 0;

	var mano_izquierda1 = new createjs.Sprite(imagenes);
	mano_izquierda1.gotoAndStop(parent.lib.mano_i1.prototype.id);
	bounds_mano_izquierda1 = mano_izquierda1.getBounds();
	mano_izquierda1.alpha = 0;

	var mano_izquierda2 = new createjs.Sprite(imagenes);
	mano_izquierda2.gotoAndStop(parent.lib.mano_i2.prototype.id);
	bounds_mano_izquierda2 = mano_izquierda2.getBounds();
	mano_izquierda2.alpha = 0;
	
	var mano_izquierda3 = new createjs.Sprite(imagenes);
	mano_izquierda3.gotoAndStop(parent.lib.mano_i3.prototype.id);
	bounds_mano_izquierda3 = mano_izquierda3.getBounds();
	mano_izquierda3.alpha = 0;
	

	var mano_izquierda4 = new createjs.Sprite(imagenes);
	mano_izquierda4.gotoAndStop(parent.lib.mano_i4.prototype.id);
	bounds_mano_izquierda4 = mano_izquierda4.getBounds();
	mano_izquierda4.alpha = 0;
	
	var contenedor_manos_izquierdas = new createjs.Container();
	contenedor_manos_izquierdas.addChild(mano_izquierda1,mano_izquierda2,mano_izquierda3,mano_izquierda4);
	
	

	contenedor_manos_izquierdas.regX = 5//bounds_mano_izquierda.width*1/2; 

	reg_y_mano_izquierda = 2.5;

	/*
	if (mano_izquierda_actual == 35 || mano_izquierda_actual == 36) {
		reg_y_mano_izquierda = 0;
	} else if (mano_izquierda_actual == 37) {
		reg_y_mano_izquierda = bounds_mano_izquierda.height*1/2;
	} else if (mano_izquierda_actual == 38) {
		reg_y_mano_izquierda = bounds_mano_izquierda.height*1/2;
	}
	*/

	contenedor_manos_izquierdas.regY = reg_y_mano_izquierda;//bounds_mano_derecha.height// - 10;
	


	contenedor_manos_izquierdas.x =  bounds_antebrazo_izquierdo.x - 2; //- (bounds_mano_izquierda.width/2);//- bounds_antebrazo_izquierdo.width// - (bounds_mano_izquierda.width/2);
	contenedor_manos_izquierdas.y = bounds_antebrazo_izquierdo.height -1 //bounds_mano_izquierda.height;

	var contenedor_antebrazo_mano_izquierda = new createjs.Container();
	contenedor_antebrazo_mano_izquierda.addChild(antebrazo_izquierdo,contenedor_manos_izquierdas);
	
	contenedor_antebrazo_mano_izquierda.regX = bounds_antebrazo_izquierdo.width/2;
	contenedor_antebrazo_mano_izquierda.regY = 8;
	
	contenedor_antebrazo_mano_izquierda.x = bounds_hombro_izquierdo.x + bounds_antebrazo_izquierdo.width/2+3;
	contenedor_antebrazo_mano_izquierda.y = bounds_hombro_izquierdo.height - 5;//- bounds_antebrazo_izquierdo.height;

	contenedor_antebrazo_mano_izquierda.rotation = 0;//rotacion_antebrazo_izquierdo_actual;
	
	//contenedor_antebrazo_mano_izquierda.rotation = 120;
	contenedor_antebrazo_mano_izquierda.mouseChildren = false;
	
	var contenedor_brazo_izquierdo = new createjs.Container();
	contenedor_brazo_izquierdo.addChild(hombro_izquierdo,contenedor_antebrazo_mano_izquierda);
	contenedor_brazo_izquierdo.x = 63;
	contenedor_brazo_izquierdo.y = 95;
	contenedor_brazo_izquierdo.regX = bounds_hombro_izquierdo.width/2;
	contenedor_brazo_izquierdo.regY = 8;
	contenedor_brazo_izquierdo.alpha = 0;
	contenedor_brazo_izquierdo.rotation = 0;//rotacion_brazo_izquierdo;
	//contenedor_personaje.scaleX = scale_personaje;
	contenedor_brazo_izquierdo.mouseChildren = false;
	
postura_iz1 = {
		angulo_brazo: 20,
		angulo_antebrazo: -100,
		mano: mano_izquierda1,
		fijo: false,
		mano_ocupada: false

	}
	postura_iz2 = {
		angulo_brazo: 10,
		angulo_antebrazo: -110,
		fijo: true,

		mano: mano_izquierda2,
		mano_ocupada: false

	}
	
	postura_iz3 = {
		angulo_brazo: 15,
		angulo_antebrazo: -30,
		fijo: false,
		mano: mano_izquierda3,
		mano_ocupada: false
	}
	postura_iz4 = {
		angulo_brazo: 20,
		angulo_antebrazo: -90,
		fijo: false,
		mano: mano_izquierda4,
		mano_ocupada: true
	}




	posturas_iz = [postura_iz1,postura_iz2,postura_iz3,postura_iz4]

	azar_mano_iz = Math.floor((Math.random() * 4));
	

	postura_der1 = {
		angulo_brazo: -40,
		angulo_antebrazo: -50,
		fijo: false,
		mano: mano_derecha1,
		mano_ocupada: false
	}
	postura_der2 = {
		angulo_brazo: -25,
		angulo_antebrazo: 30,
		fijo: true,
		mano: mano_derecha2,
		mano_ocupada: false
	}
	postura_der3 = {
		angulo_brazo: -25,
		angulo_antebrazo: 30,
		fijo: false,		
		mano: mano_derecha3,
		mano_ocupada: false
	}
	postura_der4 = {
		angulo_brazo: -40,
		angulo_antebrazo: -70,
		fijo: false,
		mano: mano_derecha4,
		mano_ocupada: true
	}

	
	

	posturas_der = [postura_der1,postura_der2,postura_der3,postura_der4]
	
	
	azar_mano_der = Math.floor((Math.random() * 4));
	
	
	posturas_iz[azar_mano_iz].mano.alpha = 1;	
	posturas_der[azar_mano_der].mano.alpha = 1;

	rotaciones_brazos_sin_cambio = [-8,-5,-3,0,5,5,8]
	azar_mov_brazos_der = 0;
	azar_mov_brazos_iz = 0;
	
	azar_mov_antebrazos_iz = 0;
	azar_mov_antebrazos_der = 0;
	
	duraciones_movimientos = [2500,3500,4500]
	azar_duracion_movimientos = Math.floor((Math.random() * duraciones_movimientos.length))
	duracion_movimiento = duraciones_movimientos[azar_duracion_movimientos];

	animacion_final_brazos = false;

	posicionesBrazos()



	function posicionesBrazos(){
		for (var i =0; i<posturas_der.length; i++) {
			createjs.Tween.get(posturas_iz[i].mano,{override:true}).wait(velocidad_lenta*1).to({alpha:0},velocidad_lenta);
			createjs.Tween.get(posturas_der[i].mano,{override:true}).wait(velocidad_lenta*1).to({alpha:0},velocidad_lenta);
			
		};
		//posturas_iz[azar_mano_iz].mano.alpha=1;
		createjs.Tween.get(posturas_iz[azar_mano_iz].mano,{override:true}).wait(velocidad_lenta*1).to({alpha:1},velocidad_lenta);
		createjs.Tween.get(contenedor_antebrazo_mano_izquierda,{override:true}).to({rotation:posturas_iz[azar_mano_iz].angulo_antebrazo+azar_mov_antebrazos_iz},velocidad_lenta*1.5);
		createjs.Tween.get(contenedor_brazo_izquierdo,{override:true}).to({rotation:posturas_iz[azar_mano_iz].angulo_brazo+azar_mov_brazos_iz},velocidad_lenta*1.5);
		
		//posturas_der[azar_mano_der].mano.alpha=1;

		createjs.Tween.get(posturas_der[azar_mano_der].mano,{override:true}).wait(velocidad_lenta*1).to({alpha:1},velocidad_lenta);
		createjs.Tween.get(contenedor_antebrazo_mano_derecha,{override:true}).to({rotation:posturas_der[azar_mano_der].angulo_antebrazo+azar_mov_antebrazos_der},velocidad_lenta*1.5);
		createjs.Tween.get(contenedor_brazo_derecho,{override:true}).to({rotation:posturas_der[azar_mano_der].angulo_brazo+azar_mov_brazos_der},velocidad_lenta*1.5);
		
	}


	var ceja_derecha_per1 = new createjs.Sprite(imagenes);
	ceja_derecha_per1.gotoAndStop(parent.lib.ceja_derecha_per1.prototype.id);
	//var ceja_derecha = new createjs.Bitmap("../../images/ceja_derecha.png");

	ceja_derecha_per1.alpha = 1;
	ceja_derecha_per1.x = x_ceja_derecha_per1;
	ceja_derecha_per1.y = y_ceja_derecha_per1;

	var ceja_derecha_per2 = new createjs.Sprite(imagenes);
	ceja_derecha_per2.gotoAndStop(parent.lib.ceja_derecha_per2.prototype.id);
	//var ceja_derecha = new createjs.Bitmap("../../images/ceja_derecha.png");

	ceja_derecha_per2.alpha = 1;
	ceja_derecha_per2.x = x_ceja_derecha_per2;
	ceja_derecha_per2.y = y_ceja_derecha_per2;

	var ceja_derecha_per3 = new createjs.Sprite(imagenes);
	ceja_derecha_per3.gotoAndStop(parent.lib.ceja_derecha_per3.prototype.id);
	//var ceja_derecha = new createjs.Bitmap("../../images/ceja_derecha.png");

	ceja_derecha_per3.alpha = 1;
	ceja_derecha_per3.x = x_ceja_derecha_per3;
	ceja_derecha_per3.y = y_ceja_derecha_per3;


	var ceja_derecha_per4 = new createjs.Sprite(imagenes);
	ceja_derecha_per4.gotoAndStop(parent.lib.ceja_derecha_per4.prototype.id);
	//var ceja_derecha = new createjs.Bitmap("../../images/ceja_derecha.png");

	ceja_derecha_per4.alpha = 1;
	ceja_derecha_per4.x = x_ceja_derecha_per4;
	ceja_derecha_per4.y = y_ceja_derecha_per4;





	var ceja_derecha_2_per1 = new createjs.Sprite(imagenes);
	ceja_derecha_2_per1.gotoAndStop(parent.lib.ceja_derecha_per1.prototype.id);

	//var ceja_derecha_2 = new createjs.Bitmap("../../images/ceja_derecha.png");

	ceja_derecha_2_per1.alpha = 1;
	ceja_derecha_2_per1.x = x_ceja_derecha_per1;
	ceja_derecha_2_per1.y = y_ceja_derecha_per1;


	var ceja_derecha_2_per2 = new createjs.Sprite(imagenes);
	ceja_derecha_2_per2.gotoAndStop(parent.lib.ceja_derecha_per2.prototype.id);

	//var ceja_derecha_2 = new createjs.Bitmap("../../images/ceja_derecha.png");

	ceja_derecha_2_per2.alpha = 1;
	ceja_derecha_2_per2.x = x_ceja_derecha_per2;
	ceja_derecha_2_per2.y = y_ceja_derecha_per2;

	var ceja_derecha_2_per3 = new createjs.Sprite(imagenes);
	ceja_derecha_2_per3.gotoAndStop(parent.lib.ceja_derecha_per3.prototype.id);

	//var ceja_derecha_2 = new createjs.Bitmap("../../images/ceja_derecha.png");

	ceja_derecha_2_per3.alpha = 1;
	ceja_derecha_2_per3.x = x_ceja_derecha_per3;
	ceja_derecha_2_per3.y = y_ceja_derecha_per3;


	var ceja_derecha_2_per4 = new createjs.Sprite(imagenes);
	ceja_derecha_2_per4.gotoAndStop(parent.lib.ceja_derecha_per4.prototype.id);

	//var ceja_derecha_2 = new createjs.Bitmap("../../images/ceja_derecha.png");

	ceja_derecha_2_per4.alpha = 1;
	ceja_derecha_2_per4.x = x_ceja_derecha_per4;
	ceja_derecha_2_per4.y = y_ceja_derecha_per4;




	var ceja_izquierda_per1 = new createjs.Sprite(imagenes);

	ceja_izquierda_per1.gotoAndStop(parent.lib.ceja_izquierda_per1.prototype.id);
	//var ceja_izquierda = new createjs.Bitmap("../../images/ceja_izquierda.png");

	ceja_izquierda_per1.alpha = 1;
	ceja_izquierda_per1.x = x_ceja_izquierda_per1;
	ceja_izquierda_per1.y = y_ceja_izquierda_per1;

		var ceja_izquierda_per2 = new createjs.Sprite(imagenes);

	ceja_izquierda_per2.gotoAndStop(parent.lib.ceja_izquierda_per2.prototype.id);
	//var ceja_izquierda = new createjs.Bitmap("../../images/ceja_izquierda.png");

	ceja_izquierda_per2.alpha = 1;
	ceja_izquierda_per2.x = x_ceja_izquierda_per2;
	ceja_izquierda_per2.y = y_ceja_izquierda_per2;

	var ceja_izquierda_per3 = new createjs.Sprite(imagenes);

	ceja_izquierda_per3.gotoAndStop(parent.lib.ceja_izquierda_per3.prototype.id);
	//var ceja_izquierda = new createjs.Bitmap("../../images/ceja_izquierda.png");

	ceja_izquierda_per3.alpha = 1;
	ceja_izquierda_per3.x = x_ceja_izquierda_per3;
	ceja_izquierda_per3.y = y_ceja_izquierda_per3;


	var ceja_izquierda_per4 = new createjs.Sprite(imagenes);

	ceja_izquierda_per4.gotoAndStop(parent.lib.ceja_izquierda_per4.prototype.id);
	//var ceja_izquierda = new createjs.Bitmap("../../images/ceja_izquierda.png");

	ceja_izquierda_per4.alpha = 1;
	ceja_izquierda_per4.x = x_ceja_izquierda_per4;
	ceja_izquierda_per4.y = y_ceja_izquierda_per4;




	var ceja_izquierda_2_per1 = new createjs.Sprite(imagenes);
	ceja_izquierda_2_per1.gotoAndStop(parent.lib.ceja_izquierda_per1.prototype.id);

	//var ceja_izquierda_2 = new createjs.Bitmap("../../images/ceja_izquierda.png");

	ceja_izquierda_2_per1.alpha = 1;
	ceja_izquierda_2_per1.x = x_ceja_izquierda_per1;
	ceja_izquierda_2_per1.y = y_ceja_izquierda_per1;

	var ceja_izquierda_2_per2 = new createjs.Sprite(imagenes);
	ceja_izquierda_2_per2.gotoAndStop(parent.lib.ceja_izquierda_per2.prototype.id);

	//var ceja_izquierda_2 = new createjs.Bitmap("../../images/ceja_izquierda.png");

	ceja_izquierda_2_per2.alpha = 1;
	ceja_izquierda_2_per2.x = x_ceja_izquierda_per2;
	ceja_izquierda_2_per2.y = y_ceja_izquierda_per2;

	var ceja_izquierda_2_per3 = new createjs.Sprite(imagenes);
	ceja_izquierda_2_per3.gotoAndStop(parent.lib.ceja_izquierda_per3.prototype.id);

	//var ceja_izquierda_2 = new createjs.Bitmap("../../images/ceja_izquierda.png");

	ceja_izquierda_2_per3.alpha = 1;
	ceja_izquierda_2_per3.x = x_ceja_izquierda_per3;
	ceja_izquierda_2_per3.y = y_ceja_izquierda_per3;


	var ceja_izquierda_2_per4 = new createjs.Sprite(imagenes);
	ceja_izquierda_2_per4.gotoAndStop(parent.lib.ceja_izquierda_per4.prototype.id);

	//var ceja_izquierda_2 = new createjs.Bitmap("../../images/ceja_izquierda.png");

	ceja_izquierda_2_per4.alpha = 1;
	ceja_izquierda_2_per4.x = x_ceja_izquierda_per4;
	ceja_izquierda_2_per4.y = y_ceja_izquierda_per4;





	var ojos_abiertos_per1 = new createjs.Sprite(imagenes);
	ojos_abiertos_per1.gotoAndStop(parent.lib.ojos_abiertos_per1.prototype.id);
	//var ojos_abiertos = new createjs.Bitmap("../../images/ojos_abiertos.png");
	ojos_abiertos_per1.alpha = 1;
	ojos_abiertos_per1.x = x_ojos_per1;
	ojos_abiertos_per1.y = y_ojos_per1;

	var ojos_abiertos_per2 = new createjs.Sprite(imagenes);
	ojos_abiertos_per2.gotoAndStop(parent.lib.ojos_abiertos_per2.prototype.id);
	//var ojos_abiertos = new createjs.Bitmap("../../images/ojos_abiertos.png");
	ojos_abiertos_per2.alpha = 1;
	ojos_abiertos_per2.x = x_ojos_per2;
	ojos_abiertos_per2.y = y_ojos_per2;

	var ojos_abiertos_per3 = new createjs.Sprite(imagenes);
	ojos_abiertos_per3.gotoAndStop(parent.lib.ojos_abiertos_per3.prototype.id);
	//var ojos_abiertos = new createjs.Bitmap("../../images/ojos_abiertos.png");
	ojos_abiertos_per3.alpha = 1;
	ojos_abiertos_per3.x = x_ojos_per3;
	ojos_abiertos_per3.y = y_ojos_per3;


	var ojos_abiertos_per4 = new createjs.Sprite(imagenes);
	ojos_abiertos_per4.gotoAndStop(parent.lib.ojos_abiertos_per4.prototype.id);
	//var ojos_abiertos = new createjs.Bitmap("../../images/ojos_abiertos.png");
	ojos_abiertos_per4.alpha = 1;
	ojos_abiertos_per4.x = x_ojos_per4;
	ojos_abiertos_per4.y = y_ojos_per4;






	var ojos_abiertos_2_per1 = new createjs.Sprite(imagenes);
	ojos_abiertos_2_per1.gotoAndStop(parent.lib.ojos_abiertos_per1.prototype.id);

	//var ojos_abiertos_2 = new createjs.Bitmap("../../images/ojos_abiertos.png");

	ojos_abiertos_2_per1.alpha = 1;
	ojos_abiertos_2_per1.x = x_ojos_per1;
	ojos_abiertos_2_per1.y = y_ojos_per1;

	var ojos_abiertos_2_per2 = new createjs.Sprite(imagenes);
	ojos_abiertos_2_per2.gotoAndStop(parent.lib.ojos_abiertos_per2.prototype.id);

	//var ojos_abiertos_2 = new createjs.Bitmap("../../images/ojos_abiertos.png");

	ojos_abiertos_2_per2.alpha = 1;
	ojos_abiertos_2_per2.x = x_ojos_per2;
	ojos_abiertos_2_per2.y = y_ojos_per2;

	var ojos_abiertos_2_per3 = new createjs.Sprite(imagenes);
	ojos_abiertos_2_per3.gotoAndStop(parent.lib.ojos_abiertos_per3.prototype.id);

	//var ojos_abiertos_2 = new createjs.Bitmap("../../images/ojos_abiertos.png");

	ojos_abiertos_2_per3.alpha = 1;
	ojos_abiertos_2_per3.x = x_ojos_per3;
	ojos_abiertos_2_per3.y = y_ojos_per3;

	var ojos_abiertos_2_per4 = new createjs.Sprite(imagenes);
	ojos_abiertos_2_per4.gotoAndStop(parent.lib.ojos_abiertos_per4.prototype.id);

	//var ojos_abiertos_2 = new createjs.Bitmap("../../images/ojos_abiertos.png");

	ojos_abiertos_2_per4.alpha = 1;
	ojos_abiertos_2_per4.x = x_ojos_per4;
	ojos_abiertos_2_per4.y = y_ojos_per4;





	var ojos_cerrados_per1 = new createjs.Sprite(imagenes);

	ojos_cerrados_per1.gotoAndStop(parent.lib.ojos_cerrados_per1.prototype.id);
	//var ojos_cerrados = new createjs.Bitmap("../../images/ojos_cerrados.png");
	
	ojos_cerrados_per1.alpha = 0;
	ojos_cerrados_per1.x = x_ojos_per1;
	ojos_cerrados_per1.y = y_ojos_per1;

	var ojos_cerrados_per2 = new createjs.Sprite(imagenes);

	ojos_cerrados_per2.gotoAndStop(parent.lib.ojos_cerrados_per2.prototype.id);
	//var ojos_cerrados = new createjs.Bitmap("../../images/ojos_cerrados.png");
	
	ojos_cerrados_per2.alpha = 0;
	ojos_cerrados_per2.x = x_ojos_per2;
	ojos_cerrados_per2.y = y_ojos_per2;


	var ojos_cerrados_per3 = new createjs.Sprite(imagenes);

	ojos_cerrados_per3.gotoAndStop(parent.lib.ojos_cerrados_per3.prototype.id);
	//var ojos_cerrados = new createjs.Bitmap("../../images/ojos_cerrados.png");
	
	ojos_cerrados_per3.alpha = 0;
	ojos_cerrados_per3.x = x_ojos_per3;
	ojos_cerrados_per3.y = y_ojos_per3;


	var ojos_cerrados_per4 = new createjs.Sprite(imagenes);

	ojos_cerrados_per4.gotoAndStop(parent.lib.ojos_cerrados_per4.prototype.id);
	//var ojos_cerrados = new createjs.Bitmap("../../images/ojos_cerrados.png");
	
	ojos_cerrados_per4.alpha = 0;
	ojos_cerrados_per4.x = x_ojos_per4;
	ojos_cerrados_per4.y = y_ojos_per4;






	var ojos_cerrados_2_per1 = new createjs.Sprite(imagenes);
	ojos_cerrados_2_per1.gotoAndStop(parent.lib.ojos_cerrados_per1.prototype.id);

	//var ojos_cerrados_2 = new createjs.Bitmap("../../images/ojos_cerrados.png");

	ojos_cerrados_2_per1.alpha = 0;
	ojos_cerrados_2_per1.x = x_ojos_per1;
	ojos_cerrados_2_per1.y = y_ojos_per1;

	var ojos_cerrados_2_per2 = new createjs.Sprite(imagenes);
	ojos_cerrados_2_per2.gotoAndStop(parent.lib.ojos_cerrados_per2.prototype.id);

	//var ojos_cerrados_2 = new createjs.Bitmap("../../images/ojos_cerrados.png");

	ojos_cerrados_2_per2.alpha = 0;
	ojos_cerrados_2_per2.x = x_ojos_per2;
	ojos_cerrados_2_per2.y = y_ojos_per2;

	var ojos_cerrados_2_per3 = new createjs.Sprite(imagenes);
	ojos_cerrados_2_per3.gotoAndStop(parent.lib.ojos_cerrados_per3.prototype.id);

	//var ojos_cerrados_2 = new createjs.Bitmap("../../images/ojos_cerrados.png");

	ojos_cerrados_2_per3.alpha = 0;
	ojos_cerrados_2_per3.x = x_ojos_per3;
	ojos_cerrados_2_per3.y = y_ojos_per3;

	var ojos_cerrados_2_per4 = new createjs.Sprite(imagenes);
	ojos_cerrados_2_per4.gotoAndStop(parent.lib.ojos_cerrados_per4.prototype.id);

	//var ojos_cerrados_2 = new createjs.Bitmap("../../images/ojos_cerrados.png");

	ojos_cerrados_2_per4.alpha = 0;
	ojos_cerrados_2_per4.x = x_ojos_per4;
	ojos_cerrados_2_per4.y = y_ojos_per4;




	bocas_per1 = [];
	bocas_per2 = [];
	bocas_per3 = [];
	bocas_per4 = [];
	
	var boca0_per1 = new createjs.Sprite(imagenes);
	boca0_per1.gotoAndStop(parent.lib.boca0_per1.prototype.id);
	//var boca0 = new createjs.Bitmap("../../images/boca0.png");

	boca0_per1.alpha = 1;
	boca0_per1.x = x_boca_per1;
	boca0_per1.y = y_boca_per1;
	bocas_per1.push(boca0_per1);

	var boca0_per2 = new createjs.Sprite(imagenes);
	boca0_per2.gotoAndStop(parent.lib.boca0_per2.prototype.id);
	//var boca0 = new createjs.Bitmap("../../images/boca0.png");

	boca0_per2.alpha = 1;
	boca0_per2.x = x_boca_per2;
	boca0_per2.y = y_boca_per2;
	bocas_per2.push(boca0_per2);

	var boca0_per3 = new createjs.Sprite(imagenes);
	boca0_per3.gotoAndStop(parent.lib.boca0_per3.prototype.id);
	//var boca0 = new createjs.Bitmap("../../images/boca0.png");

	boca0_per3.alpha = 1;
	boca0_per3.x = x_boca_per3;
	boca0_per3.y = y_boca_per3;
	bocas_per3.push(boca0_per3);


	var boca0_per4 = new createjs.Sprite(imagenes);
	boca0_per4.gotoAndStop(parent.lib.boca0_per4.prototype.id);
	//var boca0 = new createjs.Bitmap("../../images/boca0.png");

	boca0_per4.alpha = 1;
	boca0_per4.x = x_boca_per4;
	boca0_per4.y = y_boca_per4;
	bocas_per4.push(boca0_per4);
	


	var boca1_per1 = new createjs.Sprite(imagenes);
	boca1_per1.gotoAndStop(parent.lib.boca1_per1.prototype.id);
	//var boca1 = new createjs.Bitmap("../../images/boca1.png");

	boca1_per1.alpha = 0;
	boca1_per1.x = x_boca_per1;
	boca1_per1.y = y_boca_per1;
	bocas_per1.push(boca1_per1);

	var boca1_per2 = new createjs.Sprite(imagenes);
	boca1_per2.gotoAndStop(parent.lib.boca1_per2.prototype.id);
	//var boca1 = new createjs.Bitmap("../../images/boca1.png");

	boca1_per2.alpha = 0;
	boca1_per2.x = x_boca_per2;
	boca1_per2.y = y_boca_per2;
	bocas_per2.push(boca1_per2);

	var boca1_per3 = new createjs.Sprite(imagenes);
	boca1_per3.gotoAndStop(parent.lib.boca1_per3.prototype.id);
	//var boca1 = new createjs.Bitmap("../../images/boca1.png");

	boca1_per3.alpha = 0;
	boca1_per3.x = x_boca_per3;
	boca1_per3.y = y_boca_per3;
	bocas_per3.push(boca1_per3);

	var boca1_per4 = new createjs.Sprite(imagenes);
	boca1_per4.gotoAndStop(parent.lib.boca1_per4.prototype.id);
	//var boca1 = new createjs.Bitmap("../../images/boca1.png");

	boca1_per4.alpha = 0;
	boca1_per4.x = x_boca_per4;
	boca1_per4.y = y_boca_per4;
	bocas_per4.push(boca1_per4);



	var boca2_per1 = new createjs.Sprite(imagenes);
	boca2_per1.gotoAndStop(parent.lib.boca2_per1.prototype.id);
	//var boca2 = new createjs.Bitmap("../../images/boca2.png");

	boca2_per1.alpha = 0;
	boca2_per1.x = x_boca_per1;
	boca2_per1.y = y_boca_per1;
	bocas_per1.push(boca2_per1);

	var boca2_per2 = new createjs.Sprite(imagenes);
	boca2_per2.gotoAndStop(parent.lib.boca2_per2.prototype.id);
	//var boca2 = new createjs.Bitmap("../../images/boca2.png");

	boca2_per2.alpha = 0;
	boca2_per2.x = x_boca_per2;
	boca2_per2.y = y_boca_per2;
	bocas_per2.push(boca2_per2);


	var boca2_per3 = new createjs.Sprite(imagenes);
	boca2_per3.gotoAndStop(parent.lib.boca2_per3.prototype.id);
	//var boca2 = new createjs.Bitmap("../../images/boca2.png");

	boca2_per3.alpha = 0;
	boca2_per3.x = x_boca_per3;
	boca2_per3.y = y_boca_per3;
	bocas_per3.push(boca2_per3);


	var boca2_per4 = new createjs.Sprite(imagenes);
	boca2_per4.gotoAndStop(parent.lib.boca2_per4.prototype.id);
	//var boca2 = new createjs.Bitmap("../../images/boca2.png");

	boca2_per4.alpha = 0;
	boca2_per4.x = x_boca_per4;
	boca2_per4.y = y_boca_per4;
	bocas_per4.push(boca2_per4);




	var boca3_per1 = new createjs.Sprite(imagenes);
	boca3_per1.gotoAndStop(parent.lib.boca3_per1.prototype.id);
	//var boca3 = new createjs.Bitmap("../../images/boca3_per1.png");

	boca3_per1.alpha = 0;
	boca3_per1.x = x_boca_per1;
	boca3_per1.y = y_boca_per1;
	bocas_per1.push(boca2_per1);

	var boca3_per2 = new createjs.Sprite(imagenes);
	boca3_per2.gotoAndStop(parent.lib.boca3_per2.prototype.id);
	//var boca3 = new createjs.Bitmap("../../images/boca3.png");

	boca3_per2.alpha = 0;
	boca3_per2.x = x_boca_per2;
	boca3_per2.y = y_boca_per2;
	bocas_per2.push(boca3_per2);

	var boca3_per3 = new createjs.Sprite(imagenes);
	boca3_per3.gotoAndStop(parent.lib.boca3_per3.prototype.id);
	//var boca3 = new createjs.Bitmap("../../images/boca3.png");

	boca3_per3.alpha = 0;
	boca3_per3.x = x_boca_per3;
	boca3_per3.y = y_boca_per3;
	bocas_per3.push(boca3_per3);


	var boca3_per4 = new createjs.Sprite(imagenes);
	boca3_per4.gotoAndStop(parent.lib.boca3_per4.prototype.id);
	//var boca3 = new createjs.Bitmap("../../images/boca3.png");

	boca3_per4.alpha = 0;
	boca3_per4.x = x_boca_per4;
	boca3_per4.y = y_boca_per4;
	bocas_per4.push(boca3_per4);





	var boca4_per1 = new createjs.Sprite(imagenes);
	boca4_per1.gotoAndStop(parent.lib.boca4_per1.prototype.id);
	//var boca4 = new createjs.Bitmap("../../images/boca4.png");

	boca4_per1.alpha = 0;
	boca4_per1.x = x_boca_per1;
	boca4_per1.y = y_boca_per1;
	bocas_per1.push(boca4_per1);

	var boca4_per2 = new createjs.Sprite(imagenes);
	boca4_per2.gotoAndStop(parent.lib.boca4_per2.prototype.id);
	//var boca4 = new createjs.Bitmap("../../images/boca4.png");

	boca4_per2.alpha = 0;
	boca4_per2.x = x_boca_per2;
	boca4_per2.y = y_boca_per2;
	bocas_per2.push(boca4_per2);

	var boca4_per3 = new createjs.Sprite(imagenes);
	boca4_per3.gotoAndStop(parent.lib.boca4_per3.prototype.id);
	//var boca4 = new createjs.Bitmap("../../images/boca4.png");

	boca4_per3.alpha = 0;
	boca4_per3.x = x_boca_per3;
	boca4_per3.y = y_boca_per3;
	bocas_per3.push(boca4_per3);


	var boca4_per4 = new createjs.Sprite(imagenes);
	boca4_per4.gotoAndStop(parent.lib.boca4_per4.prototype.id);
	//var boca4 = new createjs.Bitmap("../../images/boca4.png");

	boca4_per4.alpha = 0;
	boca4_per4.x = x_boca_per4;
	boca4_per4.y = y_boca_per4;
	bocas_per4.push(boca4_per4);



	var boca5_per1 = new createjs.Sprite(imagenes);
	boca5_per1.gotoAndStop(parent.lib.boca5_per1.prototype.id);
	//var boca5 = new createjs.Bitmap("../../images/boca5.png");

	boca5_per1.alpha = 0;
	boca5_per1.x = x_boca_per1;
	boca5_per1.y = y_boca_per1;
	bocas_per1.push(boca5_per1);

	var boca5_per2 = new createjs.Sprite(imagenes);
	boca5_per2.gotoAndStop(parent.lib.boca5_per2.prototype.id);
	//var boca5 = new createjs.Bitmap("../../images/boca5.png");

	boca5_per2.alpha = 0;
	boca5_per2.x = x_boca_per2;
	boca5_per2.y = y_boca_per2;
	bocas_per2.push(boca5_per2);

	var boca5_per3 = new createjs.Sprite(imagenes);
	boca5_per3.gotoAndStop(parent.lib.boca5_per3.prototype.id);
	//var boca5 = new createjs.Bitmap("../../images/boca5.png");

	boca5_per3.alpha = 0;
	boca5_per3.x = x_boca_per3;
	boca5_per3.y = y_boca_per3;
	bocas_per3.push(boca5_per3);


	var boca5_per4 = new createjs.Sprite(imagenes);
	boca5_per4.gotoAndStop(parent.lib.boca5_per4.prototype.id);
	//var boca5 = new createjs.Bitmap("../../images/boca5.png");

	boca5_per4.alpha = 0;
	boca5_per4.x = x_boca_per4;
	boca5_per4.y = y_boca_per4;
	bocas_per4.push(boca5_per4);




	var boca6_per1 = new createjs.Sprite(imagenes);
	boca6_per1.gotoAndStop(parent.lib.boca6_per1.prototype.id);
	//var boca6 = new createjs.Bitmap("../../images/boca6.png");

	boca6_per1.alpha = 0;
	boca6_per1.x = x_boca_per1;
	boca6_per1.y = y_boca_per1;
	bocas_per1.push(boca6_per1);


	var boca6_per2 = new createjs.Sprite(imagenes);
	boca6_per2.gotoAndStop(parent.lib.boca6_per2.prototype.id);
	//var boca6 = new createjs.Bitmap("../../images/boca6.png");

	boca6_per2.alpha = 0;
	boca6_per2.x = x_boca_per2;
	boca6_per2.y = y_boca_per2;
	bocas_per2.push(boca6_per2);

	var boca6_per3 = new createjs.Sprite(imagenes);
	boca6_per3.gotoAndStop(parent.lib.boca6_per3.prototype.id);
	//var boca6 = new createjs.Bitmap("../../ima3ges/boca6.png");

	boca6_per3.alpha = 0;
	boca6_per3.x = x_boca_per3;
	boca6_per3.y = y_boca_per3;
	bocas_per3.push(boca6_per3);


	var boca6_per4 = new createjs.Sprite(imagenes);
	boca6_per4.gotoAndStop(parent.lib.boca6_per4.prototype.id);
	//var boca6 = new createjs.Bitmap("../../ima3ges/boca6.png");

	boca6_per4.alpha = 0;
	boca6_per4.x = x_boca_per4;
	boca6_per4.y = y_boca_per4;
	bocas_per4.push(boca6_per4);


	//console.log(bocas_per2)

	bocas_2_per1 = [];
	bocas_2_per2 = [];
	bocas_2_per3 = [];
	bocas_2_per4 = [];


	var boca0_2_per1 = new createjs.Sprite(imagenes);
	boca0_2_per1.gotoAndStop(parent.lib.boca0_per1.prototype.id);

	//var boca0_2 = new createjs.Bitmap("../../images/boca0.png");


	boca0_2_per1.alpha = 1;
	boca0_2_per1.x = x_boca_per1;
	boca0_2_per1.y = y_boca_per1;
	bocas_2_per1.push(boca0_2_per1);

	var boca0_2_per2 = new createjs.Sprite(imagenes);
	boca0_2_per2.gotoAndStop(parent.lib.boca0_per2.prototype.id);

	//var boca0_2 = new createjs.Bitmap("../../images/boca0.png");


	boca0_2_per2.alpha = 1;
	boca0_2_per2.x = x_boca_per2;
	boca0_2_per2.y = y_boca_per2;
	bocas_2_per2.push(boca0_2_per2);


	var boca0_2_per3 = new createjs.Sprite(imagenes);
	boca0_2_per3.gotoAndStop(parent.lib.boca0_per3.prototype.id);

	//var boca0_2 = new createjs.Bitmap("../../images/boca0.png");


	boca0_2_per3.alpha = 1;
	boca0_2_per3.x = x_boca_per3;
	boca0_2_per3.y = y_boca_per3;
	bocas_2_per3.push(boca0_2_per3);


	var boca0_2_per4 = new createjs.Sprite(imagenes);
	boca0_2_per4.gotoAndStop(parent.lib.boca0_per4.prototype.id);

	//var boca0_2 = new createjs.Bitmap("../../images/boca0.png");


	boca0_2_per4.alpha = 1;
	boca0_2_per4.x = x_boca_per4;
	boca0_2_per4.y = y_boca_per4;
	bocas_2_per4.push(boca0_2_per4);






	var boca1_2_per1 = new createjs.Sprite(imagenes);
	boca1_2_per1.gotoAndStop(parent.lib.boca1_per1.prototype.id);

	//var boca1_2 = new createjs.Bitmap("../../images/boca1.png");

	boca1_2_per1.alpha = 0;
	boca1_2_per1.x = x_boca_per1;
	boca1_2_per1.y = y_boca_per1;
	bocas_2_per1.push(boca1_2_per1);

	var boca1_2_per2 = new createjs.Sprite(imagenes);
	boca1_2_per2.gotoAndStop(parent.lib.boca1_per2.prototype.id);

	//var boca1_2 = new createjs.Bitmap("../../images/boca1.png");

	boca1_2_per2.alpha = 0;
	boca1_2_per2.x = x_boca_per2;
	boca1_2_per2.y = y_boca_per2;
	bocas_2_per2.push(boca1_2_per2);

	var boca1_2_per3 = new createjs.Sprite(imagenes);
	boca1_2_per3.gotoAndStop(parent.lib.boca1_per3.prototype.id);

	//var boca1_2 = new createjs.Bitmap("../../images/boca1.png");

	boca1_2_per3.alpha = 0;
	boca1_2_per3.x = x_boca_per3;
	boca1_2_per3.y = y_boca_per3;
	bocas_2_per3.push(boca1_2_per3);



	var boca1_2_per4 = new createjs.Sprite(imagenes);
	boca1_2_per4.gotoAndStop(parent.lib.boca1_per4.prototype.id);

	//var boca1_2 = new createjs.Bitmap("../../images/boca1.png");

	boca1_2_per4.alpha = 0;
	boca1_2_per4.x = x_boca_per4;
	boca1_2_per4.y = y_boca_per4;
	bocas_2_per4.push(boca1_2_per4);




	var boca2_2_per1 = new createjs.Sprite(imagenes);
	boca2_2_per1.gotoAndStop(parent.lib.boca2_per1.prototype.id);
	//var boca2_2 = new createjs.Bitmap("../../images/boca2.png");
	boca2_2_per1.alpha = 0;
	boca2_2_per1.x = x_boca_per1;
	boca2_2_per1.y = y_boca_per1;
	bocas_2_per1.push(boca2_2_per1);

	var boca2_2_per2 = new createjs.Sprite(imagenes);
	boca2_2_per2.gotoAndStop(parent.lib.boca2_per2.prototype.id);
	//var boca2_2 = new createjs.Bitmap("../../images/boca2.png");
	boca2_2_per2.alpha = 0;
	boca2_2_per2.x = x_boca_per2;
	boca2_2_per2.y = y_boca_per2;
	bocas_2_per2.push(boca2_2_per2);

	var boca2_2_per3 = new createjs.Sprite(imagenes);
	boca2_2_per3.gotoAndStop(parent.lib.boca2_per3.prototype.id);
	//var boca2_2 = new createjs.Bitmap("../../images/boca2.png");
	boca2_2_per3.alpha = 0;
	boca2_2_per3.x = x_boca_per3;
	boca2_2_per3.y = y_boca_per3;
	bocas_2_per3.push(boca2_2_per3);


	var boca2_2_per4 = new createjs.Sprite(imagenes);
	boca2_2_per4.gotoAndStop(parent.lib.boca2_per4.prototype.id);
	//var boca2_2 = new createjs.Bitmap("../../images/boca2.png");
	boca2_2_per4.alpha = 0;
	boca2_2_per4.x = x_boca_per4;
	boca2_2_per4.y = y_boca_per4;
	bocas_2_per4.push(boca2_2_per4);





	var boca3_2_per1 = new createjs.Sprite(imagenes);
	boca3_2_per1.gotoAndStop(parent.lib.boca3_per1.prototype.id);
	//var boca3_2 = new createjs.Bitmap("../../images/boca3.png");
	boca3_2_per1.alpha = 0;
	boca3_2_per1.x = x_boca_per1;
	boca3_2_per1.y = y_boca_per1;
	bocas_2_per1.push(boca3_2_per1);

	var boca3_2_per2 = new createjs.Sprite(imagenes);
	boca3_2_per2.gotoAndStop(parent.lib.boca3_per2.prototype.id);
	//var boca3_2 = new createjs.Bitmap("../../images/boca3.png");
	boca3_2_per2.alpha = 0;
	boca3_2_per2.x = x_boca_per2;
	boca3_2_per2.y = y_boca_per2;
	bocas_2_per2.push(boca3_2_per2);

	var boca3_2_per3 = new createjs.Sprite(imagenes);
	boca3_2_per3.gotoAndStop(parent.lib.boca3_per3.prototype.id);
	//var boca3_2 = new createjs.Bitmap("../../images/boca3.png");
	boca3_2_per3.alpha = 0;
	boca3_2_per3.x = x_boca_per3;
	boca3_2_per3.y = y_boca_per3;
	bocas_2_per3.push(boca3_2_per3);


	var boca3_2_per4 = new createjs.Sprite(imagenes);
	boca3_2_per4.gotoAndStop(parent.lib.boca3_per4.prototype.id);
	//var boca3_2 = new createjs.Bitmap("../../images/boca3.png");
	boca3_2_per4.alpha = 0;
	boca3_2_per4.x = x_boca_per4;
	boca3_2_per4.y = y_boca_per4;
	bocas_2_per4.push(boca3_2_per4);



	var boca4_2_per1 = new createjs.Sprite(imagenes);
	boca4_2_per1.gotoAndStop(parent.lib.boca4_per1.prototype.id);
	//var boca4_2 = new createjs.Bitmap("../../images/boca4.png");
	boca4_2_per1.alpha = 0;
	boca4_2_per1.x = x_boca_per1;
	boca4_2_per1.y = y_boca_per1;
	bocas_2_per1.push(boca4_2_per1);

	var boca4_2_per2 = new createjs.Sprite(imagenes);
	boca4_2_per2.gotoAndStop(parent.lib.boca4_per2.prototype.id);
	//var boca4_2 = new createjs.Bitmap("../../images/boca4.png");
	boca4_2_per2.alpha = 0;
	boca4_2_per2.x = x_boca_per2;
	boca4_2_per2.y = y_boca_per2;
	bocas_2_per2.push(boca4_2_per2);

	var boca4_2_per3 = new createjs.Sprite(imagenes);
	boca4_2_per3.gotoAndStop(parent.lib.boca4_per3.prototype.id);
	//var boca4_2 = new createjs.Bitmap("../../images/boca4.png");
	boca4_2_per3.alpha = 0;
	boca4_2_per3.x = x_boca_per3;
	boca4_2_per3.y = y_boca_per3;
	bocas_2_per3.push(boca4_2_per3);

	var boca4_2_per4 = new createjs.Sprite(imagenes);
	boca4_2_per4.gotoAndStop(parent.lib.boca4_per4.prototype.id);
	//var boca4_2 = new createjs.Bitmap("../../images/boca4.png");
	boca4_2_per4.alpha = 0;
	boca4_2_per4.x = x_boca_per4;
	boca4_2_per4.y = y_boca_per4;
	bocas_2_per4.push(boca4_2_per4);



	var boca5_2_per1 = new createjs.Sprite(imagenes);
	boca5_2_per1.gotoAndStop(parent.lib.boca5_per1.prototype.id);
	//var boca5_2 = new createjs.Bitmap("../../images/boca5.png");
	boca5_2_per1.alpha = 0;
	boca5_2_per1.x = x_boca_per1;
	boca5_2_per1.y = y_boca_per1;
	bocas_2_per1.push(boca5_2_per1);

	var boca5_2_per2 = new createjs.Sprite(imagenes);
	boca5_2_per2.gotoAndStop(parent.lib.boca5_per2.prototype.id);
	//var boca5_2 = new createjs.Bitmap("../../images/boca5.png");
	boca5_2_per2.alpha = 0;
	boca5_2_per2.x = x_boca_per2;
	boca5_2_per2.y = y_boca_per2;
	bocas_2_per2.push(boca5_2_per2);

	var boca5_2_per3 = new createjs.Sprite(imagenes);
	boca5_2_per3.gotoAndStop(parent.lib.boca5_per3.prototype.id);
	//var boca5_2 = new createjs.Bitmap("../../images/boca5.png");
	boca5_2_per3.alpha = 0;
	boca5_2_per3.x = x_boca_per3;
	boca5_2_per3.y = y_boca_per3;
	bocas_2_per3.push(boca5_2_per3);


	var boca5_2_per4 = new createjs.Sprite(imagenes);
	boca5_2_per4.gotoAndStop(parent.lib.boca5_per4.prototype.id);
	//var boca5_2 = new createjs.Bitmap("../../images/boca5.png");
	boca5_2_per4.alpha = 0;
	boca5_2_per4.x = x_boca_per4;
	boca5_2_per4.y = y_boca_per4;
	bocas_2_per4.push(boca5_2_per4);




	var boca6_2_per1 = new createjs.Sprite(imagenes);
	boca6_2_per1.gotoAndStop(parent.lib.boca6_per1.prototype.id);
	//var boca6_2 = new createjs.Bitmap("../../images/boca6.png");
	boca6_2_per1.alpha = 0;
	boca6_2_per1.x = x_boca_per1;
	boca6_2_per1.y = y_boca_per1;
	bocas_2_per1.push(boca6_2_per1);

		var boca6_2_per2 = new createjs.Sprite(imagenes);
	boca6_2_per2.gotoAndStop(parent.lib.boca6_per2.prototype.id);
	//var boca6_2 = new createjs.Bitmap("../../images/boca6.png");
	boca6_2_per2.alpha = 0;
	boca6_2_per2.x = x_boca_per2;
	boca6_2_per2.y = y_boca_per2;
	bocas_2_per2.push(boca6_2_per2);


	var boca6_2_per3 = new createjs.Sprite(imagenes);
	boca6_2_per3.gotoAndStop(parent.lib.boca6_per3.prototype.id);
	//var boca6_2 = new createjs.Bitmap("../../images/boca6.png");
	boca6_2_per3.alpha = 0;
	boca6_2_per3.x = x_boca_per3;
	boca6_2_per3.y = y_boca_per3;
	bocas_2_per3.push(boca6_2_per3);


	var boca6_2_per4 = new createjs.Sprite(imagenes);
	boca6_2_per4.gotoAndStop(parent.lib.boca6_per4.prototype.id);
	//var boca6_2 = new createjs.Bitmap("../../images/boca6.png");
	boca6_2_per4.alpha = 0;
	boca6_2_per4.x = x_boca_per4;
	boca6_2_per4.y = y_boca_per4;
	bocas_2_per4.push(boca6_2_per4);



	//var personaje = new createjs.Bitmap("../../images/tronco.png");
	var personaje_per1 = new createjs.Sprite(imagenes);
	personaje_per1.gotoAndStop(parent.lib.tronco_per1.prototype.id);
	var bounds_personaje_per1 = personaje_per1.getBounds();
	personaje_per1.x = x_tronco_per1;
	personaje_per1.y = y_tronco_per1;
	


	var personaje_per2 = new createjs.Sprite(imagenes);
	personaje_per2.gotoAndStop(parent.lib.tronco_per2.prototype.id);
	var bounds_personaje_per2 = personaje_per2.getBounds();
	personaje_per2.x = x_tronco_per2;
	personaje_per2.y = y_tronco_per2;

	var personaje_per3 = new createjs.Sprite(imagenes);
	personaje_per3.gotoAndStop(parent.lib.tronco_per3.prototype.id);
	var bounds_personaje_per3 = personaje_per3.getBounds();
	personaje_per3.x = x_tronco_per3;
	personaje_per3.y = y_tronco_per3;

	var personaje_per4 = new createjs.Sprite(imagenes);
	personaje_per4.gotoAndStop(parent.lib.tronco_per4.prototype.id);
	var bounds_personaje_per4 = personaje_per4.getBounds();
	personaje_per4.x = x_tronco_per4;
	personaje_per4.y = y_tronco_per4;




	var boton_personaje_per1 = new createjs.Sprite(imagenes);
	boton_personaje_per1.gotoAndStop(parent.lib.boton_personaje_per1.prototype.id);

	//boton_personaje = new createjs.Bitmap("../../images/boton_personaje.png");
	var bounds_boton_personaje_per1 = boton_personaje_per1.getBounds();
	boton_personaje_per1.regX = 0;
	boton_personaje_per1.regY = 0;
	boton_personaje_per1.x = 0;
	boton_personaje_per1.y = 60;


		var boton_personaje_per2 = new createjs.Sprite(imagenes);
	boton_personaje_per2.gotoAndStop(parent.lib.boton_personaje_per2.prototype.id);

	//boton_personaje = new createjs.Bitmap("../../images/boton_personaje.png");
	var bounds_boton_personaje_per2 = boton_personaje_per2.getBounds();
	boton_personaje_per2.regX = 0;
	boton_personaje_per2.regY = 0;
	boton_personaje_per2.x = 0;
	boton_personaje_per2.y = 30;

	var boton_personaje_per3 = new createjs.Sprite(imagenes);
	boton_personaje_per3.gotoAndStop(parent.lib.boton_personaje_per3.prototype.id);

	//boton_personaje = new createjs.Bitmap("../../images/boton_personaje.png");
	var bounds_boton_personaje_per3 = boton_personaje_per3.getBounds();
	boton_personaje_per3.regX = 0;
	boton_personaje_per3.regY = 0;
	boton_personaje_per3.x = 0;
	boton_personaje_per3.y = 60;


	var boton_personaje_per4 = new createjs.Sprite(imagenes);
	boton_personaje_per4.gotoAndStop(parent.lib.boton_personaje_per4.prototype.id);

	//boton_personaje = new createjs.Bitmap("../../images/boton_personaje.png");
	var bounds_boton_personaje_per4 = boton_personaje_per4.getBounds();
	boton_personaje_per4.regX = 0;
	boton_personaje_per4.regY = 0;
	boton_personaje_per4.x = 0;
	boton_personaje_per4.y = 60;



	

	audio_btnoff_per1 = new createjs.Sprite(imagenes);
	audio_btnoff_per1.gotoAndStop(parent.lib.audio_btnoff.prototype.id);
	//audio_btnoff = new createjs.Bitmap("../../images/audio_btnoff.png");
	bounds_audio_btnoff_per1 = audio_btnoff_per1.getBounds();
	audio_btnoff_per1.x = 0;
	audio_btnoff_per1.y = 0;
	audio_btnoff_per1.regX = bounds_audio_btnoff_per1.width/2;
	audio_btnoff_per1.regY = bounds_audio_btnoff_per1.height/2;
	audio_btnoff_per1.alpha = 1;
	audio_btnoff_per1.scaleX = 1;

	audio_btnon_per1 = new createjs.Sprite(imagenes);
	audio_btnon_per1.gotoAndStop(parent.lib.audio_btnoff.prototype.id);
	//audio_btnon.gotoAndStop(parent.lib.audio_btnon.prototype.id);
	//audio_btnon = new createjs.Bitmap("../../images/audio_btnoff.png");

	bounds_audio_btnon_per1 = audio_btnon_per1.getBounds();
	audio_btnon_per1.x = 0;
	audio_btnon_per1.y = 0;
	audio_btnon_per1.regX = bounds_audio_btnon_per1.width/2;
	audio_btnon_per1.regY = bounds_audio_btnon_per1.height/2;
	audio_btnon_per1.alpha = 0;

	audio_btnclico_per1 = new createjs.Sprite(imagenes);
	audio_btnclico_per1.gotoAndStop(parent.lib.audio_btnclico.prototype.id);
	//audio_btnclico = new createjs.Bitmap("../../images/audio_btnclico.png");

	bounds_audio_btnclico_per1 = audio_btnclico_per1.getBounds();
	audio_btnclico_per1.x = 0;
	audio_btnclico_per1.y = 0;
	audio_btnclico_per1.alpha = 0;

	audio_btnclicof_per1 = new createjs.Sprite(imagenes);
	audio_btnclicof_per1.gotoAndStop(parent.lib.audio_btnclicof.prototype.id);
	//audio_btnclicof = new createjs.Bitmap("../../images/audio_btnclicof.png");

	bounds_audio_btnclicof_per1 = audio_btnclicof_per1.getBounds();
	audio_btnclicof_per1.x = 0;
	audio_btnclicof_per1.y = 0;
	audio_btnclicof_per1.regX = bounds_audio_btnclicof_per1.width/2;
	audio_btnclicof_per1.regY = bounds_audio_btnclicof_per1.height/2;
	audio_btnclicof_per1.alpha = 0;


	contenedor_audiobtn_per1 = new createjs.Container();
	contenedor_audiobtn_per1.addChild(audio_btnoff_per1,audio_btnon_per1,audio_btnclico_per1,audio_btnclicof_per1);
	bounds_contenedor_audiobtn_per1 = contenedor_audiobtn_per1.getBounds();
	contenedor_audiobtn_per1.x = parent.x_contenedor_audiobtn_per1;
	contenedor_audiobtn_per1.y = parent.y_contenedor_audiobtn_per1;
	contenedor_audiobtn_per1.regX = bounds_contenedor_audiobtn_per1.width/2;
	contenedor_audiobtn_per1.regY = bounds_contenedor_audiobtn_per1.height*1/2;
	contenedor_audiobtn_per1.scaleX = parent.scalex_contenedor_audiobtn_per1;
	contenedor_audiobtn_per1.scaleY = parent.scaley_contenedor_audiobtn_per1;
	







	audio_btnoff_per2 = new createjs.Sprite(imagenes);
	audio_btnoff_per2.gotoAndStop(parent.lib.audio_btnoff.prototype.id);
	//audio_btnoff = new createjs.Bitmap("../../images/audio_btnoff.png");
	bounds_audio_btnoff_per2 = audio_btnoff_per2.getBounds();
	audio_btnoff_per2.x = 0;
	audio_btnoff_per2.y = 0;
	audio_btnoff_per2.alpha = 1;

	audio_btnon_per2 = new createjs.Sprite(imagenes);
	audio_btnon_per2.gotoAndStop(parent.lib.audio_btnoff.prototype.id);
	//audio_btnon.gotoAndStop(parent.lib.audio_btnon.prototype.id);
	//audio_btnon = new createjs.Bitmap("../../images/audio_btnoff.png");

	bounds_audio_btnon_per2 = audio_btnon_per2.getBounds();
	audio_btnon_per2.x = 0;
	audio_btnon_per2.y = 0;
	audio_btnon_per2.alpha = 0;

	audio_btnclico_per2 = new createjs.Sprite(imagenes);
	audio_btnclico_per2.gotoAndStop(parent.lib.audio_btnclico.prototype.id);
	//audio_btnclico = new createjs.Bitmap("../../images/audio_btnclico.png");

	bounds_audio_btnclico_per2 = audio_btnclico_per2.getBounds();
	audio_btnclico_per2.x = 0;
	audio_btnclico_per2.y = 0;
	audio_btnclico_per2.alpha = 0;

	audio_btnclicof_per2 = new createjs.Sprite(imagenes);
	audio_btnclicof_per2.gotoAndStop(parent.lib.audio_btnclicof.prototype.id);
	//audio_btnclicof = new createjs.Bitmap("../../images/audio_btnclicof.png");

	bounds_audio_btnclicof_per2 = audio_btnclicof_per2.getBounds();
	audio_btnclicof_per2.x = 0;
	audio_btnclicof_per2.y = 0;
	audio_btnclicof_per2.alpha = 0;


	contenedor_audiobtn_per2 = new createjs.Container();
	contenedor_audiobtn_per2.addChild(audio_btnoff_per2,audio_btnon_per2,audio_btnclico_per2,audio_btnclicof_per2);
	bounds_contenedor_audiobtn_per2 = contenedor_audiobtn_per2.getBounds();
	contenedor_audiobtn_per2.x = parent.x_contenedor_audiobtn_per2;
	contenedor_audiobtn_per2.y = parent.y_contenedor_audiobtn_per2;
	contenedor_audiobtn_per2.regX = bounds_contenedor_audiobtn_per2.width/2;
	contenedor_audiobtn_per2.regY = bounds_contenedor_audiobtn_per2.height*1/2;
	contenedor_audiobtn_per2.scaleX = parent.scalex_contenedor_audiobtn_per2;
	contenedor_audiobtn_per2.scaleY = parent.scaley_contenedor_audiobtn_per2;
	





	audio_btnoff_per3 = new createjs.Sprite(imagenes);
	audio_btnoff_per3.gotoAndStop(parent.lib.audio_btnoff.prototype.id);
	//audio_btnoff = new createjs.Bitmap("../../images/audio_btnoff.png");
	bounds_audio_btnoff_per3 = audio_btnoff_per3.getBounds();
	audio_btnoff_per3.x = 0;
	audio_btnoff_per3.y = 0;
	audio_btnoff_per3.alpha = 1;

	audio_btnon_per3 = new createjs.Sprite(imagenes);
	audio_btnon_per3.gotoAndStop(parent.lib.audio_btnoff.prototype.id);
	//audio_btnon.gotoAndStop(parent.lib.audio_btnon.prototype.id);
	//audio_btnon = new createjs.Bitmap("../../images/audio_btnoff.png");

	bounds_audio_btnon_per3 = audio_btnon_per3.getBounds();
	audio_btnon_per3.x = 0;
	audio_btnon_per3.y = 0;
	audio_btnon_per3.alpha = 0;

	audio_btnclico_per3 = new createjs.Sprite(imagenes);
	audio_btnclico_per3.gotoAndStop(parent.lib.audio_btnclico.prototype.id);
	//audio_btnclico = new createjs.Bitmap("../../images/audio_btnclico.png");

	bounds_audio_btnclico_per3 = audio_btnclico_per3.getBounds();
	audio_btnclico_per3.x = 0;
	audio_btnclico_per3.y = 0;
	audio_btnclico_per3.alpha = 0;

	audio_btnclicof_per3 = new createjs.Sprite(imagenes);
	audio_btnclicof_per3.gotoAndStop(parent.lib.audio_btnclicof.prototype.id);
	//audio_btnclicof = new createjs.Bitmap("../../images/audio_btnclicof.png");

	bounds_audio_btnclicof_per3 = audio_btnclicof_per3.getBounds();
	audio_btnclicof_per3.x = 0;
	audio_btnclicof_per3.y = 0;
	audio_btnclicof_per3.alpha = 0;


	contenedor_audiobtn_per3 = new createjs.Container();
	contenedor_audiobtn_per3.addChild(audio_btnoff_per3,audio_btnon_per3,audio_btnclico_per3,audio_btnclicof_per3);
	bounds_contenedor_audiobtn_per3 = contenedor_audiobtn_per3.getBounds();
	contenedor_audiobtn_per3.x = parent.x_contenedor_audiobtn_per3;
	contenedor_audiobtn_per3.y = parent.y_contenedor_audiobtn_per3;
	contenedor_audiobtn_per3.regX = bounds_contenedor_audiobtn_per3.width/2;
	contenedor_audiobtn_per3.regY = bounds_contenedor_audiobtn_per3.height*1/2;
	contenedor_audiobtn_per3.scaleX = parent.scalex_contenedor_audiobtn_per3;
	contenedor_audiobtn_per3.scaleY = parent.scaley_contenedor_audiobtn_per3;





	audio_btnoff_per4 = new createjs.Sprite(imagenes);
	audio_btnoff_per4.gotoAndStop(parent.lib.audio_btnoff.prototype.id);
	//audio_btnoff = new createjs.Bitmap("../../images/audio_btnoff.png");
	bounds_audio_btnoff_per4 = audio_btnoff_per4.getBounds();
	audio_btnoff_per4.x = 0;
	audio_btnoff_per4.y = 0;
	audio_btnoff_per4.alpha = 1;

	audio_btnon_per4 = new createjs.Sprite(imagenes);
	audio_btnon_per4.gotoAndStop(parent.lib.audio_btnoff.prototype.id);
	//audio_btnon.gotoAndStop(parent.lib.audio_btnon.prototype.id);
	//audio_btnon = new createjs.Bitmap("../../images/audio_btnoff.png");

	bounds_audio_btnon_per4 = audio_btnon_per4.getBounds();
	audio_btnon_per4.x = 0;
	audio_btnon_per4.y = 0;
	audio_btnon_per4.alpha = 0;

	audio_btnclico_per4 = new createjs.Sprite(imagenes);
	audio_btnclico_per4.gotoAndStop(parent.lib.audio_btnclico.prototype.id);
	//audio_btnclico = new createjs.Bitmap("../../images/audio_btnclico.png");

	bounds_audio_btnclico_per4 = audio_btnclico_per4.getBounds();
	audio_btnclico_per4.x = 0;
	audio_btnclico_per4.y = 0;
	audio_btnclico_per4.alpha = 0;

	audio_btnclicof_per4 = new createjs.Sprite(imagenes);
	audio_btnclicof_per4.gotoAndStop(parent.lib.audio_btnclicof.prototype.id);
	//audio_btnclicof = new createjs.Bitmap("../../images/audio_btnclicof.png");

	bounds_audio_btnclicof_per4 = audio_btnclicof_per4.getBounds();
	audio_btnclicof_per4.x = 0;
	audio_btnclicof_per4.y = 0;
	audio_btnclicof_per4.alpha = 0;


	contenedor_audiobtn_per4 = new createjs.Container();
	contenedor_audiobtn_per4.addChild(audio_btnoff_per4,audio_btnon_per4,audio_btnclico_per4,audio_btnclicof_per4);
	bounds_contenedor_audiobtn_per4 = contenedor_audiobtn_per4.getBounds();
	contenedor_audiobtn_per4.x = parent.x_contenedor_audiobtn_per4;
	contenedor_audiobtn_per4.y = parent.y_contenedor_audiobtn_per4;
	contenedor_audiobtn_per4.regX = bounds_contenedor_audiobtn_per4.width/2;
	contenedor_audiobtn_per4.regY = bounds_contenedor_audiobtn_per4.height*1/2;
	contenedor_audiobtn_per4.scaleX = parent.scalex_contenedor_audiobtn_per4;
	contenedor_audiobtn_per4.scaleY = parent.scaley_contenedor_audiobtn_per4;
	
	
	//////ACA PERSOBAJE

	var logo_uniforme_per1 = new createjs.Sprite(imagenes);
	logo_uniforme_per1.gotoAndStop(parent.lib.logo_camisa_per1.prototype.id);
	logo_uniforme_per1.alpha = 1;
	
	var logo_uniforme_per2 = new createjs.Sprite(imagenes);
	logo_uniforme_per2.gotoAndStop(parent.lib.logo_camisa_per2.prototype.id);
	logo_uniforme_per2.alpha = 1;
	
	var logo_uniforme_per3 = new createjs.Sprite(imagenes);
	logo_uniforme_per3.gotoAndStop(parent.lib.logo_camisa_per3.prototype.id);
	logo_uniforme_per3.alpha = 1;

	var logo_uniforme_per4 = new createjs.Sprite(imagenes);
	logo_uniforme_per4.gotoAndStop(parent.lib.logo_camisa_per4.prototype.id);
	logo_uniforme_per4.alpha = 1;

	
	//var logo_uniforme = new createjs.Bitmap("../../images/logo_camisa.png");
	var bounds_logo_uniforme = logo_uniforme_per1.getBounds();

	version_personaje = parent.version_personaje[parent.znThisPage-1];

	if(version_personaje==1){
			if(posicion_personaje_actual == 2){
				logo_uniforme_per1.x = parent.x_logo_uniforme_per1_der;
				logo_uniforme_per1.y = parent.y_logo_uniforme_per1_der;
				logo_uniforme_per1.scaleX = -1;
			} else {
				logo_uniforme_per1.x = parent.x_logo_uniforme_per1_izq;
				logo_uniforme_per1.y = parent.y_logo_uniforme_per1_izq;
				logo_uniforme_per1.scaleX = 1;
				
			}
		} else if(version_personaje==2){
			if(posicion_personaje_actual == 2){
				logo_uniforme_per2.x = parent.x_logo_uniforme_per2_der;
				logo_uniforme_per2.y = parent.y_logo_uniforme_per2_der;
				logo_uniforme_per2.scaleX = -1;
			} else {
				logo_uniforme_per2.x = parent.x_logo_uniforme_per2_izq;
				logo_uniforme_per2.y = parent.y_logo_uniforme_per2_izq;
				logo_uniforme_per2.scaleX = 1;
				
			}

			
		} else if(version_personaje==3){
			if(posicion_personaje_actual == 2){
				logo_uniforme_per3.x = parent.x_logo_uniforme_per3_der;
				logo_uniforme_per3.y = parent.y_logo_uniforme_per3_der;
				logo_uniforme_per3.scaleX = -1;
			} else {
				logo_uniforme_per3.x = parent.x_logo_uniforme_per3_izq;
				logo_uniforme_per3.y = parent.y_logo_uniforme_per3_der;
				logo_uniforme_per3.scaleX = 1;
				
			}
		} else if(version_personaje==4){
			if(posicion_personaje_actual == 2){
				logo_uniforme_per4.x = parent.x_logo_uniforme_per4_der;
				logo_uniforme_per4.y = parent.y_logo_uniforme_per4_der;
				logo_uniforme_per4.scaleX = -1;
			} else {
				logo_uniforme_per4.x = parent.x_logo_uniforme_per4_izq;
				logo_uniforme_per4.y = parent.y_logo_uniforme_per4_der;
				logo_uniforme_per4.scaleX = 1;
				
			}
		}
	

	logo_uniforme_per1.visible = parent.visible_logo_uniforme_per1;
	logo_uniforme_per2.visible = parent.visible_logo_uniforme_per2;
	logo_uniforme_per3.visible = parent.visible_logo_uniforme_per3;
	logo_uniforme_per4.visible = parent.visible_logo_uniforme_per4;
	
	//azar = Math.floor((Math.random() * 100) + 1);
	
	//azar = Math.floor((Math.random() * 100) + 1);

	x_icono_play = 120;
	num_modulo_act = parent.document.getElementById("numero_modulo").innerHTML;


	if (posicion_personaje_actual == 2) {


		x_personaje_final = 1010;
		x_personaje = x_personaje_final+100;
		scale_personaje = -1;
		x_iaudio = x_personaje -200//- bounds_personaje.width;
		x_iaudio_final = x_personaje_final - 350;
		scale_iaudio = 0.8;
		x_equis = 1070//x_iaudio -130 ;
		x_icono_play = 60;
		scale_personaje = -1;
		scale_iaudio_g = -1;

		//if(parent.znThisPage > 1){//} || parent.znThisPage == 1 && num_modulo_act == "1"){
		
		//}
	} else {

//////ACA PERSOBAJE
		x_personaje_final = 120;
		x_personaje = x_personaje_final-100;
		scale_personaje = 1;

		if(version_personaje==1){
		x_iaudio_final = x_personaje_final + bounds_personaje_per1.width + 50;
		x_iaudio = x_iaudio_final;
		//x_iaudio = x_personaje + bounds_personaje_per1.width + 20;
		} else if(version_personaje==2){
		x_iaudio_final = x_personaje_final + bounds_personaje_per2.width + 50;
		x_iaudio = x_iaudio_final;
		//x_iaudio = x_personaje + bounds_personaje_per2.width + 20;
		} else if(version_personaje==3){
		x_iaudio_final = x_personaje_final + bounds_personaje_per3.width + 50;
		//x_iaudio = x_personaje + bounds_personaje_per3.width + 20;
		x_iaudio = x_iaudio_final;
		} else if(version_personaje==4){
		x_iaudio_final = x_personaje_final + bounds_personaje_per4.width + 50;
		//x_iaudio = x_personaje + bounds_personaje_per4.width + 20;
		x_iaudio = x_iaudio_final;
		}
		scale_iaudio = 0.8;
		x_equis = 40//x_iaudio + 100;	
		x_icono_play = 30;	
		scale_personaje = 1;
		scale_iaudio_g = 1;

		//if(parent.znThisPage >1){//== 1 || parent.znThisPage == 1 && num_modulo_act == "1"){
		
		//}
	}
	//console.log(posicion_personaje_actual)

	var contenedor_rostro_per1 = new createjs.Container();
	contenedor_rostro_per1.addChild(cabeza_per1, ceja_derecha_per1, ceja_izquierda_per1,ojos_abiertos_per1,ojos_cerrados_per1,boca0_per1,boca1_per1,boca2_per1,boca3_per1,boca4_per1,boca5_per1,boca6_per1,cabello_per1);
	bounds_contenedor_rostro_per1 = contenedor_rostro_per1.getBounds();
	contenedor_rostro_per1.x = parent.x_contenedor_rostro_per1;
	contenedor_rostro_per1.y = parent.y_contenedor_rostro_per1;
	//contenedor_rostro_per1.regX = bounds_contenedor_rostro_per1.width/2+cabeza_per1.x;
	//contenedor_rostro_per1.regY = bounds_contenedor_rostro_per1.height*1/2+cabeza_per1.y;
	contenedor_rostro_per1.regX = bounds_contenedor_rostro_per1.width/2;
	contenedor_rostro_per1.regY = bounds_contenedor_rostro_per1.height*1/2;

	var contenedor_rostro_per2 = new createjs.Container();
	contenedor_rostro_per2.addChild(cabeza_per2, ceja_derecha_per2, ceja_izquierda_per2,ojos_abiertos_per2,ojos_cerrados_per2,boca0_per2,boca1_per2,boca2_per2,boca3_per2,boca4_per2,boca5_per2,boca6_per2,cabello_per2);
	bounds_contenedor_rostro_per2 = contenedor_rostro_per2.getBounds();
	contenedor_rostro_per2.x = parent.x_contenedor_rostro_per2;
	contenedor_rostro_per2.y = parent.y_contenedor_rostro_per2;
	contenedor_rostro_per2.regX = bounds_contenedor_rostro_per2.width/2;
	contenedor_rostro_per2.regY = bounds_contenedor_rostro_per2.height*1/2;


	var contenedor_rostro_per3 = new createjs.Container();
	contenedor_rostro_per3.addChild(cabeza_per3, ceja_derecha_per3, ceja_izquierda_per3,ojos_abiertos_per3,ojos_cerrados_per3,boca0_per3,boca1_per3,boca2_per3,boca3_per3,boca4_per3,boca5_per3,boca6_per3,cabello_per3);
	bounds_contenedor_rostro_per3 = contenedor_rostro_per3.getBounds();
	contenedor_rostro_per3.x = parent.x_contenedor_rostro_per3;
	contenedor_rostro_per3.y = parent.y_contenedor_rostro_per3;
	contenedor_rostro_per3.regX = bounds_contenedor_rostro_per3.width/2;
	contenedor_rostro_per3.regY = bounds_contenedor_rostro_per3.height*1/2;

	var contenedor_rostro_per4 = new createjs.Container();
	contenedor_rostro_per4.addChild(cabeza_per4, ceja_derecha_per4, ceja_izquierda_per4,ojos_abiertos_per4,ojos_cerrados_per4,boca0_per4,boca1_per4,boca2_per4,boca3_per4,boca4_per4,boca5_per4,boca6_per4,cabello_per4);
	bounds_contenedor_rostro_per4 = contenedor_rostro_per4.getBounds();
	contenedor_rostro_per4.x = parent.x_contenedor_rostro_per4;
	contenedor_rostro_per4.y = parent.y_contenedor_rostro_per4;
	contenedor_rostro_per4.regX = bounds_contenedor_rostro_per4.width/2;
	contenedor_rostro_per4.regY = bounds_contenedor_rostro_per4.height*1/2;


	//////////////CONTENEDOR ROSTRO 2
	var contenedor_rostro2_per1 = new createjs.Container();
	contenedor_rostro2_per1.addChild(cabeza_2_per1, ceja_derecha_2_per1, ceja_izquierda_2_per1,ojos_abiertos_2_per1,ojos_cerrados_2_per1,boca0_2_per1,boca1_2_per1,boca2_2_per1,boca3_2_per1,boca4_2_per1,boca5_2_per1,boca6_2_per1,cabello_2_per1);
	bounds_contenedor_rostro2_per1 = contenedor_rostro2_per1.getBounds();
	contenedor_rostro2_per1.x = parent.x_contenedor_rostro2_per1;
	contenedor_rostro2_per1.y = bounds_contenedor_rostro2_per1.height*1/2+parent.y_contenedor_rostro2_per1;
	contenedor_rostro2_per1.scaleX = parent.scalex_contenedor_rostro2_per1;
	contenedor_rostro2_per1.scaleY = parent.scaley_contenedor_rostro2_per1;
	//contenedor_rostro2_per1.regX = bounds_contenedor_rostro2_per1.width/2+cabeza_per1.x;
	//contenedor_rostro2_per1.regY = bounds_contenedor_rostro2_per1.height*1/2+cabeza_per1.y;
	contenedor_rostro2_per1.regX = bounds_contenedor_rostro2_per1.width/2;
	contenedor_rostro2_per1.regY = bounds_contenedor_rostro2_per1.height*1/2;

	var contenedor_rostro2_per2 = new createjs.Container();
	contenedor_rostro2_per2.addChild(cabeza_2_per2, ceja_derecha_2_per2, ceja_izquierda_2_per2,ojos_abiertos_2_per2,ojos_cerrados_2_per2,boca0_2_per2,boca1_2_per2,boca2_2_per2,boca3_2_per2,boca4_2_per2,boca5_2_per2,boca6_2_per2,cabello_2_per2);
	bounds_contenedor_rostro2_per2 = contenedor_rostro2_per2.getBounds();
	contenedor_rostro2_per2.x = parent.x_contenedor_rostro2_per2;
	contenedor_rostro2_per2.y = bounds_contenedor_rostro2_per2.height*1/2+parent.y_contenedor_rostro2_per2;
	contenedor_rostro2_per2.scaleX = parent.scalex_contenedor_rostro2_per2;
	contenedor_rostro2_per2.scaleY = parent.scaley_contenedor_rostro2_per2;
	contenedor_rostro2_per2.regX = bounds_contenedor_rostro2_per2.width/2;
	contenedor_rostro2_per2.regY = bounds_contenedor_rostro2_per2.height*1/2;


	var contenedor_rostro2_per3 = new createjs.Container();
	contenedor_rostro2_per3.addChild(cabeza_2_per3, ceja_derecha_2_per3, ceja_izquierda_2_per3,ojos_abiertos_2_per3,ojos_cerrados_2_per3,boca0_2_per3,boca1_2_per3,boca2_2_per3,boca3_2_per3,boca4_2_per3,boca5_2_per3,boca6_2_per3,cabello_2_per3);
	bounds_contenedor_rostro2_per3 = contenedor_rostro2_per3.getBounds();
	contenedor_rostro2_per3.x = parent.x_contenedor_rostro2_per3;
	contenedor_rostro2_per3.y = bounds_contenedor_rostro2_per3.height*1/2+parent.y_contenedor_rostro2_per3;
	contenedor_rostro2_per3.scaleX = parent.scalex_contenedor_rostro2_per3;
	contenedor_rostro2_per3.scaleY = parent.scaley_contenedor_rostro2_per3;
	contenedor_rostro2_per3.regX = bounds_contenedor_rostro2_per3.width/2;
	contenedor_rostro2_per3.regY = bounds_contenedor_rostro2_per3.height*1/2;


	var contenedor_rostro2_per4 = new createjs.Container();
	contenedor_rostro2_per4.addChild(cabeza_2_per4, ceja_derecha_2_per4, ceja_izquierda_2_per4,ojos_abiertos_2_per4,ojos_cerrados_2_per4,boca0_2_per4,boca1_2_per4,boca2_2_per4,boca3_2_per4,boca4_2_per4,boca5_2_per4,boca6_2_per4,cabello_2_per4);
	bounds_contenedor_rostro2_per4 = contenedor_rostro2_per4.getBounds();
	contenedor_rostro2_per4.x = parent.x_contenedor_rostro2_per4;
	contenedor_rostro2_per4.y = bounds_contenedor_rostro2_per4.height*1/2+parent.y_contenedor_rostro2_per4;
	contenedor_rostro2_per4.scaleX = parent.scalex_contenedor_rostro2_per4;
	contenedor_rostro2_per4.scaleY = parent.scaley_contenedor_rostro2_per4;
	contenedor_rostro2_per4.regX = bounds_contenedor_rostro2_per4.width/2;
	contenedor_rostro2_per4.regY = bounds_contenedor_rostro2_per4.height*1/2;




	////////////////////////
	contenedor_btnpersonaje_per1 = new createjs.Container();
	contenedor_btnpersonaje_per1.addChild(boton_personaje_per1,contenedor_rostro2_per1,contenedor_audiobtn_per1);
	bounds_contenedor_btnpersonaje_per1 = contenedor_btnpersonaje_per1.getBounds();
	contenedor_btnpersonaje_per1.x = parent.x_contenedor_btnpersonaje_per1;
	contenedor_btnpersonaje_per1.y = parent.y_contenedor_btnpersonaje_per1;//bounds_contenedor_btnpersonaje.height*1/2*0.65;
	contenedor_btnpersonaje_per1.scaleX = -0;
	contenedor_btnpersonaje_per1.scaleY = 0;
	contenedor_btnpersonaje_per1.cursor = "pointer";
	contenedor_btnpersonaje_per1.regX = bounds_contenedor_btnpersonaje_per1.width/2;
	contenedor_btnpersonaje_per1.regY = bounds_contenedor_btnpersonaje_per1.height*1/2;


	contenedor_btnpersonaje_per2 = new createjs.Container();
	contenedor_btnpersonaje_per2.addChild(boton_personaje_per2,contenedor_rostro2_per2,contenedor_audiobtn_per2);
	bounds_contenedor_btnpersonaje_per2 = contenedor_btnpersonaje_per2.getBounds();
	contenedor_btnpersonaje_per2.x = parent.x_contenedor_btnpersonaje_per2;
	contenedor_btnpersonaje_per2.y = parent.y_contenedor_btnpersonaje_per2;//bounds_contenedor_btnpersonaje.height*1/2*0.65;
	contenedor_btnpersonaje_per2.scaleX = -0;
	contenedor_btnpersonaje_per2.scaleY = 0;
	contenedor_btnpersonaje_per2.cursor = "pointer";
	contenedor_btnpersonaje_per2.regX = bounds_contenedor_btnpersonaje_per2.width/2;
	contenedor_btnpersonaje_per2.regY = bounds_contenedor_btnpersonaje_per2.height*1/2;

	contenedor_btnpersonaje_per3 = new createjs.Container();
	contenedor_btnpersonaje_per3.addChild(boton_personaje_per3,contenedor_rostro2_per3,contenedor_audiobtn_per3);
	bounds_contenedor_btnpersonaje_per3 = contenedor_btnpersonaje_per3.getBounds();
	contenedor_btnpersonaje_per3.x = parent.x_contenedor_btnpersonaje_per3;
	contenedor_btnpersonaje_per3.y = parent.y_contenedor_btnpersonaje_per3;//bounds_contenedor_btnpersonaje.height*1/2*0.65;
	contenedor_btnpersonaje_per3.scaleX = -0;
	contenedor_btnpersonaje_per3.scaleY = 0;
	contenedor_btnpersonaje_per3.cursor = "pointer";
	contenedor_btnpersonaje_per3.regX = bounds_contenedor_btnpersonaje_per3.width/2;
	contenedor_btnpersonaje_per3.regY = bounds_contenedor_btnpersonaje_per3.height*1/2;

	contenedor_btnpersonaje_per4 = new createjs.Container();
	contenedor_btnpersonaje_per4.addChild(boton_personaje_per4,contenedor_rostro2_per4,contenedor_audiobtn_per4);
	bounds_contenedor_btnpersonaje_per4 = contenedor_btnpersonaje_per4.getBounds();
	contenedor_btnpersonaje_per4.x = parent.x_contenedor_btnpersonaje_per4;
	contenedor_btnpersonaje_per4.y = parent.y_contenedor_btnpersonaje_per4;//bounds_contenedor_btnpersonaje.height*1/2*0.65;
	contenedor_btnpersonaje_per4.scaleX = -0;
	contenedor_btnpersonaje_per4.scaleY = 0;
	contenedor_btnpersonaje_per4.cursor = "pointer";
	contenedor_btnpersonaje_per4.regX = bounds_contenedor_btnpersonaje_per4.width/2;
	contenedor_btnpersonaje_per4.regY = bounds_contenedor_btnpersonaje_per4.height*1/2;


	clic_en_btnpersonaje = false;

	contenedor_btnpersonaje_per1.addEventListener("mouseover", over_btnpersonaje);
	contenedor_btnpersonaje_per1.addEventListener("mouseout", out_btnpersonaje);
	contenedor_btnpersonaje_per1.addEventListener("click", clic_btnpersonaje);

	contenedor_btnpersonaje_per2.addEventListener("mouseover", over_btnpersonaje);
	contenedor_btnpersonaje_per2.addEventListener("mouseout", out_btnpersonaje);
	contenedor_btnpersonaje_per2.addEventListener("click", clic_btnpersonaje);

	contenedor_btnpersonaje_per3.addEventListener("mouseover", over_btnpersonaje);
	contenedor_btnpersonaje_per3.addEventListener("mouseout", out_btnpersonaje);
	contenedor_btnpersonaje_per3.addEventListener("click", clic_btnpersonaje);


	contenedor_btnpersonaje_per4.addEventListener("mouseover", over_btnpersonaje);
	contenedor_btnpersonaje_per4.addEventListener("mouseout", out_btnpersonaje);
	contenedor_btnpersonaje_per4.addEventListener("click", clic_btnpersonaje);

	var contenedor_personaje_per1 = new createjs.Container();
	contenedor_personaje_per1.addChild(personaje_per1,contenedor_brazo_derecho,contenedor_brazo_izquierdo,contenedor_rostro_per1,logo_uniforme_per1);
	contenedor_personaje_per1.x = x_personaje;
	if(parent.con_botonesavance||parent.con_menunumeros_vhz){
		contenedor_personaje_per1.y = -20;

	} else {
		contenedor_personaje_per1.y = 0;

	}
	contenedor_personaje_per1.alpha = 0;
	contenedor_personaje_per1.scaleX = scale_personaje;
	contenedor_personaje_per1.mouseChildren = false;



	var contenedor_personaje_per2 = new createjs.Container();
	contenedor_personaje_per2.addChild(personaje_per2,contenedor_brazo_derecho,contenedor_brazo_izquierdo,contenedor_rostro_per2,logo_uniforme_per2);
	contenedor_personaje_per2.x = x_personaje;
	if(parent.con_botonesavance||parent.con_menunumeros_vhz){
		contenedor_personaje_per2.y = -20;

	} else {
		contenedor_personaje_per2.y = 0;

	}
	contenedor_personaje_per2.alpha = 0;
	contenedor_personaje_per2.scaleX = scale_personaje;
	contenedor_personaje_per2.mouseChildren = false;

	var contenedor_personaje_per3 = new createjs.Container();
	contenedor_personaje_per3.addChild(personaje_per3,contenedor_brazo_derecho,contenedor_brazo_izquierdo,contenedor_rostro_per3,logo_uniforme_per3);
	contenedor_personaje_per3.x = x_personaje;
	if(parent.con_botonesavance||parent.con_menunumeros_vhz){
		contenedor_personaje_per3.y = -20;

	} else {
		contenedor_personaje_per3.y = 0;

	}
	contenedor_personaje_per3.alpha = 0;
	contenedor_personaje_per3.scaleX = scale_personaje;
	contenedor_personaje_per3.mouseChildren = false;


	var contenedor_personaje_per4 = new createjs.Container();
	contenedor_personaje_per4.addChild(personaje_per4,contenedor_brazo_derecho,contenedor_brazo_izquierdo,contenedor_rostro_per4,logo_uniforme_per4);
	contenedor_personaje_per4.x = x_personaje;
	if(parent.con_botonesavance||parent.con_menunumeros_vhz){
		contenedor_personaje_per4.y = -20;

	} else {
		contenedor_personaje_per4.y = 0;

	}
	contenedor_personaje_per4.alpha = 0;
	contenedor_personaje_per4.scaleX = scale_personaje;
	contenedor_personaje_per4.mouseChildren = false;
	/*
	if (scale_personaje == -1) {
		personaje.scaleX = -1;
		personaje.x = 175;
	}
	*/




	var icono_audio = new createjs.Sprite(imagenes);
	icono_audio.gotoAndStop(parent.lib.icono_audio.prototype.id);

	//var icono_audio = new createjs.Bitmap("../../images/icono_audio.png");

	var icono_play = new createjs.Sprite(imagenes);
	icono_play.gotoAndStop(parent.lib.play.prototype.id);
	//var icono_play = new createjs.Bitmap("../../images/play.png");

	icono_play.alpha = 1;
	icono_play.x = x_icono_play;
	icono_play.y = 30;
	icono_play.scaleX = scale_iaudio_g;
	

	var icono_stop = new createjs.Sprite(imagenes);
	icono_stop.gotoAndStop(parent.lib.stop.prototype.id);
	icono_stop.alpha = 0;
	icono_stop.x = x_icono_play;
	icono_stop.y = 32;
	icono_stop.scaleX = scale_iaudio_g;


	if(!parent.con_menunumeros_v2){
	y_audio_final = 420;
	

	} else {
	y_audio_final = 470;
	

	}
	var_contenedor_iaudio = document.getElementById("boton_audiob");
	contenedor_iaudio = new createjs.DOMElement(var_contenedor_iaudio);
	

	//bounds_contenedor_audio = contenedor_iaudio.getBounds();
	//console.log(bounds_contenedor_audio)
	contenedor_iaudio.regX = document.getElementById("boton_audiob").clientWidth/2;
	contenedor_iaudio.regY = document.getElementById("boton_audiob").clientHeight/2;
	contenedor_iaudio.x = x_iaudio_final;
	contenedor_iaudio.y = 570;
	contenedor_iaudio.scaleX = 0;
	contenedor_iaudio.scaleY = 0;
	contenedor_iaudio.visible = true;
	contenedor_iaudio.alpha = 1;
	
	//contenedor_iaudio.x = x_iaudio_final;
	//contenedor_iaudio.x = x_iaudio_final;
	//x_contenedor_iaudio = contenedor_iaudio.x;
	contenedor_iaudio.y = y_audio_final;
	contenedor_iaudio.alpha = 0;
	//contenedor_iaudio.rotation = 360;
	contenedor_iaudio.cursor = "pointer"
	contenedor_iaudio.scaleX = 0;//scale_iaudio;
	contenedor_iaudio.scaleY = 0;//scale_iaudio;
	contenedor_iaudio.mouseChildren = false;
	var_contenedor_iaudio.addEventListener("mouseover", over_iaudio);
	var_contenedor_iaudio.addEventListener("mouseout", out_iaudio);

	
	var_equis = document.getElementById("equis_p");
	equis = new createjs.DOMElement(var_equis);
	equis.regX = document.getElementById("equis_p").clientWidth/2;
	equis.regY = document.getElementById("equis_p").clientHeight/2;
	
	equis.scaleX = 0.9;
	equis.scaleY = 0.9;
	var_equis.addEventListener("mouseover", over_equis);
	var_equis.addEventListener("mouseout", out_equis);
		
	//var equis = new createjs.Sprite(imagenes);
	//equis.gotoAndStop(parent.lib.i_equis.prototype.id);
	//var equis = new createjs.Bitmap("../../images/i_equis.png");

	equis.x = x_equis;
	equis.y = 60;
	equis.visible = false;

	total_textos_clave = []

	var icono_personaje = new createjs.Sprite(imagenes);
	icono_personaje.gotoAndStop(parent.lib.boton.prototype.id);
	bounds_icono_personaje = icono_personaje.getBounds();
	icono_personaje.regX = bounds_icono_personaje.width;
	icono_personaje.regY = bounds_icono_personaje.height/2;
	icono_personaje.scaleX = 0.8;
	icono_personaje.scaleY = 0.8;
	icono_personaje.cursor = "pointer";
	icono_personaje.x = 1245;
	icono_personaje.y = bounds_icono_personaje.height/2+0;
	icono_personaje.alpha = 0;
	icono_personaje.visible = false;

	icono_personaje.addEventListener("mouseover", over_icono_personaje);
	icono_personaje.addEventListener("mouseout", out_icono_personaje);

	var flecha_volver = new createjs.Sprite(imagenes);
	flecha_volver.gotoAndStop(22);
	flecha_volver.visible = false;
	
	var indicador = new createjs.Sprite(imagenes);
	indicador.gotoAndStop(parent.lib.indicador_menu_superior.prototype.id);
	//var indicador  = new createjs.Bitmap("../../images/indicador_menu_superior.png");

	indicador.rotation = 0;
	indicador.alpha = 0;
	var flecha_subtitulo = new createjs.Sprite(imagenes);
	flecha_subtitulo.gotoAndStop(20);
	flecha_subtitulo.y = 132;
	flecha_subtitulo.x = 10;
	flecha_subtitulo.alpha = 0;

	var var_titulo_pagina = document.getElementById("titulo_pagina");
	var_titulo_pagina.innerHTML = parent.titulos_pantallas[parent.znThisPage-1];
	//var_titulo_pagina.style.color = "transparent";
	var titulo_pagina = new createjs.DOMElement(var_titulo_pagina);

	x_titulo_final = 10;
	y_titulo_final = 10;
	y_titulo_inicial = 40;

	if(posicion_personaje_actual == 2){
		x_titulo_inicial = 20;
	} else {
		x_titulo_inicial = 400;
	}
	titulo_pagina.x = x_titulo_inicial;
	titulo_pagina.y = y_titulo_inicial;//bounds_numero_titulo_pagina + radio_circulo_amarillo - 14;
	titulo_pagina.alpha = 0;
	titulo_pagina.scaleY = 0;
	titulo_pagina.skewX = -40;

	if(parent.znPages==1){
	titulo_pagina.visible = false;
	} else {
	titulo_pagina.visible = true;

	}
	titulo_pagina.alpha = 1;

//						cerrar_personaje();
	if(parent.znThisPage<parent.pagina_superior||parent.completado){
	if(tipo!="tipoA"){
	var_titulo_pagina.addEventListener("click", cerrar_personaje);
		}

	}





	////INICIO SIMULADOR////
	console.log($('.simula_app').length,"$('.simula_app').length")

	

	if($('.simula_app').length>0){

		
		titulo_pagina.visible = false;
		

		$('.simula_app').eq(0).fadeIn("fast")

		console.log(Gdatadevdia_json[0],"hkjh")
	 	console.log(Gdatatasas_json[0],"hkjh")
	 	console.log(Gdatanohabiles_json[0],"hkjh",Gdatanohabiles_json.length)

	 	let div_simula = $('.simula_app').length;
	 	let act_simula = 0;
	 	let today = new Date(); 
	 	let date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();  
	 	let date_format = today.getDate()+"/"+(today.getMonth()+1)+'/'+today.getFullYear();  


	 	console.log(today,"today")
	 	console.log(date,"date");

	 	function verificaNoHabil(fecha){
	 		no_hab = false;
	 		for(i = 0; i < Gdatanohabiles_json.length; i++) {
				fecha_nh = parseDate(Gdatanohabiles_json[i].dia);
	 			let fecha_nhf = fecha_nh.getFullYear()+'-'+(fecha_nh.getMonth()+1)+'-'+fecha_nh.getDate();  
	 				//console.log("fecha_nhf",fecha_nhf)

	 			if(fecha==fecha_nhf){
	 				//console.log("fecha",fecha,fecha_nhf)
	 				no_hab = true;

	 				break;
				} 
			}

			return no_hab;
		}

		function parseDate(str) {
			var mdy = str.split('-');
			return new Date(mdy[0], mdy[1]-1, mdy[2]);
		}

		function datediff(first, second) {
				    // Take the difference between the dates and divide by milliseconds per day.
				    // Round to nearest whole number to deal with DST.
					return Math.round((second-first)/(1000*60*60*24));
			}
		function resultadosSimula(){
			

				// Create our number formatter.
				var formatter = new Intl.NumberFormat('en-US', {
				  style: 'currency',
				  currency: 'USD',

				  // These options are needed to round to whole numbers if that's what you want.
				  //minimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)
				  //maximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)
				});



				console.log($('#num_id').val())
				$('.id-clienteint').find(">div").find(">div").text($("#tipo_id option:selected").text() +" "+$('#num_id').val());
				
				$('#tipo-clienteint').text(tipo_clienteint);

				$('.cliente-name').find(">div").find(">div").text($("#name_emp").val());
				
				$('.tipo-operacion').find(">div").find(">div").text($("#tipo_opera").text());
				$('.modalidad').find(">div").find(">div").text($("#modalidad option:selected").text());

				monto = $('#monto').val();
				console.log(monto)
				monto = monto.replace('$','') 
				console.log(monto)
				monto = monto.replace(/,/g,'') 
				console.log(monto)
				monto = parseInt(monto,10)
				console.log(monto)

				montof = formatter.format(monto); /* $2,500.00 */

				$('.monto').find(">div").find(">div").text("USD "+montof);
				$('.fecha_hoy').find(">div").find(">div").text(date_format);


				trm = Gdatatasas_json[0].valor; /* $2,500.00 */
				trmf = formatter.format(trm); /* $2,500.00 */

				//console.log(Gdatatasas_json[0].valor,"trm")
				$(".trm").find(">div").find(">div").text(trmf);

				if(caso_sel==1||caso_sel==2){
					tasa_spot = Gdatatasas_json[2].valor;

				} else {
					tasa_spot = Gdatatasas_json[1].valor;

				}

				tasa_spotf = formatter.format(tasa_spot);

				$('.tasa_spot').find(">div").find(">div").text(tasa_spotf);

				

				
				plazo = datediff(parseDate(date), parseDate(document.getElementById("fvenc").value));

				fecha_venc = parseDate(document.getElementById("fvenc").value);
	 			let fecha_vencf = fecha_venc.getFullYear()+'-'+(fecha_venc.getMonth()+1)+'-'+fecha_venc.getDate();  
	 			let fecha_vencfformat = fecha_venc.getDate()+"/"+(fecha_venc.getMonth()+1)+"/"+fecha_venc.getFullYear();  
	 			//verificaNoHabil(fecha_vencf)
				$('.fecha_venc').find(">div").find(">div").text(fecha_vencfformat);

				$('.plazo').find(">div").find(">div").text(plazo);
				
				if(caso_sel==1||caso_sel==2){
					devalua = Gdatadevdia_json[plazo-1].offer;
				} else {
					devalua = Gdatadevdia_json[plazo-1].bid;
				}

				devaluaf = parseFloat(devalua).toFixed(2);


				$('.devaluacion').find(">div").find(">div").text(devaluaf+"%");

				tasa_forward = tasa_spot * (((1+(devalua/100))**(plazo/365)))
				console.log(tasa_forward,"tasa_forward")

				tasa_forwardx = Math.ceil(tasa_forward * 100) / 100;
				

				console.log(tasa_forwardx,"tasa_forwardx"); // "2.01"
				//console.log(formatterx.format(1.345)); // "1.35"


				//tasa_forward = tasa_forward.toFixed(2)
				//tasa_forwardx = Math.round((tasa_forward + Number.EPSILON) * 100) / 100
				//tasa_forwardx = (Math.round((tasa_forward + Number.EPSILON) * 100) / 100).toFixed(2);

				//tasa_forwardx = parseFloat(Math.round(tasa_forward * 100) / 100).toFixed(2);
				//console.log(tasa_forwardx,"tasa_forwardx")
				 
				tasa_forwardf = formatter.format(tasa_forwardx);
				//console.log(tasa_forwardx)

				$('.tasa_forw').find(">div").find(">div").text(tasa_forwardf);

				valor_pesos = tasa_forwardx*monto;

				
				valor_pesosf = formatter.format(valor_pesos); /* $2,500.00 */

				$('.valor_pesos').find(">div").find(">div").text("COP "+valor_pesosf);
				
				

				$('.modalidad-result').find(">div").find(">div").text($("#modalidad option:selected").text());
				$('.fechaliquida-result').find(">div").find(">div").text(fecha_vencfformat);

				if(caso_sel==1){

					$(".liquida-3").find('.liquida-a').find("span").text("Tasa Forward Pactada");
					$(".liquida-3").find('.liquida-a').find(".tooltip").show();

					$(".liquida-3").find('.liquida-a').find(".tooltiptext").text("Valor de la tasa Forward pactada.");
					//console.log(valor_pesosf,"valor_pesosf")
					$(".liquida-3").find(".liquida-b").find(">div").find(">div").text(tasa_forwardf);
					

					$(".liquida-4").find('.liquida-a').find("span").html("Valor a pagar por el cliente a la entidad financiera");
					$(".liquida-4").find('.liquida-a').find(".tooltiptext").text("Valor que el cliente debe pagar a la entidad financiera por los USD que recibirá. No se ve afectado por el comportamiento de la TRM en la fecha de vencimiento. Se liquida multiplicando el monto del Forward pactado por la tasa Forward pactada.");
					$(".liquida-4").find(".liquida-b").find(">div").find(">div").text("COP "+valor_pesosf);


					$(".liquida-5").find('.liquida-a').find("span").html("Monto en USD que recibe el cliente de la entidad financiera");
					$(".liquida-5").find('.liquida-a').find(".tooltiptext").text("Valor del Forward negociado. Independientemente del comportamiento de la TRM del día de vencimiento, el cliente recibe este valor en USD.");
					$(".liquida-5").find(".liquida-b").find(">div").find(">div").text("USD "+montof);

					//console.log("a")
					$(".liquida-6").hide();
					$(".liquida-7").hide();
					//$(".liquida-6").find(".liquida-a").fadeOut(0);
					//$(".liquida-6").find(".liquida-b").fadeOut(0);
					

					$(".resaltado_especialsimula").text("El día del vencimiento el cliente le entrega a la entidad financiera el valor acordado en pesos (monto negociado en USD x la Tasa Forward Pactada) y recibe a cambio el monto en dólares para que pueda pagar a su contraparte.");
					//console.log("b")

				} else if(caso_sel==2){
					$(".liquida-6").show();
					$(".liquida-7").show();

					$(".liquida-3").find('.liquida-a').find(">div").find(">div").find(">span").text("Monto en USD");
					$(".liquida-3").find('.liquida-a').find(".tooltip").hide();
					//$(".liquida-3").find('.liquida-a').find(".tooltiptext").text("Valor de la tasa Forward pactada.");
					//console.log(valor_pesosf,"valor_pesosf")
					$(".liquida-3").find(".liquida-b").find(">div").find(">div").text("USD "+montof);
					

					$(".liquida-4").find('.liquida-a').find("span").html("TRM estimada para el día de vencimiento");
					$(".liquida-4").find('.liquida-a').find(".tooltiptext").text("Valor supuesto de la TRM para el día de vencimiento.");
					$(".liquida-4").find(".liquida-b").find(">div").find(">div").text($("#trmest").val());

					$(".liquida-5").find('.liquida-a').find("span").html("Tasa Forward Pactada");
					$(".liquida-5").find('.liquida-a').find(".tooltiptext").text("Valor de la tasa Forward pactada.");
					
					tasa_forwardb = formatter.format(tasa_forwardx); /* $2,500.00 */
					
					$(".liquida-5").find(".liquida-b").find(">div").find(">div").text(tasa_forwardb);

					console.log($("#trmest").val(),tasa_forward)
					$(".liquida-6").find('.liquida-a').find("span").html("Diferencia en pesos entre las tasas");
					$(".liquida-6").find('.liquida-a').find(".tooltiptext").text("TRM al día de vencimiento - Tasa Forward.");
					
					trmest = $("#trmest").val().replace("$", "");
					trmest = trmest.replace(",", "");
					console.log(trmest)
					trmest = parseFloat(trmest);//
					console.log(trmest)
					diftasas = trmest - tasa_forwardx;
					diftasas = diftasas.toFixed(2);

					diftasasf = formatter.format(diftasas); /* $2,500.00 */

					$(".liquida-6").find(".liquida-b").find(">div").find(">div").text(diftasasf);

					$(".liquida-7").find('.liquida-a').find(".tooltip").hide();

					console.log(montof,"montof");
					montofb = montof.replace("$", "")
					montofb = montofb.replace(",", "")
					console.log(montofb,"montofb")
					montofb = parseFloat(montofb);
					console.log(montofb,"montofb")
					montofb = montofb.toFixed(2);
					console.log(montofb,"montofb")
					console.log(diftasas)


					if(trmest==tasa_forwardx){
						$(".liquida-7").find('.liquida-a').find(">div").find(">div").find(">span").text("Liquidación");
						
						liquida_val = (diftasas*montofb).toFixed(2);
						liquida_val = formatter.format(liquida_val); /* $2,500.00 */

						$(".liquida-7").find(".liquida-b").find(">div").find(">div").text(liquida_val);

						$(".resaltado_especialsimula").text("Teniendo en cuenta que la TRM del día del vencimiento es igual a la Tasa Forward Pactada y no hay entrega de dólares, no hay saldo a favor del cliente o de la entidad financiera.");
						
					} else if(trmest>tasa_forwardx){
						$(".liquida-7").find('.liquida-a').find(">div").find(">div").find(">span").text("Liquidación a favor del cliente");
						liquida_val = (diftasas*montofb).toFixed(2);
						liquida_val = formatter.format(liquida_val); /* $2,500.00 */
						
						$(".liquida-7").find(".liquida-b").find(">div").find(">div").text(liquida_val);

						$(".resaltado_especialsimula").text("Como la TRM del día del vencimiento es mayor a la Tasa Forward Pactada y no hay entrega de dólares, el cliente recibe de la entidad financiera la diferencia entre la TRM del día del vencimiento y la Tasa Forward Pactada, multiplicada por el monto del Forward. Debes tener en cuenta que los valores que giran las entidades financieras están sujetos a los impuestos establecidos para dicho tipo de operaciones.");


					} else if(trmest<tasa_forwardx){
						$(".liquida-7").find('.liquida-a').find(">div").find(">div").find(">span").text("Liquidación a favor de la entidad financiera");
						liquida_val = (diftasas*montofb*-1).toFixed(2);
		      			//liquida_val = formatCurrency(liquida_val);

						liquida_val = formatter.format(liquida_val); /* $2,500.00 */


						$(".liquida-7").find(".liquida-b").find(">div").find(">div").text(liquida_val);

						$(".resaltado_especialsimula").text("En este caso, como la TRM del día del vencimiento es menor a la Tasa Forward Pactada y no hay entrega de dólares, el cliente le debe girar a la entidad financiera la diferencia entre la TRM del día del vencimiento y la Tasa Forward Pactada, multiplicada por el monto del Forward.");


					}

				} else if(caso_sel==3){

					$(".liquida-3").find('.liquida-a').find(">div").find(">div").find(">span").text("Tasa Forward Pactada");
					$(".liquida-3").find('.liquida-a').find(".tooltip").show();

					$(".liquida-3").find('.liquida-a').find(".tooltiptext").text("Valor de la tasa Forward pactada.");
					//console.log(valor_pesosf,"valor_pesosf")
					$(".liquida-3").find(".liquida-b").find(">div").find(">div").text(tasa_forwardf);
					

					$(".liquida-4").find('.liquida-a').find("span").html("Monto en USD a entregar por el exportador a la entidad financiera");
					$(".liquida-4").find('.liquida-a').find(".tooltiptext").text("Valor del Forward que se negoció. Es el monto en dólares que el cliente esta recibiendo del exterior, los cuales entregará a la entidad financiera.");
					$(".liquida-4").find(".liquida-b").find(">div").find(">div").text("USD "+montof);


					$(".liquida-5").find('.liquida-a').find("span").html("Monto en pesos que recibe el cliente de la entidad financiera");
					$(".liquida-5").find('.liquida-a').find(".tooltiptext").text("Valor que la entidad financiera le paga al cliente por los dólares que recibirá. No se ve afectado por el comportamiento de la TRM en la fecha de vencimiento. Se liquida multiplicando el monto del Forward pactado por la tasa Forward pactada.");
					$(".liquida-5").find(".liquida-b").find(">div").find(">div").text("COP "+valor_pesosf);

					//console.log("a")
					$(".liquida-6").hide();
					$(".liquida-7").hide();
					//$(".liquida-6").find(".liquida-a").fadeOut(0);
					//$(".liquida-6").find(".liquida-b").fadeOut(0);
					

					$(".resaltado_especialsimula").text("El día del vencimiento, el cliente le entrega a la entidad financiera el monto acordado en dólares y recibe a cambio el valor acordado en pesos (monto negociado en USD x la Tasa Forward Pactada).");
					//console.log("b")

				} else if(caso_sel==4){
					$(".liquida-6").show();
					$(".liquida-7").show();

					$(".liquida-3").find('.liquida-a').find(">div").find(">div").find(">span").text("Monto en USD");
					$(".liquida-3").find('.liquida-a').find(".tooltip").hide();
					//$(".liquida-3").find('.liquida-a').find(".tooltiptext").text("Valor de la tasa Forward pactada.");
					//console.log(valor_pesosf,"valor_pesosf")
					$(".liquida-3").find(".liquida-b").find(">div").find(">div").text("USD "+montof);
					

					$(".liquida-4").find('.liquida-a').find("span").html("TRM estimada para el día de vencimiento");
					$(".liquida-4").find('.liquida-a').find(".tooltiptext").text("Valor supuesto de la TRM para el día de vencimiento.");
					$(".liquida-4").find(".liquida-b").find(">div").find(">div").text($("#trmest").val());

					$(".liquida-5").find('.liquida-a').find("span").html("Tasa Forward Pactada");
					$(".liquida-5").find('.liquida-a').find(".tooltiptext").text("Valor de la tasa Forward pactada.");
					
					tasa_forwardb = formatter.format(tasa_forwardx); /* $2,500.00 */
					
					$(".liquida-5").find(".liquida-b").find(">div").find(">div").text(tasa_forwardb);

					console.log($("#trmest").val(),tasa_forward)
					$(".liquida-6").find('.liquida-a').find("span").html("Diferencia en pesos entre las tasas");
					$(".liquida-6").find('.liquida-a').find(".tooltiptext").text("Tasa Forward – TRM al día de vencimiento.");
					
					trmest = $("#trmest").val().replace("$", "");
					trmest = trmest.replace(",", "");
					console.log(trmest)
					trmest = parseFloat(trmest);//
					console.log(trmest)
					diftasas = tasa_forwardx - trmest;
					diftasas = diftasas.toFixed(2);
					diftasasf = formatter.format(diftasas); /* $2,500.00 */


					$(".liquida-6").find(".liquida-b").find(">div").find(">div").text(diftasasf);

					$(".liquida-7").find('.liquida-a').find(".tooltip").hide();

					console.log(montof,"montof");
					montofb = montof.replace("$", "")
					montofb = montofb.replace(",", "")
					console.log(montofb,"montofb")
					montofb = parseFloat(montofb);
					console.log(montofb,"montofb")
					montofb = montofb.toFixed(2);
					console.log(montofb,"montofb")
					console.log(diftasas)


					if(trmest==tasa_forwardx){
						$(".liquida-7").find('.liquida-a').find(">div").find(">div").find(">span").text("Liquidación");
						
						liquida_val = (diftasas*montofb).toFixed(2);
						liquida_val = formatter.format(liquida_val); /* $2,500.00 */

						$(".liquida-7").find(".liquida-b").find(">div").find(">div").text(liquida_val);

						$(".resaltado_especialsimula").text("Teniendo en cuenta que la TRM del día del vencimiento es igual a la Tasa Forward Pactada y no hay entrega de dólares, no hay saldo a favor del cliente o de la entidad financiera.");
						
					} else if(trmest>tasa_forwardx){
						$(".liquida-7").find('.liquida-a').find(">div").find(">div").find(">span").text("Liquidación a favor de la entidad financiera");
						liquida_val = (diftasas*montofb*-1).toFixed(2);
						liquida_val = formatter.format(liquida_val); /* $2,500.00 */
						
						$(".liquida-7").find(".liquida-b").find(">div").find(">div").text(liquida_val);

						$(".resaltado_especialsimula").text(" Como la TRM del día del vencimiento es mayor a la Tasa Forward Pactada y no hay entrega de dólares, el cliente le debe girar a la entidad financiera la diferencia entre la TRM del día del vencimiento y la Tasa Forward Pactada, multiplicada por el monto del Forward.");


					} else if(trmest<tasa_forwardx){
						$(".liquida-7").find('.liquida-a').find(">div").find(">div").find(">span").text(" Liquidación a favor del cliente");
						liquida_val = (diftasas*montofb).toFixed(2);
		      			//liquida_val = formatCurrency(liquida_val);

						liquida_val = formatter.format(liquida_val); /* $2,500.00 */


						$(".liquida-7").find(".liquida-b").find(">div").find(">div").text(liquida_val);

						$(".resaltado_especialsimula").text(" En este caso, como la TRM del día del vencimiento es menor a la Tasa Forward Pactada y no hay entrega de dólares, el cliente recibe de la entidad financiera la diferencia entre la TRM del día del vencimiento y la Tasa Forward Pactada, multiplicada por el monto del Forward.  Debes tener en cuenta que los valores que giran las entidades financieras están sujetos a los impuestos establecidos para dicho tipo de operaciones.");


					}

				}



				act_simula++
				$('.simula_app').eq(act_simula).fadeIn("fast");
				
			


		}

		function validaCamposForm(){
			console.log($("#tipo_id option:selected").val(),$("#tipo_id option:selected").val()=="")
			;
			campos_vacios = 0;
			fecha_valida = false;

			if($("#tipo_id option:selected").val()==""){
				$("#tipo_id").addClass("field_incomplete");
				campos_vacios++
			} else {
				$("#tipo_id").removeClass("field_incomplete");
			}

			if($("#num_id").val()==""){
				$("#num_id").addClass("field_incomplete");
				campos_vacios++
				
			} else {
				$("#num_id").removeClass("field_incomplete");

			}

			if($("#name_emp").val()==""){
				$("#name_emp").addClass("field_incomplete");
				campos_vacios++
			} else {
				$("#name_emp").removeClass("field_incomplete");
			}

			if($("#importa_exporta option:selected").val()==""){
				$("#importa_exporta").addClass("field_incomplete");
				campos_vacios++
			} else {
				$("#importa_exporta").removeClass("field_incomplete");
			}

			if($("#modalidad option:selected").val()==""){
				$("#modalidad").addClass("field_incomplete");
				campos_vacios++
			} else {
				$("#modalidad").removeClass("field_incomplete");
			}

			if($("#monto").val()==""){
				$("#monto").addClass("field_incomplete");
				campos_vacios++
			} else {
				$("#monto").removeClass("field_incomplete");
			}

			if($("#fvenc").val()==""){
				$("#fvenc").addClass("field_incomplete");
				campos_vacios++
			} else {

				plazo = datediff(parseDate(date), parseDate(document.getElementById("fvenc").value));

					console.log(plazo)

					
				if(plazo<=0){
					$("#fvenc").addClass("field_incomplete");
					$(".error-formsimula").text("La fecha de vencimiento debe ser posterior a la fecha de negociación (fecha actual).");

				} else if(plazo>365){
					$("#fvenc").addClass("field_incomplete");

					$(".error-formsimula").text("Esta herramienta permite realizar simulaciones de operaciones Forward a máximo un (1) año. Por favor ingresa una fecha de vencimiento que no supere dicho plazo.");

				} else {
					fecha_venc = parseDate(document.getElementById("fvenc").value);
	 				let fecha_vencf = fecha_venc.getFullYear()+'-'+(fecha_venc.getMonth()+1)+'-'+fecha_venc.getDate();  
	 				no_habil = verificaNoHabil(fecha_vencf);
	 				console.log(no_habil)

	 				if(no_habil){
	 					$("#fvenc").addClass("field_incomplete");

						$(".error-formsimula").text("La fecha indicada corresponde a un día no hábil para la liquidación de Forward. Por favor seleccione el siguiente día hábil.");
	 				} else {
	 					fecha_valida = true;
	 					$("#fvenc").removeClass("field_incomplete");

						$(".error-formsimula").text("");
	 				}
				}
				
			}
			console.log($("#modalidad").val())
			if($("#modalidad").val()=="nondeliv"){
				if($("#trmest").val()==""){
					$("#trmest").addClass("field_incomplete");
					campos_vacios++
				} else {
					$("#trmest").removeClass("field_incomplete");
				}
			}

			if(campos_vacios>0){
				if(campos_vacios==1){
					$(".instruccion_interna>div").text("Falta un campo por completar.") 

				} else {
					$(".instruccion_interna>div").text("Faltan completar algunos campos.") 

				}
			}
			if(campos_vacios==0&&fecha_valida){
				//alert("formulario válido")
				$('.simula_app').eq(act_simula).fadeOut(0);
				caso_sel = 0;
				console.log($('#importa_exporta').val(),$('#modalidad').val())
				if($('#importa_exporta').val()=="importa"&&$('#modalidad').val()=="deliv"){
					console.log("caso 1")
					tipo_clienteint = "importador";
					caso_sel = 1;

				} else if($('#importa_exporta').val()=="importa"&&$('#modalidad').val()=="nondeliv"){
					console.log("caso 2")
					tipo_clienteint = "importador";
					caso_sel = 2;


				} else if($('#importa_exporta').val()=="exporta"&&$('#modalidad').val()=="deliv"){
					console.log("caso 3")
					tipo_clienteint = "exportador";
					caso_sel = 3;


				} else if($('#importa_exporta').val()=="exporta"&&$('#modalidad').val()=="nondeliv"){
					console.log("caso 4")
					tipo_clienteint = "exportador";
					caso_sel = 4;


				}

				if(tipo_clienteint == "exportador"){
					$(".sub_simula").text("EMPRESA EXPORTADORA")
				} else {
					$(".sub_simula").text("EMPRESA IMPORTADORA")

				}
				console.log(caso_sel)
				resultadosSimula();
			}

		}
		$('#importa_exporta').change(function(){
	    	if($(this).val()=="importa"){
	    		$("#tipo_opera").text("Compra");
	    	} else if ($(this).val()=="exporta"){
	    		$("#tipo_opera").text("Venta");

	    	}
		})
		$('#modalidad').change(function(){
			console.log($(this).val()=="nondeliv","holaa")
	    	if ($(this).val()=="nondeliv"){
	    		$(".fieldtrmest").show();

	    	} else {
	    		$(".fieldtrmest").hide();

	    	}
		})
	 	
		$( ".btn_simulanext" ).click(function() {

			


	 		
			
			if(act_simula==1){
				validaCamposForm();
			
			} else {
				$('.simula_app').eq(act_simula).fadeOut(0);
				act_simula++
				$('.simula_app').eq(act_simula).fadeIn("fast");

			}
	  	});

	  	// Jquery Dependency

		$("input[data-type='currency']").bind({
		    keyup: function() {
		      formatCurrency($(this));
		    },
		    blur: function() { 
		      formatCurrency($(this), "blur");
		    }
		});


		function formatNumber(n) {
		  // format number 1000000 to 1,234,567
		  return n.replace(/\D/g, "").replace(/\B(?=(\d{3})+(?!\d))/g, ",")
		}


		function formatCurrency(input, blur) {
		  // appends $ to value, validates decimal side
		  // and puts cursor back in right position.
		  
		  // get input value
		  var input_val = input.val();
		  
		  // don't validate empty input
		  if (input_val === "") { return; }
		  
		  // original length
		  var original_len = input_val.length;

		  // initial caret position 
		  var caret_pos = input.prop("selectionStart");
		    
		  // check for decimal
		  if (input_val.indexOf(".") >= 0) {

		    // get position of first decimal
		    // this prevents multiple decimals from
		    // being entered
		    var decimal_pos = input_val.indexOf(".");

		    // split number by decimal point
		    var left_side = input_val.substring(0, decimal_pos);
		    var right_side = input_val.substring(decimal_pos);

		    // add commas to left side of number
		    left_side = formatNumber(left_side);

		    // validate right side
		    right_side = formatNumber(right_side);
		    
		    // On blur make sure 2 numbers after decimal
		    if (blur === "blur") {
		      right_side += "00";
		    }
		    
		    // Limit decimal to only 2 digits
		    right_side = right_side.substring(0, 2);

		    // join number by .
		    input_val = "$" + left_side + "." + right_side;

		  } else {
		    // no decimal entered
		    // add commas to number
		    // remove all non-digits
		    input_val = formatNumber(input_val);
		    input_val = "$" + input_val;
		    
		    // final formatting
		    if (blur === "blur") {
		      input_val += ".00";
		    }
		  }
		  
		  // send updated string to input
		  input.val(input_val);

		  // put caret back in the right position
		  var updated_len = input_val.length;
		  caret_pos = updated_len - original_len + caret_pos;
		  input[0].setSelectionRange(caret_pos, caret_pos);
		}



		/*
		$( ".descarga_excel" ).click(function() {
			//$(".liquida-7").show();

			//document.getElementById("descarga_excel").addEventListener("click", e => {
			  let table = document.querySelector("#tabla-excel");
			  console.log("descarga")
			  TableToExcel.convert(table);
			  
		});
		*/

	  	$( ".btn_simulalast" ).click(function() {
	 		$('.simula_app').eq(act_simula).fadeOut(0);
			act_simula--
			$('.simula_app').eq(act_simula).fadeIn("fast");
	  	});

		$(".fieldtrmest").hide();
	}

////FIN SIMULADOR////



	startX = 85;
	startY = 65;		
	var line = new createjs.Shape();
	line.graphics.setStrokeStyle(2);
	line.graphics.beginStroke("#CCCCCC");
	line.graphics.moveTo(startX, startY);
	line.graphics.lineTo(startX, 440);
	line.graphics.endStroke();
	line.scaleX = 1; 
	line.alpha = 0; 

	start2X = 87;
	start2Y = 65;		
	var line2 = new createjs.Shape();
	line2.graphics.setStrokeStyle(1);
	line2.graphics.beginStroke("#CCCCCC");
	line2.graphics.moveTo(start2X, start2Y);
	line2.graphics.lineTo(start2X, 440);
	line2.graphics.endStroke();
	line2.scaleX = 1; 
	line2.alpha = 0; 



	var numero_arreglo_sensibles;
	var sensible_actual;
	var a = {val: false};
	var consultado_actual;

	
	
	var elementos_p1;
	var sensibles;
	var consultados_clic;
	var requeridos;

	var total_circulos = [];

	var total_circulos_seleccionados = [];

	var iconos_circulos = [];

	var imagenes_pantalla;

	contenedor_circulos = [];
	var contenedor_circulos_html = [];
	ancho_circulos_html = 100;
	alto_circulos_html = 100;

	if(cantidad_circulos>0 && tipo=="tipo3"){

	for (i = 0; i < cantidad_circulos; i++) { 
	//CREA ELEMENTOS COMUNES PANTALLAS
	////TÍTULOS
	titulo_cx = document.createElement('DIV');
	titulo_cx.setAttribute('id', 'titulo_c'+i); 
	titulo_cx.className = "titulo_c2";
	document.body.appendChild(titulo_cx);
	$("#titulo_c"+i).html($("#contenido_c"+i).find("h1").eq(0).text())
	
	
	////BOTONES
	circulos_botones_cerrados = document.createElement('DIV');
	circulos_botones_cerrados.setAttribute('id', 'circ_btn'+i); 
	circulos_botones_cerrados.className = "circulos_botones_cerrados"
	document.body.appendChild(circulos_botones_cerrados);

	btn_cerrado = document.createElement('DIV');
	btn_cerrado.setAttribute('id', 'est_btn'+i); 
	btn_cerrado.className = "btn_cerrado"
	document.getElementById('circ_btn'+i).appendChild(btn_cerrado);

	cb_int_cerrado = document.createElement('DIV');
	cb_int_cerrado.setAttribute('id', 'cb'+i); 
	cb_int_cerrado.className = "cb_int_cerrado"
	document.getElementById('circ_btn'+i).appendChild(cb_int_cerrado);

	if(btn_zonaper){
		$("#cb"+i).html("<table><td>"+$("#titulo_c"+i).html()+"</td></table>")

	} else {
		if(parent.tipo_curso!="plataformas"){
			$("#cb"+i).html("<table><td><img src='images/i"+i+".png'></td></table>")
		}
	}

	numero_titulo = document.createElement('DIV');
	numero_titulo.setAttribute('id', 'numero_titulo'+i); 
	numero_titulo.className = "numero_titulo_c2"
	document.getElementById('titulo_c'+i).appendChild(numero_titulo);

	}

	ancho_circulos_html = document.getElementById('circ_btn0').clientWidth;
	alto_circulos_html = document.getElementById('circ_btn0').clientHeight;

	
	

	}


	var x_original_tc = [];

	var x_original_cg = []
	var y_original_cg = []


	var y_circulos_g = 270;

	var sensibles = [];

	var total_pop = [];

	

	var total_zona_sensible = [];
	//////ACA PERSOBAJE
	///ROSTRO
	setInterval(function () {
	azar_ojos = Math.floor((Math.random() * 5));
	if(azar_ojos<4){
		ojos1 = ojos_abiertos_per1;
		ojos2 = ojos_abiertos_per1;
	} else {
		ojos1 = ojos_abiertos_per1;
		ojos2 = ojos_abiertos_per1;

	}
	//console.log(azar_ojos);
	//createjs.Tween.get(ojos1).to({alpha:0},velocidad_rapida);
	createjs.Tween.get(ojos_abiertos_per1).to({alpha:0},velocidad_rapida);
	createjs.Tween.get(ojos_abiertos_2_per1).to({alpha:0},velocidad_rapida);
	createjs.Tween.get(ojos_cerrados_per1).to({alpha:1},velocidad_rapida);
	createjs.Tween.get(ojos_cerrados_2_per1).to({alpha:1},velocidad_rapida);
	createjs.Tween.get(ojos_cerrados_per1).wait(velocidad_rapida).to({alpha:0},velocidad_lenta);
	createjs.Tween.get(ojos_cerrados_2_per1).wait(velocidad_rapida).to({alpha:0},velocidad_lenta);
	createjs.Tween.get(ojos_abiertos_per1).wait(velocidad_rapida).to({alpha:1},velocidad_lenta);
	createjs.Tween.get(ojos_abiertos_2_per1).wait(velocidad_rapida).to({alpha:1},velocidad_lenta);

	}, 3000);


	setInterval(function () {
	azar_ojos = Math.floor((Math.random() * 5));
	if(azar_ojos<4){
		ojos1 = ojos_abiertos_per1;
		ojos2 = ojos_abiertos_per1;
	} else {
		ojos1 = ojos_abiertos_per1;
		ojos2 = ojos_abiertos_per1;

	}
	//console.log(azar_ojos);
	//createjs.Tween.get(ojos1).to({alpha:0},velocidad_rapida);
	
	createjs.Tween.get(ojos_abiertos_per2).to({alpha:0},velocidad_rapida);
	createjs.Tween.get(ojos_abiertos_2_per2).to({alpha:0},velocidad_rapida);
	createjs.Tween.get(ojos_cerrados_per2).to({alpha:1},velocidad_rapida);
	createjs.Tween.get(ojos_cerrados_2_per2).to({alpha:1},velocidad_rapida);
	createjs.Tween.get(ojos_cerrados_per2).wait(velocidad_rapida).to({alpha:0},velocidad_lenta);
	createjs.Tween.get(ojos_cerrados_2_per2).wait(velocidad_rapida).to({alpha:0},velocidad_lenta);
	createjs.Tween.get(ojos_abiertos_per2).wait(velocidad_rapida).to({alpha:1},velocidad_lenta);
	createjs.Tween.get(ojos_abiertos_2_per2).wait(velocidad_rapida).to({alpha:1},velocidad_lenta);
	}, 3000);

	setInterval(function () {
	azar_ojos = Math.floor((Math.random() * 5));
	if(azar_ojos<4){
		ojos1 = ojos_abiertos_per1;
		ojos2 = ojos_abiertos_per1;
	} else {
		ojos1 = ojos_abiertos_per1;
		ojos2 = ojos_abiertos_per1;

	}
	//console.log(azar_ojos);
	//createjs.Tween.get(ojos1).to({alpha:0},velocidad_rapida);
	
	createjs.Tween.get(ojos_abiertos_per3).to({alpha:0},velocidad_rapida);
	createjs.Tween.get(ojos_abiertos_2_per3).to({alpha:0},velocidad_rapida);
	createjs.Tween.get(ojos_cerrados_per3).to({alpha:1},velocidad_rapida);
	createjs.Tween.get(ojos_cerrados_2_per3).to({alpha:1},velocidad_rapida);
	createjs.Tween.get(ojos_cerrados_per3).wait(velocidad_rapida).to({alpha:0},velocidad_lenta);
	createjs.Tween.get(ojos_cerrados_2_per3).wait(velocidad_rapida).to({alpha:0},velocidad_lenta);
	createjs.Tween.get(ojos_abiertos_per3).wait(velocidad_rapida).to({alpha:1},velocidad_lenta);
	createjs.Tween.get(ojos_abiertos_2_per3).wait(velocidad_rapida).to({alpha:1},velocidad_lenta);
	}, 3000);


	setInterval(function () {
	azar_ojos = Math.floor((Math.random() * 5));
	if(azar_ojos<4){
		ojos1 = ojos_abiertos_per1;
		ojos2 = ojos_abiertos_per1;
	} else {
		ojos1 = ojos_abiertos_per1;
		ojos2 = ojos_abiertos_per1;

	}
	//console.log(azar_ojos);
	//createjs.Tween.get(ojos1).to({alpha:0},velocidad_rapida);
	
	createjs.Tween.get(ojos_abiertos_per4).to({alpha:0},velocidad_rapida);
	createjs.Tween.get(ojos_abiertos_2_per4).to({alpha:0},velocidad_rapida);
	createjs.Tween.get(ojos_cerrados_per4).to({alpha:1},velocidad_rapida);
	createjs.Tween.get(ojos_cerrados_2_per4).to({alpha:1},velocidad_rapida);
	createjs.Tween.get(ojos_cerrados_per4).wait(velocidad_rapida).to({alpha:0},velocidad_lenta);
	createjs.Tween.get(ojos_cerrados_2_per4).wait(velocidad_rapida).to({alpha:0},velocidad_lenta);
	createjs.Tween.get(ojos_abiertos_per4).wait(velocidad_rapida).to({alpha:1},velocidad_lenta);
	createjs.Tween.get(ojos_abiertos_2_per4).wait(velocidad_rapida).to({alpha:1},velocidad_lenta);
	}, 3000);


	setInterval(function () {
	var azar_2 = Math.floor((Math.random() * 10) + 1)
	if (ceja_izquierda_per1.y == y_ceja_izquierda_per1 && azar_2 < 5){
		createjs.Tween.get(ceja_izquierda_per1).to({y:y_ceja_izquierda_per1- 2},velocidad_rapida);
		createjs.Tween.get(ceja_izquierda_2_per1).to({y:y_ceja_izquierda_per1- 2},velocidad_rapida);
	} else{
		createjs.Tween.get(ceja_izquierda_per1).to({y:y_ceja_izquierda_per1},velocidad_rapida);
		createjs.Tween.get(ceja_izquierda_2_per1).to({y:y_ceja_izquierda_per1},velocidad_rapida);
	}
	}, 4000);

	setInterval(function () {
	var azar_2 = Math.floor((Math.random() * 10) + 1)
	if (ceja_izquierda_per2.y == y_ceja_izquierda_per2 && azar_2 < 5){
		createjs.Tween.get(ceja_izquierda_per2).to({y:y_ceja_izquierda_per2- 2},velocidad_rapida);
		createjs.Tween.get(ceja_izquierda_2_per2).to({y:y_ceja_izquierda_per2- 2},velocidad_rapida);
	} else{
		createjs.Tween.get(ceja_izquierda_per2).to({y:y_ceja_izquierda_per2},velocidad_rapida);
		createjs.Tween.get(ceja_izquierda_2_per2).to({y:y_ceja_izquierda_per2},velocidad_rapida);
	}
	}, 4000);


	setInterval(function () {
	var azar_2 = Math.floor((Math.random() * 10) + 1)
	if (ceja_izquierda_per3.y == y_ceja_izquierda_per3 && azar_2 < 5){
		createjs.Tween.get(ceja_izquierda_per3).to({y:y_ceja_izquierda_per3- 2},velocidad_rapida);
		createjs.Tween.get(ceja_izquierda_2_per3).to({y:y_ceja_izquierda_per3- 2},velocidad_rapida);
	} else{
		createjs.Tween.get(ceja_izquierda_per3).to({y:y_ceja_izquierda_per3},velocidad_rapida);
		createjs.Tween.get(ceja_izquierda_2_per3).to({y:y_ceja_izquierda_per3},velocidad_rapida);
	}
	}, 4000);

	setInterval(function () {
	var azar_2 = Math.floor((Math.random() * 10) + 1)
	if (ceja_izquierda_per4.y == y_ceja_izquierda_per4 && azar_2 < 5){
		createjs.Tween.get(ceja_izquierda_per4).to({y:y_ceja_izquierda_per4- 2},velocidad_rapida);
		createjs.Tween.get(ceja_izquierda_2_per4).to({y:y_ceja_izquierda_per4- 2},velocidad_rapida);
	} else{
		createjs.Tween.get(ceja_izquierda_per4).to({y:y_ceja_izquierda_per4},velocidad_rapida);
		createjs.Tween.get(ceja_izquierda_2_per4).to({y:y_ceja_izquierda_per4},velocidad_rapida);
	}
	}, 4000);



	setInterval(function () {
	var azar_3 = Math.floor((Math.random() * 10) + 1)
	if (ceja_derecha_per1.y == y_ceja_derecha_per1 && azar_3 < 5){
		createjs.Tween.get(ceja_derecha_per1).to({y:y_ceja_derecha_per1 - 2},velocidad_rapida);
		createjs.Tween.get(ceja_derecha_2_per1).to({y:y_ceja_derecha_per1 - 2},velocidad_rapida);
	} else{
		createjs.Tween.get(ceja_derecha_per1).to({y:y_ceja_derecha_per1},velocidad_rapida);
		createjs.Tween.get(ceja_derecha_2_per1).to({y:y_ceja_derecha_per1},velocidad_rapida);
	}
	}, 4000);

	setInterval(function () {
	var azar_3 = Math.floor((Math.random() * 10) + 1)
	if (ceja_derecha_per2.y == y_ceja_derecha_per2 && azar_3 < 5){
		createjs.Tween.get(ceja_derecha_per2).to({y:y_ceja_derecha_per2 - 2},velocidad_rapida);
		createjs.Tween.get(ceja_derecha_2_per2).to({y:y_ceja_derecha_per2 - 2},velocidad_rapida);
	} else{
		createjs.Tween.get(ceja_derecha_per2).to({y:y_ceja_derecha_per2},velocidad_rapida);
		createjs.Tween.get(ceja_derecha_2_per2).to({y:y_ceja_derecha_per2},velocidad_rapida);
	}
	}, 4000);
	setInterval(function () {
	var azar_3 = Math.floor((Math.random() * 10) + 1)
	if (ceja_derecha_per3.y == y_ceja_derecha_per3 && azar_3 < 5){
		createjs.Tween.get(ceja_derecha_per3).to({y:y_ceja_derecha_per3 - 2},velocidad_rapida);
		createjs.Tween.get(ceja_derecha_2_per3).to({y:y_ceja_derecha_per3 - 2},velocidad_rapida);
	} else{
		createjs.Tween.get(ceja_derecha_per3).to({y:y_ceja_derecha_per3},velocidad_rapida);
		createjs.Tween.get(ceja_derecha_2_per3).to({y:y_ceja_derecha_per3},velocidad_rapida);
	}
	}, 4000);

	setInterval(function () {
	var azar_3 = Math.floor((Math.random() * 10) + 1)
	if (ceja_derecha_per4.y == y_ceja_derecha_per4 && azar_3 < 5){
		createjs.Tween.get(ceja_derecha_per4).to({y:y_ceja_derecha_per4 - 2},velocidad_rapida);
		createjs.Tween.get(ceja_derecha_2_per4).to({y:y_ceja_derecha_per4 - 2},velocidad_rapida);
	} else{
		createjs.Tween.get(ceja_derecha_per4).to({y:y_ceja_derecha_per4},velocidad_rapida);
		createjs.Tween.get(ceja_derecha_2_per4).to({y:y_ceja_derecha_per4},velocidad_rapida);
	}
	}, 4000);


	y_contenidos_final = 70;
	y_contenidos_final_2 = 70;
	y_contenidos_final_3 = 100;
	y_contenidos_abajo_3 = y_contenidos_final_3 //+ 40;
	y_contenidos_arriba_3 = y_contenidos_final_3 //- 40;

	x_contenidos_final_3 = 0;
	total_textos = []

	var_globo_texto_personaje = document.getElementById('cont_globo_texto');
		ancho_globo_texto_personaje = var_globo_texto_personaje.clientWidth;
		
		globo_texto_personaje = new createjs.DOMElement(var_globo_texto_personaje);
		
		if (posicion_personaje_actual==1){
			x_globo_texto_personaje = x_personaje + bounds_personaje_per1.width + 100;
			x_globo_texto_personaje_inicial = x_personaje + bounds_personaje_per1.width;
			document.getElementById('enlace_globo_texto2').style.visibility = "hidden";
		} else {
			x_globo_texto_personaje = x_personaje - ancho_globo_texto_personaje - 250;
			document.getElementById('enlace_globo_texto').style.visibility = "hidden";
			x_globo_texto_personaje_inicial = x_personaje - bounds_personaje_per1.width;
		}
		
		globo_texto_personaje.x = x_globo_texto_personaje_inicial;
		globo_texto_personaje.y = 100;
		globo_texto_personaje.scaleX = 0;
		globo_texto_personaje.scaleY = 0;
		globo_texto_personaje.alpha = 0;
		globo_texto_personaje.visible = false;
		total_textos.push(globo_texto_personaje);




		total_mas_personajes = [];
		val_mas_personajes = [];
		contenidos_circulos_html_maspersonaje = [];
		contenidos_circulos_html_maspersonaje_origen = [];
		
		if (cantidad_maspersonaje>0){
			for (i = 0; i < cantidad_maspersonaje; i++) { 
				
				
				var_maspersonaje = document.getElementById("mas_per"+i).parentNode.id;
				contenidos_circulos_html_maspersonaje_origen[i] = var_maspersonaje;


				var var_contenidos_maspersonaje = document.getElementById(var_maspersonaje+"_mp");
				contenidos_circulos_html_maspersonaje[i] = var_contenidos_maspersonaje;

				total_mas_personajes[i] = new createjs.DOMElement(var_contenidos_maspersonaje);
				val_mas_personajes[i] = {val: false};


				if(parent.con_menunumeros_v2){
				x_final_maspersonaje  = 50;
				} else {
				x_final_maspersonaje  = 150;	
				}
				y_final_maspersonaje = 95;
				
				x_inicial_maspersonaje  = canvas.width - 50;
				y_inicial_maspersonaje = canvas.height - 50;
				
				total_mas_personajes[i].visible = true;
				total_mas_personajes[i].x = x_inicial_maspersonaje;
				total_mas_personajes[i].y = y_inicial_maspersonaje;
				total_mas_personajes[i].alpha = 1;
				total_mas_personajes[i].scaleX = 0;
				total_mas_personajes[i].scaleY = 0;
				total_textos.push(total_mas_personajes[i]);

			

				
			}
			
		}


		//instruccion_circulos = document.createElement('DIV');
		//instruccion_circulos.setAttribute('id', 'instruccion_circulos'); 
		//instruccion_circulos.className = "instruccion_circulos"
		//document.body.appendChild(instruccion_circulos);




			var_instruccion_circulos = document.getElementById('instruccion_circulos');
			instruccion_circulos = new createjs.DOMElement(var_instruccion_circulos);
			instruccion_circulos.x = 0;
			instruccion_circulos.y = 115;
			instruccion_circulos.alpha = 0;
			total_textos.push(instruccion_circulos);


			mensaje_instruccion = document.getElementById("instruccion_circulos").innerHTML;

		simbolo_retroalimentacion = document.createElement('DIV');
		simbolo_retroalimentacion.setAttribute('id', 'simbolo_retroalimentacion'); 
		simbolo_retroalimentacion.className = "simbolo_retroalimentacion"
		document.body.appendChild(simbolo_retroalimentacion);

		var var_simbolo_retroalimentacion = document.getElementById('simbolo_retroalimentacion');
		var simbolo_retroalimentacion = new createjs.DOMElement(var_simbolo_retroalimentacion);
		if(parent.con_menunumeros_vhz||parent.con_botonesavance){
			simbolo_retroalimentacion.x = 1170;
		} else {
			simbolo_retroalimentacion.x = 1070;
		}
		simbolo_retroalimentacion.y = 55;
		simbolo_retroalimentacion.regX = 25;
		simbolo_retroalimentacion.regY = 25;
		simbolo_retroalimentacion.alpha = 0;
		total_textos.push(simbolo_retroalimentacion);

		zoom_consultados = [];
		if (cantidad_zoom>0){
			var_zoom = parent.document.getElementById("zoom");
			var_contenido_zoom = parent.document.getElementById("contenido_zoom");
			//var_zoom.style.visibility = "visible";
			//var_zoom.addEventListener("click", clic_equis_zoom);

			var_equis_zoom = parent.document.getElementById("equis_zoom");

			var_equis_zoom.addEventListener("click", clic_equis_zoom);
			var_equis_zoom.addEventListener("mouseover", over_equis_zoom);
			var_equis_zoom.addEventListener("mouseout", out_equis_zoom);
				
			for (i = 0; i < cantidad_zoom; i++) { 
				//console.log(i)
				var_boton_zoom = document.getElementById("boton_zoom"+i);
				total_zooms[i] = var_boton_zoom;

				var_boton_zoom.addEventListener("click", clic_boton_zoom);
				var_boton_zoom.addEventListener("mouseover", over_boton_zoom);
				var_boton_zoom.addEventListener("mouseout", out_boton_zoom);

				if(parent.znThisPage<parent.pagina_superior||parent.completado){
				zoom_consultados[i] = {val: true};
				var_boton_zoom.className = "boton_zoom_visto";
				} else {
				zoom_consultados[i] = {val: false};

				if(parent.navega_lineal){
					if($("#boton_zoom"+i).attr('data-orden')!=0){
						document.getElementById("boton_zoom"+i).className = "boton_zoomx";

					}
				}

				}

			}
			/*
			for (i = 0; i < cantidad_masinfo; i++) { 
				if (tipo == "tipo3") {
					contenidos_circulos_masinfo[i].x = 30;
					contenidos_circulos_masinfo[i].y = 230;
				}
			}
			*/
		}


		function animacionCorrecto(){
			parent.audio_correcto.play();
			
			document.getElementById("simbolo_retroalimentacion").className = "simbolo_retro_corr";
			document.getElementById("simbolo_retroalimentacion").innerHTML = parent.icono_check;

					//if (simbolo_retroalimentacion.alpha != 1){
			simbolo_retroalimentacion.visible = true;
			simbolo_retroalimentacion.scaleX = 0;
			simbolo_retroalimentacion.scaleY = 0;

			createjs.Tween.get(simbolo_retroalimentacion).to({alpha:1,scaleX:1,scaleY:1},velocidad_lenta);


			$("#instruccion_circulos>div").removeClass("color_incorrecto");
			$("#instruccion_circulos>div").addClass("color_correcto");

		}

		function animacionIncorrecto(){
			parent.audio_incorrecto.play();

			document.getElementById("simbolo_retroalimentacion").className = "simbolo_retro_incorr";
			document.getElementById("simbolo_retroalimentacion").innerHTML = parent.icono_wrong;
			
			simbolo_retroalimentacion.visible = true;
			simbolo_retroalimentacion.scaleX = 0;
			simbolo_retroalimentacion.scaleY = 0;

			createjs.Tween.get(simbolo_retroalimentacion).to({alpha:1,scaleX:1,scaleY:1},velocidad_lenta);

			$("#instruccion_circulos>div").addClass("color_incorrecto");
		}

	

	if(tipo == "solo_video"){
		total_imagenes = [
			contenedor_personaje,
			//contenedor_iaudio,
			numero_titulo_pagina
		]
		
		elementos_p1 = [
			contenedor_personaje,
			//contenedor_iaudio
		];
		sensibles = [
			//contenedor_iaudio
		];
		consultados_clic = [a];

		

		document.getElementById('contenido_c0').style.opacity = 1; 
		document.getElementById('contenido_c0').style.visibility = "visible";
		document.getElementById('contenido_c0').style.zIndex = 0;
		//document.getElementById('contenido_c0').style.marginTop = 190+"px";

				

		total_imagenes.push(titulo_pagina,icono_personaje,fondo_p1,contenedor_personaje,contenedor_iaudio,equis);
		
		//console.log(incorrectos.length,correctos.length);
		

	}






	if(tipo == "arrastre_final"){
		total_imagenes = [
			
			
		]
		
	
		
		elementos_p1 = [
			
		];
		sensibles = [
			
		];

	

		document.getElementById('contenido_c0').style.opacity = 1; 
		document.getElementById('contenido_c0').style.visibility = "visible";
		//document.getElementById('contenido_c0').style.zIndex = 0;
		//document.getElementById('contenido_c0').style.marginTop = 150+"px";

		alto_opciones = 10;
		//ancho_opciones = 200;
		padding_opciones = 12;


		opciones = []

		for (i = 0; i < cantidad_circulos; i++) { 
			var var_opciones = document.getElementById("opcion"+i).innerHTML;
			opciones[i] = new createjs.Text(var_opciones, "20px aggtee", "#FFFFFF");
			
			opciones[i].alpha = 1;
			opciones[i].x = padding_opciones/2;
			opciones[i].y = alto_opciones/2;

			opciones.push(opciones[i]);
			var bounds_opciones = opciones[i].getBounds();
			//opciones[i].regX = bounds_opciones.width/2;
			//opciones[i].textAlign = "center";
		
			
		} 

		opciones.splice(-1, 1);

		bounds_opciones = [];

		for (i = 0; i < opciones.length; i++) { 
		var bounds_opcion = opciones[i].getBounds();
		bounds_opciones[i] = bounds_opcion;
		bounds_opciones.push(bounds_opciones[i]);

		}



		fondos = [];

		
		for (i = 0; i < cantidad_circulos; i++) { 
		var Var_fondo = new createjs.Shape();
		Var_fondo.graphics.beginFill("rgb(208,136,59)").drawRoundRect (0, 0, bounds_opciones[i].width+padding_opciones, bounds_opciones[i].height+alto_opciones,5);
		fondos[i] = Var_fondo;
		fondos.push(fondos[i]);
		}

		fondos.splice(-1, 1);


		bounds_fondos = [];

		for (i = 0; i < fondos.length; i++) { 
		var bounds_fondo = fondos[i].getBounds();
		bounds_fondos[i] = bounds_fondo;
		bounds_fondos.push(bounds_fondos[i]);

		}

		
		

		contenedor_opciones=[];
		var ancho_opcion = 15;

		x_original = [];
		y_original = [];
		top_opciones = 153;

		for (i = 0; i < cantidad_circulos; i++) { 

		contenedor_opciones[i] = new createjs.Container();
		contenedor_opciones[i].addChild(fondos[i], opciones[i]);
		contenedor_opciones[i].alpha = 1;
		contenedor_opciones[i].mouseChildren = false;
		
		contenedor_opciones[i].y = top_opciones;
		y_original.push(contenedor_opciones[i].y);

		//document.getElementById("contenedor2").style.width = 0+"px";
		var bounds_cont_opciones = document.getElementById('contenedor2').getBoundingClientRect();
		

		if (i==0){
			contenedor_opciones[i].x = ancho_opcion;
			x_original.push(contenedor_opciones[i].x);
		}
			else {
				ancho_opcion += bounds_opciones[i-1].width;
				ancho_opcion += padding_opciones*1.7;
				contenedor_opciones[i].x = ancho_opcion;
				x_original.push(contenedor_opciones[i].x);

				//console.log(contenedor_opciones[i].x)		
				
				} 
		contenedor_opciones.push(contenedor_opciones[i]);	
		total_imagenes.push(contenedor_opciones[i]);
		sensibles.push(contenedor_opciones[i]);
		
		opcion_actual = contenedor_opciones[i];
		f_opciones_arrastre(opcion_actual);

		}

		contenedor_opciones.splice(-1, 1);


		

		for (i = 0; i < contenedor_opciones.length; i++) { 
		var bounds_contenedor_opcion = contenedor_opciones[i].getBounds();
		bounds_contenedor_opciones[i] = bounds_contenedor_opcion;
		bounds_contenedor_opciones.push(bounds_contenedor_opciones[i]);
		//console.log(bounds_contenedor_opciones[i].x)		
		
		}

		

		ocupados = []
		//console.log(bounds_contenedor_opciones[0].width);
		for (i = 0; i < contenedor_opciones.length; i++) { 
			ocupados[i] = {val: false};
			//console.log(ocupados[i].val);
		}

		//total_imagenes.push(numero_titulo_pagina);


		for (i = 0; i < contenedor_opciones.length; i++) { 
				contenedor_opciones[i].alpha = 1;
				//bounds_contenedor_opciones = [];
				document.getElementById("contenido_c0").style.zIndex = -1;
			}

		alto_enunciados = []

		ancho_enunciados = []

		x_enunciados = []

		y_enunciados = []

		bounds_enunciados = []
			
		for (i = 0; i < contenedor_opciones.length; i++) { 
				var alto_texto_enunciado = document.getElementById('enunciado'+i).clientHeight;
				alto_enunciados[i] = alto_texto_enunciado;
				alto_enunciados.push(alto_enunciados[i]);

				var ancho_texto_enunciado = document.getElementById('enunciado'+i).clientWidth;
				ancho_enunciados[i] = ancho_texto_enunciado;
				ancho_enunciados.push(ancho_enunciados[i]);

				
				//c  = element.offsetLeft - element.scrollLeft + element.clientLeft
				//var hola = document.getElementById('enunciado'+i)
				//var x_texto_enunciado = getPosition(hola)
				

				var bounds_enunciado = document.getElementById('enunciado'+i).getBoundingClientRect();
				bounds_enunciados[i] = bounds_enunciado;
				bounds_enunciados.push(bounds_enunciados[i]);

				
				


				x_enunciados=[]
				//var x_texto_enunciado = document.getElementById('enunciado'+i).offsetLeft - document.getElementById('enunciado'+i).scrollLeft + document.getElementById('enunciado'+i).clientLeft;
				x_enunciados[i] = bounds_enunciados[i].left;
				x_enunciados.push(x_enunciados[i]);

				


				y_enunciados=[]
				//var y_texto_enunciado = document.getElementById('enunciado'+i).offsetTop - document.getElementById('enunciado'+i).scrollTop + document.getElementById('enunciado'+i).clientTop+150;
				y_enunciados[i] = bounds_enunciados[i].top;
				y_enunciados.push(y_enunciados[i]);
			}

			


		
		
	}




	if(tipo == "vf_final"){
		total_imagenes = [

			
		]
		

	
		
		elementos_p1 = [
		
		];
		sensibles = [
			
		];

		

		document.getElementById('contenido_c0').style.opacity = 1; 
		document.getElementById('contenido_c0').style.visibility = "visible";
		document.getElementById('contenido_c0').style.zIndex = 0;
		//document.getElementById('contenido_c0').style.marginTop = 190+"px";

		correctos = [];
		incorrectos = [];
		
		for (i = 0; i < cantidad_circulos; i++) { 
			var_correcta = document.getElementById("correcto"+i);
			correctos[i] = var_correcta;
			correctos.push(correctos[i]);
			
			//total_textos.push(correctos[i]);
			

			opcion_actual = correctos[i];
			f_opciones_vf(opcion_actual);

		}

		correctos.splice(-1, 1);

		for (i = 0; i < cantidad_circulos; i++) { 
			var_incorrecta = document.getElementById("incorrecto"+i);
			incorrectos[i] = var_incorrecta;
			incorrectos.push(incorrectos[i]);

			//total_textos.push(incorrectos[i]);
			
			opcion_actual = incorrectos[i];
			f_opciones_vf(opcion_actual);
	
		}

		incorrectos.splice(-1, 1);

		correctos_vf = []
		for (i = 0; i < cantidad_circulos; i++) { 
			correctos_vf[i] = {val: false};
			//console.log(ocupados[i].val);
			correctos_vf.push(correctos_vf[i]);
		}
		correctos_vf.splice(-1, 1);

		incorrectos_vf = []
		for (i = 0; i < cantidad_circulos; i++) { 
			incorrectos_vf[i] = {val: false};
			//console.log(ocupados[i].val);
			incorrectos_vf.push(incorrectos_vf[i]);
		}
		incorrectos_vf.splice(-1, 1);

		
				

		//total_imagenes.push(numero_titulo_pagina);
		//console.log(incorrectos.length,correctos.length);
		

	}

	if(tipo == "s_final"){

		total_imagenes = [

			
		]
		
	
		
		elementos_p1 = [
		
		];
		sensibles = [
			
		];

	

		document.getElementById('contenido_c0').style.opacity = 1; 
		document.getElementById('contenido_c0').style.visibility = "visible";
		document.getElementById('contenido_c0').style.zIndex = 0;
		//document.getElementById('contenido_c0').style.marginTop = 200+"px";
		//total_textos.push(contenido_principal);



		correctos = [];
		incorrectos = [];

		cantidad_correctas = cantidad_circulos[0];

		for (i = 0; i < cantidad_correctas; i++) { 
			var_correcta = document.getElementById("correcto"+i);
			correctos[i] = var_correcta;
			correctos.push(correctos[i]);
			
			//total_textos.push(correctos[i]);
			

			opcion_actual = correctos[i];
			f_opciones_s_final(opcion_actual);

		}

		correctos.splice(-1, 1);

		cantidad_incorrectas = cantidad_circulos[1];

		for (i = 0; i < cantidad_incorrectas; i++) { 
			var_incorrecta = document.getElementById("incorrecto"+i);
			incorrectos[i] = var_incorrecta;
			incorrectos.push(incorrectos[i]);

			//total_textos.push(incorrectos[i]);
			
			opcion_actual = incorrectos[i];
			f_opciones_s_final(opcion_actual);
	
		}

		incorrectos.splice(-1, 1);

		

		correctos_seleccionados = []
		for (i = 0; i < correctos.length; i++) { 
			correctos_seleccionados[i] = {val: false};
			//console.log(ocupados[i].val);
			correctos_seleccionados.push(correctos_seleccionados[i]);
		}
		//correctos_seleccionados.splice(-1, 1);


		incorrectos_seleccionados = []
		for (i = 0; i < incorrectos.length; i++) { 
			incorrectos_seleccionados[i] = {val: false};
			//console.log(ocupados[i].val);
			incorrectos_seleccionados.push(incorrectos_seleccionados[i]);
		}
		//incorrectos_vf.splice(-1, 1);

		
				


		//total_imagenes.push(numero_titulo_pagina);
		//console.log(incorrectos.length,correctos.length);


	}


	if(tipo == "cuestionario"){
			total_imagenes = [

				
			]
			
		
			
			elementos_p1 = [
			
			];
			sensibles = [
				//contenedor_iaudio,
				flecha_volver,
				//icono_personaje,
				equis
			];

			parent.nuevo_puntaje = 0;
			
		
		//console.log(zoom_consultados);	
			
			cantidad_preguntas = cantidad_circulos;

			cantidad_circulos = 0;

			pregunta_actual = 0;

			var_boton_sig = document.getElementById("inicia_cuestionario");


			var_boton_sig.addEventListener("click", clicSigPreg);

			function clicSigPreg(){

				if(parent.con_sonidoclic){
				parent.audio_clic.play();
			}

				createjs.Tween.get(parent.div_txtmenu).to({scaleX:0},velocidad_lenta*2)//.call(numerosVistos);

		for (i = 0; i < parent.contenedores_circulos_menu.length; i++) { 
			createjs.Tween.get(parent.total_numeros_menu_nav[i],{override:true}).to({alpha:0,scaleX:0,scaleY:1},velocidad_rapida, createjs.Ease.bounceOut);

		}
		createjs.Tween.get(parent.contiene_menunav_n,{override:true}).to({scaleX:0},velocidad_rapida);	
		createjs.Tween.get(parent.contiene_menunav_nhz,{override:true}).to({scaleX:0},velocidad_rapida);	

		
		createjs.Tween.get(parent.arrow_anterior,{override:true}).to({scaleX:0,scaleY:0},velocidad_rapida);	
		createjs.Tween.get(parent.boton_menunav,{override:true}).to({scaleX:0,scaleY:0},velocidad_rapida);	
		
				var_boton_sig.style.visibility = "hidden";
		//if(num_reto<=parent.preguntas_pantallas[parent.znThisPage-1][numero_arreglo_personaje_actual]){

		pregunta_actual++
		document.getElementById("preg_actual_c").innerHTML = pregunta_actual;
		document.getElementById("total_preg_c").innerHTML = cantidad_preguntas;
		
		ifrmp = document.createElement('IFRAME');
		if(pregunta_actual<=cantidad_preguntas){
		if(preg_azar!=false){
			ifrmp.setAttribute("src", "preg"+arr_preg[pregunta_actual-1]+".html");

		} else {
			ifrmp.setAttribute("src", "preg"+pregunta_actual+".html");
		}
		document.getElementById("cantidad_preguntas_cuest").style.visibility = "visible";

	} else {
		ifrmp.setAttribute("src", "resultados.html");
		document.getElementById("cantidad_preguntas_cuest").style.visibility = "hidden";



		if(parent.cantidad_intentos_ev==0||parent.puntaje>=parent.puntaje_aprueba||(parent.cantidad_intentos_ev>0&&parent.cantidad_intentos_evact+1>=parent.cantidad_intentos_ev)){
			if($(".isf").length==0){
				suma_total();

				parent.indica_nav.rotation = 90;
					parent.indica_nav.scaleY = 1;
					
					parent.indica_nav.x = parent.boton_cerrar.x-45 - parent.$("#boton_cerrar").width()/2;
					if(parent.con_botoncerrar){
					createjs.Tween.get(parent.indica_nav,{override:true}).to({visible:true},velocidad_rapida).to({alpha:1,x:parent.boton_cerrar.x-5- parent.$("#boton_cerrar").width()/2},velocidad_media);	
					}
					createjs.Tween.get(parent.indica_nav,{override:true}).to({visible:true},velocidad_rapida).to({alpha:1,x:parent.boton_cerrar.x-5- parent.$("#boton_cerrar").width()/2},velocidad_media);	
			}
		}

	}
		ifrmp.setAttribute('id', 'ifrm'); 
		ifrmp.style.position = "absolute";
		if(parent.con_menunumeros_v2){
		ifrmp.style.width = 1165+"px"//1242;

		} else {
		ifrmp.style.width = 1220+"px"//1242;
		ifrmp.style.margin = 20+"px"//1242;

		}
		ifrmp.style.height = 420+"px";
		ifrmp.style.zIndex = 1;
		ifrmp.scrolling = "no";
		ifrmp.style.border = "none";
		ifrmp.style.borderRadius = "5px";
		ifrmp.style.zIndex = 3;
		
		//$("#contenido_preguntas").fadeTo("fast",0)
			//document.getElementById("contenido_preguntas").innerHTML = "Loader";
		$("#instruccion_evaluacion").find(".item_c").attr("class","item_c")
		$("#instruccion_evaluacion").find(".item_c").html("");

		$("#instruccion_evaluacion").find(".item_c").eq(0).width("100%")
		$("#instruccion_evaluacion").find(".item_c").eq(1).width("0%")
		//$("#instruccion_evaluacion").fadeTo(0,0)
		
		//$("#instruccion_evaluacion").fadeTo(0,0, function(){
			//$("#contenido_preguntas").delay(700).fadeTo("fast",1)
    	//	setTimeout(function(){

			//document.getElementById("contenido_preguntas").innerHTML = "";
			

			$("#instruccion_evaluacion").find(".item_c").eq(0).append("<div id='contenedor_loaderint' class='contenedor_loaderint'><div id='loaderint' class='loaderint'></div></div>")

			$("#instruccion_evaluacion").find(".item_c").eq(0).append(ifrmp);

		//	}, 300);
		//});
		




		

		//} else {
		//	apareceMiniMapa(numero_arreglo_personaje_actual);
		//}

	}

				contenidos_circulos = [];

			
			var var_contenidos = document.getElementById("contenido_c0");
			contenidos_circulo = new createjs.DOMElement(var_contenidos);
			contenidos_circulo.alpha = 0;
			contenidos_circulo.x = 0;
			contenidos_circulo.y = y_contenidos_final;
			contenidos_circulos.push(contenidos_circulo);
			total_textos.push(contenidos_circulos[0]);
					
//////ACA PERSOBAJE
			total_imagenes.push(titulo_pagina,fondo_p1,contenedor_personaje_per1,contenedor_personaje_per2,contenedor_personaje_per3,contenedor_personaje_per4,contenedor_iaudio,equis,icono_personaje);
			//console.log(incorrectos.length,correctos.length);

			
			

		}





	

	if(tipo == "crucigrama"){
			total_imagenes = [

				
			]
			

		
			
			elementos_p1 = [
			
			];
			sensibles = [
				//contenedor_iaudio,
				flecha_volver,
				//icono_personaje,
				equis
			];


			
		

		//console.log(zoom_consultados);


			filas_crucigrama = grid.length;
			columnas_crucigrama = grid[0].length;
			
			total_correctas = 0;
			total_opciones = $('.span_pista').length;
			completa_actual = false;

			
			for (i = 0; i < filas_crucigrama; i++) { 
				
				linea_crucigrama = document.createElement('DIV');
				linea_crucigrama.setAttribute('id', 'linea_crucigrama'+i); 
				linea_crucigrama.className = "linea_crucigrama"
				document.getElementById("crucigrama").appendChild(linea_crucigrama);

				for (int = 0; int < columnas_crucigrama; int++) { 

					celda_crucigrama = document.createElement('INPUT');
					//celda_crucigrama = document.createElement('textarea');
					celda_crucigrama.setAttribute('id', 'celda_crucigrama'+i+"_"+int); 
					celda_crucigrama.setAttribute('maxLength', 0); 
					celda_crucigrama.setAttribute('autocomplete', 'off');
					//celda_crucigrama.setAttribute('autocomplete', 'nope');
					document.getElementById("linea_crucigrama"+i).appendChild(celda_crucigrama);

					if(grid[i][int]=="@"){
						celda_crucigrama.className = "celda_crucigrama_vacio"
						celda_crucigrama.style.visibility = "hidden";
						
					} else {

						celda_crucigrama.className = "celda_crucigrama_cont"
						//celda_crucigrama.style.zIndex = "-1"
						//celda_crucigrama.setAttribute('autofocus', 'autofocus');

						//celda_crucigrama.setAttribute('autofocus', 'autofocus');

						document.getElementById('celda_crucigrama'+i+"_"+int).addEventListener("click", function(){

						if(parent.con_sonidoclic){
									parent.audio_clic.play();
								}
							if(primer_clic_cruc){
								//$('.c_principal').find(".item_c").eq(0).width("100%")
								//$('.c_principal').find(".item_c").eq(2).width(orig_itm2)

								$('.c_principal').find(".item_c").eq(1).animate( { 'width': orig_itm1}, 'fast', function()
									{
									});
								
								$('.c_principal').find(".item_c").eq(2).fadeTo(0,1);

								$('.c_principal').find(".item_c").eq(2).animate( { 'width': orig_itm2}, 'fast', function()
									{
									});
								
							}
							primer_clic_cruc = false;
    						//setTimeout(function(){
							//	parent.instruccion_especial2.visible = false;
							//	parent.instruccion_especial.visible = false;
							//}, 500);
    						
	 						$( ".retro_cruci" ).css("background-color", "transparent");
							$( ".retro_cruci" ).html( "" );
							$(".cont_retrocruci").height("0")
							
    						id_this = this.id;
							id_cx = id_this.replace("celda_crucigrama", "");
							id_cx = id_cx.split('_');

							fila_cx = parseInt(id_cx[0]); 
							columna_cx = parseInt(id_cx[1]); 
							
							if(document.getElementById('celda_crucigrama'+fila_cx+"_"+columna_cx).className!="celda_vertcorr"&&document.getElementById('celda_crucigrama'+fila_cx+"_"+columna_cx).className!="celda_horizcorr"){			
								orientacionCX(columna_cx,fila_cx);
							}


						});

					}
				}

			}


			function orientacionCX(col_cx,fil_cx){

				word_vertical = false;
				word_horizontal = false;

				if(fil_cx>=0&&fil_cx<filas_crucigrama){
					///Busca si es la primera letra de la palabra vertical.
					inx = fil_cx;
					while (inx>=0&&grid[inx][col_cx]!="@") {
						//document.getElementById('celda_crucigrama'+inx+"_"+col_cx).className = "celda_selvert";
						inx--;
						
					}
					iny = fil_cx;
					while (iny<filas_crucigrama&&grid[iny][col_cx]!="@") {
						//document.getElementById('celda_crucigrama'+iny+"_"+col_cx).className = "celda_selvert";
						iny++;
					}
					if(fil_cx==inx+1&&fil_cx==iny-1){
						word_vertical = false;	
					} else {
						word_vertical = true;	
					}
				}

				if(col_cx>=0&&col_cx<columnas_crucigrama){
					inx = col_cx;
					while (inx>=0&&grid[fil_cx][inx]!="@") {
						//document.getElementById('celda_crucigrama'+fil_cx+"_"+inx).className = "celda_selhoriz";
						inx--;
					}
					iny = col_cx;
					while (iny<columnas_crucigrama&&grid[fil_cx][iny]!="@") {
						//document.getElementById('celda_crucigrama'+fila_cx+"_"+iny).className = "celda_selhoriz";
							iny++;
					}
					if(col_cx==inx+1&&col_cx==iny-1){
						word_horizontal = false;	
					} else {
						word_horizontal = true;	
					}
				}
				
				orientacion_sel = document.getElementById('celda_crucigrama'+fil_cx+"_"+col_cx).className;

				
				if(orientacion_sel=="celda_selvert"||orientacion_sel=="celda_selvert2"){
					sel_vertical = true;
				} else {
					sel_vertical = false;
				}

				if(orientacion_sel=="celda_selhoriz"||orientacion_sel=="celda_selhoriz2"){
					sel_horizontal = true;
				} else {
					sel_horizontal = false;
				}

				
				


				seleccionaOrienta(sel_vertical,sel_horizontal,word_vertical,word_horizontal,col_cx,fil_cx);
			}

			function seleccionaOrienta(sel_ver,sel_hz,word_ver,word_hor,c_cx,f_cx){
				primera_celda = -1;
				ultima_celda = -1;

				selecciona_ver = false;

				if(word_ver&&word_hor){
					if(sel_ver){
						if(document.getElementById('celda_crucigrama'+f_cx+"_"+c_cx).className=="celda_selvert2"){
							selecciona_ver = false;
						} else {
							selecciona_ver = true;
						}
					} else if(sel_hz) {
						if(document.getElementById('celda_crucigrama'+f_cx+"_"+c_cx).className=="celda_selhoriz2"){
							selecciona_ver = true;
						} else {
							selecciona_ver = false;
						}
					}

				} else if(word_ver){
					selecciona_ver = true;
				} else{
					selecciona_ver = false;
				}

				for (i = 0; i < filas_crucigrama; i++) { 
					for (int = 0; int < columnas_crucigrama; int++) {
						if(grid[i][int]!="@"&&document.getElementById('celda_crucigrama'+i+"_"+int).className!="celda_horizcorr"&&document.getElementById('celda_crucigrama'+i+"_"+int).className!="celda_vertcorr"){
							document.getElementById('celda_crucigrama'+i+"_"+int).className = "celda_crucigrama_cont";
						}
					}
				}

				if(selecciona_ver){

					if(f_cx>=0&&f_cx<filas_crucigrama){
						inx = f_cx;
						while (inx>=0&&grid[inx][c_cx]!="@") {
							esta_correctovert = document.getElementById('celda_crucigrama'+inx+"_"+c_cx).className!="celda_horizcorr"&&document.getElementById('celda_crucigrama'+inx+"_"+c_cx).className!="celda_vertcorr";

							if(esta_correctovert){
								document.getElementById('celda_crucigrama'+inx+"_"+c_cx).className = "celda_selvert";
							}
							inx--;

						}
						iny = f_cx;
						while (iny<filas_crucigrama&&grid[iny][c_cx]!="@") {
							esta_correctovert = document.getElementById('celda_crucigrama'+iny+"_"+c_cx).className!="celda_horizcorr"&&document.getElementById('celda_crucigrama'+iny+"_"+c_cx).className!="celda_vertcorr";

							if(esta_correctovert){
								document.getElementById('celda_crucigrama'+iny+"_"+c_cx).className = "celda_selvert";
							}
							iny++;

						}
					}
					primera_celda = inx+1;
					ultima_celda =  iny-1;
					
					if(sel_ver){
						sel_act = f_cx;
					} else {
						if(f_cx==inx+1){
						sel_act = f_cx;
						} else {
						sel_act = inx+1;
						}
					}
					esta_correctovert = document.getElementById('celda_crucigrama'+sel_act+"_"+c_cx).className != "celda_horizcorr"&&document.getElementById('celda_crucigrama'+sel_act+"_"+c_cx).className != "celda_vertcorr"; 
					if(esta_correctovert){
						document.getElementById('celda_crucigrama'+sel_act+"_"+c_cx).className = "celda_selvert2";
						document.getElementById('celda_crucigrama'+sel_act+"_"+c_cx).focus();

					} else {
						sel_act++
						document.getElementById('celda_crucigrama'+sel_act+"_"+c_cx).className = "celda_selvert2";
						document.getElementById('celda_crucigrama'+sel_act+"_"+c_cx).focus();

					}

					actualizaPosicion(selecciona_ver,primera_celda,ultima_celda,c_cx,sel_act);

					
				} else {
					if(c_cx>=0&&c_cx<columnas_crucigrama){
						inx = c_cx;
						while (inx>=0&&grid[f_cx][inx]!="@") {
							esta_correctohoriz = document.getElementById('celda_crucigrama'+f_cx+"_"+inx).className!="celda_horizcorr"&&document.getElementById('celda_crucigrama'+f_cx+"_"+inx).className!="celda_vertcorr";

							if(esta_correctohoriz){
								document.getElementById('celda_crucigrama'+f_cx+"_"+inx).className = "celda_selhoriz";
							}
							inx--;
						}
						iny = c_cx;
						while (iny<columnas_crucigrama&&grid[f_cx][iny]!="@") {
							esta_correctohoriz = document.getElementById('celda_crucigrama'+f_cx+"_"+iny).className!="celda_horizcorr"&&document.getElementById('celda_crucigrama'+f_cx+"_"+iny).className!="celda_vertcorr";

							if(esta_correctohoriz){
								document.getElementById('celda_crucigrama'+f_cx+"_"+iny).className = "celda_selhoriz";
							}
							iny++;
						}
					}
					primera_celda = inx+1;
					ultima_celda =  iny-1;

					if(sel_hz){
						sel_act = c_cx;
					} else {
						if(c_cx==inx+1){
							sel_act = c_cx;
						} else {
							sel_act = inx+1;
						}
					}
					esta_correctohoriz = document.getElementById('celda_crucigrama'+(f_cx)+"_"+sel_act).className != "celda_horizcorr"&&document.getElementById('celda_crucigrama'+(f_cx)+"_"+sel_act).className != "celda_vertcorr"; 
					if(esta_correctohoriz){
						document.getElementById('celda_crucigrama'+(f_cx)+"_"+sel_act).className = "celda_selhoriz2";
						document.getElementById('celda_crucigrama'+(f_cx)+"_"+sel_act).focus();
					} else {
						sel_act++
						document.getElementById('celda_crucigrama'+(f_cx)+"_"+sel_act).className = "celda_selhoriz2";
						document.getElementById('celda_crucigrama'+(f_cx)+"_"+sel_act).focus();

					}
					actualizaPosicion(selecciona_ver,primera_celda,ultima_celda,f_cx,sel_act);

				}
				

				rta_actcruci = "";

				if(selecciona_ver){
					id_pista = "span_pista_v"+"_"+primera_celda+"_"+c_cx;
					for (i = primera_celda; i <= ultima_celda; i++) { 
						rta_actcruci += grid[i][c_cx];
					}
				} else {
					id_pista = "span_pista_h"+"_"+f_cx+"_"+primera_celda;
					for (i = primera_celda; i <= ultima_celda; i++) { 
						rta_actcruci += grid[f_cx][i];
					}
					
				}
				

				console.log(id_pista)
				$(".span_pista").fadeOut();
				setTimeout(function(){
					$("#"+id_pista).fadeIn()
				}, 200);
				//document.getElementById(id_pista).style.display = "inline-block"; 
				//document.getElementById(id_pista).className = "aparece_pista"
								


			}



			total_crucicorr = 0;
			total_crucicomp = 0;
			function actualizaPosicion(vert,primera_c,ultima_c,constante,s_act){
				rta_corr = []; 
				rta_act = [];
				if(vert){
					celda_actcx = document.getElementById('celda_crucigrama'+(s_act)+"_"+constante);
					for (i = primera_c; i <= ultima_c; i++) { 
						rta_corr.push(grid[i][columna_cx])
					}
				} else {
					celda_actcx = document.getElementById('celda_crucigrama'+(constante)+"_"+s_act);
					for (i = primera_c; i <= ultima_c; i++) { 
						rta_corr.push(grid[fila_cx][i])
					}
				}


				if(vert){
					for (i = primera_c; i <= ultima_c; i++) { 
						//console.log(document.getElementById('celda_crucigrama'+(i)+"_"+constante).innerHTML)
						rta_act.push(document.getElementById('celda_crucigrama'+(i)+"_"+constante).value);
						
					}
				} else {
					for (i = primera_c; i <= ultima_c; i++) { 
						//console.log(document.getElementById('celda_crucigrama'+(i)+"_"+constante).innerHTML)
						rta_act.push(document.getElementById('celda_crucigrama'+(constante)+"_"+i).value);
						
					}
				}

				contar_llenas = 0;
				contar_corr = 0;
				for (i = 0; i < rta_act.length; i++) {
					if(rta_act[i]!=""){
						contar_llenas++
					}
					if(rta_act[i]==rta_corr[i]){
						contar_corr++
					}
				}
				rta_actstring = rta_act.join('')
				if(contar_llenas==rta_act.length){
					console.log(rta_actstring,"rta_actstring")

					if($(".conretro").length>0){
						total_crucicomp++
					}
					console.log(total_crucicomp,"total_crucicomp")
					for(i = 0; i < objetos_intcruci.length; i++) {
					    if (objetos_intcruci[i].id_cruci == id_pista) {
					        objetos_intcruci[i].intentos_actuales++
					        if(objetos_intcruci[i].intentos_actuales<=parent.cantidad_intentos_act||$(".conretro").length>0){

	 							$( "#"+id_pista ).find(".txt_intentoscruci").find("b").text(objetos_intcruci[i].intentos_actuales);

	 							if(contar_corr!=contar_llenas){
					        	if(objetos_intcruci[i].intentos_actuales==parent.cantidad_intentos_act||$(".conretro").length>0){
	 								$( "#"+id_pista ).find(".respuesta_cruci").text(rta_actstring);//rta_act
	 								$( "#"+id_pista ).find(".cont_respcruci").fadeIn("slow");

	 							}
	 							}

					        }
					    }
					}

					if(contar_corr==contar_llenas){
						//console.log("todo ok")
						completa_actual = true;
						parent.audio_correcto.play();
						total_crucicorr++
						//$("#crucigrama").attr("tabindex",-1).focus();

						var element = $("#"+celda_actcx.id);
							element.blur();

							//element.css('outline', 'none !important')
							  //     .attr("tabindex", -1)
							    //   .focus();
						$(".cont_retrocruci").height("45px")
						
	 					$( "#"+id_pista+" .retro_cruci" ).removeClass("incorrecto_cruci");
	 					$( "#"+id_pista+" .retro_cruci" ).addClass("correcto_cruci");
	 					$( "#"+id_pista+" .retro_cruci" ).html( parent.icono_check );

						for (i = primera_c; i <= ultima_c; i++) {
							if(vert){	
							document.getElementById('celda_crucigrama'+(i)+"_"+columna_cx).className = "celda_vertcorr"
							} else {
							document.getElementById('celda_crucigrama'+(fila_cx)+"_"+i).className = "celda_horizcorr"
							}

						}

						if(!$(".conretro").length>0){
							total_crucicomp++
						}
						
						total_correctas++
						
						if(total_correctas==total_opciones){
							 animacionCorrecto();
						
						//$(".span_pista").fadeOut();
						$("#pistas").fadeOut();



						if(parent.znThisPage == parent.znPages){
							//parent.completado = true;
							if(cantidad_maspersonaje==0){
								txt_complemento =""+parent.tx_puedesmay+" cerrar la ventana para finalizar."
							} else {
								txt_complemento =""

							}

						} else {
							txt_complemento =""+parent.tx_puedesmay+" continuar a la siguiente pantalla."

						}

						$(".instruccion_interna").find("div").text("¡Muy bien! "+txt_complemento);


						$('.c_principal').find(".item_c").eq(1).animate( { 'width': "100%"}, 'fast', function()
									{
									});
								
								$('.c_principal').find(".item_c").eq(2).fadeTo(0,0);

								$('.c_principal').find(".item_c").eq(2).animate( { 'width': "0%"}, 'fast', function()
									{
									});
							if(cantidad_maspersonaje>0){
								//parent.audio_correcto.play();
								setTimeout(function(){
									clic_btnpersonaje();
									//document.getElementById("contenido_c0").style.zIndex = -1;

								}, 700);

							} else {


								suma_total();	
							}
						} 
					} else {
						completa_actual = false;
						parent.audio_incorrecto.play();
	 					$( "#"+id_pista+" .retro_cruci" ).removeClass("correcto_cruci");
						$( "#"+id_pista+" .retro_cruci" ).addClass("incorrecto_cruci");
						$( "#"+id_pista+" .retro_cruci" ).html( parent.icono_wrong );

						$(".cont_retrocruci").height("45px")
						var element = $("#"+celda_actcx.id);
							element.blur();

						//console.log("no-ok")
						for (i = primera_c; i <= ultima_c; i++) {
							if(vert){	
								if(document.getElementById('celda_crucigrama'+(i)+"_"+columna_cx).className != "celda_vertcorr"&&document.getElementById('celda_crucigrama'+(i)+"_"+columna_cx).className != "celda_horizcorr"){

									if($(".conretro").length>0){
										document.getElementById('celda_crucigrama'+(i)+"_"+columna_cx).value = grid[i][columna_cx];
										document.getElementById('celda_crucigrama'+(i)+"_"+columna_cx).className = "celda_vertcorr"
							document.getElementById('celda_crucigrama'+(i)+"_"+columna_cx).style.color = "grey"


									} else {
										//document.getElementById('celda_crucigrama'+(i)+"_"+columna_cx).className = "celda_vertincorr";
										document.getElementById('celda_crucigrama'+(i)+"_"+columna_cx).value = "";
										$( "#celda_crucigrama"+(i)+"_"+columna_cx).addClass("celda_vertincorr");
										$( "#celda_crucigrama"+(i)+"_"+columna_cx).blur(); 
									}
								}
							} else {
								if(document.getElementById('celda_crucigrama'+(fila_cx)+"_"+i).className != "celda_vertcorr"&&document.getElementById('celda_crucigrama'+(fila_cx)+"_"+i).className != "celda_horizcorr"){

									if($(".conretro").length>0){
							document.getElementById('celda_crucigrama'+(fila_cx)+"_"+i).value = grid[fila_cx][i];

							document.getElementById('celda_crucigrama'+(fila_cx)+"_"+i).className = "celda_horizcorr"
							document.getElementById('celda_crucigrama'+(fila_cx)+"_"+i).style.color = "grey"

									} else {
									//document.getElementById('celda_crucigrama'+(fila_cx)+"_"+i).className = "celda_horizincorr"
									document.getElementById('celda_crucigrama'+(fila_cx)+"_"+i).value = "";
									$( "#celda_crucigrama"+(fila_cx)+"_"+i).addClass("celda_horizincorr");

									$( "#celda_crucigrama"+(fila_cx)+"_"+i).blur();
									}

								}
							}
						}
						if(vert){
							//orientacionCX(col_cx,fil_cx)
						} else {

						}
					}

					if(total_crucicomp==total_opciones){
						if(parent.es_evaluacion){
							parent.nuevo_puntaje += (total_crucicorr/total_crucicomp)*parent.puntaje_maximo/(parent.cantidad_actividades);
							
							if(parent.nuevo_puntaje>parent.puntaje_maximo-0.1||parent.nuevo_puntaje>parent.puntaje_maximo){
								parent.nuevo_puntaje = parent.puntaje_maximo;
							}

							if(parent.nuevo_puntaje>parent.puntaje){
								parent.puntaje = parent.nuevo_puntaje;
							}
						}

						if(total_correctas!=total_opciones){
							if(cantidad_maspersonaje>0){
								//parent.audio_correcto.play();
								setTimeout(function(){
									clic_btnpersonaje();
									//document.getElementById("contenido_c0").style.zIndex = -1;

								}, 700);

							} else {


								suma_total();	
							}
						}
					}
				} else {
					//console.log("incompleto")
				}

				celda_actcxid = celda_actcx.id; 
				
			}
			

			document.onkeydown = keyDown;
			parent.document.onkeydown = keyDown;

			function keyDown(e) {
				completa_actual = false;
				

			    e = e || window.event;

			     if (!e) e = window.event;
					var keyCode = e.keyCode || e.which;
					console.log(e.keyCode)
					if(e.keyCode == 8){
						

						parent.instruccion_especial2.visible = false;
						parent.instruccion_especial.visible = false;


						if(primera_celda != -1){
							
							id_this = document.getElementById(celda_actcxid).id;
							id_cx = id_this.replace("celda_crucigrama", "");
							id_cx = id_cx.split('_');

							fila_cx = parseInt(id_cx[0]); 

							columna_cx = parseInt(id_cx[1]); 

							if(selecciona_ver){
								
								if(fila_cx>primera_celda){
									document.getElementById('celda_crucigrama'+fila_cx+"_"+columna_cx).className = "celda_selvert";
									document.getElementById('celda_crucigrama'+fila_cx+"_"+columna_cx).value = "";

									if(document.getElementById('celda_crucigrama'+fila_cx+"_"+columna_cx).value == ""){
                                        fila_cx--
                                    }
									
									esta_correctovert = document.getElementById('celda_crucigrama'+fila_cx+"_"+columna_cx).className != "celda_horizcorr"&&document.getElementById('celda_crucigrama'+fila_cx+"_"+columna_cx).className != "celda_vertcorr"; 


									if(!esta_correctovert){
										fila_cx--
									}
									//document.getElementById(celda_actcxid).className = "celda_selvert";
									//document.getElementById(celda_actcxid).innerHeight = "";
									document.getElementById('celda_crucigrama'+fila_cx+"_"+columna_cx).value = "";
									document.getElementById('celda_crucigrama'+fila_cx+"_"+columna_cx).className = "celda_selvert2";
									document.getElementById('celda_crucigrama'+fila_cx+"_"+columna_cx).focus();

									actualizaPosicion(selecciona_ver,primera_celda,ultima_celda,columna_cx,fila_cx);
								} else {
									//primera_celda = -1;
								}

							} else {
								if(columna_cx>primera_celda){

									document.getElementById('celda_crucigrama'+fila_cx+"_"+columna_cx).className = "celda_selhoriz";
									document.getElementById('celda_crucigrama'+fila_cx+"_"+columna_cx).value = "";

									if(document.getElementById('celda_crucigrama'+fila_cx+"_"+columna_cx).value == ""){
										columna_cx--
									}
									
									esta_correctohoriz = document.getElementById('celda_crucigrama'+(fila_cx)+"_"+columna_cx).className != "celda_horizcorr"&&document.getElementById('celda_crucigrama'+(fila_cx)+"_"+columna_cx).className != "celda_vertcorr"; 


									if(!esta_correctohoriz){
										columna_cx--
									}
									//document.getElementById(celda_actcxid).className = "celda_selvert";
									//document.getElementById(celda_actcxid).innerHeight = "";
									document.getElementById('celda_crucigrama'+fila_cx+"_"+columna_cx).value = "";
									document.getElementById('celda_crucigrama'+fila_cx+"_"+columna_cx).className = "celda_selhoriz2";
									document.getElementById('celda_crucigrama'+(fila_cx)+"_"+columna_cx).focus();

									actualizaPosicion(selecciona_ver,primera_celda,ultima_celda,fila_cx,columna_cx);
								}
							}

						} else {
							//primera_celda = -1;

						}

					}

					if ((e.keyCode >= 65 && e.keyCode <= 90)||(e.keyCode >= 48 && e.keyCode <= 57) || (e.keyCode >= 96 && e.keyCode <= 105) || (e.keyCode == 192) ){
						

						if(e.keyCode >= 96 && e.keyCode <= 105){
							 keyCode -= 48;
						}

						letra = String.fromCharCode(keyCode);

						//console.log(letra)
						if(e.keyCode == 186||e.keyCode == 192||(e.keyCode == 78 && e.altKey)){
							letra = "Ñ";
						}
						
						if(primera_celda != -1){
							document.getElementById(celda_actcxid).value = letra;
							
							id_this = document.getElementById(celda_actcxid).id;
							id_cx = id_this.replace("celda_crucigrama", "");
							id_cx = id_cx.split('_');

							fila_cx = parseInt(id_cx[0]); 

							columna_cx = parseInt(id_cx[1]); 
							
								
							if(selecciona_ver){

								document.getElementById(celda_actcxid).className = "celda_selvert";
								actualizaPosicion(selecciona_ver,primera_celda,ultima_celda,columna_cx,fila_cx);
								fila_cx++
								if(fila_cx<filas_crucigrama){
									esta_correctovert = document.getElementById('celda_crucigrama'+fila_cx+"_"+columna_cx).className != "celda_horizcorr"&&document.getElementById('celda_crucigrama'+fila_cx+"_"+columna_cx).className != "celda_vertcorr"; 
									
									if(!esta_correctovert){
										fila_cx++
									}
								}
								if(fila_cx<filas_crucigrama){

									if(grid[fila_cx][columna_cx]!="@"){
										//console.log(completa_actual)
										if(!completa_actual){
											document.getElementById('celda_crucigrama'+(fila_cx)+"_"+columna_cx).className = "celda_selvert2";
											document.getElementById('celda_crucigrama'+(fila_cx)+"_"+columna_cx).focus();

											actualizaPosicion(selecciona_ver,primera_celda,ultima_celda,columna_cx,fila_cx);
										} else {
											primera_celda = -1;

										}
									} else {
										primera_celda = -1;
									}
								} else {
									primera_celda = -1;
								}

							} else {

								document.getElementById(celda_actcxid).className = "celda_selhoriz";
								
								actualizaPosicion(selecciona_ver,primera_celda,ultima_celda,fila_cx,columna_cx);
								

								
								columna_cx++
								if(columna_cx<columnas_crucigrama){
									esta_correctohoriz = document.getElementById('celda_crucigrama'+(fila_cx)+"_"+columna_cx).className != "celda_horizcorr"&&document.getElementById('celda_crucigrama'+(fila_cx)+"_"+columna_cx).className != "celda_vertcorr"; 
									if(!esta_correctohoriz){
										columna_cx++
									}
								}
								if(columna_cx<columnas_crucigrama){
									if(grid[fila_cx][columna_cx]!="@"){
										document.getElementById('celda_crucigrama'+(fila_cx)+"_"+columna_cx).className = "celda_selhoriz2";
										document.getElementById('celda_crucigrama'+(fila_cx)+"_"+columna_cx).focus();

										actualizaPosicion(selecciona_ver,primera_celda,ultima_celda,fila_cx,columna_cx);
									} else {
										primera_celda = -1;
									}
								} else {
									primera_celda = -1;
								}
							}
						}
					}
			}

			contenidos_circulos = [];

			
			var var_contenidos = document.getElementById("contenido_c0");
			contenidos_circulo = new createjs.DOMElement(var_contenidos);
			contenidos_circulo.alpha = 0;
			contenidos_circulo.x = 0;
			contenidos_circulo.y = y_contenidos_final;
			contenidos_circulos.push(contenidos_circulo);
			total_textos.push(contenidos_circulos[0]);
					
//////ACA PERSOBAJE
			total_imagenes.push(titulo_pagina,fondo_p1,contenedor_personaje_per1,contenedor_personaje_per2,contenedor_personaje_per3,contenedor_personaje_per4,contenedor_iaudio,equis,icono_personaje);
			//console.log(incorrectos.length,correctos.length);

			initialValueAnima("#contenido_c",actual_circ,"")
			

		}



	





	if(tipo == "vf"){
			total_imagenes = [

				
			]
			

		
			
			elementos_p1 = [
			
			];
			sensibles = [
				//contenedor_iaudio,
				flecha_volver,
				//icono_personaje,
				equis
			];


				

		

		//console.log(zoom_consultados);	
			color_seleccion = "#FFFFFF";
			color_no_seleccion = "#0063A9";

			bgcolor_seleccion = "#333333";
			bgcolor_no_seleccion = "#e5e0df";



		correctos = [];
		incorrectos = [];

			
			for (i = 0; i < cantidad_circulos; i++) { 
				var_correcta = document.getElementById("correcto"+i);
				correctos[i] = var_correcta;
				correctos.push(correctos[i]);
				
				//total_textos.push(correctos[i]);
				

				opcion_actual = correctos[i];
				f_opciones_vf(opcion_actual);

			}

			correctos.splice(-1, 1);

			for (i = 0; i < cantidad_circulos; i++) { 
				var_incorrecta = document.getElementById("incorrecto"+i);
				incorrectos[i] = var_incorrecta;
				incorrectos.push(incorrectos[i]);

				//total_textos.push(incorrectos[i]);
				
				opcion_actual = incorrectos[i];
				f_opciones_vf(opcion_actual);
		
			}

			incorrectos.splice(-1, 1);

			correctos_vf = []
			for (i = 0; i < cantidad_circulos; i++) { 
				correctos_vf[i] = {val: false};
				//console.log(ocupados[i].val);
				correctos_vf.push(correctos_vf[i]);
			}
			correctos_vf.splice(-1, 1);

			incorrectos_vf = []
			for (i = 0; i < cantidad_circulos; i++) { 
				incorrectos_vf[i] = {val: false};
				//console.log(ocupados[i].val);
				incorrectos_vf.push(incorrectos_vf[i]);
			}
			incorrectos_vf.splice(-1, 1);

			contenidos_circulos = [];

			
			var var_contenidos = document.getElementById("contenido_c0");
			contenidos_circulo = new createjs.DOMElement(var_contenidos);
			contenidos_circulo.alpha = 0;
			contenidos_circulo.x = 0;
			contenidos_circulo.y = y_contenidos_final;
			contenidos_circulos.push(contenidos_circulo);
			total_textos.push(contenidos_circulos[0]);
					
//////ACA PERSOBAJE
			total_imagenes.push(titulo_pagina,fondo_p1,contenedor_personaje_per1,contenedor_personaje_per2,contenedor_personaje_per3,contenedor_personaje_per4,contenedor_iaudio,equis,icono_personaje);
			//console.log(incorrectos.length,correctos.length);

			
			

		}


		if(tipo == "varias_sel"){
			total_imagenes = [

				
			]
			

		
			
			elementos_p1 = [
			
			];
			sensibles = [
				//contenedor_iaudio,
				flecha_volver,
				//icono_personaje,
				equis
			];

		$(".next_svel").fadeOut();

		selvar_actual = 0;

		arreglo_acumula_opciones = [];
		cant_opc = 0;

		opciones = cantidad_circulos; 
		cantidad_preguntas = opciones.length;

		bounds_enunciado = [];
		bounds_opciones = [];
		opciones_html = [];
		actual_down_au = false;
		
		for (i = 0; i < cantidad_preguntas; i++) { 
			cant_opc += opciones[i];
			arreglo_acumula_opciones[i] = cant_opc;
						
		}

		arr_vsel = [];
		for (i = 0; i < cant_opc; i++) { 

			document.getElementById("opcion_sel"+i).addEventListener("click", function(){
				
				if(parent.con_sonidoclic){
									parent.audio_clic.play();
								}

				id_opc_orig = this.id;
				id_opc = this.id;
		    	id_opc = id_opc.replace("opcion_sel", "");
		    	id_opc = parseInt(id_opc);
		    	//if(con_retrosel){
				//	retro_acts = $("#"+id_opc_orig+" p").html();
				//	document.getElementById("retro_selvar").innerHTML = retro_acts;
		    	//}
		    	if(document.getElementById("opcion_sel"+id_opc).className == "opcion_vsel"){
					document.getElementById("opcion_sel"+id_opc).className = "opcion_vsel2";
				} else {
					document.getElementById("opcion_sel"+id_opc).className = "opcion_vsel";
				}

				cant_cvsel = $(this).closest(".opciones_vsel").attr("data-ccvsel");
				cant_cselact = $(this).closest(".opciones_vsel").find(".opcion_vsel2").length;
		    	

		    	msj_difcorr = " ";
		    	corr_vsel = true;
		    	cant_inc = 0;

		    	if($(".group_vsel").length==0){
					if(cant_cvsel==cant_cselact){

						if($(this).siblings(".reto_ovsel").length==1){
							$(this).siblings(".reto_ovsel").fadeIn(100);
							activaVarSel();  							
							//console.log("entra D")
							$(".opciones_vsel").eq(selvar_actual).find(".opcion_vsel2").find("span").html(parent.icono_wrong)
							$(".opciones_vsel").eq(selvar_actual).find(".opcion_vsel").find("span").html(parent.icono_wrong)

							console.log(cant_cselact,"cant_cselact")

							if(selvar_actual==0){
								for (isv = 0; isv < cant_cvsel; isv++) { 
									$("#opcion_sel"+isv).find("span").html(parent.icono_check)	
										if(document.getElementById("opcion_sel"+isv).className == "opcion_vsel"){
										corr_vsel = false;
										cant_inc++
										//$("#opcion_sel"+isv).find("span").html("X")
									}
								}
							} else {
								for (isv = arreglo_acumula_opciones[selvar_actual-1]; isv < parseInt(arreglo_acumula_opciones[selvar_actual-1]) + parseInt(cant_cvsel); isv++) {
									$("#opcion_sel"+isv).find("span").html(parent.icono_check)	
										if(document.getElementById("opcion_sel"+isv).className == "opcion_vsel"){
										corr_vsel = false;
										cant_inc++
										//$("#opcion_sel"+isv).find("span").html("X")
									}
								}
							}

							cantcorrsel = cant_cselact - cant_inc;
							console.log(cantcorrsel,"cantcorrsel")

							if(parent.es_evaluacion){
								parent.nuevo_puntaje += ((cantcorrsel/cant_cselact)/cantidad_preguntas) * parent.puntaje_maximo/(parent.cantidad_actividades);
								
								if(parent.nuevo_puntaje>parent.puntaje_maximo-0.1||parent.nuevo_puntaje>parent.puntaje_maximo){
									parent.nuevo_puntaje = parent.puntaje_maximo;
								}

								if(parent.nuevo_puntaje>parent.puntaje){
									parent.puntaje = parent.nuevo_puntaje;
								}
							}

							console.log(parent.nuevo_puntaje)

							if(corr_vsel){
								//if(id_opc==arreglo_acumula_opciones[selvar_actual-1]){
								//correctoVarSel(id_opc)

							} else {
								//	incorrectoVarSel(id_opc)

							}							

						} else {
							if(selvar_actual==0){
								for (isv = 0; isv < cant_cvsel; isv++) { 
									//console.log(isv,"isv")
									if(document.getElementById("opcion_sel"+isv).className == "opcion_vsel"){
										corr_vsel = false;
										cant_inc++
									}
								}
								//if(id_opc==0){
								if(corr_vsel){
									correctoVarSel(id_opc)
								} else {
									incorrectoVarSel(id_opc)
								}
							} else {
								//console.log(arreglo_acumula_opciones[selvar_actual-1])
								//console.log(parseInt(arreglo_acumula_opciones[selvar_actual-1]) + parseInt(cant_cvsel));

								for (isv = arreglo_acumula_opciones[selvar_actual-1]; isv < parseInt(arreglo_acumula_opciones[selvar_actual-1]) + parseInt(cant_cvsel); isv++) { 
									console.log(isv,"isv")
									if(document.getElementById("opcion_sel"+isv).className == "opcion_vsel"){
										corr_vsel = false;
										cant_inc++
									}
								}

								if(corr_vsel){
								//if(id_opc==arreglo_acumula_opciones[selvar_actual-1]){
									correctoVarSel(id_opc)

								} else {
									incorrectoVarSel(id_opc)

								}

							}
						}
					}
				} else {
					groupVarSel(id_opc)

				}

			});
		}
		//console.log(cant_opc,arreglo_acumula_opciones)



		function groupVarSel(id_opz){
			$("#opcion_sel"+id_opz).siblings("div[id^=opcion_sel]").attr("class","opcion_vsel");
			
			$("#opcion_sel"+id_opz).attr("class", "opcion_vsel2");

			cant_grvs = $("#opcion_sel"+id_opz).closest(".opciones_vsel").find(".group_vsel").length;
			cant_selgrvs = 0;
			cant_corrgrvs = 0;

			arr_coorgrvs = [];
			arr_selgrvs = [];

			$("#opcion_sel"+id_opz).closest(".opciones_vsel").find("div[id^=opcion_sel]").each(function(index){
				id_opcsv = $(this).attr("id");
				id_opcsv = id_opcsv.replace("opcion_sel", "");
				id_opcsv = parseInt(id_opcsv,10);
				arr_coorgrvs[index] = id_opcsv;

				if($(this).hasClass("opcion_vsel2")){
					cant_selgrvs++
					arr_selgrvs[index] = id_opcsv;

				} else {
					arr_selgrvs[index] = 1000;

				}

			})

			arr_coorgrvs.sort(function (a, b){
    			return a - b;
			})

			arr_coorgrvs = arr_coorgrvs.slice(0, cant_grvs);

			arr_selgrvs.sort(function (a, b){
    			return a - b;
			})

			arr_selgrvs = arr_selgrvs.slice(0, cant_grvs);

			//arr_coorgrvs = arr_coorgrvs.concat();
			//arr_selgrvs = arr_selgrvs.concat();

			//arr_coorgrvs = arr_coorgrvs.toString();
			//arr_selgrvs = arr_selgrvs.toString();


			
			if(cant_grvs==cant_selgrvs){
				for (i = 0; i < arr_coorgrvs.length; i++) { 

					if(arr_coorgrvs.includes(arr_selgrvs[i])){
						cant_corrgrvs++
					}
				}
				if(cant_corrgrvs==cant_grvs){
					
					
					correctoVarSel(id_opz);

				} else {
					
					difcorrgrvs = cant_grvs-cant_corrgrvs;
					
					//console.log(difcorrgrvs)

					if(difcorrgrvs==1){
						msj_difcorr = " "+parent.tx_tienesmay+" un error. "

					} else if (difcorrgrvs>1){
						msj_difcorr = " "+parent.tx_tienesmay+" "+difcorrgrvs+" errores. "
					}

					incorrectoVarSel(id_opz);


				}
			}

			//console.log($("#opcion_sel"+id_opz).closest(".opciones_vsel").find(".group_vsel"))
			//$("#opcion_sel"+id_opz).siblings("div[id^=opcion_sel]")
		}
		if($(".reto_ovsel").length>0){
		//console.log(cant_opc,arreglo_acumula_opciones)
		document.getElementById("next_svel").addEventListener("click", function(){
  								$("#next_svel").fadeOut(0);
				if(selvar_actual<cantidad_preguntas-1){

								$('.opciones_vsel').eq(selvar_actual).fadeOut(500,function(){
									selvar_actual++;
									$('.opciones_vsel').eq(selvar_actual).fadeIn(500);
									$("#cubre_pregselvar"+selvar_actual).fadeOut(0)
									
									//$("#instruccion_circulos").html("<div id='instruccion_circulos_span'>"+html_re_orig+"</div>");
									if($(".opciones_vsel").eq(selvar_actual).attr("data-ccvsel")==1){
										$("#instruccion_circulos_span").html(""+parent.tx_seleccionamay+" la opción que "+parent.tx_consideresmin+" correcta.");
									} else {
										$("#instruccion_circulos_span").html(""+parent.tx_seleccionamay+" las "+$(".opciones_vsel").eq(selvar_actual).attr("data-ccvsel") +" opciones que "+parent.tx_consideresmin+" correctas.");

									}	

									$("#instruccion_circulos>div").removeClass("color_correcto");
							$("#instruccion_circulos>div").removeClass("color_incorrecto");
						$("#instruccion_circulos").fadeIn(0);


								});

								$('.enunciado_selvar').eq(selvar_actual).fadeOut(500,function(){
									$('.enunciado_selvar').eq(selvar_actual).fadeIn(500);
								});

								} else {
					if(cantidad_maspersonaje>0){
						setTimeout(function(){
							clic_btnpersonaje();
							//document.getElementById("contenido_c0").style.zIndex = -1;

						}, 700);

					} else {
						suma_total();	
					}
						
					//animacionCorrecto();

				}
  					});
		}
		function activaVarSel(){
				$("#instruccion_circulos").fadeOut(0);
				document.getElementById("est_selvar"+selvar_actual).className = "est_selvar2"
				$("#cubre_pregselvar"+selvar_actual).fadeIn(0)
				$(".next_svel").fadeIn(100);

					
					//$(".next_svel").fadeIn(100);
					//$("#next_svel").on('click', function(event) {
    
  					//});
					

					/*$(".next_svel").on('click', function(event) {
  								
  							});*/
				
			
		}

		function correctoVarSel(id_opz){
				parent.audio_correcto.play();
				//document.getElementById("est_selvar"+selvar_actual).className = "est_selvar2"
				//document.getElementById("est_selvar"+selvar_actual).innerHTML = "å";

				document.getElementById("est_selvar"+selvar_actual).innerHTML = parent.icono_check;
				$("#est_selvar"+selvar_actual).removeClass("bg_incorrecto");
				$("#est_selvar"+selvar_actual).addClass("bg_correcto");

				
				//if(sin_ruleta){
				//document.getElementById("est_selvar"+selvar_actual).style.backgroundColor = colores_ruleta[1];

				//} else {
				//}
				//document.getElementById("retro_ruleta"+ruleta_actual).innerHTML = "¡Muy bien!";

				document.getElementById("instruccion_circulos_span").innerHTML = "¡Muy bien!";

				$("#instruccion_circulos>div").removeClass("color_incorrecto");
				$("#instruccion_circulos>div").addClass("color_correcto");
				//document.getElementById("opcion_sel"+id_opz).className = "opcion_vsel2";
				//$("#cubre_pregruleta"+selvar_actual).removeClass("situacion_invisible")
				$("#cubre_pregselvar"+selvar_actual).fadeIn(0)


								
				if(selvar_actual<cantidad_preguntas-1){
					//$(".cont_pregruleta").fadeOut(100);
					$('.opciones_vsel').eq(selvar_actual).fadeOut(500,function(){
						selvar_actual++;
						$('.opciones_vsel').eq(selvar_actual).fadeIn(500);
						$("#cubre_pregselvar"+selvar_actual).fadeOut(0)
						
						//$("#instruccion_circulos").html("<div id='instruccion_circulos_span'>"+html_re_orig+"</div>");
						if($(".opciones_vsel").eq(selvar_actual).attr("data-ccvsel")==1){
							$("#instruccion_circulos_span").html(""+parent.tx_seleccionamay+" la opción correcta.");
						} else {
							$("#instruccion_circulos_span").html(""+parent.tx_seleccionamay+" las "+$(".opciones_vsel").eq(selvar_actual).attr("data-ccvsel") +" opciones correctas.");

						}	
						

					});

					$('.enunciado_selvar').eq(selvar_actual).fadeOut(500,function(){
						$("#instruccion_circulos>div").removeClass("color_correcto");
							$("#instruccion_circulos>div").removeClass("color_incorrecto");
							$('.enunciado_selvar').eq(selvar_actual).fadeIn(500);
					});

					//document.getElementById("btn_ruleta").style.display = "none";

					//document.querySelector("#video_ruleta > source").src = "video/ruleta"+ruleta_actual+".mp4";
					
					
					//$("#cont_pregruleta"+ruleta_actual).fadeIn(200);

				} else {
					if(cantidad_maspersonaje>0){
						setTimeout(function(){
							clic_btnpersonaje();
							//document.getElementById("contenido_c0").style.zIndex = -1;

						}, 700);

					} else {
						suma_total();	
					}
						
					animacionCorrecto();

				}

				
		}
		function incorrectoVarSel(id_opz){
				
				parent.audio_incorrecto.play();
				//document.getElementById("est_selvar"+selvar_actual).innerHTML = "ã";
				document.getElementById("est_selvar"+selvar_actual).innerHTML = parent.icono_wrong;
				

				$("#est_selvar"+selvar_actual).addClass("bg_incorrecto");

				$("#instruccion_circulos>div").addClass("color_incorrecto");
				//document.getElementById("est_selvar"+selvar_actual).style.backgroundColor = "#CCCCCC";
				//document.getElementById("retro_ruleta"+ruleta_actual).innerHTML = "Incorrecto. "+parent.tx_intentalomay+" de nuevo.";
				//document.getElementById("instruccion_circulos_span").innerHTML = "Incorrecto. "+parent.tx_intentalomay+" de nuevo.";
				
				$("#opcion_sel"+id_opz).closest(".opciones_vsel").find(".opcion_vsel2").attr("class","opcion_vsel");
				//console.log(cant_inc)
				if(cant_cvsel>1){
					if(cant_inc==1){
							msj_difcorr = " "+parent.tx_tuvistemay+" un error. "

					} else if (cant_inc>1){
							msj_difcorr = " "+parent.tx_tuvistemay+" "+cant_inc+" errores. "
					}
				} else {
					msj_difcorr = ""+parent.tx_intentalomay+" de nuevo.";
				}

				$("#instruccion_circulos_span").html("Incorrecto. " + msj_difcorr);
				$("#instruccion_circulos>div").removeClass("color_correcto");
				$("#instruccion_circulos>div").addClass("color_incorrecto");
		}



			contenidos_circulos = [];

			
			var var_contenidos = document.getElementById("contenido_c0");
			contenidos_circulo = new createjs.DOMElement(var_contenidos);
			contenidos_circulo.alpha = 0;
			contenidos_circulo.x = 0;
			contenidos_circulo.y = y_contenidos_final;
			contenidos_circulos.push(contenidos_circulo);
			total_textos.push(contenidos_circulos[0]);
					
//////ACA PERSOBAJE
			total_imagenes.push(titulo_pagina,fondo_p1,contenedor_personaje_per1,contenedor_personaje_per2,contenedor_personaje_per3,contenedor_personaje_per4,contenedor_iaudio,equis,icono_personaje);
			//console.log(incorrectos.length,correctos.length);

			
			

		}


	if(tipo == "ruleta"){
			total_imagenes = [

				
			]
			

		
			
			elementos_p1 = [
			
			];
			sensibles = [
				//contenedor_iaudio,
				flecha_volver,
				//icono_personaje,
				equis
			];


				
		ruleta_actual = 0;

		colores_ruleta = parent.colores_ruleta;
		
		arreglo_acumula_opciones = [];
		cant_opc = 0;

		opciones = cantidad_circulos; 
		cantidad_preguntas = opciones.length;

		bounds_enunciado = [];
		bounds_opciones = [];
		opciones_html = [];
		actual_down_au = false;
		
		for (i = 0; i < cantidad_preguntas; i++) { 
			cant_opc += opciones[i];
			arreglo_acumula_opciones[i] = cant_opc;
						
		}

		for (i = 0; i < cant_opc; i++) { 

			document.getElementById("opcion_ruleta"+i).addEventListener("click", function(){
				id_opc_orig = this.id;
				id_opc = this.id;
		    	id_opc = id_opc.replace("opcion_ruleta", "");
		    	id_opc = parseInt(id_opc);
		    	if(con_retrosel){
					retro_acts = $("#"+id_opc_orig+" p").html();
					document.getElementById("retro_selruleta").innerHTML = retro_acts;
		    	}

				if(ruleta_actual==0){
					if(id_opc==0){
						correctoRuleta(id_opc)
					} else {
						incorrectoRuleta(id_opc)
					}
				} else {
					if(id_opc==arreglo_acumula_opciones[ruleta_actual-1]){
						correctoRuleta(id_opc)

					} else {
						incorrectoRuleta(id_opc)

					}

				}

			});
		}
		//console.log(cant_opc,arreglo_acumula_opciones)

		function correctoRuleta(id_opz){
				parent.audio_correcto.play();
				document.getElementById("est_ruleta"+ruleta_actual).innerHTML = "å";
				if(sin_ruleta){
				document.getElementById("est_ruleta"+ruleta_actual).style.backgroundColor = colores_ruleta[1];

				} else {
				document.getElementById("est_ruleta"+ruleta_actual).style.backgroundColor = colores_ruleta[ruleta_actual];
				}
				//document.getElementById("retro_ruleta"+ruleta_actual).innerHTML = "¡Muy bien!";

				document.getElementById("instruccion_circulos_span").innerHTML = "¡Muy bien!";
				document.getElementById("opcion_ruleta"+id_opz).className = "opcion_ruleta2";
				$("#cubre_pregruleta"+ruleta_actual).removeClass("situacion_invisible")


				
				if(ruleta_actual<cantidad_preguntas-1){
					//$(".cont_pregruleta").fadeOut(100);
					ruleta_actual++;
					//document.getElementById("btn_ruleta").style.display = "none";

					//document.querySelector("#video_ruleta > source").src = "video/ruleta"+ruleta_actual+".mp4";
					if(!sin_ruleta){
						$("#video_ruleta").fadeOut(500, function(){
							$('#video_ruleta source').attr('src', "video/ruleta"+ruleta_actual+".mp4");
							$("#video_ruleta")[0].load();
							
							$("#video_ruleta").delay(200).fadeIn(300);
							$("#btn_ruleta").delay(200).fadeIn(300);

						});
					} else {
							$("#btn_ruleta").delay(200).fadeIn(300);
						
					}
					
					//$("#cont_pregruleta"+ruleta_actual).fadeIn(200);

				} else {
					if(cantidad_maspersonaje>0){
						setTimeout(function(){
							clic_btnpersonaje();
							//document.getElementById("contenido_c0").style.zIndex = -1;

						}, 700);

					} else {
						suma_total();	
					}
						
					animacionCorrecto();

				}

				
		}
		function incorrectoRuleta(id_opz){
				
				parent.audio_incorrecto.play();
				document.getElementById("est_ruleta"+ruleta_actual).innerHTML = "ã";
				document.getElementById("est_ruleta"+ruleta_actual).style.backgroundColor = "#CCCCCC";
				//document.getElementById("retro_ruleta"+ruleta_actual).innerHTML = "Incorrecto. "+parent.tx_intentalomay+" de nuevo.";
				document.getElementById("instruccion_circulos_span").innerHTML = "Incorrecto. "+parent.tx_intentalomay+" de nuevo.";

			
		}

		//console.log(zoom_consultados);	

		//$(".opcion_ruleta").addClass("situacion_invisible");
		$(".cont_pregruleta").fadeOut(0);
		//$(".cubre_pregruleta").fadeOut(0);
		$(".cubre_pregruleta").addClass("situacion_invisible")


			document.getElementById("btn_ruleta").addEventListener("click", function(){
			$("#btn_ruleta").fadeOut(0);

			if(!sin_ruleta){
			document.getElementById("video_ruleta").play();

			$(".cont_pregruleta").fadeOut(100);
				if(ruleta_actual==0){
					document.getElementById("instruccion_circulos_span").innerHTML = "Vamos por la primera pregunta.";

				} else {	
					document.getElementById("instruccion_circulos_span").innerHTML = "Vamos por una nueva pregunta.";
				}				

			} else {
				$(".cont_pregruleta").fadeOut(100);
				$("#cont_pregruleta"+ruleta_actual).fadeIn(200);
			}
			//document.getElementById("btn_ruleta").style.display = "none";

			

		});


		 document.getElementById("video_ruleta").onended = function(){
		 	
			$(".cont_pregruleta").fadeOut(100);
			$("#cont_pregruleta"+ruleta_actual).fadeIn(200);		 	
		 }





			contenidos_circulos = [];

			
			var var_contenidos = document.getElementById("contenido_c0");
			contenidos_circulo = new createjs.DOMElement(var_contenidos);
			contenidos_circulo.alpha = 0;
			contenidos_circulo.x = 0;
			contenidos_circulo.y = y_contenidos_final;
			contenidos_circulos.push(contenidos_circulo);
			total_textos.push(contenidos_circulos[0]);
					
//////ACA PERSOBAJE
			total_imagenes.push(titulo_pagina,fondo_p1,contenedor_personaje_per1,contenedor_personaje_per2,contenedor_personaje_per3,contenedor_personaje_per4,contenedor_iaudio,equis,icono_personaje);
			//console.log(incorrectos.length,correctos.length);

			
			

		}







	if (tipo == "tipoA"){
		total_imagenes = [
			
		]
		
		elementos_p1 = [
			
		];
		sensibles = [
			contenedor_iaudio
		];
		consultados_clic = [a];


		//total_imagenes.push(numero_titulo_pagina,fondo_p1,contenedor_personaje_per1,contenedor_personaje_per2,contenedor_personaje_per3,contenedor_iaudio,equis,icono_personaje,titulo_pagina);

		total_imagenes.push(titulo_pagina,fondo_p1,contenedor_personaje_per1,contenedor_personaje_per2,contenedor_personaje_per3,contenedor_personaje_per4,contenedor_iaudio,equis,icono_personaje);
		
		
	};








	if(tipo == "selecciones"){
			total_imagenes = [

				
			]
			
			
			elementos_p1 = [
			
			];
			sensibles = [
				//contenedor_iaudio,
				flecha_volver,
				//icono_personaje,
				equis
			];


			
		



		cantidad_correctas = cantidad_circulos[0];
		cantidad_incorrectas = cantidad_circulos[1];
	
	opciones_correctas = [];
	opciones_incorrectas = [];

	correctas_elegidas = [];	
	incorrectas_elegidas = [];
	
	for (i = 0; i < cantidad_correctas; i++) {
		correctas_elegidas[i] = {val: false};
		opciones_correctas[i] = document.getElementById("correcto"+i); 
		$("#correcto"+i).append("<div class='simbretvf'>"+parent.icono_check+"</div>")

		document.getElementById("correcto"+i).addEventListener("click", clicOpcionSeleccion);		
	}
	for (i = 0; i < cantidad_incorrectas; i++) {
		incorrectas_elegidas[i] = {val: false};
		opciones_incorrectas[i] = document.getElementById("incorrecto"+i); 
		$("#incorrecto"+i).append("<div class='simbretvf'>"+parent.icono_wrong+"</div>")

		document.getElementById("incorrecto"+i).addEventListener("click", clicOpcionSeleccion);			
	}
	/*

		opcion_actual.addEventListener("click", clic_correcto_preg);

		function clic_correcto_preg(){
    		numero_arreglo_opcion_actual = total_correctos.indexOf(opcion_actual);

			if(seleccionados_opciones[numero_arreglo_opcion_actual].val==false){
    		seleccionados_opciones[numero_arreglo_opcion_actual].val = true;
			control_flechas(numero_arreglo_opcion_actual,"clic_pregunta");

			this.style.backgroundColor = "#0074d3";
			document.getElementById("incorrecto"+numero_arreglo_opcion_actual).style.backgroundColor = "#666666";
			document.getElementById("retro_preg"+numero_arreglo_opcion_actual).className = "retro_preg2";
			document.getElementById("retro_preg"+numero_arreglo_opcion_actual).innerHTML = "¡Correcto!";
			siguientePregunta();
			sumaPuntos(numero_arreglo_opcion_actual);

			numero_en_arreglo=parent.grupos_preguntas[parent.znThisPage-1][numero_arreglo_opcion_actual];

			}
		}
	
	*/

	function clicOpcionSeleccion(){
	cantidad_elegidas = 0;
	cant_correctas_elegidas = 0;

		if(parent.con_sonidoclic){
									parent.audio_clic.play();
								}
	
	if($(this).hasClass("opcion_preg")||$(this).hasClass("opcion_preg2")){
		txt_class = ""
	} else {
		txt_class = "img"					
	}



	if(con_retro_opsel){
	
	actual_sel = this.id;

	//bounds_actual_sel = document.getElementById(actual_sel).getBoundingClientRect();
	
		/*
		document.getElementById("cerrar_simbrs").addEventListener("click", function(){
			document.getElementById("retro_sel").style.display = "none";
			numero_arreglo_opcion_actual = opciones_incorrectas.indexOf(document.getElementById(actual_sel));

			//console.log(numero_arreglo_opcion_actual)
    		if(numero_arreglo_opcion_actual!=-1){
    			incorrectas_elegidas[numero_arreglo_opcion_actual].val = false;
				//$("#"+actual_sel).className = "opcion_preg" + txt_class

				document.getElementById("incorrecto"+numero_arreglo_opcion_actual).className = "opcion_preg"+txt_class;			


    		}
		});
		*/

		
		retro_acts = $("#"+actual_sel+" p").html();
		
	}
	

	

	numero_arreglo_opcion_actual = opciones_correctas.indexOf(this);
	if(numero_arreglo_opcion_actual!=-1){
		if(correctas_elegidas[numero_arreglo_opcion_actual].val){
			if(!con_retro_opsel){
			correctas_elegidas[numero_arreglo_opcion_actual].val = false;
			this.className = "opcion_preg" + txt_class
			}
		} else {
			correctas_elegidas[numero_arreglo_opcion_actual].val = true;
			this.className = "opcion_preg2" + txt_class

			
		}

		if(con_retro_opsel){
				//document.getElementById("retro_sel").style.display = "block";
				//document.getElementById("box_retro").style.marginTop = (bounds_actual_sel.top-70)+"px";
				//$(".simb_retro_s").addClass("corr_srs")
				//$(".simb_retro_s").removeClass("incorr_srs")
				//document.getElementById("simb_retro_s").innerHTML = "<i class='fad fa-check-square'></i>";
				//document.getElementById("txt_reto_s").innerHTML = retro_acts;


				
			}
	} else {
		numero_arreglo_opcion_actual = opciones_incorrectas.indexOf(this);
		if(incorrectas_elegidas[numero_arreglo_opcion_actual].val){
			incorrectas_elegidas[numero_arreglo_opcion_actual].val = false;
			this.className = "opcion_preg" + txt_class
		} else {
			if(!con_retro_opsel){
			incorrectas_elegidas[numero_arreglo_opcion_actual].val = true;
			this.className = "opcion_preg2" + txt_class
			}
			

			if(con_retro_opsel){
				//document.getElementById("retro_sel").style.display = "block";
				//document.getElementById("box_retro").style.marginTop = (bounds_actual_sel.top-70)+"px";
				//$(".simb_retro_s").addClass("incorr_srs")
				//$(".simb_retro_s").removeClass("corr_srs")
				//document.getElementById("simb_retro_s").innerHTML = "<i class='fad fa-times-square'></i>";
				//document.getElementById("txt_reto_s").innerHTML = retro_acts;

			}
		}
	}

	for (i = 0; i < correctas_elegidas.length; i++) {
		if(correctas_elegidas[i].val){
			cantidad_elegidas++;
			cant_correctas_elegidas++;
		}
	}

	for (i = 0; i < incorrectas_elegidas.length; i++) {
		if(incorrectas_elegidas[i].val){
			cantidad_elegidas++;
		}	
	}
	

	if(cantidad_elegidas == cantidad_correctas){

		//parent.audio_boton.play();
		respuestasCompletas();


					if(parent.znThisPage == parent.znPages){
							//parent.completado = true;
							
							if(cantidad_maspersonaje==0){
								txt_complemento =""+parent.tx_puedesmay+" cerrar la ventana para finalizar."
							} else {
								txt_complemento =""

							}
						} else {
							txt_complemento =""+parent.tx_puedesmay+" continuar a la siguiente pantalla."

						}

						if(cantidad_correctas==1){
							txt_complemento2 = " la respuesta correcta. ";							
						} else {
							txt_complemento2 = " las respuestas correctas. ";							

						}

				//parent.parent.nuevo_puntaje += (cant_correctas_elegidas/cantidad_elegidas)*100/(parent.cantidad_preguntas);

					if(parent.es_evaluacion){
					parent.nuevo_puntaje += (cant_correctas_elegidas/cantidad_elegidas)*parent.puntaje_maximo/(parent.cantidad_actividades);
					
					if(parent.nuevo_puntaje>parent.puntaje_maximo-0.1||parent.nuevo_puntaje>parent.puntaje_maximo){
						parent.nuevo_puntaje = parent.puntaje_maximo;
					}

					if(parent.nuevo_puntaje>parent.puntaje){
						parent.puntaje = parent.nuevo_puntaje;
					}
				}
				if(con_retro_opsel){
							//$(".retro_selec").height(100);
							if(cantidad_elegidas==1){
								$(".retro_selec").find(".txt_c").html(retro_acts)
								$(".retro_selec").css("height","auto");
								$(".simbretvf").fadeIn(100)
							} else {
								retro_acts = $(".opciones_preg").find("p").eq(0).html();
								$(".retro_selec").find(".txt_c").html(retro_acts)
								$(".retro_selec").css("height","auto");
								$(".simbretvf").fadeIn(100)

							}
							document.getElementById("contenido_c0").style.zIndex = -1;

							if(cantidad_maspersonaje>0){
											//parent.audio_correcto.play();
											setTimeout(function(){
												clic_btnpersonaje();
												document.getElementById("contenido_c0").style.zIndex = -1;

											}, 700);

										} else {
										suma_total();	
										}
				}
				if(cantidad_correctas==cant_correctas_elegidas){
						//suma_total();	
						console.log(con_retro_opsel,"con_retro_opsel")
						
					if(cantidad_maspersonaje>0){
											//parent.audio_correcto.play();
											setTimeout(function(){
												clic_btnpersonaje();
												document.getElementById("contenido_c0").style.zIndex = -1;

											}, 700);

										} else {
										suma_total();	
										}

//parent.audio_correcto.play();

								if(parent.es_evaluacion){
							
							agotaIntentosAct()
						}

						document.getElementById("instruccion_circulos_span").innerHTML = "¡Muy bien! "+parent.tx_hasmay+" seleccionado" +txt_complemento2+txt_complemento+""
					document.getElementById("contenido_c0").style.zIndex = -1;
					//elemento_dragable.destroy();
					 animacionCorrecto();
					//}

} else {
	if(parent.cantidad_intentos_act==cuenta_intentos_act&&parent.cantidad_intentos_act>0){
	} else {
		for (i = 0; i < cantidad_correctas; i++) {
			correctas_elegidas[i] = {val: false};
			if(this.className=="opcion_preg"||this.className=="opcion_preg2"){
				txt_class = ""
			} else {
				txt_class = "img"					
			}
			if(!con_retro_opsel){
				document.getElementById("correcto"+i).className = "opcion_preg"+txt_class; 
			}
			
		}
		for (i = 0; i < cantidad_incorrectas; i++) {
			incorrectas_elegidas[i] = {val: false};
			if(this.className=="opcion_preg"||this.className=="opcion_preg2"){
				txt_class = ""
			} else {
				txt_class = "img"					
			}
			if(!con_retro_opsel){

				document.getElementById("incorrecto"+i).className = "opcion_preg"+txt_class;			
			}
		}
	}
	 animacionIncorrecto()
					//}

					






					if (cant_correctas_elegidas == 0) {
						if(cantidad_correctas>1){
							if(parent.cantidad_intentos_act==cuenta_intentos_act&&parent.cantidad_intentos_act>0){
							agotaIntentosAct()
								document.getElementById("instruccion_circulos_span").innerHTML = "Todas las respuestas han sido incorrectas. "+txt_complemento

							} else {
								if(parent.es_evaluacion){
									document.getElementById("instruccion_circulos_span").innerHTML = "Todas las respuestas han sido incorrectas."

							agotaIntentosAct()

								} else {
									document.getElementById("instruccion_circulos_span").innerHTML = "Todas las respuestas han sido incorrectas. "+parent.tx_vuelvelomay+" a intentar."

								}

							}
						} else {
							if(parent.es_evaluacion){
							document.getElementById("instruccion_circulos_span").innerHTML = "La respuesta ha sido incorrecta. "+parent.tx_vuelvelomay+" a intentar."
							agotaIntentosAct()


							} else {
							document.getElementById("instruccion_circulos_span").innerHTML = "La respuesta ha sido incorrecta."

							}

						}
						
					} else {

						diferencia = cantidad_correctas - cant_correctas_elegidas;
						if(diferencia == 1){
								if(parent.cantidad_intentos_act==cuenta_intentos_act&&parent.cantidad_intentos_act>0){
							agotaIntentosAct()
							document.getElementById("instruccion_circulos_span").innerHTML = ""+parent.tx_tuvistemay+" "+ diferencia +" respuesta incorrecta. "+txt_complemento
								} else {
								if(parent.es_evaluacion){

									document.getElementById("instruccion_circulos_span").innerHTML = ""+parent.tx_tuvistemay+" "+ diferencia +" respuesta incorrecta."
									
									agotaIntentosAct()

								} else {
									document.getElementById("instruccion_circulos_span").innerHTML = ""+parent.tx_tuvistemay+" "+ diferencia +" respuesta incorrecta. "+parent.tx_siguelomay+" intentando."

								}
						}

					} else {
						if(parent.cantidad_intentos_act==cuenta_intentos_act&&parent.cantidad_intentos_act>0){
							agotaIntentosAct()
								document.getElementById("instruccion_circulos_span").innerHTML = ""+parent.tx_tuvistemay+" "+ diferencia +" respuestas incorrectas." +txt_complemento
							
							

							} else {
								if(parent.es_evaluacion){
						document.getElementById("instruccion_circulos_span").innerHTML = ""+parent.tx_tuvistemay+" "+ diferencia +" respuestas incorrectas."
							agotaIntentosAct()


								} else {
							document.getElementById("instruccion_circulos_span").innerHTML = ""+parent.tx_tuvistemay+" "+ diferencia +" respuestas incorrectas. "+parent.tx_siguelomay+" intentando."

								}
							}

					}


}
				
		//console.log(parent.parent.estado_preguntas[parent.parent.znThisPage-1][parent.numero_arreglo_personaje_actual][parent.num_reto-1].val)
		


	
} 
}else {
	
					document.getElementById("instruccion_circulos").innerHTML = mensaje_instruccion;
simbolo_retroalimentacion.visible = false;
simbolo_retroalimentacion.alpha = 0;
					simbolo_retroalimentacion.scaleX = 0;
					simbolo_retroalimentacion.scaleY = 0;

}

}






			contenidos_circulos = [];
			
			var var_contenidos = document.getElementById("contenido_c0");
			contenidos_circulo = new createjs.DOMElement(var_contenidos);
			contenidos_circulo.alpha = 0;
			contenidos_circulo.x = 0;
			contenidos_circulo.y = y_contenidos_final;
			contenidos_circulos.push(contenidos_circulo);
			total_textos.push(contenidos_circulos[0]);
					
//////ACA PERSOBAJE
			
			
			total_imagenes.push(titulo_pagina,fondo_p1,contenedor_personaje_per1,contenedor_personaje_per2,contenedor_personaje_per3,contenedor_personaje_per4,contenedor_iaudio,equis,icono_personaje);
			//console.log(incorrectos.length,correctos.length);

			
			

		}



	










	if (tipo == "tipo1"){
		total_imagenes = [
			//contenedor_personaje,
			//contenedor_iaudio,
			numero_titulo_pagina
		]
		
		elementos_p1 = [
			//contenedor_personaje,
			//contenedor_iaudio
		];
		sensibles = [
			//contenedor_iaudio
		];

		
		
		consultados_clic = [a];

		

		document.getElementById('contenido_c0').style.opacity = 1; 
		document.getElementById('contenido_c0').style.visibility = "visible";
		document.getElementById('contenido_c0').style.zIndex = 0;
		//document.getElementById('contenido_c0').style.marginTop = 190+"px";



		contenidos_circulos = [];

		
		var var_contenidos = document.getElementById("contenido_c0");
		contenidos_circulo = new createjs.DOMElement(var_contenidos);
		contenidos_circulo.alpha = 0;
		contenidos_circulo.x = 0;
		contenidos_circulo.y = y_contenidos_final;
		contenidos_circulos.push(contenidos_circulo);
		total_textos.push(contenidos_circulos[0]);

				

		total_imagenes.push(titulo_pagina,icono_personaje,fondo_p1,contenedor_personaje_per1,contenedor_personaje_per2,contenedor_personaje_per3,contenedor_personaje_per4,contenedor_iaudio,equis);

		
	};

	



if(tipo == "arrastre_unico"){

		total_imagenes = [
			
			
		]
		

	
		
		elementos_p1 = [
			
		];
		sensibles = [
			
			flecha_volver,
			//icono_personaje,
			equis
		];

		
	
		//mensaje_instruccion = document.getElementById("instruccion_circulos_span").innerHTML;

	

		situacion_actual = 0;
		arreglo_acumula_opciones = [];
		cant_opc = 0;

		opciones = cantidad_circulos; 
		cantidad_situaciones = opciones.length;

		bounds_enunciado = [];
		bounds_opciones = [];
		opciones_html = [];
		actual_down_au = false;
		//$("#situacion0").fadeIn(0)
		$(".cont_situacion").addClass("situacion_invisible")
		$("#cont_situacion0").removeClass("situacion_invisible")

		document.getElementById('situacion_act').innerHTML = situacion_actual+1;
		document.getElementById('situacion_total').innerHTML = cantidad_situaciones;

		for (i = 0; i < cantidad_situaciones; i++) { 
			cant_opc += opciones[i];
			arreglo_acumula_opciones[i] = cant_opc;
						
		}

		//console.log(arreglo_acumula_opciones)

		for (i = 0; i < cantidad_situaciones; i++) { 
			bounds_enunciado[i] = document.getElementById('enunciado'+i).getBoundingClientRect();

			//console.log(bounds_enunciado)

			if(i==0){
				ini_conteo = 0;
			} else {
				ini_conteo = 0;
				for (intx = 0; intx < i; intx++) { 
					ini_conteo += opciones[intx];
				}
			}

			
			//console.log(i,ini_conteo,arreglo_acumula_opciones[i])


			for (int = ini_conteo; int < arreglo_acumula_opciones[i]; int++) { 
				
				var elemento_dragable = $('#opcion'+int).draggable({scroll: false, containment: "document"});
				opciones_html[int] = document.getElementById('opcion'+int);
				//bounds_opciones[int] = document.getElementById('opcion'+int).getBoundingClientRect();
				bounds_opciones[int] = $('#opcion'+int).position();

				

				document.getElementById("opcion"+int).addEventListener("mousemove", function(event){
					//console.log(parent.stage.mouseX,parent.stage.mouseY)
					x_mouse = event.clientX;
		    		y_mouse = event.clientY;
		    		

		    		id_opc = this.id;
		    		id_opc = id_opc.replace("opcion", "");
		    		id_opc = parseInt(id_opc);


		    		for (iny = cantidad_situaciones-1; iny > -1; iny--) { 
		    			if(id_opc<arreglo_acumula_opciones[iny]){
		    				i_en = iny;
		    			}	
		    		}
		    		
					
		    		if(actual_down_au){
			   			if (x_mouse > bounds_enunciado[i_en].left && x_mouse < bounds_enunciado[i_en].left + bounds_enunciado[i_en].width && y_mouse > bounds_enunciado[i_en].top && y_mouse < bounds_enunciado[i_en].top + bounds_enunciado[i_en].height){
				    				
			   				document.getElementById("enunciado"+i_en).style.backgroundColor = "#666666";
			   			} else {
			   				document.getElementById("enunciado"+i_en).style.backgroundColor = "#CCCCCC";
				    	}
			    	}

				});


				document.getElementById("opcion"+int).addEventListener("mouseup", function(event){
				//console.log(parent.stage.mouseX,parent.stage.mouseY)
	    		numero_arreglo_opcion_arrastre = opciones_html.indexOf(this);
	    		actual_down_au = false;
				x_mouse = event.clientX;
	    		y_mouse = event.clientY;

	    		id_opc = this.id;
		    	id_opc = id_opc.replace("opcion", "");
		    	id_opc = parseInt(id_opc);


		    	for (iny = cantidad_situaciones-1; iny > -1; iny--) { 
		    			if(id_opc<arreglo_acumula_opciones[iny]){
		    				i_en = iny;
		    			}	
		    		}
				
	   			if (x_mouse > bounds_enunciado[i_en].left && x_mouse < bounds_enunciado[i_en].left + bounds_enunciado[i_en].width && y_mouse > bounds_enunciado[i_en].top && y_mouse < bounds_enunciado[i_en].top + bounds_enunciado[i_en].height){
					
					//console.log(bounds_enunciado[i_en])
					if(i_en==0){
						num_corr = 0;
					} else{
						num_corr = 0;
						for (intx = 0; intx < i_en; intx++) { 
							num_corr += opciones[i_en-1];
						}
					}

					if(numero_arreglo_opcion_arrastre==num_corr){
						 animacionCorrecto();

						 document.getElementById('contenido_c'+0).style.zIndex = -1;
						 //$("#cont_situacion"+situacion_actual).delay(1000).fadeOut(500);
					if(situacion_actual<cantidad_situaciones-1){

						 $("#cont_situacion"+situacion_actual).delay(1000).fadeOut(500,function(){
						 	situacion_actual++
						 	document.getElementById('situacion_act').innerHTML = situacion_actual+1;
						 	//console.log("holasda");
						 	createjs.Tween.get(simbolo_retroalimentacion).to({alpha:0},velocidad_lenta);
							//$("#cont_situacion"+situacion_actual).delay(0).fadeIn(500);
							$("#cont_situacion"+situacion_actual).removeClass("situacion_invisible");
						 	document.getElementById('contenido_c'+0).style.zIndex = 1;

						 })
					} else {
						if(cantidad_maspersonaje>0){
						setTimeout(function(){
							clic_btnpersonaje();
							//document.getElementById("contenido_c0").style.zIndex = -1;

						}, 700);

						} else {
							suma_total();	
						}
						document.getElementById('msj_terminaact').innerHTML = ""+parent.tx_hasmay+" finalizado con éxito la actividad!";

					}
						 //$("#cont_situacion"+situacion_actual).fadeIn(0)
		    			//for (i = 0; i < opciones; i++) { 
		//var elemento_dragale = $('#opcion'+i).draggable('disable');
	//}
					$( this ).animate( { 'left': bounds_enunciado[i_en].left, 'top': bounds_enunciado[i_en].top-100}, 'fast', function()
					{

						this.className = "opcion_pregarr2";
						document.getElementById("enunciado"+i_en).style.backgroundColor = "#cccccc";

						//document.getElementById("contenedor_loaderint").innerHTML = "";
						//document.getElementById("contenedor_loaderint").style.visibility = "visible";

						//document.getElementById("retro_aprend"+parent.numero_arreglo_personaje_actual).className = "retro_aprend2";


							//document.getElementById("retro_preg"+parent.numero_arreglo_personaje_actual).className = "retro_preg2";
							//document.getElementById("retro_preg"+parent.numero_arreglo_personaje_actual).innerHTML = "¡Correcto!<br/>"+parent.tx_tienesmay+" claro que:";	

							
						


						
						


					});
				} else {
					 animacionIncorrecto()
					$( this ).animate( { 'left': bounds_opciones[numero_arreglo_opcion_arrastre].left, 'top': bounds_opciones[numero_arreglo_opcion_arrastre].top}, 'fast', function()
		    		{
		    				//valoresOcupados();
	                });

				}
	   				
	   			} else {
		    		
					// animacionIncorrecto()


	   				$( this ).animate( { 'left': bounds_opciones[numero_arreglo_opcion_arrastre].left, 'top': bounds_opciones[numero_arreglo_opcion_arrastre].top}, 'fast', function()
		    		{
		    				//valoresOcupados();
	                });
		    	}
	    	

		});

		document.getElementById("opcion"+int).addEventListener("mousedown", function(){
    		//console.log("DOWN")
    		numero_arreglo_opcion_arrastre = opciones_html.indexOf(this);
    		for (ixy = 0; ixy < cantidad_situaciones; ixy++) { 
				bounds_enunciado[ixy] = document.getElementById('enunciado'+ixy).getBoundingClientRect();

			}
    		for (i = 0; i < cant_opc; i++) { 
				//bounds_opciones[i] = document.getElementById('opcion'+i).getBoundingClientRect();
			}

    		actual_down_au = true;

			id_opc = this.id;
	    	id_opc = id_opc.replace("opcion", "");
		    id_opc = parseInt(id_opc);

		    for (iny = cantidad_situaciones-1; iny > -1; iny--) { 
		    			if(id_opc<arreglo_acumula_opciones[iny]){
		    				i_en = iny;
		    			}	
		    		}
    		for (i = 0; i < opciones; i++) { 

    			
				document.getElementById("opcion"+i).style.zIndex = 1;

    		}
    		
    		this.style.zIndex = 2;
    		

		});

			}
		}

	
		



		

		contenidos_circulos = [];

		var var_contenidos = document.getElementById("contenido_c0");
		contenidos_circulo = new createjs.DOMElement(var_contenidos);
		contenidos_circulo.alpha = 0;
		contenidos_circulo.x = 0;
		contenidos_circulo.y = y_contenidos_final_2;
		contenidos_circulos.push(contenidos_circulo);
		total_textos.push(contenidos_circulos[0]);
				//////ACA PERSOBAJE
		

		total_imagenes.push(titulo_pagina,icono_personaje,fondo_p1,contenedor_personaje_per1,contenedor_personaje_per2,contenedor_personaje_per3,contenedor_personaje_per4,contenedor_iaudio,equis);



		
		
	}
	

if(tipo == "arrastre"){

		total_imagenes = [
			
			
		]
		

	
		
		elementos_p1 = [
			
		];
		sensibles = [
			
			flecha_volver,
			//icono_personaje,
			equis
		];

		


			for (i = 0; i < cantidad_circulos; i++) { 
				//opciones[i].alpha = 1;
				//bounds_contenedor_opciones = [];
				//document.getElementById("contenido_c0").style.zIndex = 3; //OJO

				//document.getElementById("opcion"+i).className = "opcion_"+cantidad_circulos; //OJO
				//	document.getElementById("enunciado"+i).className = "enunciado_"+cantidad_circulos; //OJO
			}




		
			alto_enunciados = []

			ancho_enunciados = []

			x_enunciados = []

			y_enunciados = []

			bounds_enunciados = []

			enunciados_html = []

				offset_espacios = [];

				x_enunciados=[]
				y_enunciados=[]
			

			for (i = 0; i < cantidad_circulos; i++) { 

				cont_oparr = $("#opcion"+i).html();
				//$("#opcion"+i).html("<p>"+cont_oparr+"</p><span></span>")
				$("#opcion"+i).html("<p>"+cont_oparr+"</p>")

				$("#opcion"+i).append("<div class='simbretvfact'></div>")


				var enunciado_html = document.getElementById('enunciado'+i);
				enunciados_html[i] = enunciado_html;

				var alto_texto_enunciado = document.getElementById('enunciado'+i).clientHeight;
				alto_enunciados[i] = alto_texto_enunciado;
				alto_enunciados.push(alto_enunciados[i]);

				var ancho_texto_enunciado = document.getElementById('enunciado'+i).clientWidth;
				ancho_enunciados[i] = ancho_texto_enunciado;
				ancho_enunciados.push(ancho_enunciados[i]);

				
				//c  = element.offsetLeft - element.scrollLeft + element.clientLeft
				//var hola = document.getElementById('enunciado'+i)
				//var x_texto_enunciado = getPosition(hola)
				
				
				var bounds_enunciado = document.getElementById('enunciado'+i).getBoundingClientRect();
				bounds_enunciados[i] = bounds_enunciado;
				bounds_enunciados.push(bounds_enunciados[i]);

				


				//var x_texto_enunciado = document.getElementById('enunciado'+i).offsetLeft - document.getElementById('enunciado'+i).scrollLeft + document.getElementById('enunciado'+i).clientLeft;
				x_enunciados[i] = bounds_enunciados[i].left;
			

				


				//var y_texto_enunciado = document.getElementById('enunciado'+i).offsetTop - document.getElementById('enunciado'+i).scrollTop + document.getElementById('enunciado'+i).clientTop+150;
				y_enunciados[i] = bounds_enunciados[i].top;
				y_enunciados.push(y_enunciados[i]);



				offset_espacios[i] = $('#enunciado'+i).find(".espacio").eq(0).offset();
			}
			
			

		//var_globo_texto_personaje = document.getElementById('cont_globo_texto');
		//ancho_globo_texto_personaje = var_globo_texto_personaje.clientWidth;
		
		//globo_texto_personaje = new createjs.DOMElement(var_globo_texto_personaje);
		
		contenidos_circulos = []
		contenidos_circulos_html = []
		
		contenidos_circulos_masinfo = []
		contenidos_circulos_html_masinfo = []
		

		alto_opciones = 10;
		//ancho_opciones = 200;
		padding_opciones = 12;

		actual_down = false;

		x_original = [];
	
		y_original = [];
		top_opciones = 0;

		activar_opacidad_enunciados = false;

		bounds_opciones = []

		respuestas_arrastre =[]

		respuestas_anterior = []

		respuestas_anterior_html = []


		opciones = []
		opciones_html = []

		lee_pos = false;

		top_originales = [];
		left_originales = [];

		top_originales_p = [];
		left_originales_p = [];

		width_originales = [];

		top_originales_off = [];
		left_originales_off = [];

		top_actuales = [];
		left_actuales = [];

		mas_top_enunciado = 0;
		mas_top_opcion = 0;


	ancho_espacio = $(".espacio").get(0).getBoundingClientRect().width;

	function valoresOcupados(){

					
		respcorr_arrastre = [];


		contador_arrastre =0;
			nota_arrastre = 0;

    		for (i = 0; i < cantidad_circulos; i++) { 
    			respuestas_arrastre_html[i] = null;
    		}


			for (i = 0; i < cantidad_circulos; i++) { 

		
				bounds_opcion = document.getElementById('opcion'+i).getBoundingClientRect();

				for (ind = 0; ind < cantidad_circulos; ind++) { 
					//console.log(ind)

					bounds_enunciado = document.getElementById('enunciado'+ind).getBoundingClientRect();

					
	    			if (bounds_opcion.left > bounds_enunciado.left && bounds_opcion.left < bounds_enunciado.left + bounds_enunciado.width && bounds_opcion.top > bounds_enunciado.top && bounds_opcion.top < bounds_enunciado.top + bounds_enunciado.height){
    					respuestas_arrastre_html[ind] = opciones_html[i];
    						if (i == ind) {
								nota_arrastre++
								respcorr_arrastre.push(i);

							}
    				}

	    		}

	    	}

	    	for (i = 0; i < cantidad_circulos; i++) { 
	    		if (respuestas_arrastre_html[i] != null){
    				contador_arrastre += 1;
    			}
    		}






			if (contador_arrastre == cantidad_circulos){
				if($(".retroactiv").length>0){
				agotaIntentosAct();
				}
				respuestasCompletas();

				
				if(parent.es_evaluacion){
					parent.nuevo_puntaje += (nota_arrastre/cantidad_circulos)*parent.puntaje_maximo/(parent.cantidad_actividades);
					
					if(parent.nuevo_puntaje>parent.puntaje_maximo-0.1||parent.nuevo_puntaje>parent.puntaje_maximo){
						parent.nuevo_puntaje = parent.puntaje_maximo;
					}

					if(parent.nuevo_puntaje>parent.puntaje){
						parent.puntaje = parent.nuevo_puntaje;
					}
				}
				
				nuevo_score_arrastre = Math.round(nota_arrastre/cantidad_circulos*parent.puntaje_maximo)/2;

				if(nuevo_score_arrastre>parent.nuevo_puntaje_arrastre){
					parent.nuevo_puntaje_arrastre = nuevo_score_arrastre;
				}
				/*
				if(nuevo_puntaje>parent.puntaje){
					parent.puntaje = nuevo_puntaje;
				}
				*/

				//console.log(nuevo_score_arrastre)
				//suma_total();
				if(parent.znThisPage == parent.znPages){
							//parent.completado = true;

						}

				if(parent.znThisPage == parent.znPages){
							//parent.completado = true;
							txt_complemento =""
						} else {
							txt_complemento =""+parent.tx_puedesmay+" continuar a la siguiente pantalla."

						}
			

				if (nota_arrastre == cantidad_circulos){
					 
					document.getElementById("instruccion_circulos_span").innerHTML = "¡Muy bien! "+parent.tx_hasmay+" ubicado de forma correcta todas las opciones. "+txt_complemento+""
					document.getElementById("contenido_c0").style.zIndex = -1;
					//elemento_dragable.destroy();
					animacionCorrecto();
					//}

					//

					//$('.opciones_arrastre').stop(true, true).animate({ marginTop : "100px" }, 2000, 'easeOutBounce');
				//if(!arr_hzt){
				if(!parent.es_evaluacion){
				
					$(".opciones_arrastre").closest(".xcl").stop(true, true).animate( { 'height':0}, velocidad_lenta, "easeOutBounce", function(){
						});

					$(".opciones_arrastre_ver").closest(".item_c").stop(true, true).animate( { 'width':0}, velocidad_rapida,"easeOutBounce", function(){
						});
				//} else {
					//if(!arr_hzt){
					suma_anch_oparr = 0; 
					$('.textos_arrastre_ver').each(function(index){
						//console.log($(this).closest(".item_c").css("width"));
						ancho_ioparr = 100 * parseFloat($(this).closest(".item_c").css('width')) / parseFloat($(this).closest(".item_c").parent().css('width'));
						ancho_ioparr = ancho_ioparr.toFixed(1)
						ancho_ioparr = parseInt(ancho_ioparr,10)
				

						suma_anch_oparr += ancho_ioparr; 
				

					});
				
					$('.textos_arrastre_ver').each(function(index){
						ancho_ioparr = 100 * parseFloat($(this).closest(".item_c").css('width')) / parseFloat($(this).closest(".item_c").parent().css('width'));
						per_anpa =  (ancho_ioparr / suma_anch_oparr)*100;
						per_anpa =  per_anpa.toFixed(1)
						per_anpa = per_anpa+"%";
						
						$(this).closest(".item_c").width(per_anpa);

						//$(this).closest(".item_c").stop(true, true).animate({ 'width':per_anpa}, velocidad_lenta, function(){
						//});
					});

					
					bg_oparr = $('.opcion').css('background-color');
					$('.opcion').css('color',bg_oparr)
					$('.opcion').removeClass('scale1');


					$('.opcion').addClass('opcion_ok');
					//$('.opcion').stop(true, true).animate( { 'color':bg_oparr}, velocidad_lenta, "easeOutBounce", function(){
					//});

					//}
					if(cantidad_maspersonaje>0){
						//parent.audio_correcto.play();
						setTimeout(function(){
							clic_btnpersonaje();
							document.getElementById("contenido_c0").style.zIndex = -1;

						}, 700);

					} else {
					suma_total();	
					}

					for (in2 = 0; in2 < cantidad_circulos; in2++) { 
			    		document.getElementById('enunciado'+in2).style.opacity = 1;
    				}

					
					} else {
						agotaIntentosAct()

					}
					
				} else if (nota_arrastre>0) {

					errores_arrastre = cantidad_circulos-nota_arrastre;
					if(parent.cantidad_intentos_act==cuenta_intentos_act&&parent.cantidad_intentos_act>0){
						agotaIntentosAct()

						if(errores_arrastre==1){
					document.getElementById("instruccion_circulos_span").innerHTML = ""+parent.tx_tuvistemay+" "+errores_arrastre+" error en "+parent.tx_tusmin+" respuestas. " + txt_complemento

						} else {
					document.getElementById("instruccion_circulos_span").innerHTML = ""+parent.tx_tuvistemay+" "+errores_arrastre+" errores en "+parent.tx_tusmin+" respuestas. " + txt_complemento

						}

					} else {

						if(errores_arrastre==1){
						if(parent.es_evaluacion){
								document.getElementById("instruccion_circulos_span").innerHTML = ""+parent.tx_tuvistemay+" "+errores_arrastre+" error en "+parent.tx_tusmin+" respuestas. "+ txt_complemento;
								agotaIntentosAct()

							} else {
								document.getElementById("instruccion_circulos_span").innerHTML = ""+parent.tx_tienesmay+" "+errores_arrastre+" error en "+parent.tx_tusmin+" respuestas. "+parent.tx_siguelomay+" intentando."
							}
					

						} else {
							if(parent.es_evaluacion){
								document.getElementById("instruccion_circulos_span").innerHTML = ""+parent.tx_tuvistemay+" "+errores_arrastre+" errores en "+parent.tx_tusmin+" respuestas. "+txt_complemento;
								agotaIntentosAct()

							} else {
								document.getElementById("instruccion_circulos_span").innerHTML = ""+parent.tx_tienesmay+" "+errores_arrastre+" errores en "+parent.tx_tusmin+" respuestas. "+parent.tx_siguelomay+" intentando."
							}
					

						}
					}
					

					if (simbolo_retroalimentacion.alpha != 1){
						animacionIncorrecto();
					}

					
					
				} else if (nota_arrastre == 0){
					if(parent.cantidad_intentos_act==cuenta_intentos_act&&parent.cantidad_intentos_act>0){
						agotaIntentosAct()
					document.getElementById("instruccion_circulos_span").innerHTML = "Todas las opciones están ubicadas de forma incorrecta. "+txt_complemento

					} else {
						if(parent.es_evaluacion){
					document.getElementById("instruccion_circulos_span").innerHTML = "Todas las opciones están ubicadas de forma incorrecta. "+txt_complemento
								agotaIntentosAct()

							} else {
					document.getElementById("instruccion_circulos_span").innerHTML = "Todas las opciones están ubicadas de forma incorrecta. "+parent.tx_siguelomay+" intentando."

							}

					}
					if (simbolo_retroalimentacion.alpha != 1){
							animacionIncorrecto();
					}

				}

				for (i = 0; i < cantidad_circulos; i++) { 
					if(respcorr_arrastre.includes(i)){
					//	console.log(i,"i-corr")
					 //$("#enunciado"+i).removeClass("resparras_incorr")
					} else {
					//	console.log(i,"i-incorr")

					 //$("#enunciado"+i).addClass("resparras_incorr")
					}					
				}

			} else {
					
					//document.getElementById("instruccion_circulos").innerHTML = "<table class='tabla_instruccion' style='border:none'><td style='border:none' class='corchetes_instrucciones'>{</td><td style='border:none'>Arrastre cada opción hasta el lugar que corresponde.</td><td style='border:none' class='corchetes_instrucciones'>}</td></table>"
					document.getElementById("instruccion_circulos_span").innerHTML = mensaje_instruccion;
					simbolo_retroalimentacion.visible = false;
					simbolo_retroalimentacion.alpha = 0;
					
					


			}



	    	//console.log(respuestas_arrastre_html)
					
	    	
		}

		for (i = 0; i < cantidad_circulos; i++) { 

			respuestas_arrastre[i] = -1;
		}

		
		for (i = 0; i < cantidad_circulos; i++) { 

			respuestas_anterior[i] = -1;
		}
		

		for (i = 0; i < cantidad_circulos; i++) { 

			respuestas_anterior[i] = -1;
		}	

		respuestas_arrastre_html = []

		//createjs.Ticker.addEventListener("tick", valoresOcupados);

		
		
		for (i = 0; i < cantidad_circulos; i++) { 


		////DRAG
		
		actual_down = false;

		//var elemento_dragable = new Draggable('opcion'+i);
		var elemento_dragable = $('#opcion'+i).draggable({scroll: false, containment: "document"});
		console.log(elemento_dragable)

		
  	document.getElementById("opcion"+i).style.visibility = "visible";


		//elemento_dragable.destroy();

		document.getElementById("opcion"+i).addEventListener("click", function(){
    		//console.log("CLIC")
    	

		});

		document.getElementById("opcion"+i).addEventListener("mousedown", function(){
			console.log("down")

			if(parent.con_sonidoclic){
									parent.audio_clic.play();
								}
			actualizaBoundsEnunciados();

    		//console.log("CLIC")
    		//numero_arreglo_opcion_arrastre_clic = opciones_html.indexOf(this);
    		//activar_opacidad_enunciados = false;
    		//valoresOcupados();
    		numero_arreglo_opcion_arrastre_clic = opciones_html.indexOf(this);

    		//valoresOcupados();
    		//console.log(numero_arreglo_opcion_arrastre_clic)
    		
    		bounds_opcion_actual = document.getElementById('opcion'+numero_arreglo_opcion_arrastre_clic).getBoundingClientRect();
    		for (i = 0; i < cantidad_circulos; i++) { 
    			document.getElementById('opcion'+i).style.zIndex = 3;
    		}
    		document.getElementById('opcion'+numero_arreglo_opcion_arrastre_clic).style.zIndex = 4;

    		//$('#opcion'+numero_arreglo_opcion_arrastre_clic).css("margin","0 30px");

    		//margin_opa = parseInt($('#opcion'+numero_arreglo_opcion_arrastre_clic).css("margin-left"),10);
			top_opa = $('#opcion'+numero_arreglo_opcion_arrastre_clic).offset().top;
    		left_opa = $('#opcion'+numero_arreglo_opcion_arrastre_clic).offset().left;


    		
          	$('#opcion'+numero_arreglo_opcion_arrastre_clic).appendTo("#contenido_c0");
			$('#opcion'+numero_arreglo_opcion_arrastre_clic).css("top",top_opa);
			$('#opcion'+numero_arreglo_opcion_arrastre_clic).css("left",left_opa);
			$('#opcion'+numero_arreglo_opcion_arrastre_clic).css("position","absolute");
    		$('#opcion'+numero_arreglo_opcion_arrastre_clic).width(width_originales[numero_arreglo_opcion_arrastre_clic]);
    		/*
    		for (i = 0; i < cantidad_circulos; i++) { 
	    		if (bounds_opcion_actual.left > bounds_enunciados[i].left && bounds_opcion_actual.left < bounds_enunciados[i].left + bounds_enunciados[i].width && bounds_opcion_actual.top > bounds_enunciados[i].top && bounds_opcion_actual.top < bounds_enunciados[i].top + bounds_enunciados[i].height) {
	    			
	    			ocupados[i].val = false;
    				if (i == numero_arreglo_opcion_arrastre_clic) {
    					//console.log(i, ind)
    					//ocupados[ind].val = false;

    				}
    			}
    		}
    		*/

    		
    		activar_opacidad_enunciados = true;

    		for (i = 0; i < cantidad_circulos; i++) { 
    			document.getElementById("opcion"+i).style.opacity = 1;
    		}
    		//this.style.opacity = 0.5;
    		//this.style.opacity = 1;
		});

		document.getElementById("opcion"+i).addEventListener("mousemove", function(){

    		//console.log("MOVE")
    		//valoresOcupados();
    		
    		if (actual_down){
    			//activar_opacidad_enunciados = false;
    			for (i = 0; i < cantidad_circulos; i++) { 
	    			if (stage.mouseX > bounds_enunciados[i].left && stage.mouseX < bounds_enunciados[i].left + bounds_enunciados[i].width && stage.mouseY > bounds_enunciados[i].top && stage.mouseY < bounds_enunciados[i].top + bounds_enunciados[i].height){
	    				
	    				document.getElementById("enunciado"+i).style.opacity = 0.5;
	    			} else {
	    				document.getElementById("enunciado"+i).style.opacity = 1;
	    			}
	    		}
    		//	console.log("OK")
    		} else {
    		//	console.log("NO_OK")
    		}

		});

		document.getElementById("opcion"+i).addEventListener("mouseup", function(){



    		numero_arreglo_opcion_arrastre = opciones_html.indexOf(this);
			
		

			if(left_actuales[numero_arreglo_opcion_arrastre] == left_originales[numero_arreglo_opcion_arrastre] && top_actuales[numero_arreglo_opcion_arrastre] == top_originales[numero_arreglo_opcion_arrastre]){
				intercambio = false;
			} else {
				intercambio = true;

			}
			

			actual_down = false;
			var_en_zona = false;
			disponible = false;
    		for (i = 0; i < cantidad_circulos; i++) { 

    				en_zona = stage.mouseX > bounds_enunciados[i].left && stage.mouseX < bounds_enunciados[i].left + bounds_enunciados[i].width && stage.mouseY > bounds_enunciados[i].top - mas_top_enunciado && stage.mouseY < bounds_enunciados[i].top - mas_top_enunciado + bounds_enunciados[i].height;
    				
    				if(en_zona){
    					lugar_zona = i;
    					var_en_zona = true;
    					disponible = respuestas_arrastre_html[lugar_zona] == null || respuestas_arrastre_html[lugar_zona] == this;
    					numero_arreglo_actual = opciones_html.indexOf(respuestas_arrastre_html[lugar_zona]);
    				}  
    				
	    		} 


    			//console.log(lugar_zona,disponible,respuestas_arrastre_html[lugar_zona]);

	    		if(var_en_zona){
	    			
	    			if(disponible){
	    				
	    				mueveOpcion($( this ),lugar_zona,numero_arreglo_opcion_arrastre);

						
          			} else if(intercambio){
	    				
	    				top_opa = $('#opcion'+numero_arreglo_actual).offset().top;
			    		left_opa = $('#opcion'+numero_arreglo_actual).offset().left;
			    		
			          	$('#opcion'+numero_arreglo_actual).appendTo("#contenido_c0");
						$('#opcion'+numero_arreglo_actual).css("top",top_opa);
						$('#opcion'+numero_arreglo_actual).css("left",left_opa);
	    				
						$('#opcion'+numero_arreglo_actual).css("position","absolute");
			    		$('#opcion'+numero_arreglo_actual).width(width_originales[numero_arreglo_actual]);
						
						$("#opcion"+numero_arreglo_actual).stop(true, true).animate( { 'left': offset_espacios[lugar_previo].left+2, 'top': offset_espacios[lugar_previo].top+2}, 'fast',function(){
							agregaAEspacio($("#opcion"+numero_arreglo_actual),lugar_previo)
						});
	    				
	    				mueveOpcion($( this ),lugar_zona,numero_arreglo_opcion_arrastre);
						
	    			}  else {

	    				top_opa = $('#opcion'+numero_arreglo_actual).offset().top;
			    		left_opa = $('#opcion'+numero_arreglo_actual).offset().left;
			    		
			          	$('#opcion'+numero_arreglo_actual).appendTo("#contenido_c0");
						$('#opcion'+numero_arreglo_actual).css("top",top_opa);
						$('#opcion'+numero_arreglo_actual).css("left",left_opa);
	    				
						$('#opcion'+numero_arreglo_actual).css("position","absolute");
			    		$('#opcion'+numero_arreglo_actual).width(width_originales[numero_arreglo_actual]);

						$("#opcion"+numero_arreglo_actual).stop(true, true).animate( { 'left': left_originales[numero_arreglo_actual], 'top':top_originales[numero_arreglo_actual]}, 'fast');
	    				
	    				mueveOpcion($( this ),lugar_zona,numero_arreglo_opcion_arrastre);
						

	    			}
	    			
	    			
	    		}  else {
						//$("#txt_arrastre"+numero_arreglo_txt_actual).animate( { 'left': left_originales[numero_arreglo_txt_actual], 'top': top_originales[numero_arreglo_txt_actual]}, 'fast');
						$( this ).stop(true, true).animate( {  'left': left_originales_off[numero_arreglo_opcion_arrastre], 'top': top_originales_off[numero_arreglo_opcion_arrastre]}, 'fast', function()
	    				
          				{
	    				valoresOcupados();
                			
          				});

	    		}

    		//////
    		

    		numero_arreglo_opcion_arrastre = opciones_html.indexOf(this);
    		
    		actual_down = false;

    		
    		

		});

		function mueveOpcion(elemento_dr,l_zona,num_arr_op_arrastre){
			//elemento_dr.stop(true, true).animate( { 'left': bounds_enunciados[l_zona].left - left_originales_off[num_arr_op_arrastre] + 20, 'top': offset_espacios[l_zona].top-bounds_opciones[num_arr_op_arrastre].top+3}, 'fast', function(){
			elemento_dr.stop(true, true).animate( { 'left': offset_espacios[l_zona].left+2, 'top': offset_espacios[l_zona].top+2}, 'fast', function(){
          			agregaAEspacio(elemento_dr,l_zona) 
          					//bounds_enunciados[lugar_zona].top/2
	    			valoresOcupados();
                			
          		});
		}

		function agregaAEspacio(elemento_d,l_zona){
			elemento_d.css("top","2px")
          	elemento_d.css("left","3px")
          	elemento_d.css("margin","0")
          	elemento_d.css('width', 'calc(100% - 30px');
          	
          					
          	elemento_d.appendTo($("#enunciado"+l_zona).find(".espacio").eq(0));
		}
		

		document.getElementById("opcion"+i).addEventListener("mousedown", function(){
    		//console.log("DOWN")
    		
    		if(parent.con_sonidoclic){
									parent.audio_clic.play();
								}
    		numero_arreglo_opcion_arrastre = opciones_html.indexOf(this);
    		

    		actual_down = true;
    		for (i = 0; i < cantidad_circulos; i++) { 

    			en_zona_previa = stage.mouseX > bounds_enunciados[i].left && stage.mouseX < bounds_enunciados[i].left + bounds_enunciados[i].width && stage.mouseY > bounds_enunciados[i].top - mas_top_enunciado && stage.mouseY < bounds_enunciados[i].top - mas_top_enunciado + bounds_enunciados[i].height;
	    		if(en_zona_previa){
	    			lugar_previo = i;
	    		
	    		}
				    		
				document.getElementById("opcion"+i).style.zIndex = 1;

				//left_actuales[i] = $("#opcion"+i).position().left;
				//top_actuales[i] = $("#opcion"+i).position().top;
				
				//left_actuales[i] = document.getElementById('opcion'+i).style.left;
				//top_actuales[i] = document.getElementById('opcion'+i).style.top;


				left_actuales[i] = $('#opcion'+i).offset().left;
				top_actuales[i] = $('#opcion'+i).offset().top;
    		}
    		
    		this.style.zIndex = 2;
    		

		});
		
		document.getElementById("enunciado"+i).addEventListener("mouseover", function(){

    		

		});


		document.getElementById("opcion"+i).addEventListener("mouseout", function(){
			this.style.opacity = 1;
		});
		document.getElementById("enunciado"+i).addEventListener("mouseout", function(){
			this.style.opacity = 1;
		});

		/*
		document.getElementById("opciones_arrastre").addEventListener("click", function(){
    		//console.log("DOWN")
    		//numero_arreglo_opcion_arrastre_clic = opciones_html.indexOf(this);


    		if (activar_opacidad_enunciados){

    			//activar_opacidad_enunciados = false;
    			document.getElementById("opcion"+numero_arreglo_opcion_arrastre_clic).style.left = x_original[numero_arreglo_opcion_arrastre];
	    		document.getElementById("opcion"+numero_arreglo_opcion_arrastre_clic).style.top = 0+"px";

    		} 

    		
    		
    		

		});

		*/
		

		///FIN DRAG


			
				
				//coord_origcrucb[i] = coor_org;
			//console.log(x_original[i])
			
			//f_opciones_arrastre(var_opciones);	

		/*
			
			opcion_arrastre =   new createjs.DOMElement(var_opciones);//new createjs.Text(var_opciones, "16px ProximaNova-Light", "#FFFFFF");//var_opciones;
			opcion_arrastre.alpha = 1;
			
			opcion_arrastre.x = 0;
			opcion_arrastre.y = top_opciones;
			//opcion_arrastre.regX = 85;
			//opcion_arrastre.regY = 0;

			opciones.push(opcion_arrastre);
			total_textos.push(opcion_arrastre);	

			
			y_original.push(opciones[i].y);

			

			if (i==0){
				opciones[i].x = 0;
				x_original.push(opciones[i].x);
			}
			else {
				
				opciones[i].x = (i*200) ;
				x_original.push(opciones[i].x);

				//console.log(contenedor_opciones[i].x)		
				
				} 
			
		*/
		}

		//actualizaPosOpcArr();

		function actualizaPosOpcArr(){
			ix_p = 0;
			for (i = 0; i < cantidad_circulos; i++) { 
				var var_opciones = document.getElementById("opcion"+i)//.innerHTML;
				opciones_html[i] = var_opciones;
				opciones_html.push(opciones_html[i]);
				//opciones_html[i].style.left = (i*188) + 21 + "px"
				//margin_left_opciones = document.getElementById('opcion'+i).clientWidth+48.5;

				//opciones_html[i].style.left = (i*margin_left_opciones) + 25 + "px"
				//opciones_html[i].style.top = 75 + "px"
				x_original[i] = opciones_html[i].style.left;


				bounds_opcion = document.getElementById('opcion'+i).getBoundingClientRect();
				bounds_opciones[i] = bounds_opcion;
				bounds_opciones.push(bounds_opciones[i]);


				//left_originales[i] = $("#opcion"+i).position().left;
				//top_originales[i] = $("#opcion"+i).position().top - mas_top_opcion;

				//width_originales[i] = $('#opcion'+i).width();
				if(ancho_espacio==0){
					width_originales[i] = $('#opcion'+i).width();
				} else {
					$('#opcion'+i).width(ancho_espacio - 30)
					width_originales[i] = ancho_espacio - 30;//20;//$('#opcion'+i).width();
				}
				
				left_originales[i] = $('#opcion'+i).offset().left;
				top_originales[i] = $('#opcion'+i).offset().top;
				
				left_originales_p[i] = $('#opcion'+i).position().left+30;
				top_originales_p[i] = $('#opcion'+i).position().top;

				left_originales_off[i] = $('#opcion'+i).offset().left;
				top_originales_off[i] = $('#opcion'+i).offset().top;

				left_actuales[i] = $('#opcion'+i).offset().left;
				top_actuales[i] = $('#opcion'+i).offset().top;
				
				cont_oparr = $("#opcion"+i).html();
				$("#opcion"+i).html("<p>"+cont_oparr+"</p><span></span>")
				$("#opcion"+i).append("<div class='simbretvfact'></div>")

				var enunciado_html = document.getElementById('enunciado'+i);
				enunciados_html[i] = enunciado_html;

				var alto_texto_enunciado = document.getElementById('enunciado'+i).clientHeight;
				alto_enunciados[i] = alto_texto_enunciado;
				alto_enunciados.push(alto_enunciados[i]);

				var ancho_texto_enunciado = document.getElementById('enunciado'+i).clientWidth;
				ancho_enunciados[i] = ancho_texto_enunciado;
				ancho_enunciados.push(ancho_enunciados[i]);

				
				//c  = element.offsetLeft - element.scrollLeft + element.clientLeft
				//var hola = document.getElementById('enunciado'+i)
				//var x_texto_enunciado = getPosition(hola)
				
				
				var bounds_enunciado = document.getElementById('enunciado'+i).getBoundingClientRect();
				bounds_enunciados[i] = bounds_enunciado;
				bounds_enunciados.push(bounds_enunciados[i]);

				


				//var x_texto_enunciado = document.getElementById('enunciado'+i).offsetLeft - document.getElementById('enunciado'+i).scrollLeft + document.getElementById('enunciado'+i).clientLeft;
				x_enunciados[i] = bounds_enunciados[i].left;
			

				


				//var y_texto_enunciado = document.getElementById('enunciado'+i).offsetTop - document.getElementById('enunciado'+i).scrollTop + document.getElementById('enunciado'+i).clientTop+150;
				y_enunciados[i] = bounds_enunciados[i].top;
				y_enunciados.push(y_enunciados[i]);

				//$(".opciones_arrastre").closest(".xcl").stop(true, true).animate( { 'height':0}, velocidad_lenta, "easeOutBounce", function(){
				//		});
				if(!arr_hzt){

					//$('#enunciado'+i).find(".espacio").css("flex","0 0 "+(width_originales[i]+30)+"px")
					nuev_ancopar = (width_originales[i]+30)+"px"
					$('#enunciado'+i).find(".espacio").stop(true, true).animate( { 'flex-basis':nuev_ancopar}, velocidad_lenta, "easeInOutCubic", function(){

					//$('#enunciado'+i).find(".espacio").stop(true, true).animate( { 'width':(width_originales[i]+30)+"px"}, velocidad_lenta, "easeOutBounce", function(){

						actualizaOffEspacio(ix_p);
						ix_p++
					});
				} else {
						actualizaOffEspacio(i);
				

				}
				






			}


			function actualizaOffEspacio(ix_px){
				offset_espacios[ix_px] = $('#enunciado'+ix_px).find(".espacio").eq(0).offset();

			}
          	//$(".opciones_arrastre").attr("class","opciones_arrastre_c")

			for (i = 0; i < cantidad_circulos; i++) { 
				//console.log(left_originales[i])
          		$('#opcion'+i).appendTo("#contenido_c0");
				
				$('#opcion'+i).width(width_originales[i]);
				$('#opcion'+i).css("position","absolute");
				$('#opcion'+i).css("left",left_originales[i]);
				$('#opcion'+i).css("top",top_originales[i]);
				$('#opcion'+i).css("margin",0);
				
          		

			}
			//console.log(offset_espacios,bounds_enunciados)
		}
		

		
		/*	
			
			//opciones.push(opcion_arrastre);
			//opciones_html.push(var_opciones);
			//total_textos.push(opcion_arrastre);
			var bounds_opciones = opcion_arrastre.getBounds();
			//opciones[i].regX = bounds_opciones.width/2;
			//opciones[i].textAlign = "center";
			//opcion_actual = opciones_html[i];
			//f_opciones_arrastre(opcion_actual);

			document.getElementById("enunciado"+i).addEventListener("mouseover", over_opcion_prueba);


			//var_volver.addEventListener("mouseover", over_volver);
			//var_volver.addEventListener("mouseout", out_volver);
			
		} 

		

		opciones.splice(-1, 1);

	*/
		


		
		ocupados = []
		//console.log(bounds_contenedor_opciones[0].width);
		for (i = 0; i < cantidad_circulos; i++) { 
			ocupados[i] = {val: false};
			//console.log(ocupados[i].val);
		}

		contenidos_circulos = [];

		var var_contenidos = document.getElementById("contenido_c0");
		contenidos_circulo = new createjs.DOMElement(var_contenidos);
		contenidos_circulo.alpha = 0;
		contenidos_circulo.x = 0;
		contenidos_circulo.y = y_contenidos_final_2;
		contenidos_circulos.push(contenidos_circulo);
		total_textos.push(contenidos_circulos[0]);
				//////ACA PERSOBAJE
		

		total_imagenes.push(titulo_pagina,icono_personaje,fondo_p1,contenedor_personaje_per1,contenedor_personaje_per2,contenedor_personaje_per3,contenedor_personaje_per4,contenedor_iaudio,equis);



		
		
	}

	if(tipo == "arrastre_txt_varios"){
		total_imagenes = [
			
			
		]
		

	
		
		elementos_p1 = [
			
		];
		sensibles = [
			
			flecha_volver,
			
			equis
		];




		cont_txt_prin = document.getElementById('txt_prin').style.top;
			cont_txt_prin = cont_txt_prin.split( 'px' );
			cont_txt_prin = cont_txt_prin[0];
			cont_txt_prin = Number(cont_txt_prin);



			cont_opciones_top = document.getElementById('cont_opciones').style.top;
			cont_opciones_top = cont_opciones_top.split( 'px' );
			cont_opciones_top = cont_opciones_top[0];
			cont_opciones_top = Number(cont_opciones_top);


			cont_opciones_left = document.getElementById('cont_opciones').style.left;
			cont_opciones_left = cont_opciones_left.split( 'px' );
			cont_opciones_left = cont_opciones_left[0]+25;
			cont_opciones_left = Number(cont_opciones_left);


			
	


		cantidad_circulos_original = cantidad_circulos;
		cantidad_circulos_original_2 = cantidad_circulos;
		cantidad_espacios_opciones = cantidad_circulos_original.length
		cantidad_circulos = 0;
		acumula_opciones = [];

		for (i = 0; i < cantidad_espacios_opciones; i++) { 
			cantidad_circulos += cantidad_circulos_original[i];
			acumula_opciones[i] = cantidad_circulos;
						
		}

		
		

		
		//console.log(cantidad_circulos_original,cantidad_circulos)



			for (i = 0; i < cantidad_circulos; i++) { 
				//opciones[i].alpha = 1;
				//bounds_contenedor_opciones = [];
				document.getElementById("contenido_c0").style.zIndex = 3; //OJO
			}



			alto_enunciados = []

			ancho_enunciados = []

			x_enunciados = []

			y_enunciados = []

			bounds_enunciados = []

			enunciados_html = []

			txt_arrastre_html = [];
			opcionestxt_html = [];
			
			for (i = 0; i < cantidad_circulos; i++) { 

				var var_txt_arrastre = document.getElementById("txt_arrastre"+i)//.innerHTML;
				txt_arrastre_html[i] = var_txt_arrastre;

				cont_txtarr = $("#txt_arrastre"+i).html()
				$("#txt_arrastre"+i).html("<div>"+cont_txtarr+"</div>")
				$("#txt_arrastre"+i).find("div").append("<div class='simarrcat' style='height:auto'></div>")
			}
			for (i = 0; i < cantidad_espacios_opciones; i++) { 

				var var_opciontxt_html = document.getElementById('opcion_arrastretxt'+i);
				opcionestxt_html[i] = var_opciontxt_html;

				
			}


		//var_globo_texto_personaje = document.getElementById('cont_globo_texto');
		//ancho_globo_texto_personaje = var_globo_texto_personaje.clientWidth;
		
		//globo_texto_personaje = new createjs.DOMElement(var_globo_texto_personaje);
		
		contenidos_circulos = []
		contenidos_circulos_html = []
		
		contenidos_circulos_masinfo = []
		contenidos_circulos_html_masinfo = []
		

		alto_opciones = 10;
		//ancho_opciones = 200;
		padding_opciones = 12;

		actual_down = false;

		x_original = [];
	
		y_original = [];
		top_opciones = 0;

		activar_opacidad_enunciados = false;

		bounds_opciones = []

		respuestas_arrastre =[]

		respuestas_anterior = []

		respuestas_anterior_html = []


		opciones = []
		opciones_html = []

		opciones_html_txt = []
		
		respuestas_arrastre_html_txt = [];

		mas_top_enunciado = 0;
		mas_top_opcion = 500;
		cantidad_ocupados = []
		elementos_ocupados = []
		elementos_posiciones_actual = []
		elementos_posiciones =[];

		elementos_ubicados = []
		elementos_ubicados_actuales = []

		verdadero_ubicados = [];
		verdadero_ubicados_posicion = [];

		verdaderos_ubicados = [];
		/*
		for (i = 0; i < cantidad_circulos_original.length; i++) { 
				
				//i2 = i.toString();
					//console.log(i, "i")

	    		for (ind = 0; ind < cantidad_circulos_original[ind]; ind++) { 
					//console.log(ind, "ind")
					//ind2 = ind.toString();
					verdadero_ubicados_posicion[ind] = 0;
					
					//console.log(i)
					//console.log(ind)
					
					
	    		}
	    		
	    		verdadero_ubicados.push(verdadero_ubicados_posicion);
	    			

	    		//verdadero_ubicados[i] = arreglo_arrastre;
	    		
	    	}
				console.log(verdadero_ubicados)
				nuevo_verdadero_ubicados = verdadero_ubicados
				verdadero_ubicados = [[0,0],[0,0],[0,0],[0,0],[0,0]]
				console.log(verdadero_ubicados)
		*/
		
		

		for (i = 0; i < cantidad_espacios_opciones; i++) { 
		cantidad_ocupados[i] = 0;
		elementos_ubicados[i] = "x";
		}

		//console.log(elementos_ubicados)

		
		for (i = 0; i < cantidad_espacios_opciones; i++) { 

			numero_elementos = cantidad_circulos_original[i];
			//variable_acumula = numero_elementos * (i+1);
			if(i != 0){
			acumulado = acumula_opciones[i-1];	
			} else {
			acumulado = 0;
			}
			

			elementos_posiciones_actual = [];
			for (ind = acumulado; ind < acumula_opciones[i]; ind++) { 
				elementos_posiciones_actual.push('txt_arrastre'+acumulado);
				
				acumulado++

				
				

			}
			
				

				elementos_posiciones[i] = elementos_posiciones_actual;
			
			

			//console.log(elementos_posiciones_actual,i)

			

		
		}
		
			



	function valoresOcupados_txt(){

			mov_carr =[];
			correcto_carr = [];
			totales_usados = []
			elementos_arrastre = 0;
			arr_elementos_ubicados = [];
			for (i = 0; i < cantidad_espacios_opciones; i++) { 

				cantidad_ocupados[i] = 0;
				
				

			}
			cantidad_arreglo = 0;
			for (i = 0; i < cantidad_circulos_original_2.length; i++) { 

				cantidad_arreglo = "0,";

				int_cantidad_circulos_original_2 = parseInt(cantidad_circulos_original_2[i]);
					

				for (ind = 0; ind <= int_cantidad_circulos_original_2-1; ind++) { 
					//console.log(cantidad_circulos_original_2[i],ind)
					cantidad_arreglo += "0,";
					cantidad_circulos_original_2[i] = cantidad_arreglo;
					
				}
				
				
				verdadero_ubicados[i] = cantidad_circulos_original_2[i];
				

				arreglo_cantidad_arrastre = verdadero_ubicados[i].split(",");
				arreglo_cantidad_arrastre.pop();
				verdadero_ubicados[i] = arreglo_cantidad_arrastre;

				
		    					
			}



			//console.log(verdadero_ubicados)

			for (i = 0; i < cantidad_espacios_opciones; i++) { 
			
			elementos_ubicados[i] = "x";

			}
			for (i = 0; i < cantidad_circulos_original.length; i++) { 
				
	    		verdaderos_ubicados = 0;
	    	}

			//console.log(elementos_ubicados[i][0],elementos_posiciones[i][0],elementos_ubicados[i][0] == elementos_posiciones[i][0])
	    		
    		

			contador_arrastre =0;
			nota_arrastre = 0;

    		for (i = 0; i < cantidad_circulos; i++) { 
    			respuestas_arrastre_html_txt[i] = null;
    		}
    		
			//elementos_ubicados_actuales = [];
			shuffle(arreglo_numero_opciones);
			for (i = 0; i < cantidad_circulos; i++) { 

				i_original = i;
				

				//i = arreglo_numero_opciones[i]
				//console.log(i)

		
				bounds_opcion = document.getElementById('txt_arrastre'+i).getBoundingClientRect();
				//elementos_ubicados_actuales = []
				//elementos_ubicados_actuales = [];
				for (ind = 0; ind < cantidad_espacios_opciones; ind++) { 
					//console.log(ind)
					
					
    				

					bounds_enunciado = document.getElementById('opcion_arrastretxt'+ind).getBoundingClientRect();

					
	    			if (bounds_opcion.left > bounds_enunciado.left && bounds_opcion.left < bounds_enunciado.left + bounds_enunciado.width && bounds_opcion.top > bounds_enunciado.top && bounds_opcion.top < bounds_enunciado.top + bounds_enunciado.height){
    					
	    				$( "#txt_arrastre"+i ).animate( { 'left': bounds_enunciados_txt[ind].left + cantidad_ocupados[ind]*55 + 8, 'top': bounds_enunciados_txt[ind].top-parent.top_atv}, 'fast', function()
	          				{
		    				//valoresOcupados_txt();
	                			
	          				});

	    				cantidad_ocupados[ind] += 1;

	    				
	    				
	    				
	    				if(elementos_ubicados[ind] == "x"){
	    					elementos_ubicados_actuales = "txt_arrastre"+i;
	    					totales_usados.push(elementos_ubicados_actuales)
	    					elementos_ubicados[ind] = elementos_ubicados_actuales;
	    					arreglo_elementos = elementos_ubicados[ind].split();
	    				} else {
	    					elementos_ubicados_actuales = ","+"txt_arrastre"+i;
	    					totales_usados.push(elementos_ubicados_actuales)
	    					elementos_ubicados[ind] += elementos_ubicados_actuales;	
	    					arreglo_elementos = elementos_ubicados[ind].split(",");
	    					
	    				}

	    				
	    				
	    				elementos_ubicados[ind] = arreglo_elementos;

	    				/*
	    				if(arreglo_elementos[arreglo_elementos.length-1] == ""){
	    					arreglo_elementos.pop(); 
	    				}
	    				*/
	    				//
	    				
	    				mov_carr[i] = 1;

	    				
	    				
	    				if(c_carr[ind].includes(i)){
	    				
	    					correcto_carr[i] = 1;
	    				
	    				} else {
	    					correcto_carr[i] = 0;

	    				}

	    				
	    				


	    				//elementos_ocupados[cantidad_circulos_original[]].push(document.getElementById('txt_arrastre'+i));

	    				
	    				
    					

    					respuestas_arrastre_html_txt[ind] = txt_arrastre_html[i];
    						if (i == ind) {
								nota_arrastre++
							}
    				}

	    		}

	    		i = i_original;

	    	}

	    	txt_elementos_ubicados = elementos_ubicados.toString();
	    	arr_elementos_ubicados = txt_elementos_ubicados.split(",");
	    	contador_movidos = 0;
	    	for (i = 0; i < arr_elementos_ubicados.length; i++) { 
	    		if(arr_elementos_ubicados[i] != "x"){
	    			contador_movidos += 1;
	    		}
	    	}


	    	
	    		//console.log(elementos_ubicados)
	    		//console.log(elementos_posiciones)
	    	cantidad_ubicados = 0;
	    	
	    	

	    	
	    		//cantidad_ubicados += elementos_ubicados[i].length;
	    	

	    	

	    	for (i = 0; i < cantidad_circulos; i++) { 

	    		if (respuestas_arrastre_html_txt[i] != null){
    				contador_arrastre += 1;
    				//console.log(contador_arrastre,respuestas_arrastre_html_txt,i)
    			}
    		}

    		

	    	for (i = 0; i < elementos_posiciones.length; i++) { 
	    		//console.log(elementos_posiciones.length,elementos_posiciones)
	    		/*
	    		elementos_ubicados_texto = elementos_ubicados[i].toString();
	    		elementos_posiciones_texto = elementos_posiciones[i].toString();

	    		//console.log(elementos_ubicados_texto,elementos_posiciones_texto,elementos_ubicados_texto==elementos_posiciones_texto);

	    		arreglo_ubicados_texto = elementos_ubicados_texto.split(",");
	    		arreglo_posiciones_texto = elementos_posiciones_texto.split(",");

	    		console.log(arreglo_ubicados_texto,arreglo_posiciones_texto,arreglo_ubicados_texto==arreglo_posiciones_texto);

				*/
				/*
	    		if(elementos_ubicados_texto==elementos_posiciones_texto){
	    			verdadero_ubicados[i] = 1; 
	    		}
	    		*/
	    		/*
	    		if(elementos_ubicados[i] === elementos_posiciones[i]){
	    				for (var ind = 0; ind < elementos_ubicados[i].length; ++ind) {
   						 if (elementos_ubicados[ind] !== elementos_posiciones[i]) 
	    				console.log("kjkjj")

  						}
	    			}
	    			*/

	    		cantidad_iter_ubicados = elementos_ubicados[i].length;
	    		//console.log(i,cantidad_iter_ubicados)
	    		//console.log(elementos_ubicados[i].length, elementos_ubicados[i],elementos_ubicados)
	    		for (ind = 0; ind < cantidad_iter_ubicados; ind++) { 
		    			/////CAMBIO ACÁ
		    			//console.log(ind)
	    			for (ind2 = 0; ind2 < elementos_posiciones[i].length; ind2++) { 
	    			//console.log(elementos_posiciones,ind2,elementos_posiciones[ind],elementos_posiciones[ind].length)	
	    			//console.log(i,ind,ind2,elementos_posiciones,elementos_posiciones[ind2].length)	

	    				if(elementos_ubicados[i][ind] == elementos_posiciones[i][ind2]){
	    				
	    					//console.log(i,ind,ind2)

		    				verdadero_actual = verdadero_ubicados[i]
		    				
							verdadero_actual[ind] = 1// = {val: true};

						
	    				//verdadero_ubicados[0][1].val = "x";

	    				} 
	    			}
	    			
	    		}

	    		
	    		//console.log(elementos_ubicados[i][0],elementos_posiciones[i][0],elementos_ubicados[i][0] == elementos_posiciones[i][0])
	    		//console.log(verdadero_actual)
    		}
    		
    		//console.log(verdadero_ubicados)

    		txt_verdadero_ubicados = verdadero_ubicados.toString();
    		arr_verdadero_ubicados = txt_verdadero_ubicados.split(",");

    		

	    	for (i = 0; i < arr_verdadero_ubicados.length; i++) { 
	    		
	    		arr_verdadero_ubicados[i]  = parseInt(arr_verdadero_ubicados[i]);
	    		
	    	}

	    	arr_verdadero_ubicados = correcto_carr;
	    	//console.log(arr_verdadero_ubicados)
	    	suma_correctos = 0;
	    	for (i = 0; i < cantidad_circulos; i++) { 
	    		if(correcto_carr[i]==1){
	    		suma_correctos += correcto_carr[i];
	    		}
	    	}
	    	//for (i = 0; i < arr_verdadero_ubicados.length; i++) { 
	    	//	suma_correctos += arr_verdadero_ubicados[i];
	    		

	    	//}

	    	//console.log(suma_correctos,arr_verdadero_ubicados,txt_elementos_ubicados)
	    		
    		/*
			
    		verdadero_actual = verdadero_ubicados[0]
	    				
						verdadero_actual[0] = {val: true};
    					console.log(verdadero_ubicados)
			*/

			//console.log(contador_movidos,cantidad_circulos)
			if (contador_movidos == cantidad_circulos){
				if($(".retroactiv").length>0){
					agotaIntentosAct();
				}
				respuestasCompletas();
				//nuevo_puntaje = Math.round(nota_arrastre/cantidad_circulos*parent.puntaje_maximo);



				if(parent.es_evaluacion){
					parent.nuevo_puntaje += (nota_arrastre/cantidad_circulos)*parent.puntaje_maximo/(parent.cantidad_actividades);
					
					if(parent.nuevo_puntaje>parent.puntaje_maximo-0.1||parent.nuevo_puntaje>parent.puntaje_maximo){
						parent.nuevo_puntaje = parent.puntaje_maximo;
					}

					if(parent.nuevo_puntaje>parent.puntaje){
						parent.puntaje = parent.nuevo_puntaje;
					}
				} else {
					parent.nuevo_puntaje = Math.round(nota_arrastre/cantidad_circulos*parent.puntaje_maximo);
				}


				if(parent.znThisPage == parent.znPages){
							//parent.completado = true;
							txt_complemento =""
						} else {
							txt_complemento =""+parent.tx_puedesmay+" continuar a la siguiente pantalla."

						}


				if(parent.nuevo_puntaje>parent.puntaje){
					//parent.puntaje = nuevo_puntaje;
				}
				if (suma_correctos == cantidad_circulos){
					 
					document.getElementById("instruccion_circulos_span").innerHTML = "Muy bien. "+parent.tx_hasmay+" ubicado de forma correcta todas las opciones. "+txt_complemento;
					document.getElementById("contenido_c0").style.zIndex = -1;
					//elemento_dragable.destroy();
					animacionCorrecto();
					//}

					//suma_total();

						if(cantidad_maspersonaje>0){
						//parent.audio_correcto.play();
						setTimeout(function(){
							clic_btnpersonaje();
							//document.getElementById("contenido_c0").style.zIndex = -1;

						}, 700);

						} else {
						suma_total();	
						}
						
						for (i = 0; i < cantidad_espacios_opciones; i++) { 

	    				document.getElementById("opcion_arrastretxt"+i).style.opacity = 1;
						
						}
					
				

					
				} else if (suma_correctos==1) {
					errores_arrastre = cantidad_circulos-suma_correctos;
					if(parent.cantidad_intentos_act==cuenta_intentos_act&&parent.cantidad_intentos_act>0){
							agotaIntentosAct();
							document.getElementById("instruccion_circulos_span").innerHTML = ""+parent.tx_tuvistemay+" "+errores_arrastre+" error en "+parent.tx_tusmin+" respuestas. "
							

						} else {
							document.getElementById("instruccion_circulos_span").innerHTML = " "+parent.tx_tienesmay+" "+errores_arrastre+" error en "+parent.tx_tusmin+" respuestas. "+parent.tx_siguelomay+" intentando. "
						}
					

					if (simbolo_retroalimentacion.alpha != 1){
					animacionIncorrecto();
						
					}

					
					
				} else if (suma_correctos>0) {
					errores_arrastre = cantidad_circulos-suma_correctos;
					if(parent.cantidad_intentos_act==cuenta_intentos_act&&parent.cantidad_intentos_act>0){
							agotaIntentosAct();
							//document.getElementById("instruccion_circulos_span").innerHTML = ""+parent.tx_tuvistemay+" "+errores_arrastre+" errores en "+parent.tx_tusmin+" respuestas."
							if(errores_arrastre==1){
							document.getElementById("instruccion_circulos_span").innerHTML = ""+parent.tx_tuvistemay+" "+errores_arrastre+" error en "+parent.tx_tusmin+" respuestas."

							} else {
							document.getElementById("instruccion_circulos_span").innerHTML = ""+parent.tx_tuvistemay+" "+errores_arrastre+" errores en "+parent.tx_tusmin+" respuestas."

							}

						} else {
							//document.getElementById("instruccion_circulos_span").innerHTML = ""+parent.tx_tienesmay+" "+errores_arrastre+" errores en "+parent.tx_tusmin+" respuestas. "+parent.tx_siguelomay+" intentando."

							if(errores_arrastre==1){
							document.getElementById("instruccion_circulos_span").innerHTML = ""+parent.tx_tienesmay+" "+errores_arrastre+" error en "+parent.tx_tusmin+" respuestas. "+parent.tx_siguelomay+" intentando."

							} else {
							document.getElementById("instruccion_circulos_span").innerHTML = ""+parent.tx_tienesmay+" "+errores_arrastre+" errores en "+parent.tx_tusmin+" respuestas. "+parent.tx_siguelomay+" intentando."
								
							}
						}
					

					if (simbolo_retroalimentacion.alpha != 1){
					animacionIncorrecto();
						
					}

					
					
				} else if (suma_correctos == 0){
					if(parent.cantidad_intentos_act==cuenta_intentos_act&&parent.cantidad_intentos_act>0){
							agotaIntentosAct();
							document.getElementById("instruccion_circulos_span").innerHTML = "Todas las opciones están ubicadas de forma incorrecta. "
							
							

						} else {
							document.getElementById("instruccion_circulos_span").innerHTML = "Todas las opciones están ubicadas de forma incorrecta. "+parent.tx_siguelomay+" intentando."
						}
					
					if (simbolo_retroalimentacion.alpha != 1){
					animacionIncorrecto();
						
					}

				}

			} else {
					
					//document.getElementById("instruccion_circulos").innerHTML = "<table class='tabla_instruccion' style='border:none'><td style='border:none' class='corchetes_instrucciones'>{</td><td style='border:none'>Arrastre cada opción hasta el lugar que corresponde.</td><td style='border:none' class='corchetes_instrucciones'>}</td></table>"
					document.getElementById("instruccion_circulos_span").innerHTML = mensaje_instruccion;

					simbolo_retroalimentacion.alpha = 0;
					simbolo_retroalimentacion.visible = false;

					
					


			}


			
	    
					
	    	
		}

		for (i = 0; i < cantidad_circulos; i++) { 

			respuestas_arrastre[i] = -1;
		}

		
		for (i = 0; i < cantidad_circulos; i++) { 

			
		}
		

		for (i = 0; i < cantidad_circulos; i++) { 

			respuestas_anterior[i] = -1;
		}	

		respuestas_arrastre_html = []

		//createjs.Ticker.addEventListener("tick", valoresOcupados);

		array_Txtarrastre = [];
		elementos_Txtarrastre = [];
		top_originales = [];
		left_originales = [];

		top_actuales = [];
		left_actuales = [];
		
		bounds_enunciados_txt = [];

		for (i = 0; i < cantidad_espacios_opciones; i++) { 
		
		
		var bounds_enunciado_txt = document.getElementById('opcion_arrastretxt'+i).getBoundingClientRect();
		bounds_enunciados_txt[i] = bounds_enunciado_txt;
		bounds_enunciados_txt.push(bounds_enunciados_txt[i]);
		}

		arreglo_numero_opciones=[];
		for (i = 0; i < cantidad_circulos; i++) { 
		arreglo_numero_opciones[i] = i;
		}

		

		
		function shuffle(a) {
		    for (let i = a.length; i; i--) {
		        let j = Math.floor(Math.random() * i);
		        [a[i - 1], a[j]] = [a[j], a[i - 1]];
		    }
		}

		shuffle(arreglo_numero_opciones);



		for (i = 0; i < cantidad_circulos; i++) { 

		

			var elemento_dragable = $('#opcion'+i).draggable({scroll: false, containment: "document"});
			//console.log(elemento_dragable)

			elemento_txtdrag = $('#txt_arrastre'+i);


	

		/////////////////////////////////
		function ElementosTxt(elemento) {
			

			$('#txt_arrastre'+elemento).css({ position: 'absolute'});

			//bounds_enunciado = document.getElementById('txt_arrastre'+elemento).getBoundingClientRect();


 		 	this.elemento = $('#txt_arrastre'+elemento);

 		 	//this.ancho = this.elemento.width();

 		 	
 		 	elementos_Txtarrastre[elemento] = document.getElementById('txt_arrastre'+elemento);
 		 	
 		 	this.creaDrag = function() {
				txt_dragable = this.elemento.draggable({scroll: false, containment: "document"});
				
				//$("<span class='txt_arrastreclon'> "+this.texto+" </span>").insertAfter("#txt_arrastre"+i);


				};

				//$( "#txt_arrastre"+elemento ).draggable({ revert: "invalid" });

			this.posicion = this.elemento.position();
 		  	this.texto = $( "#txt_arrastre"+elemento ).text();
 		 	
 		 	elemento_actual = this.elemento;
 		 	ix = arreglo_numero_opciones[i];

 		 	if(cantidad_circulos % 2 == 0){
 		 		suma_val = 0;
 		 	} else {
 		 		suma_val = 0.5;

 		 	}
 		 	if(ix<(cantidad_circulos/2)){
 		 		//console.log(cont_opciones_left)
			left_originales[elemento] = cont_opciones_left+10;
			top_originales[elemento] = ix*40+cont_opciones_top+60;//this.posicion.top - mas_top_opcion;
			} else if(ix==(cantidad_circulos/2+suma_val)) {
			left_originales[elemento] = cont_opciones_left+70;//this.posicion.left;
			top_originales[elemento] = 0*40+cont_opciones_top+70;
			} else if(ix==(cantidad_circulos/2)+(1+suma_val)) {
				

				left_originales[elemento] = cont_opciones_left+70;//this.posicion.left;
				top_originales[elemento] =  1*40+cont_opciones_top+70;
			}else if(ix==(cantidad_circulos/2)+(2+suma_val)) {
				
				left_originales[elemento] = cont_opciones_left+70;//this.posicion.left;
				top_originales[elemento] =  2*40+cont_opciones_top+70;
			}else if(ix==(cantidad_circulos/2)+(3+suma_val)) {
				left_originales[elemento] = cont_opciones_left+70;//this.posicion.left;
				top_originales[elemento] =  3*40+cont_opciones_top+70;
			}else if(ix==(cantidad_circulos/2)+(4+suma_val)) {
				left_originales[elemento] = cont_opciones_left+70;//this.posicion.left;
				top_originales[elemento] =  4*40+cont_opciones_top+70;
			}
			

			

			
			elemento_actual.animate( { 'left': left_originales[elemento], 'top': top_originales[elemento]}, 10*elemento);

			
			
		}	

	
		array_Txtarrastre[i] = new ElementosTxt(i);
		array_Txtarrastre[i].creaDrag();

		left_actual = left_originales[i];
		top_actual = top_originales[i];

		
		}
		bounds_enunciados_txt[0].y = bounds_enunciados_txt[0].y - 22;
		bounds_enunciados_txt[0].top = bounds_enunciados_txt[0].top - 22;
		//bounds_enunciados_txt[1].y = bounds_enunciados_txt[1].y - 22;
		//bounds_enunciados_txt[1].top = bounds_enunciados_txt[1].top - 22;
		
		//console.log(bounds_enunciados_txt);

		for (i = 0; i < cantidad_circulos; i++) { 


		////DRAG
		
		actual_down = false;

		//var elemento_dragable = new Draggable('opcion'+i);
		
		elemento_txtdrag = $('#txt_arrastre'+i);


		document.getElementById("txt_arrastre"+i).addEventListener("mouseup", function(){
		//elemento_txtdrag.mouseup(function() {
			
			
			numero_arreglo_opcion_arrastre_txt = elementos_Txtarrastre.indexOf(this);
			if(left_actuales[numero_arreglo_opcion_arrastre_txt] == left_originales[numero_arreglo_opcion_arrastre_txt] && top_actuales[numero_arreglo_opcion_arrastre_txt] == top_originales[numero_arreglo_opcion_arrastre_txt]){
				intercambio = false;
			} else {
				intercambio = true;

			}
			

			actual_down = false;
			var_en_zona = false;
			disponible = false;
    		for (i = 0; i < cantidad_espacios_opciones; i++) { 

    				en_zona = stage.mouseX > bounds_enunciados_txt[i].left && stage.mouseX < bounds_enunciados_txt[i].left + bounds_enunciados_txt[i].width && stage.mouseY > bounds_enunciados_txt[i].top - mas_top_enunciado && stage.mouseY < bounds_enunciados_txt[i].top - mas_top_enunciado + bounds_enunciados_txt[i].height;
    				
    				if(en_zona){
    					lugar_zona = i;

    					var_en_zona = true;
    					disponible = respuestas_arrastre_html_txt[lugar_zona] == null || respuestas_arrastre_html_txt[lugar_zona] == this;
    					disponible = true;
    					numero_arreglo_txt_actual = elementos_Txtarrastre.indexOf(respuestas_arrastre_html_txt[lugar_zona]);
    				}  
    				
	    		} 



    			//console.log(lugar_zona,disponible,respuestas_arrastre_html_txt[lugar_zona]);

	    		if(var_en_zona){

	    			if(disponible){

	    				if(lugar_previo != "lugar_zona"){
          					//console.log("1")
		    				
							$( this ).animate( { 'left': bounds_enunciados_txt[lugar_zona].left + cantidad_ocupados[lugar_zona]*40 + 8, 'top': bounds_enunciados_txt[lugar_zona].top-parent.top_atv}, 'fast', function()
	          				{
		    				valoresOcupados_txt();
	                			
	          				});
          				} else {
          					//console.log("2")
          					//console.log(left_actuales[numero_arreglo_opcion_arrastre_txt],top_actuales[numero_arreglo_opcion_arrastre_txt])

	    					$(this).animate( { 'left': left_actuales[numero_arreglo_opcion_arrastre_txt], 'top': top_actuales[numero_arreglo_opcion_arrastre_txt]}, 'fast');

          				}
          			} else if(intercambio){
	    				
	    				$("#txt_arrastre"+numero_arreglo_txt_actual).animate( { 'left': bounds_enunciados_txt[lugar_previo].left  + bounds_enunciados_txt[lugar_previo].width/2 -$("#txt_arrastre"+numero_arreglo_txt_actual).width()/2 -7, 'top': bounds_enunciados_txt[lugar_previo].top-0}, 'fast');
						$( this ).animate( { 'left': bounds_enunciados_txt[lugar_zona].left + bounds_enunciados_txt[lugar_zona].width/2-$(this).width()/2 -7, 'top': bounds_enunciados_txt[lugar_zona].top-parent.top_atv}, 'fast', function()
	    				
          				{
	    				valoresOcupados_txt();
                			
          				});
	    			}  else {
	    				
						$("#txt_arrastre"+numero_arreglo_txt_actual).animate( { 'left': left_originales[numero_arreglo_txt_actual], 'top': top_originales[numero_arreglo_txt_actual]}, 'fast');
						$( this ).animate( { 'left': bounds_enunciados_txt[lugar_zona].left + bounds_enunciados_txt[lugar_zona].width/2-$(this).width()/2 -7, 'top': bounds_enunciados_txt[lugar_zona].top-parent.top_atv}, 'fast', function()
	    				
          				{
	    				valoresOcupados_txt();
                			
          				});

	    			}

	    		}  else {
						//$("#txt_arrastre"+numero_arreglo_txt_actual).animate( { 'left': left_originales[numero_arreglo_txt_actual], 'top': top_originales[numero_arreglo_txt_actual]}, 'fast');
						$( this ).animate( {  'left': left_originales[numero_arreglo_opcion_arrastre_txt], 'top': top_originales[numero_arreglo_opcion_arrastre_txt]}, 'fast', function()
	    				
          				{
	    				valoresOcupados_txt();
                			
          				});

	    		}

	    	
    		
		});

		actual_down = false;

		document.getElementById("txt_arrastre"+i).addEventListener("mousemove", function(){
    		
    		if (actual_down){
    			//activar_opacidad_enunciados = false;
    			for (i = 0; i < cantidad_espacios_opciones; i++) { 
    				
    					menos_alto = 0;
    				

	    			if (stage.mouseX > bounds_enunciados_txt[i].left && stage.mouseX < bounds_enunciados_txt[i].left + bounds_enunciados_txt[i].width && stage.mouseY > bounds_enunciados_txt[i].top - menos_alto && stage.mouseY < bounds_enunciados_txt[i].top - menos_alto + bounds_enunciados_txt[i].height){
	    				
	    				document.getElementById("opcion_arrastretxt"+i).style.opacity = 0.5;
	    			} else {
	    				document.getElementById("opcion_arrastretxt"+i).style.opacity = 1;
	    			}
	    		}
    		//	console.log("OK")
    		} else {
    		//	console.log("NO_OK")
    		}



		});
		

		document.getElementById("txt_arrastre"+i).addEventListener("mousedown", function(){
    		//console.log("DOWN")


    		if(parent.con_sonidoclic){
									parent.audio_clic.play();
								}

    		for (i = 0; i < cantidad_espacios_opciones; i++) { 

				bounds_enunciado_txt = document.getElementById('opcion_arrastretxt'+i).getBoundingClientRect();
				bounds_enunciados_txt[i] = bounds_enunciado_txt;
				bounds_enunciados_txt.push(bounds_enunciados_txt[i]);

			}

			numero_arreglo_opcion_arrastre_txt = elementos_Txtarrastre.indexOf(this);

    		actual_down = true;
    		lugar_previo = 100;
    		for (i = 0; i < cantidad_espacios_opciones; i++) { 
				

    			en_zona_previa = stage.mouseX > bounds_enunciados_txt[i].left && stage.mouseX < bounds_enunciados_txt[i].left + bounds_enunciados_txt[i].width && stage.mouseY > bounds_enunciados_txt[i].top - mas_top_enunciado && stage.mouseY < bounds_enunciados_txt[i].top - mas_top_enunciado + bounds_enunciados_txt[i].height;
	    		if(en_zona_previa){
	    			lugar_previo = i;
	    		
	    		}
				    		
				document.getElementById("txt_arrastre"+i).style.zIndex = 1;

				left_actuales[i] = $("#txt_arrastre"+i).position().left;
				top_actuales[i] = $("#txt_arrastre"+i).position().top;
				
    		}
    		
    		this.style.zIndex = 2;

		});

				

		//console.log(i,array_Txtarrastre[i]);
		//$( '#txt_arrastre0' ).data( 'left', $( '#txt_arrastre0' ).offset( ).left ).data( 'top', $( '#txt_arrastre0' ).offset( ).top);



		

		//, 'top': bounds_txtdrag.top

		/////////////////////////////////
	}
		
	for (i = 0; i < cantidad_espacios_opciones; i++) { 
		
		document.getElementById("opcion_arrastretxt"+i).addEventListener("mouseout", function(){
			this.style.opacity = 1;
    		if (actual_down){
    			//this.style.opacity = 0;
  			//console.log("HOLA")
  			}
		});
		}
		contenidos_circulos = [];

		var var_contenidos = document.getElementById("contenido_c0");
		contenidos_circulo = new createjs.DOMElement(var_contenidos);
		contenidos_circulo.alpha = 0;
		contenidos_circulo.x = 0;
		contenidos_circulo.y = y_contenidos_final_2+1240;
		contenidos_circulos.push(contenidos_circulo);
		total_textos.push(contenidos_circulos[0]);
		

		total_imagenes.push(titulo_pagina,icono_personaje,fondo_p1,contenedor_personaje_per1,contenedor_personaje_per2,contenedor_personaje_per3,contenedor_personaje_per4,contenedor_iaudio,equis);



		
		
	}

	if(tipo == "arrastre_txt2"){
		total_imagenes = [
			
			
		]
		

	
		
		elementos_p1 = [
			
		];
		sensibles = [
			
			flecha_volver,
			
			equis
		];




	

		

			for (i = 0; i < cantidad_circulos; i++) { 
				//opciones[i].alpha = 1;
				//bounds_contenedor_opciones = [];
				document.getElementById("contenido_c0").style.zIndex = 3; //OJO
			}



			alto_enunciados = []

			ancho_enunciados = []

			x_enunciados = []

			y_enunciados = []

			bounds_enunciados = []

			enunciados_html = []

			txt_arrastre_html = [];
			opcionestxt_html = [];
			
			for (i = 0; i < cantidad_circulos; i++) { 

				var var_txt_arrastre = document.getElementById("txt_arrastre"+i)//.innerHTML;
				txt_arrastre_html[i] = var_txt_arrastre;

				var var_opciontxt_html = document.getElementById('opcion_arrastretxt'+i);
				opcionestxt_html[i] = var_opciontxt_html;

				
			}


		//var_globo_texto_personaje = document.getElementById('cont_globo_texto');
		//ancho_globo_texto_personaje = var_globo_texto_personaje.clientWidth;
		
		//globo_texto_personaje = new createjs.DOMElement(var_globo_texto_personaje);
		
		contenidos_circulos = []
		contenidos_circulos_html = []
		
		contenidos_circulos_masinfo = []
		contenidos_circulos_html_masinfo = []
		

		alto_opciones = 10;
		//ancho_opciones = 200;
		padding_opciones = 12;

		actual_down = false;

		x_original = [];
	
		y_original = [];
		top_opciones = 0;

		activar_opacidad_enunciados = false;

		bounds_opciones = []

		respuestas_arrastre =[]

		respuestas_anterior = []

		respuestas_anterior_html = []


		opciones = []
		opciones_html = []

		opciones_html_txt = []
		
		respuestas_arrastre_html_txt = [];

		mas_top_enunciado = 0;
		mas_top_opcion = 500;

	function valoresOcupados_txt(){

			contador_arrastre =0;
			nota_arrastre = 0;

    		for (i = 0; i < cantidad_circulos; i++) { 
    			respuestas_arrastre_html_txt[i] = null;
    		}

    		arr_correcora = [];
    		arr_incorrecora = [];
			for (i = 0; i < cantidad_circulos; i++) { 

		
				bounds_opcion = document.getElementById('txt_arrastre'+i).getBoundingClientRect();

				for (ind = 0; ind < cantidad_circulos; ind++) { 
					//console.log(ind)

					bounds_enunciado = document.getElementById('opcion_arrastretxt'+ind).getBoundingClientRect();
					//stage.mouseX > bounds_enunciados_txt[i].left && stage.mouseX < bounds_enunciados_txt[i].left + bounds_enunciados_txt[i].width && stage.mouseY > bounds_enunciados_txt[i].top - menos_alto && stage.mouseY < bounds_enunciados_txt[i].top - menos_alto + bounds_enunciados_txt[i].height
					
	    			if (bounds_opcion.left > bounds_enunciado.left && bounds_opcion.left < bounds_enunciado.left + bounds_enunciado.width && bounds_opcion.top > bounds_enunciado.top && bounds_opcion.top < bounds_enunciado.top + bounds_enunciado.height){
	    				
    					respuestas_arrastre_html_txt[ind] = txt_arrastre_html[i];
    						if (i == ind) {
								nota_arrastre++
								//arr_correcora.push(nota_arrastre)
								arr_correcora.push(ind)
							} else {
								arr_incorrecora[i] = ind;
							}
    				}

	    		}

	    	}
	    	
	    	for (i = 0; i < cantidad_circulos; i++) { 
	    		if (respuestas_arrastre_html_txt[i] != null){
    				contador_arrastre += 1;
    			}
    		}





			if (contador_arrastre == cantidad_circulos){
				//nuevo_puntaje = Math.round(nota_arrastre/cantidad_circulos*parent.puntaje_maximo);
				//if(nuevo_puntaje>parent.puntaje){
					//parent.puntaje = nuevo_puntaje;
				//}

				if(parent.es_evaluacion){
							parent.nuevo_puntaje += (nota_arrastre/cantidad_circulos)*parent.puntaje_maximo/(parent.cantidad_actividades);
							
							if(parent.nuevo_puntaje>parent.puntaje_maximo-0.1||parent.nuevo_puntaje>parent.puntaje_maximo){
								parent.nuevo_puntaje = parent.puntaje_maximo;
							}

							if(parent.nuevo_puntaje>parent.puntaje){
								parent.puntaje = parent.nuevo_puntaje;
							}
						}

						if(parent.es_evaluacion){
					document.getElementById("contenido_c0").style.zIndex = -1;

	    			for (i = 0; i < cantidad_circulos; i++) { 
	    				if(arr_correcora.includes(i)){
	    					$('#txt_arrastre'+i).find(".corr_orac").html()
	    					$('#txt_arrastre'+i).find(".simbretvf").html(parent.icono_check)
	    					//$('#txt_arrastre'+i).find(".txt_opc").addClass("tachado")
	    				} else {
	    					$('#txt_arrastre'+i).find(".corr_orac").html()
	    					$('#txt_arrastre'+i).find(".simbretvf").html(parent.icono_wrong)
	    					$('#txt_arrastre'+i).find(".txt_opc").addClass("tachado")
	    					$('#txt_arrastre'+i).find(".corr_orac").html($('#txt_arrastre'+arr_incorrecora[i]).find(".txt_opc").text())
	    					$('#txt_arrastre'+i).find(".corr_orac").css("margin-top","-5px");
	    				}
	    			}

	    			$(".simbretvf").css("display","initial");
	    		}
				if (nota_arrastre == cantidad_circulos){
					 
					document.getElementById("instruccion_circulos").innerHTML = "<div>Muy bien. "+parent.tx_hasmay+" ubicado de forma correcta todas las opciones.</div>"
					document.getElementById("contenido_c0").style.zIndex = -1;
					//elemento_dragable.destroy();
					animacionCorrecto();
					
					setTimeout(function(){
					//suma_total();
							

						}, 500);


					if(cantidad_maspersonaje>0){
						//parent.audio_correcto.play();
						setTimeout(function(){
							clic_btnpersonaje();
							
							$(".texto_principal_txt").animate( { 'margin-left': "60px"}, 300);

							$('.txt_arrastre').each(function(index){
								
								n_posleft = $(this).position().left-190;
								
								

								$(this).animate( { 'left':n_posleft}, 300);
							});
							

							document.getElementById("contenido_c0").style.zIndex = -1;

						}, 700);

					} else {
						suma_total();	
					}
					

					
				} else if (nota_arrastre>0) {

					if(parent.es_evaluacion){
						if(cantidad_maspersonaje>0){
							//parent.audio_correcto.play();
							setTimeout(function(){
								clic_btnpersonaje();
								
								$(".texto_principal_txt").animate( { 'margin-left': "60px"}, 300);
								$('.txt_arrastre').each(function(index){
									n_posleft = $(this).position().left-190;
									
									

									$(this).animate( { 'left':n_posleft}, 300);
								});
								

								document.getElementById("contenido_c0").style.zIndex = -1;

							}, 700);

						} else {
							suma_total();	
						}
					}
					
					errores_arrastre = cantidad_circulos-nota_arrastre;
					if(errores_arrastre==1){

					if(parent.es_evaluacion){
					document.getElementById("instruccion_circulos").innerHTML = "<div>"+parent.tx_tienesmay+" "+errores_arrastre+" error en "+parent.tx_tusmin+" respuestas. </div>"

					} else {
						if(parent.cantidad_intentos_act==cuenta_intentos_act&&parent.cantidad_intentos_act>0){
							agotaIntentosAct()
						}
					document.getElementById("instruccion_circulos").innerHTML = "<div>"+parent.tx_tienesmay+" "+errores_arrastre+" error en "+parent.tx_tusmin+" respuestas. "+parent.tx_siguelomay+" intentando.</div>"
					}

					} else {
						if(parent.es_evaluacion){
							document.getElementById("instruccion_circulos").innerHTML = "<div>"+parent.tx_tienesmay+" "+errores_arrastre+" errores en "+parent.tx_tusmin+" respuestas. </div>"
					} else {
						if(parent.cantidad_intentos_act==cuenta_intentos_act&&parent.cantidad_intentos_act>0){
							agotaIntentosAct()
						}
					document.getElementById("instruccion_circulos").innerHTML = "<div>"+parent.tx_tienesmay+" "+errores_arrastre+" errores en "+parent.tx_tusmin+" respuestas. "+parent.tx_siguelomay+" intentando.</div>"
						}
					}
					

					//if (simbolo_retroalimentacion.alpha != 1){

					
					animacionIncorrecto();
					

					//}

					
					
				} else if (nota_arrastre == 0){
					if(parent.es_evaluacion){
						document.getElementById("instruccion_circulos").innerHTML = "<div>Todas las opciones están ubicadas de forma incorrecta. </div>"
					} else {
						if(parent.cantidad_intentos_act==cuenta_intentos_act&&parent.cantidad_intentos_act>0){
							agotaIntentosAct()
						}
						document.getElementById("instruccion_circulos").innerHTML = "<div>Todas las opciones están ubicadas de forma incorrecta. "+parent.tx_siguelomay+" intentando.</div>"
					}

					if(parent.es_evaluacion){
						if(cantidad_maspersonaje>0){
							//parent.audio_correcto.play();
							setTimeout(function(){
								clic_btnpersonaje();
								
								$(".texto_principal_txt").animate( { 'margin-left': "60px"}, 300);
								$('.txt_arrastre').each(function(index){
									n_posleft = $(this).position().left-190;
									
									

									$(this).animate( { 'left':n_posleft}, 300);
								});
								

								document.getElementById("contenido_c0").style.zIndex = -1;

							}, 700);

						} else {
							suma_total();	
						}
					}

					if (simbolo_retroalimentacion.alpha != 1){

					animacionIncorrecto();
					

					}

				}

			} else {
					
					//document.getElementById("instruccion_circulos").innerHTML = "<table class='tabla_instruccion' style='border:none'><td style='border:none' class='corchetes_instrucciones'>{</td><td style='border:none'>Arrastre cada opción hasta el lugar que corresponde.</td><td style='border:none' class='corchetes_instrucciones'>}</td></table>"
					document.getElementById("instruccion_circulos").innerHTML = mensaje_instruccion;

					simbolo_retroalimentacion.alpha = 0;
					simbolo_retroalimentacion.visible = false;

					
					


			}


			
	    
					
	    	
		}

		for (i = 0; i < cantidad_circulos; i++) { 

			respuestas_arrastre[i] = -1;
		}

		
		for (i = 0; i < cantidad_circulos; i++) { 

			
		}
		

		for (i = 0; i < cantidad_circulos; i++) { 

			respuestas_anterior[i] = -1;
		}	

		respuestas_arrastre_html = []

		//createjs.Ticker.addEventListener("tick", valoresOcupados);

		array_Txtarrastre = [];
		elementos_Txtarrastre = [];
		top_originales = [];
		left_originales = [];

		top_actuales = [];
		left_actuales = [];
		
		bounds_enunciados_txt = [];

		
		for (i = 0; i < cantidad_circulos; i++) { 

		var bounds_enunciado_txt = document.getElementById('opcion_arrastretxt'+i).getBoundingClientRect();
		bounds_enunciados_txt[i] = bounds_enunciado_txt;
		bounds_enunciados_txt.push(bounds_enunciados_txt[i]);


			var elemento_dragable = $('#opcion'+i).draggable({scroll: false, containment: "document"});

			elemento_txtdrag = $('#txt_arrastre'+i);


	

		/////////////////////////////////
		function ElementosTxt(elemento) {
			

			$('#txt_arrastre'+elemento).css({ position: 'absolute'});

			//bounds_enunciado = document.getElementById('txt_arrastre'+elemento).getBoundingClientRect();


 		 	this.elemento = $('#txt_arrastre'+elemento);

 		 	//this.ancho = this.elemento.width();

 		 	
 		 	elementos_Txtarrastre[elemento] = document.getElementById('txt_arrastre'+elemento);
 		 	
 		 	this.creaDrag = function() {
				txt_dragable = this.elemento.draggable({scroll: false, containment: "parent"});
				
				//$("<span class='txt_arrastreclon'> "+this.texto+" </span>").insertAfter("#txt_arrastre"+i);


				};

				//$( "#txt_arrastre"+elemento ).draggable({ revert: "invalid" });

			this.posicion = this.elemento.position();
 		  	this.texto = $( "#txt_arrastre"+elemento ).text();
 		 	
 		 	elemento_actual = this.elemento;
			left_originales[elemento] = 10//this.posicion.left;
			top_originales[elemento] = i*40+10;//this.posicion.top - mas_top_opcion;

			
			elemento_actual.animate( { 'left': left_originales[elemento], 'top': top_originales[elemento]}, 10*elemento);

			
			
		}	

	
		array_Txtarrastre[i] = new ElementosTxt(i);
		array_Txtarrastre[i].creaDrag();

		left_actual = left_originales[i];
		top_actual = top_originales[i];

		
		}

		

		//bounds_enunciados_txt[0].y = bounds_enunciados_txt[0].y - 22;
		//bounds_enunciados_txt[0].top = bounds_enunciados_txt[0].top - 22;
		//bounds_enunciados_txt[1].y = bounds_enunciados_txt[1].y - 22;
		//bounds_enunciados_txt[1].top = bounds_enunciados_txt[1].top - 22;
		
		//console.log(bounds_enunciados_txt);

		for (i = 0; i < cantidad_circulos; i++) { 


		////DRAG
		
		actual_down = false;

		//var elemento_dragable = new Draggable('opcion'+i);
		
		elemento_txtdrag = $('#txt_arrastre'+i);


		document.getElementById("txt_arrastre"+i).addEventListener("mouseup", function(){
		//elemento_txtdrag.mouseup(function() {
			
			
			numero_arreglo_opcion_arrastre_txt = elementos_Txtarrastre.indexOf(this);
			if(left_actuales[numero_arreglo_opcion_arrastre_txt] == left_originales[numero_arreglo_opcion_arrastre_txt] && top_actuales[numero_arreglo_opcion_arrastre_txt] == top_originales[numero_arreglo_opcion_arrastre_txt]){
				intercambio = false;
			} else {
				intercambio = true;

			}
			


			actual_down = false;
			var_en_zona = false;
			disponible = false;
			
    		for (i = 0; i < cantidad_circulos; i++) { 
    				menos_alto = 0;
    				en_zona = stage.mouseX > bounds_enunciados_txt[i].left && stage.mouseX < bounds_enunciados_txt[i].left + bounds_enunciados_txt[i].width && stage.mouseY > bounds_enunciados_txt[i].top - menos_alto && stage.mouseY < bounds_enunciados_txt[i].top - menos_alto + bounds_enunciados_txt[i].height
    				
    				if(en_zona){
    					
    					lugar_zona = i;
						var_en_zona = true;
						
    					disponible = respuestas_arrastre_html_txt[lugar_zona] == null || respuestas_arrastre_html_txt[lugar_zona] == this;
    					numero_arreglo_txt_actual = elementos_Txtarrastre.indexOf(respuestas_arrastre_html_txt[lugar_zona]);
    				}  
    				
	    		} 


    			//console.log(lugar_zona,disponible,respuestas_arrastre_html_txt[lugar_zona]);

	    		if(var_en_zona){

	    			if(disponible){
	    				$( this ).animate( { 'left': bounds_enunciados_txt[lugar_zona].left + bounds_enunciados_txt[lugar_zona].width/2-$(this).width()/2 -5, 'top': bounds_enunciados_txt[lugar_zona].top-parent.top_at2}, 'fast', function()
          				{
	    				valoresOcupados_txt();
                			
          				});
          			} else if(intercambio){
	    				
	    				$("#txt_arrastre"+numero_arreglo_txt_actual).animate( { 'left': bounds_enunciados_txt[lugar_previo].left  + bounds_enunciados_txt[lugar_previo].width/2 -$("#txt_arrastre"+numero_arreglo_txt_actual).width()/2 -5, 'top': bounds_enunciados_txt[lugar_previo].top-parent.top_at2}, 'fast');
						$( this ).animate( { 'left': bounds_enunciados_txt[lugar_zona].left + bounds_enunciados_txt[lugar_zona].width/2-$(this).width()/2 -5, 'top': bounds_enunciados_txt[lugar_zona].top-parent.top_at2}, 'fast', function()
	    				
          				{
	    				valoresOcupados_txt();
                			
          				});
	    			}  else {
						$("#txt_arrastre"+numero_arreglo_txt_actual).animate( { 'left': left_originales[numero_arreglo_txt_actual], 'top': top_originales[numero_arreglo_txt_actual]}, 'fast');
						$( this ).animate( { 'left': bounds_enunciados_txt[lugar_zona].left + bounds_enunciados_txt[lugar_zona].width/2-$(this).width()/2 -5, 'top': bounds_enunciados_txt[lugar_zona].top-parent.top_at2}, 'fast', function()
	    				
          				{
	    				valoresOcupados_txt();
                			
          				});

	    			}

	    		}  else {
						//$("#txt_arrastre"+numero_arreglo_txt_actual).animate( { 'left': left_originales[numero_arreglo_txt_actual], 'top': top_originales[numero_arreglo_txt_actual]}, 'fast');
						$( this ).animate( {  'left': left_originales[numero_arreglo_opcion_arrastre_txt], 'top': top_originales[numero_arreglo_opcion_arrastre_txt]}, 'fast', function()
	    				
          				{
	    				valoresOcupados_txt();
                			
          				});

	    		}

	    	
    		
		});

		actual_down = false;

		document.getElementById("txt_arrastre"+i).addEventListener("mousemove", function(){
    		
    		if (actual_down){
    			//activar_opacidad_enunciados = false;
    			for (i = 0; i < cantidad_circulos; i++) { 
    				
    					menos_alto = 0;
    				

	    			if (stage.mouseX > bounds_enunciados_txt[i].left && stage.mouseX < bounds_enunciados_txt[i].left + bounds_enunciados_txt[i].width && stage.mouseY > bounds_enunciados_txt[i].top - menos_alto && stage.mouseY < bounds_enunciados_txt[i].top - menos_alto + bounds_enunciados_txt[i].height){
	    				
	    				document.getElementById("opcion_arrastretxt"+i).style.opacity = 0.5;
	    			} else {
	    				document.getElementById("opcion_arrastretxt"+i).style.opacity = 1;
	    			}
	    		}
    		//	console.log("OK")
    		} else {
    		//	console.log("NO_OK")
    		}



		});

		document.getElementById("opcion_arrastretxt"+i).addEventListener("mouseout", function(){
			this.style.opacity = 1;
    		if (actual_down){
    			//this.style.opacity = 0;
  			//console.log("HOLA")
  			}
		});

		document.getElementById("txt_arrastre"+i).addEventListener("mousedown", function(){


			if(parent.con_sonidoclic){
									parent.audio_clic.play();
								}
    		//console.log("DOWN")
			numero_arreglo_opcion_arrastre_txt = elementos_Txtarrastre.indexOf(this);

    		actual_down = true;

    		for (i = 0; i < cantidad_circulos; i++) { 


				var bounds_enunciado_txt = document.getElementById('opcion_arrastretxt'+i).getBoundingClientRect();
				bounds_enunciados_txt[i] = bounds_enunciado_txt;


				
			}

			
    		for (i = 0; i < cantidad_circulos; i++) { 


			

    			en_zona_previa = stage.mouseX > bounds_enunciados_txt[i].left && stage.mouseX < bounds_enunciados_txt[i].left + bounds_enunciados_txt[i].width && stage.mouseY > bounds_enunciados_txt[i].top - mas_top_enunciado && stage.mouseY < bounds_enunciados_txt[i].top - mas_top_enunciado + bounds_enunciados_txt[i].height;
	    		if(en_zona_previa){
	    			lugar_previo = i;
	    		
	    		}
				    		
				document.getElementById("txt_arrastre"+i).style.zIndex = 1;

				left_actuales[i] = $("#txt_arrastre"+i).position().left;
				top_actuales[i] = $("#txt_arrastre"+i).position().top;
				
    		}
    		
    		this.style.zIndex = 2;

		});

				

		//console.log(i,array_Txtarrastre[i]);
		//$( '#txt_arrastre0' ).data( 'left', $( '#txt_arrastre0' ).offset( ).left ).data( 'top', $( '#txt_arrastre0' ).offset( ).top);



		

		//, 'top': bounds_txtdrag.top

		/////////////////////////////////
	}
		

		contenidos_circulos = [];

		var var_contenidos = document.getElementById("contenido_c0");
		contenidos_circulo = new createjs.DOMElement(var_contenidos);
		contenidos_circulo.alpha = 0;
		contenidos_circulo.x = 0;
		contenidos_circulo.y = y_contenidos_final_2;
		contenidos_circulos.push(contenidos_circulo);
		total_textos.push(contenidos_circulos[0]);
		

		total_imagenes.push(titulo_pagina,icono_personaje,fondo_p1,contenedor_personaje_per1,contenedor_personaje_per2,contenedor_personaje_per3,contenedor_personaje_per4,contenedor_iaudio,equis);



		
		
	}

	if(tipo == "sel_globos"){
		total_imagenes = [
			
			
		]
		
	
		
		elementos_p1 = [
			
		];
		sensibles = [
			
			flecha_volver,
			
			equis
		];
		

		///////////////////
		total_globos_correctos = cantidad_circulos[0];
		total_globos_incorrectos = cantidad_circulos[1]

		total_globos = total_globos_correctos + total_globos_incorrectos;

		margin_top_menor = 10;
		margin_top_mayor = 300;

		margin_left_menor = 10;
		margin_left_mayor = 1000;
		
		html_correctos = [];

		seleccionado_correcto = [];


		html_incorrectos = [];
		seleccionado_incorrecto = [];


		tiempo_maximo = 20000;
		tiempo_minimo = 11000;

		contador_seleccionados = 0;
		contador_correctos = 0;

		for (i = 0; i < total_globos_correctos; i++) {
			var_globo_correcto = document.getElementById("correcto"+i);
			
			alto_azar = parseInt( Math.random() * (margin_top_mayor - margin_top_menor) + margin_top_menor );
			left_azar = parseInt( Math.random() * (margin_left_mayor - margin_left_menor) + margin_left_menor );

			var_globo_correcto.style.marginTop = alto_azar+"px"
			var_globo_correcto.style.marginLeft = left_azar+"px"
			html_correctos[i] = var_globo_correcto;
			id_actual= "#"+var_globo_correcto.id;
			
			
			animacionGlobo(id_actual);	

			seleccionado_correcto[i] = {val: false};

			var_globo_correcto.addEventListener("click", clicGlobo);


		};

		/*
		setInterval(function(){
			duracion_int = 5000;
			$( "#correcto0" ).removeClass("animacion1");
						
			$( "#correcto0" ).addClass("animacion1");
			console.log("hjk")
		}, 5000);
		*/
		
		

		html_incorrectos = [];
		seleccionado_incorrecto = [];

		for (i = 0; i < total_globos_incorrectos; i++) {
			var_globo_incorrecto = document.getElementById("incorrecto"+i);
			
			alto_azar = parseInt( Math.random() * (margin_top_mayor - margin_top_menor) + margin_top_menor );
			left_azar = parseInt( Math.random() * (margin_left_mayor - margin_left_menor) + margin_left_menor );
			
			var_globo_incorrecto.style.marginTop = alto_azar+"px"
			var_globo_incorrecto.style.marginLeft = left_azar+"px"

			html_incorrectos[i] = var_globo_incorrecto;
			
			id_actual= "#"+var_globo_incorrecto.id;
			animacionGlobo(id_actual);

			seleccionado_incorrecto[i] = {val: false};

			var_globo_incorrecto.addEventListener("click", clicGlobo);


		};


		function clicGlobo(){
			

			id_actual= "#"+this.id;
			numero_arreglo_globo_correcto = html_correctos.indexOf(this);
			numero_arreglo_globo_incorrecto = html_incorrectos.indexOf(this);

			

			if(numero_arreglo_globo_correcto!=-1){
				if(seleccionado_correcto[numero_arreglo_globo_correcto].val == false){
					$( id_actual ).removeClass("esfera");
					$( id_actual ).addClass("esfera_selec");

					seleccionado_correcto[numero_arreglo_globo_correcto].val = true;

					contador_seleccionados += 1;
					contador_correctos += 1;
				} else {
					$( id_actual ).removeClass("esfera_selec");
					$( id_actual ).addClass("esfera");

					seleccionado_correcto[numero_arreglo_globo_correcto].val = false;	

					contador_seleccionados -= 1;
					contador_correctos -= 1;
				}
				
			} else {
				if(seleccionado_incorrecto[numero_arreglo_globo_incorrecto].val == false){
					$( id_actual ).removeClass("esfera");
					$( id_actual ).addClass("esfera_selec");

					seleccionado_incorrecto[numero_arreglo_globo_incorrecto].val = true;	

					contador_seleccionados += 1;
				} else {
					$( id_actual ).removeClass("esfera_selec");
					$( id_actual ).addClass("esfera");

					seleccionado_incorrecto[numero_arreglo_globo_incorrecto].val = false;	
					contador_seleccionados -= 1;
				}
			}
			
			
			seleccionadosGlobos()
			
		}

		function seleccionadosGlobos(){
			if(contador_seleccionados == total_globos_correctos){
				if(contador_correctos == total_globos_correctos){
					document.getElementById("contenido_c0").style.zIndex = -1;
					if (parent.znThisPage != parent.var_paginas_totales){
					document.getElementById("instruccion_circulos").innerHTML = "<div>¡Excelente! Todas las respuestas son correctas. "+parent.tx_puedesmay+" avanzar a la siguiente pantalla.</div>"

					
					
					} else {
					document.getElementById("instruccion_circulos").innerHTML = "<div>Excelente. Todas las respuestas son correctas.</div>";	
					}
					//if (parent.znThisPage != parent.var_paginas_totales) {
					//parent.document.getElementById("flecha_abajo").style.visibility = "visible";
					if(cantidad_maspersonaje>0){
						//parent.audio_correcto.play();
						setTimeout(function(){
							clic_btnpersonaje();
							//document.getElementById("contenido_c0").style.zIndex = -1;

						}, 700);

						} else {
						suma_total();	
						}

					animacionCorrecto();
					


					//parent.puntaje += 100;
				} else {

				
					

					for (i = 0; i < total_globos_correctos; i++) {
							var_globo_correcto = document.getElementById("correcto"+i);

							id_actual= "#"+var_globo_correcto.id;
							$( id_actual ).removeClass("esfera_selec");
							$( id_actual ).addClass("esfera");
							seleccionado_correcto[i].val = false;
						};
						for (i = 0; i < total_globos_incorrectos; i++) {
							var_globo_incorrecto = document.getElementById("incorrecto"+i);

							id_actual= "#"+var_globo_incorrecto.id;
							$( id_actual ).removeClass("esfera_selec");
							$( id_actual ).addClass("esfera");
							seleccionado_incorrecto[i].val = false;
						};

					diferencia_globos = total_globos_correctos - contador_correctos;

					animacionIncorrecto();
					
					
					


					if(diferencia_globos==1){
					document.getElementById("instruccion_circulos").innerHTML = "<div>"+parent.tx_tuvistemay+" "+ diferencia_globos +" respuesta incorrecta. "+parent.tx_vuelvelomay+" a intentar.</div>"

					

					} else {

					document.getElementById("instruccion_circulos").innerHTML = "<div>"+parent.tx_tuvistemay+" "+ diferencia_globos +" respuestas incorrectas. "+parent.tx_vuelvelomay+" a intentar.</div>"

					

					}

					contador_seleccionados = 0;
					contador_correctos = 0;



				}
			} else {
					simbolo_retroalimentacion.visible = false;

					document.getElementById("instruccion_circulos").innerHTML = mensaje_instruccion;

						

			}
		}

		function animacionGlobo(id_actual){
			azar_tiempo_actual = parseInt( Math.random() * (tiempo_maximo - tiempo_minimo) + tiempo_minimo);
			azar_animacion = parseInt( Math.random() * (3 - 1) + 1);
			

			$( id_actual ).removeClass("animacion1");
			$( id_actual ).removeClass("animacion2");
			$( id_actual ).removeClass("animacion3");
			
			$( id_actual ).addClass("animacion"+azar_animacion);

			alto_azar = parseInt( Math.random() * (margin_top_mayor - margin_top_menor) + margin_top_menor );
			left_azar = parseInt( Math.random() * (margin_left_mayor - margin_left_menor) + margin_left_menor );

			

			$( id_actual ).stop(true,false).animate({
			
		        marginTop: alto_azar,
		        marginLeft: left_azar,

			  }, azar_tiempo_actual, function() {
				

			    animacionGlobo(id_actual)
			  });
		};


		///////////////////////
			
		contenidos_circulos = [];

		var var_contenidos = document.getElementById("contenido_c0");
		contenidos_circulo = new createjs.DOMElement(var_contenidos);
		contenidos_circulo.alpha = 0;
		contenidos_circulo.x = 0;
		contenidos_circulo.y = y_contenidos_final_2+40;
		contenidos_circulos.push(contenidos_circulo);
		total_textos.push(contenidos_circulos[0]);
		

		total_imagenes.push(titulo_pagina,icono_personaje,fondo_p1,contenedor_personaje_per1,contenedor_personaje_per2,contenedor_personaje_per3,contenedor_personaje_per4,contenedor_iaudio,equis);



		
		
	}

	if(tipo == "tipo2" || tipo == "tipo3" || tipo == "tipo4" || tipo == "tipo5" || tipo == "solo_video" || tipo == "tipoA") {

		
		/*
		total_imagenes = [

		]
		*/
		
		elementos_p1 = [
			//scontenedor_personaje,
			//contenedor_iaudio
		];
		sensibles = [
			//contenedor_iaudio,
			flecha_volver,
			//icono_personaje,
			equis
		];



	
		contenidos_circulos = []
		contenidos_circulos_html = []
		
		contenidos_circulos_masinfo = []
		contenidos_circulos_html_masinfo = []
		
		
		/*
		if (tipo == "tipo2") {
			var_contenidos = document.getElementById("contenido_c0");
			contenidos_circulo = new createjs.DOMElement(var_contenidos);
			contenidos_circulo.y = -900;
		}
		*/

		if(tipo=="tipo3" && parent.znThisPage==600){
			//var_boton_volver = document.getElementById("btn_volver");
			
			//var boton_volver = new createjs.DOMElement(var_boton_volver);
			//boton_volver.x = 600;
			//boton_volver.y = 10;
			//boton_volver.alpha = 0;
			//boton_volver.scaleX = 0;

			//boton_volver.addEventListener("mouseover", over_equis_zoom);
			//boton_volver.addEventListener("mouseout", out_equis_zoom);
			//total_textos.push(boton_volver);
			//stage.addChild(boton_volver);


			//var_boton_volver.addEventListener("click", clic_boton_volver);

			//console.log(boton_volver)	

		}



		if (cantidad_circulos>1){
			for (i = 0; i < cantidad_circulos; i++) { 
				var var_contenidos = document.getElementById("contenido_c"+i);
				contenidos_circulos_html[i] = var_contenidos;
				contenidos_circulos[i] = new createjs.DOMElement(var_contenidos);
				contenidos_circulos[i].alpha = 0;

				//ermitido_btn
				

				if (tipo == "tipo2" || tipo == "tipo5") {
				contenidos_circulos[i].y = 800;

				}
				if (tipo == "tipo3") {
				contenidos_circulos[i].x = x_contenidos_final_3;
				contenidos_circulos[i].y = y_contenidos_final_3;
				
				}
				if (tipo == "tipo4") {
				contenidos_circulos[i].x = 475;
				contenidos_circulos[i].y = 165;
				}
				contenidos_circulos.push(contenidos_circulos[i]);
				total_textos.push(contenidos_circulos[i]);


				sensibles_clic[i] = {val: false};

				sensibles_clic.push(sensibles_clic[i]);

				contenidos_circulos.splice(-1, 1);
				sensibles_clic.splice(-1, 1);
				
			} 
		} else {
			var var_contenidos = document.getElementById("contenido_c0");
			contenidos_circulos_html[0] = var_contenidos;

			contenidos_circulo = new createjs.DOMElement(var_contenidos);
			contenidos_circulo.alpha = 0;
			contenidos_circulo.x = 0;
			contenidos_circulo.y = y_contenidos_final_2;
			contenidos_circulos.push(contenidos_circulo);
			total_textos.push(contenidos_circulos[0]);

			instruccion_circulos.y = 53;
			contenidos_circulos[0] = contenidos_circulo;
		}
		


		if (cantidad_masinfo>0){
			for (i = 0; i < cantidad_masinfo; i++) { 

				var_id = document.getElementById("masinfo"+i).parentNode.id;
				var var_contenidos_masinfo = document.getElementById(var_id+"_0");
				contenidos_circulos_html_masinfo[i] = var_contenidos_masinfo;
				contenidos_circulos_masinfo[i] = new createjs.DOMElement(var_contenidos_masinfo);
				contenidos_circulos_masinfo[i].visible = false;
				//contenidos_circulos_masinfo[i].regX = document.getElementById(var_id+"_0").clientWidth/2;
				//contenidos_circulos_masinfo[i].regY = document.getElementById(var_id+"_0").clientHeight;
				contenidos_circulos_masinfo[i].alpha = 1;
				contenidos_circulos_masinfo[i].scaleX = 1;
				contenidos_circulos_masinfo[i].scaleY = 1;
				total_textos.push(contenidos_circulos_masinfo[i]);
				if(parent.completado || parent.znThisPage < parent.pagina_superior){
					
					//document.getElementById("masinfo"+i).style.color = color_boton; // OVER CUANDO YA SE VIERON
					document.getElementById("estado_btnmasinfo"+i).innerHTML = parent.icono_indica;


					//color_boton = "#0063A9";
					
					//document.getElementById("masinfo"+i).style.color = color_boton; // OVER CUANDO YA SE VIERON
					//document.getElementById("masinfo"+i).style.borderColor = color_boton; // OVER CUANDO YA SE VIERON
					//vistos_over_completo[i].val = true;


					document.getElementById("masinfo"+i).className = "boton_masinfo_visto";
					document.getElementById("masinfo"+i).innerHTML = parent.icono_check;
					
					


				} else {
					//color_boton = "#009EE2";
					//document.getElementById("masinfo"+i).style.color = color_boton; // OVER CUANDO YA SE VIERON
					//document.getElementById("masinfo"+i).style.borderColor = color_boton; // OVER CUANDO YA SE VIERON
					document.getElementById("estado_btnmasinfo"+i).innerHTML = parent.icono_indica;

					document.getElementById("masinfo"+i).className = "boton_masinfo";
					document.getElementById("masinfo"+i).innerHTML = parent.icono_mas;

					if(parent.navega_lineal){

						if($("#masinfo"+i).attr('data-orden')!=0){
							document.getElementById("masinfo"+i).className = "boton_masinfox";

							

						}


						}


				}
				color_boton = "#7a3994";
					//document.getElementById("masinfo"+i).style.color = color_boton; // OVER CUANDO YA SE VIERON
					//document.getElementById("masinfo"+i).style.backgroundColor = color_boton; // OVER CUANDO YA SE VIERON
			}
			for (i = 0; i < cantidad_masinfo; i++) { 
				if (tipo == "tipo3") {
					contenidos_circulos_masinfo[i].x = 30;
					contenidos_circulos_masinfo[i].y = 260;
				} else {
					contenidos_circulos_masinfo[i].x = 30;
					contenidos_circulos_masinfo[i].y = 260;
				}
			}
		}

		

		//console.log(total_mas_personajes)




		


		consultados_clic = [a];

		if (tipo == "tipo2" || tipo == "tipo3"){

		for (i = 0; i < cantidad_circulos; i++) { 

			total_circulos[i] = new createjs.Sprite(imagenes);
			total_circulos[i].gotoAndStop(parent.lib.circulo_no_seleccionado.prototype.id);
			//total_circulos[i] = new createjs.Bitmap("../../images/circulo_no_seleccionado.png");

			//total_circulos[i] = new createjs.Bitmap("../../images/circulo_no_seleccionado.png");
			total_circulos.push(total_circulos[i]);	

			total_circulos_seleccionados[i] = new createjs.Sprite(imagenes);
			total_circulos_seleccionados[i].gotoAndStop(parent.lib.circulo_seleccionado.prototype.id);
			//total_circulos_seleccionados[i] = new createjs.Bitmap("../../images/circulo_seleccionado.png");

			
			//total_circulos_seleccionados[i] = new createjs.Bitmap("../../images/circulo_seleccionado.png");
			total_circulos_seleccionados[i].alpha = 0;
			//total_circulos_seleccionados[i].gotoAndStop(20);
		
			total_circulos_seleccionados.push(total_circulos_seleccionados[i]);			   
		}

		activos_circulos_internos = []

		for (i = 0; i < cantidad_circulos; i++) { 
			
			activos_circulos_internos[i] = {val: false};

		}
		
	
		total_circulos.splice(-1, 1);

		
		total_circulos_seleccionados.splice(-1, 1);

		
		
		
		} else if (tipo == "tipo4") {
			for (i = 0; i < cantidad_circulos; i++) { 

			total_circulos[i] = new createjs.Sprite(imagenes);
			total_circulos[i].gotoAndStop(20);
		
			total_circulos.push(total_circulos[i]);			   
			}
			total_circulos.splice(-1, 1);	

			

			//var fondo_grafico = new createjs.Sprite(imagenes_pantalla);
			//fondo_grafico.gotoAndStop(5);
			//fondo_grafico.x = 80;
			//fondo_grafico.y = 235;
			//fondo_grafico.alpha = 0;

			//total_imagenes.push(fondo_grafico);
		}

			
		
		for (i = 0; i < cantidad_circulos; i++) { 
			//iconos_circulos[i] = new createjs.Sprite(imagenes_pantalla);
			//iconos_circulos[i] = new createjs.Bitmap("images/i"+i+".png");

			//iconos_circulos[i].gotoAndStop(i);
			//iconos_circulos.push(iconos_circulos[i]);	
		}
		
		if (iconos_circulos.length>0){ 
		iconos_circulos.splice(-1, 1);
		}
	
	if(!ini_especial||(ini_especial&&btn_zonaper)){

		if(cantidad_circulos<6){
			scale_circulos_grandes_no_over = 0.7;
			scale_circulos_grandes_over = 0.8;
			scale_circulos_pequenos_no_over = 0.27;
			scale_circulos_pequenos_over = 0.31;
		} else {
			scale_circulos_grandes_no_over = 0.5;
			scale_circulos_grandes_over = 0.6;
			scale_circulos_pequenos_no_over = 0.27;
			scale_circulos_pequenos_over = 0.3;
		}
			if(parent.znThisPage==600){
				scale_circulos_grandes_no_over = 0.4;
				scale_circulos_grandes_over = 0.5;
			
			}
		} else {
				scale_circulos_grandes_no_over = 0;
			scale_circulos_grandes_over = 0;
			scale_circulos_pequenos_no_over = 0;
			scale_circulos_pequenos_over = 0;
		}

		if(btn_zonaper){
			scale_circulos_grandes_no_over = 0.98;
			scale_circulos_grandes_over = 1;
			scale_circulos_pequenos_no_over = 0;
			scale_circulos_pequenos_over = 0;
		}
		for (i = 0; i < cantidad_circulos; i++) { 
		
		/*
		var_contenedor_circulos = document.createElement('DIV');
		var_contenedor_circulos.setAttribute('class', 'circulos_botones'); 
		var_contenedor_circulos.setAttribute('id', 'circ_btn'+i); 
		var_contenedor_circulos.innerHTML = "<table style='width:100%;height:100%'><td style='width:100%;height:100%;text-align:center;vertical-align:middle'><img src='images/i"+i+".png'></td></table>"; 
		document.body.appendChild(var_contenedor_circulos);
		*/
		var_contenedor_circulos = document.getElementById("circ_btn"+i);
		if(parent.znThisPage<parent.pagina_superior||parent.completado){
			for (int = 0; int < cantidad_circulos; int++) { 
			document.getElementById("circ_btn"+int).className = "circulos_botones_vistos";
			document.getElementById("est_btn"+int).className = "btn_visto";
			document.getElementById("cb"+int).className = "cb_int_visto";
			
			permitido_btn[int] = {val: true};

			}
			mayor_btnvisto = 0;

		} else {
			for (int = 0; int < cantidad_circulos; int++) { 
			permitido_btn[int] = {val: false};

			if(!parent.con_restinternas){
					permitido_btn[int] = {val: true};
					document.getElementById("circ_btn"+int).className = "circulos_botones_vistos";
					document.getElementById("est_btn"+int).className = "btn_visto";
					document.getElementById("cb"+int).className = "cb_int_visto";
				}

			}
			mayor_btnvisto = cantidad_circulos;
			if(parent.con_restinternas){
					document.getElementById("circ_btn0").className = "circulos_botones_abiertos";
					document.getElementById("est_btn0").className = "btn_abierto";
					document.getElementById("cb0").className = "cb_int_abierto";

					permitido_btn[0] = {val: true};
				}

			
		}


		if(posabs_btncirc){
			//for (int = 0; int < cantidad_circulos; int++) { 

			$('#circ_btn'+i).prepend("<span class='indicaint animated bounceup'>"+parent.icono_indica_down+"</span>");
		//}

		} else {
			$('#circ_btn'+0).prepend("<span class='indicaint animated bounceup'>"+parent.icono_indica_down+"</span>");

		
		}
		contenedor_circulos_html[i] = var_contenedor_circulos;
		
		//var var_fondo_p1 = document.getElementById("fondo_p1");
		contenedor_circulos[i] = new createjs.DOMElement(var_contenedor_circulos);


		//contenedor_circulos[i] = new createjs.Container();
		//contenedor_circulos[i].addChild(total_circulos[i],total_circulos_seleccionados[i], iconos_circulos[i]);
		//bounds_contenedor_circulos = contenedor_circulos[i].getBounds();
		contenedor_circulos[i].x = ancho_circulos_html/2;
		contenedor_circulos[i].y = y_circulos_g;
		contenedor_circulos[i].alpha = 0;
		contenedor_circulos[i].scaleX = 0.8;
		contenedor_circulos[i].scaleY = 0.8;
		contenedor_circulos[i].regX = ancho_circulos_html/2;
		contenedor_circulos[i].regY = alto_circulos_html /2;
		contenedor_circulos[i].mouseChildren = false;
		contenedor_circulos[i].cursor = "pointer";
		contenedor_circulos.push(contenedor_circulos[i]);	
		total_imagenes.push(contenedor_circulos[i]);
		sensibles.push(contenedor_circulos_html[i]);

		circulo_actual = var_contenedor_circulos;//contenedor_circulos[i];


			if (tipo == "tipo2" || tipo == "tipo4" || tipo == "tipo5") {

				f_circulos_clic2(circulo_actual);



				if (tipo == "tipo4"){
					x_recuadro = document.getElementById("recuadro"+i).style.marginLeft;
					x_recuadro = parseInt(x_recuadro, 10);
					y_recuadro = document.getElementById("recuadro"+i).style.marginTop;
					y_recuadro = parseInt(y_recuadro, 10);
					contenedor_circulos[i].x = x_recuadro;
					contenedor_circulos[i].y = y_recuadro;

				}

				if (tipo == "tipo2"){
					contenedor_circulos[i].y = 205;
				}

			}
			if (tipo == "tipo3") {
				//f_circulos_clic(circulo_actual);
		//circulo_actual.addEventListener("click", clic_circulos_grandes);
			//var_contenedor_circulos.addEventListener("click", clic_circulos_grandes());
			circulo_actual.addEventListener("click", function(){
				clic_circulos_grandes(this);
			})


			}
		}

		contenedor_circulos.splice(-1, 1);




		
		// Centrar el ícono

		if (contenedor_circulos.length>0){
		var bounds_contenedor_circulo = contenedor_circulos[0].getBounds();
		}
		
		//for (i = 0; i < cantidad_circulos; i++) { 
			//bounds_contenedor_circulo = contenedor_circulos[i].getBounds();
			//bounds_icono_circulo = iconos_circulos[i].getBounds();
			//iconos_circulos[i].x = ancho_circulos_html/2;// - bounds_icono_circulo.width/2;
			//iconos_circulos[i].y = alto_circulos_html/2;// - bounds_icono_circulo.height/2;
		//}

		
		
		

		
		

		
	};

	actualizaEstadoSimb();

	if (tipo == "tipo2" || tipo == "tipo5"){

		for (i = 0; i < cantidad_circulos; i++) { 
			contenedor_circulos[i].scaleX = 0.5;
			contenedor_circulos[i].scaleY = 0.5;
		}

		if (cantidad_circulos == 1) {
			contenedor_circulos[0].x = ancho_canvas*1/2 - bounds_contenedor_circulo.width/4;
		}
		
		else if (cantidad_circulos == 2){
			contenedor_circulos[0].x = ancho_canvas*1/3 - bounds_contenedor_circulo.width/4;
			contenedor_circulos[1].x = ancho_canvas*2/3 - bounds_contenedor_circulo.width/4;
		}

		else if (cantidad_circulos == 3){
			contenedor_circulos[0].x = ancho_canvas*1/4 - bounds_contenedor_circulo.width/4;
			contenedor_circulos[1].x = ancho_canvas/2 - bounds_contenedor_circulo.width/4;
			contenedor_circulos[2].x = ancho_canvas*3/4 - bounds_contenedor_circulo.width/4;
		}
		else if (cantidad_circulos == 4){
			contenedor_circulos[0].x = ancho_canvas*1/5 - bounds_contenedor_circulo.width/4;
			contenedor_circulos[1].x = ancho_canvas*2/5 - bounds_contenedor_circulo.width/4;
			contenedor_circulos[2].x = ancho_canvas*3/5 - bounds_contenedor_circulo.width/4;
			contenedor_circulos[3].x = ancho_canvas*4/5 - bounds_contenedor_circulo.width/4;
		}
		else if (cantidad_circulos == 5){

			contenedor_circulos[0].x = ancho_canvas*1/6 - bounds_contenedor_circulo.width/4;
			contenedor_circulos[1].x = ancho_canvas*1/3 - bounds_contenedor_circulo.width/4;
			contenedor_circulos[2].x = ancho_canvas*1/2 - bounds_contenedor_circulo.width/4;
			contenedor_circulos[3].x = ancho_canvas*2/3 - bounds_contenedor_circulo.width/4;
			contenedor_circulos[4].x = ancho_canvas*5/6 - bounds_contenedor_circulo.width/4;
		}		
			//////ACA PERSOBAJE

			total_imagenes.push(titulo_pagina,flecha_subtitulo,flecha_volver,icono_personaje,indicador,fondo_p1,titulo_pagina,contenedor_personaje_per1,contenedor_personaje_per2,contenedor_personaje_per3,contenedor_personaje_per4,contenedor_iaudio,equis);


	}

	if (tipo == "tipo4"){

		var_pad = 1;
		/*var_pad = 1;
		indicadores_inactivos = [];
		for (i = 0; i < cantidad_circulos; i++) { 
		var Var_indica = new createjs.Shape();
		Var_indica.graphics.beginStroke("rgba(131,120,111,0.6)").setStrokeStyle(2).drawRoundRect(contenedor_circulos[i].x-var_pad, contenedor_circulos[i].y-var_pad, bounds_contenedor_circulo.width+var_pad*2, bounds_contenedor_circulo.height+var_pad*2,5);
		indicadores_inactivos[i] = Var_indica;
		indicadores_inactivos[i].alpha = 1;
		indicadores_inactivos.pucirculo_pruebash(indicadores_inactivos[i]);
		total_imagenes.push(indicadores_inactivos[i]);
		}


		indicadores_inactivos.splice(-1, 1);
		*/

		visitados = []
		indicadores_visitados = [];
		for (i = 0; i < cantidad_circulos; i++) { 
		var Var_indica = new createjs.Shape();
		Var_indica.graphics.beginStroke("rgba(150,186,92,1)").setStrokeStyle(var_pad).drawRoundRect(contenedor_circulos[i].x-var_pad, contenedor_circulos[i].y-var_pad, bounds_contenedor_circulo.width+var_pad*2, bounds_contenedor_circulo.height+var_pad*2,5);
		indicadores_visitados[i] = Var_indica;
		circulo_pruebaindicadores_visitados[i].alpha = 0;
		indicadores_visitados.push(indicadores_visitados[i]);
		total_imagenes.push(indicadores_visitados[i]);
		visitados[i] = {val: false};
		visitados.push(visitados[i]);
		}

		indicadores_visitados.splice(-1, 1);
		visitados.splice(-1, 1);

		var_pad2 = 3;
		var indicador_seleccionado = new createjs.Shape();
		indicador_seleccionado.graphics.beginStroke("rgba(235,177,76,1)").setStrokeStyle(var_pad2).drawRoundRect(contenedor_circulos[0].x-var_pad2, contenedor_circulos[0].y-var_pad2, bounds_contenedor_circulo.width+var_pad2*2, bounds_contenedor_circulo.height+var_pad*6,5);
		total_imagenes.push(indicador_seleccionado);
		indicador_seleccionado.alpha = 0;
		
		total_imagenes.push(titulo_pagina,flecha_subtitulo,flecha_volver,icono_personaje,indicador,fondo_p1,contenedor_personaje,contenedor_iaudio,equis);

	}


	if (tipo == "tipo3"){
		clic_volverfin = false;
		if(parent.znThisPage<parent.pagina_superior||parent.completado){
			clic_volverfin = true;
		}
		if(!posabs_btncirc){
		clic_volverfin = true;

		}
		
		$( ".boton_volver" ).click(function() {

			if(parent.tipo_curso=="plataformas"){

				instruccion_circulos.alpha = 0;

				//salta_una_vez = true;
				//salta_personaje = false;


				avanza_una_vez = true;


				createjs.Tween.get(contenedor_juego,{override:true}).to({alpha:1},velocidad_rapida);
				//createjs.Tween.get(contenedor_plataformas,{override:true}).to({alpha:1},velocidad_rapida);
				//createjs.Tween.get(contenedor_suelos,{override:true}).to({alpha:1},velocidad_rapida);
				//createjs.Tween.get(per_game,{override:true}).to({alpha:1},velocidad_rapida);
				//createjs.Tween.get(sprites_interacgame[numero_arreglo_circulos],{override:true}).to({alpha:1},velocidad_rapida);



				avanza_personaje = true;
				piensa_personaje = false;

				sale_consulta = true;

				//clic_en_btnpersonaje = false;

			}

			if(actual_circ==cantidad_circulos-1){
				clic_volverfin = true;
				control_flechas(circulo_actual_ok,"clic");
			}

			if(parent.tipo_curso=="isometrico"){
				if(parent.znThisPage!=1){
					flecha_last.visible = true;

					createjs.Tween.get(flecha_last,{override:true}).to({scaleX:1,scaleY:1},velocidad_rapida/3,createjs.Ease.elasticOut);
				}
				if(parent.znThisPage<parent.pagina_superior){
					flecha_next.visible = true;

					createjs.Tween.get(flecha_next,{override:true}).to({scaleX:1,scaleY:1},velocidad_rapida/3,createjs.Ease.elasticOut);
					
				} else if(clic_volverfin&&parent.znThisPage<parent.znPages){
					flecha_next.visible = true;
					createjs.Tween.get(flecha_next,{override:true}).wait(velocidad_media).to({scaleX:1,scaleY:1},velocidad_lenta*4,createjs.Ease.elasticOut);
						parent.audio_avance.play();

				}
			}

			$(this).fadeOut(0);
			$("#contenedor_loaderint").fadeOut(0);
			
			circulo_g = true;

			for (i = 0; i < cantidad_circulos; i++) { 
					activos_circulos_internos[i].val = false;
			}
			$("#contenido_c"+circulo_actual_ok).css("z-index","-1");
			$("#contenido_c"+circulo_actual_ok).find(".contador_preguntas").css("opacity","0");

			//console.log(circulo_actual_ok,"circulo_actual_ok")
			//initialValueAnima("#contenido_c",circulo_actual_ok,"");



			//parent.$(".cubre_imgfondo").css("background-color","rgba(255,255,255,0)");
			if(parent.tipo_curso!="plataformas"){
    			parent.$(".cubre_imgfondo").removeClass("cubre_imgfondoact");
    			
			} 

			$('audio').each(function(){
		    	this.pause(); // Stop playing
		    	//this.currentTime = 0; // Reset time
		    	$(this)[0].currentTime = 0;
			}); 

				if(version_personaje==1){
			createjs.Tween.get(audio_btnoff_per1,{override:true}).to({alpha:1},velocidad_lenta*0.2);
				createjs.Tween.get(audio_btnon_per1,{override:true}).to({alpha:0},velocidad_lenta*1);
				createjs.Tween.get(audio_btnclico_per1,{override:true}).to({alpha:0},velocidad_lenta*1);
				createjs.Tween.get(audio_btnclicof_per1,{override:true}).to({alpha:0},velocidad_lenta*1);
		} else if(version_personaje==2){
			createjs.Tween.get(audio_btnoff_per2,{override:true}).to({alpha:1},velocidad_lenta*0.2);
				createjs.Tween.get(audio_btnon_per2,{override:true}).to({alpha:0},velocidad_lenta*1);
				createjs.Tween.get(audio_btnclico_per2,{override:true}).to({alpha:0},velocidad_lenta*1);
				createjs.Tween.get(audio_btnclicof_per2,{override:true}).to({alpha:0},velocidad_lenta*1);
		} else if(version_personaje==3){
			createjs.Tween.get(audio_btnoff_per3,{override:true}).to({alpha:1},velocidad_lenta*0.2);
				createjs.Tween.get(audio_btnon_per3,{override:true}).to({alpha:0},velocidad_lenta*1);
				createjs.Tween.get(audio_btnclico_per3,{override:true}).to({alpha:0},velocidad_lenta*1);
				createjs.Tween.get(audio_btnclicof_per3,{override:true}).to({alpha:0},velocidad_lenta*1);
		} else if(version_personaje==4){
			createjs.Tween.get(audio_btnoff_per4,{override:true}).to({alpha:1},velocidad_lenta*0.2);
				createjs.Tween.get(audio_btnon_per4,{override:true}).to({alpha:0},velocidad_lenta*1);
				createjs.Tween.get(audio_btnclico_per4,{override:true}).to({alpha:0},velocidad_lenta*1);
				createjs.Tween.get(audio_btnclicof_per4,{override:true}).to({alpha:0},velocidad_lenta*1);
		}
				
				clic_en_btnpersonaje = false;
				for (i = 0; i < total_mas_personajes.length; i++) { 

				createjs.Tween.get(total_mas_personajes[i],{override:true}).to({scaleX:0,scaleY:0,x:x_inicial_maspersonaje,y:y_inicial_maspersonaje},velocidad_media,createjs.Ease.circOut);
				
				}
				locucion.stop();

				if(cantidad_audiop[numero_arreglo_circulos]==0){
					//////ACA PERSOBAJE

					if(version_personaje==1){
						createjs.Tween.get(contenedor_btnpersonaje_per1,{override:true}).to({scaleX:-0,scaleY:0},velocidad_rapida,createjs.Ease.circInOut);
						createjs.Tween.get(audio_btnoff_per1,{override:true}).to({alpha:1},velocidad_lenta*0.2);
						createjs.Tween.get(audio_btnon_per1,{override:true}).to({alpha:0},velocidad_lenta*1);
					} else if(version_personaje==2){
						createjs.Tween.get(contenedor_btnpersonaje_per2,{override:true}).to({scaleX:-0,scaleY:0},velocidad_rapida,createjs.Ease.circInOut);
						createjs.Tween.get(audio_btnoff_per2,{override:true}).to({alpha:1},velocidad_lenta*0.2);
						createjs.Tween.get(audio_btnon_per2,{override:true}).to({alpha:0},velocidad_lenta*1);
					} else if(version_personaje==3){
						createjs.Tween.get(contenedor_btnpersonaje_per3,{override:true}).to({scaleX:-0,scaleY:0},velocidad_rapida,createjs.Ease.circInOut);
						createjs.Tween.get(audio_btnoff_per3,{override:true}).to({alpha:1},velocidad_lenta*0.2);
						createjs.Tween.get(audio_btnon_per3,{override:true}).to({alpha:0},velocidad_lenta*1);
					} else if(version_personaje==4){
						createjs.Tween.get(contenedor_btnpersonaje_per4,{override:true}).to({scaleX:-0,scaleY:0},velocidad_rapida,createjs.Ease.circInOut);
						createjs.Tween.get(audio_btnoff_per4,{override:true}).to({alpha:1},velocidad_lenta*0.2);
						createjs.Tween.get(audio_btnon_per4,{override:true}).to({alpha:0},velocidad_lenta*1);
					}
				

				
				//createjs.Tween.get(parent.instruccion_especial,{override:true}).to({alpha:0},velocidad_rapida);


				} else if (cantidad_audiop[numero_arreglo_circulos]!=0){
				
				//////ACA PERSOBAJE

					if(version_personaje==1){
						createjs.Tween.get(contenedor_btnpersonaje_per1,{override:true}).to({scaleX:-0,scaleY:0},velocidad_rapida,createjs.Ease.circInOut);
						createjs.Tween.get(audio_btnoff_per1,{override:true}).to({alpha:1},velocidad_lenta*0.2);
						createjs.Tween.get(audio_btnon_per1,{override:true}).to({alpha:0},velocidad_lenta*1);
					} else if(version_personaje==2){
						createjs.Tween.get(contenedor_btnpersonaje_per2,{override:true}).to({scaleX:-0,scaleY:0},velocidad_rapida,createjs.Ease.circInOut);
						createjs.Tween.get(audio_btnoff_per2,{override:true}).to({alpha:1},velocidad_lenta*0.2);
						createjs.Tween.get(audio_btnon_per2,{override:true}).to({alpha:0},velocidad_lenta*1);
					} else if(version_personaje==3){
						createjs.Tween.get(contenedor_btnpersonaje_per3,{override:true}).to({scaleX:-0,scaleY:0},velocidad_rapida,createjs.Ease.circInOut);
						createjs.Tween.get(audio_btnoff_per3,{override:true}).to({alpha:1},velocidad_lenta*0.2);
						createjs.Tween.get(audio_btnon_per3,{override:true}).to({alpha:0},velocidad_lenta*1);
					} else if(version_personaje==4){
						createjs.Tween.get(contenedor_btnpersonaje_per4,{override:true}).to({scaleX:-0,scaleY:0},velocidad_rapida,createjs.Ease.circInOut);
						createjs.Tween.get(audio_btnoff_per4,{override:true}).to({alpha:1},velocidad_lenta*0.2);
						createjs.Tween.get(audio_btnon_per4,{override:true}).to({alpha:0},velocidad_lenta*1);
					}
				}

				parent.instruccion_especial2.visible = false;

					

			if (cantidad_videos>0){
				for (i = 0; i < total_videos.length-1; i++) { 
						if(parent.videos_vimeo){

						//iframe_vid = $('#video'+i)[0];
				    	//var_video = $f(iframe_vid);
						 //var_video.api('pause');

						 iframe_vid = document.getElementById('video'+i);
							var_video = new Vimeo.Player(iframe_vid);
							var_video.pause()

					} else if(parent.videos_youtube) {
						player_yt[i].pauseVideo();
					} else {
						 var_video = document.getElementById("video"+i);
						var_video.pause();

					}
						}
					}


				

			for (i = 0; i < cantidad_masinfo; i++) { 
				var_id = document.getElementById("masinfo"+i).parentNode;
				createjs.Tween.get(contenidos_circulos_masinfo[i],{override:true}).to({y:y_botones + 260,scaleX:0,scaleY:0},velocidad_media);
					clic_en_masinfo = true;
				numero_arreglo_masinfo_html = contenidos_circulos_html.indexOf(var_id);
				initialValueAnima("#contenido_c",i,"_0");
				total_htmlmasinfo[i].innerHTML = parent.icono_mas;
						
				total_masinfo[i].scaleX  = 0.9;
				total_masinfo[i].scaleY  = 0.9;

				document.getElementById("accion_btnmasinfo"+i).innerHTML = "Ver";

				createjs.Tween.get(total_masinfo[i],{override:true}).to({y:y_botones_mas_ini},velocidad_rapida,createjs.Ease.elasticOut);

				
				createjs.Tween.get(total_texto_masinfo[i],{override:true}).to({x:x_botones_masini,alpha:0},velocidad_rapida);	
					
			}
			//circulo_actual_ok

			for (i = 0; i < cantidad_circulos; i++) { 
							
				initialValueAnima("#contenido_c",i,"");//para contenido principal
				createjs.Tween.get(contenedor_circulos[i],{override:true}).to({scaleX:scale_circulos_grandes_no_over, scaleY:scale_circulos_grandes_no_over},velocidad_rapida/3);
					titulos_circulos[i].alpha = 0;

			}

			$('#instruccion_circulos').find("div").text(txt_instinterna)
			$('#instruccion_circulos').css("width","100%")
			$('#instruccion_circulos').find("div").css("float","none")



		});

		

		//CREA ELEMENTOS COMUNES PANTALLAS
		////OVER DE BOTONES 
		cont_over_circulos_internos = document.createElement('DIV');
		cont_over_circulos_internos.setAttribute('id', 'cont_over_circulos_internos'); 
		cont_over_circulos_internos.className = "cont_over_circulos_internos"
		document.body.appendChild(cont_over_circulos_internos);

		cont_enlace_circulos_internos = document.createElement('DIV');
		cont_enlace_circulos_internos.setAttribute('id', 'cont_enlace_circulos_internos'); 
		cont_enlace_circulos_internos.className = "cont_enlace_circulos_internos"
		document.getElementById("cont_over_circulos_internos").appendChild(cont_enlace_circulos_internos);

		enlace_circulos_internos = document.createElement('DIV');
		enlace_circulos_internos.setAttribute('id', 'enlace_circulos_internos'); 
		enlace_circulos_internos.className = "enlace_circulos_internos"
		document.getElementById("cont_enlace_circulos_internos").appendChild(enlace_circulos_internos);

		enlace_circulos_internos2 = document.createElement('DIV');
		enlace_circulos_internos2.setAttribute('id', 'enlace_circulos_internos2'); 
		enlace_circulos_internos2.className = "enlace_circulos_internos2"
		document.getElementById("cont_enlace_circulos_internos").appendChild(enlace_circulos_internos2);

		over_circulos_internos = document.createElement('DIV');
		over_circulos_internos.setAttribute('id', 'over_circulos_internos'); 
		over_circulos_internos.className = "over_circulos_internos"
		document.getElementById("cont_over_circulos_internos").appendChild(over_circulos_internos);


		cont_enlace_circulos_internosb = document.createElement('DIV');
		cont_enlace_circulos_internosb.setAttribute('id', 'cont_enlace_circulos_internosb'); 
		cont_enlace_circulos_internosb.className = "cont_enlace_circulos_internos"
		document.getElementById("cont_over_circulos_internos").appendChild(cont_enlace_circulos_internosb);

		enlace_circulos_internosb = document.createElement('DIV');
		enlace_circulos_internosb.setAttribute('id', 'enlace_circulos_internosb'); 
		enlace_circulos_internosb.className = "enlace_circulos_internosb"
		document.getElementById("cont_enlace_circulos_internosb").appendChild(enlace_circulos_internosb);



		enlace_circulos_internosb2 = document.createElement('DIV');
		enlace_circulos_internosb2.setAttribute('id', 'enlace_circulos_internosb2'); 
		enlace_circulos_internosb2.className = "enlace_circulos_internosb2"
		document.getElementById("cont_enlace_circulos_internosb").appendChild(enlace_circulos_internosb2);

		var_pop_circulos_internos = document.getElementById("cont_over_circulos_internos");
		pop_circulos_internos = new createjs.DOMElement(var_pop_circulos_internos);
		pop_circulos_internos.scaleX = 0;
		pop_circulos_internos.scaleY = 0;
		pop_circulos_internos.visible = true;
		pop_circulos_internos.alpha = 0;
		total_textos.push(pop_circulos_internos);

		
		
		titulos_circulos = []

		for (i = 0; i < cantidad_circulos; i++) { 
			//document.getElementById("numero_titulo"+i).innerHTML = parent.znThisPage +"."+(i+1)+".";
			//document.getElementById("numero_titulo"+i).innerHTML = "<i class='fas fa-chevron-down'></i>";

			var var_titulo = document.getElementById("titulo_c"+i);
			titulos_circulos[i] = new createjs.DOMElement(var_titulo);
			titulos_circulos[i].alpha = 0;
			titulos_circulos[i].visible = false;
			titulos_circulos.push(titulos_circulos[i]);
			total_textos.push(titulos_circulos[i]);


		} 

		titulos_circulos.splice(-1, 1);

		//contenedor_circulos[0].x = 0;
			//////ACA PERSOBAJE
		
		total_imagenes.push(titulo_pagina,flecha_subtitulo,flecha_volver,icono_personaje,indicador,line,line2,fondo_p1,titulo_pagina,contenedor_personaje_per1,contenedor_personaje_per2,contenedor_personaje_per3,contenedor_personaje_per4,contenedor_iaudio,equis);

		

		

		
		
	};
	if(cantidad_maspersonaje>0){

		//////ACA PERSOBAJE
		total_imagenes.push(contenedor_btnpersonaje_per1);
		total_imagenes.push(contenedor_btnpersonaje_per2);
		total_imagenes.push(contenedor_btnpersonaje_per3);
		total_imagenes.push(contenedor_btnpersonaje_per4);
		//total_imagenes.push(contenedor_btnpersonaje_per3);

	}

	

	var sobre_sensible = false;

		total_pop = []

		for (i = 0; i < cantidad_sensibles; i++) { 
			var var_sensible = document.getElementById("pop"+i);
			total_pop[i] = new createjs.DOMElement(var_sensible);
			total_pop[i].visible = false;
			total_pop[i].alpha = 0;
			total_pop.push(total_pop[i]);
			total_textos.push(total_pop[i]);
			
		} 

		////

		
		total_masinfo = [];
		
		total_texto_masinfo = [];
		total_texto_html_masinfo = [];

		
		total_htmlmasinfo = [];
		masinfo_consultados = [];

		total_volver = []
		total_htmlvolver = []

		if (cantidad_masinfo>0){

		for (i = 0; i < cantidad_masinfo; i++) { 
			var var_texto_masinfo = document.getElementById("texto_masinfo"+i);

			//var_texto_masinfo.style.borderColor = color_boton;
			//var_texto_masinfo.style.color = color_boton;

			total_texto_html_masinfo[i] = var_texto_masinfo;

			texto_masinfo = new createjs.DOMElement(var_texto_masinfo);
			
			texto_masinfo.visible = true;
			texto_masinfo.alpha = 0;
			texto_masinfo.x = x_botones_masini;
			texto_masinfo.y = y_botones_mas;// + 30;
			texto_masinfo.scaleX = 1;
			
			total_texto_masinfo.push(texto_masinfo);
			total_textos.push(texto_masinfo);	



			var var_masinfo = document.getElementById("masinfo"+i);

			//var_masinfo.style.borderColor = "#ffffff";
			//var_masinfo.style.color = "#ffffff";
			//var_masinfo.style.backgroundColor = color_boton;


			//total_masinfo[i] = new createjs.DOMElement(var_masinfo);
			total_htmlmasinfo[i] = var_masinfo;
			total_htmlmasinfo[i].innerHTML = parent.icono_mas;

			total_htmlmasinfo.push(total_htmlmasinfo[i]);
			
			masinfo = new createjs.DOMElement(var_masinfo);
			masinfo.regX = document.getElementById("masinfo"+i).clientWidth/2;
			masinfo.regY = document.getElementById("masinfo"+i).clientHeight/2;
			masinfo.x = x_botones;
			masinfo.y = y_botones_mas_ini;
			masinfo.scaleX = 0.9;
			masinfo.scaleY = 0.9;
			
			total_masinfo.push(masinfo);
			total_textos.push(masinfo);	
			
			
			/*
			var var_volver = document.getElementById("volver"+i);
			total_htmlvolver[i] = var_volver;
			total_htmlvolver.push(total_htmlvolver[i]);
			
			volver = new createjs.DOMElement(var_volver);
			volver.regX = 25;
			volver.regY = 25;
			volver.visible = false;
			volver.alpha = 1;
			volver.x = 1990;
			volver.y = 70;
			volver.scaleX = 0.9;
			volver.scaleY = 0.9;
			
			total_volver.push(volver);
			total_textos.push(volver);	
			



			var_volver.addEventListener("click", clic_volver);
			var_volver.addEventListener("mouseover", over_volver);
			var_volver.addEventListener("mouseout", out_volver);

			*/
			var_masinfo.addEventListener("click", clic_masinfo);
			var_masinfo.addEventListener("mouseover", over_masinfo);
			var_masinfo.addEventListener("mouseout", out_masinfo);

			masinfo_consultados[i] = {val: false};
			masinfo_consultados.push(masinfo_consultados[i]);

			
			} 
		}
		masinfo_consultados.splice(-1, 1);
		


		$('.c_principal').each(function(index){

			initialValueAnima("#contenido_c",index,"");//para contenido principal

			$('.c_principal').find(".texto_masinfo").each(function(){	
			initialValueAnima("#contenido_c",index,"_0");//para contenido en más info
			});
			
			if(cantidad_audiop[index]!=0){
				initialValueAnima("#contenido_c",index,"_mp");//para contenido en más mas per
			}
		
		});

		


		////
		total_clics_internos=[];
		clics_internos_vistos=[];
		total_indicadores_clic=[];
		total_textos_clic=[];


		if (cantidad_clics>0){

		for (i = 0; i < cantidad_clics; i++) { 
			var var_clic_interno = document.getElementById("clic"+i);
			total_clics_internos[i] = var_clic_interno;
			total_clics_internos.push(total_clics_internos[i]);

			//Indicador Clics
			var var_indicador_c = document.getElementById("indicador_c"+i);
			total_indicadores_clic[i] = total_indicadores_clic;
			total_indicadores_clic.push(total_indicadores_clic[i]);

			//Textos Clic
			var var_texto_clic = document.getElementById("texto"+i);
			total_textos_clic[i] = total_textos_clic;
			total_textos_clic.push(total_textos_clic[i]);

			///

			var_clic_interno.addEventListener("click", clic_interno);
			var_clic_interno.addEventListener("mouseover", over_interno);
			var_clic_interno.addEventListener("mouseout", out_interno);

			//var_clic_interno.addEventListener("mouseover", over_masinfo);
			//var_clic_interno.addEventListener("mouseout", out_masinfo);
			arreglo_zoom_clic = [];
			arreglo_sensibles_clic = [];
			arreglo_descargas_clic = [];
			arreglo_videos_clic = [];
			arreglo_audios_clic = [];

			parentObj = document.getElementById("txt_interno"+i);
			parentObj2 = document.getElementById("txt_interno"+i);
			parentObj3 = document.getElementById("txt_interno"+i);
			//		console.log(i)

			for (int = 0; int < cantidad_descargas; int++) { 
		//console.log(i,int)
			elemento = document.getElementById("descarga"+int);
			contieneElemento(elemento,parentObj,parentObj2,parentObj3,"descarga_clic")


			}
			for (int = 0; int < cantidad_videos; int++) { 
					elemento = document.getElementById("video"+int);


				  	contieneElemento(elemento,parentObj,parentObj2,parentObj3,"video_clic")


			}
			for (int = 0; int < cantidad_audios; int++) { 
					elemento = document.getElementById("audio"+int);


				  	contieneElemento(elemento,parentObj,parentObj2,parentObj3,"audio_clic")


			}
			for (int = 0; int < cantidad_zoom; int++) { 
					elemento = document.getElementById("boton_zoom"+int);


				  	contieneElemento(elemento,parentObj,parentObj2,parentObj3,"zoom_clic")


			}

			for (int = 0; int < cantidad_sensibles; int++) { 
					elemento = document.getElementById("zona_sensible"+int);
					contieneElemento(elemento,parentObj,parentObj2,parentObj3,"ov_clic")
			}
			arreglo_clic_clic = [];

			for (int = 0; int < cantidad_clicsb; int++) { 
					elemento = document.getElementById("clicb"+int);


				  	contieneElemento(elemento,parentObj,parentObj2,parentObj3,"clic_clic")


			}

			clics_internos_vistos[i] = {val: false};
			//clics_internos_vistos.push(clics_internos_vistos[i]);

			if(parent.znThisPage<parent.pagina_superior||parent.completado){
			
			permitido_clic[i] = {val: true};
			total_clics_internos[i].className = "clic_visto"
			} else {
				if(i==0){
			permitido_clic[i] = {val: true};
			total_clics_internos[i].className = "clic_abierto"


				} else {
			permitido_clic[i] = {val: false};

				}

				if(!parent.con_restinternas){
					permitido_clic[i] = {val: true};
					total_clics_internos[i].className = "clic_visto";
				}

			}
			} 
		}
		

		total_clics_internos.splice(-1, 1);
		total_indicadores_clic.splice(-1, 1);
		total_textos_clic.splice(-1, 1);

		
		if (cantidad_clics>0){
			for (i = 0; i < cantidad_clics; i++) { 
				initialValueAnima("#txt_interno",i,"");//para contenido en más mas per
			}
		}
		
		//////

		////
		total_clics_internosb=[];
		clics_internos_vistosb=[];
		total_indicadores_clicb=[];
		total_textos_clicb=[];

		//console.log(cantidad_clicsb)

		if (cantidad_clicsb>0){

		for (i = 0; i < cantidad_clicsb; i++) { 
			var var_clic_internob = document.getElementById("clicb"+i);
			total_clics_internosb[i] = var_clic_internob;
			total_clics_internosb.push(total_clics_internosb[i]);

			//Indicador Clics
			//var var_indicador_cb = document.getElementById("indicador_cb"+i);
			//total_indicadores_clicb[i] = total_indicadores_clicb;
			//total_indicadores_clicb.push(total_indicadores_clicb[i]);

			//Textos Clic
			var var_texto_clicb = document.getElementById("txt_internob"+i);
			total_textos_clicb[i] = total_textos_clicb;
			total_textos_clicb.push(total_textos_clicb[i]);

			///

			var_clic_internob.addEventListener("click", clic_internob);
			var_clic_internob.addEventListener("mouseover", over_internob);
			var_clic_internob.addEventListener("mouseout", out_internob);

			//var_clic_interno.addEventListener("mouseover", over_masinfo);
			//var_clic_interno.addEventListener("mouseout", out_masinfo);

			arreglo_zoom_clicb = [];
			arreglo_sensibles_clicb = [];
			arreglo_descargas_clicb = [];
			arreglo_videos_clicb = [];
			
			parentObj = document.getElementById("txt_internob"+i);
			parentObj2 = document.getElementById("txt_internob"+i);
			parentObj3 = document.getElementById("txt_internob"+i);
			//		console.log(i)

			for (int = 0; int < cantidad_descargas; int++) { 
		//console.log(i,int)
			elemento = document.getElementById("descarga"+int);
			contieneElemento(elemento,parentObj,parentObj2,parentObj3,"descarga_clicb")


			}
			for (int = 0; int < cantidad_audios; int++) { 
					elemento = document.getElementById("audio"+int);


				  	contieneElemento(elemento,parentObj,parentObj2,parentObj3,"audio_clicb")


			}

			for (int = 0; int < cantidad_videos; int++) { 
					elemento = document.getElementById("video"+int);


				  	contieneElemento(elemento,parentObj,parentObj2,parentObj3,"video_clicb")


			}
			for (int = 0; int < cantidad_sensibles; int++) { 
					elemento = document.getElementById("zona_sensible"+int);


				  	contieneElemento(elemento,parentObj,parentObj2,parentObj3,"ov_clicb")


			}
			clics_internos_vistosb[i] = {val: false};
			//clics_internos_vistosb.push(clics_internos_vistosb[i]);

			if(parent.znThisPage<parent.pagina_superior||parent.completado){
			
			permitido_clicb[i] = {val: true};
			total_clics_internosb[i].className = "clic_vistob"
			} else {
				if(i==0){
			permitido_clicb[i] = {val: true};
			total_clics_internosb[i].className = "clic_abiertob"


				} else {
			permitido_clicb[i] = {val: false};

				}

				if(!parent.con_restinternas){
					permitido_clicb[i] = {val: true};
					total_clics_internosb[i].className = "clic_vistob";
				}

			}
			
			

			} 
		}
		
		total_clics_internosb.splice(-1, 1);
		total_indicadores_clicb.splice(-1, 1);
		total_textos_clicb.splice(-1, 1);

		//console.log(cantidad_clicsb)

		if (cantidad_clicsb>0){
			for (i = 0; i < cantidad_clicsb; i++) { 
				initialValueAnima("#txt_internob",i,"");//para contenido en más mas per
			}
		}

		//////
		
		total_descarga = [];
		descargas_consultadas = [];
		total_htmldescarga = [];
		total_texto_html_descarga = [];
		total_texto_descarga = []
		

		if (cantidad_descargas>0){
			//if(parent.completado || parent.znThisPage < parent.pagina_superior){
			//	
			//	color_boton = "rgba(218,37,29,1)";

			//} else {
			//	color_boton = "rgb(0,147,221)";
		
			//}				
    			

			

		for (i = 0; i < cantidad_descargas; i++) {
			/*
			var var_texto_descarga = document.getElementById("texto_descarga"+i);
			//var_texto_descarga.style.backgroundColor = "color_boton";
			var_texto_descarga.style.borderColor = color_boton;
			var_texto_descarga.style.color = color_boton;

			total_texto_html_descarga[i] = var_texto_descarga;
			*/
			/*
			texto_descarga = new createjs.DOMElement(var_texto_descarga);
			texto_descarga.visible = true;
			texto_descarga.alpha = 1;
			texto_descarga.x = x_botones + 10;
			texto_descarga.y = y_botones + 79;
			texto_descarga.scaleX = 1;
			
			total_texto_descarga.push(texto_descarga);
			total_textos.push(texto_descarga);	
			*/

			var var_descarga = document.getElementById("descarga"+i);

			//var_descarga.style.borderColor = color_boton;
			//var_descarga.style.color = color_boton;

			total_htmldescarga[i] = var_descarga;
			/*
			descarga = new createjs.DOMElement(var_descarga);
			total_descarga[i] = descarga;
			descarga.scaleX = 0.8;
			descarga.scaleY = 0.8;
			descarga.regX = 25;
			descarga.regY = 25;

			descarga.x = x_botones;
			descarga.y = y_botones;
			
			

			total_textos.push(descarga);
			*/
			if(parent.completado || parent.znThisPage < parent.pagina_superior){
				

					//color_boton = "rgba(218,37,29,1)";
					
					document.getElementById("descarga"+i).className = "descarga_visto"; // OVER CUANDO YA SE VIERON
					//document.getElementById("descarga"+i).style.color = color_boton; // OVER CUANDO YA SE VIERON
					//document.getElementById("descarga"+i).style.borderColor = color_boton; // OVER CUANDO YA SE VIERON
					//vistos_over_completo[i].val = true;



				} else {
					//color_boton = "rgb(0,147,221)";
					document.getElementById("descarga"+i).className = "descarga"; // OVER CUANDO YA SE VIERON
					//document.getElementById("descarga"+i).style.color = color_boton; // OVER CUANDO YA SE VIERON
					//document.getElementById("descarga"+i).style.borderColor = color_boton; // OVER CUANDO YA SE VIERON
					if(parent.navega_lineal){

						if($("#descarga"+i).attr('data-orden')!=0){
							document.getElementById("descarga"+i).className = "descargax";
							$("#descarga"+i).closest(".cont_descarga").find(".cubre_contdesc").fadeIn();

						}


						}

				}	
			
			//total_descargas.push(total_descargas[i]);
			/*
			masinfo = new createjs.DOMElement(var_masinfo);
			masinfo.visible = true;
			total_masinfo.push(masinfo);
			total_textos.push(masinfo);	
			//sensibles.push(masinfo);	
			opcion_actual = total_masinfo[i];
			//f_masinfo(opcion_actual);
			*/
			var_descarga.addEventListener("click", clic_descarga);
			var_descarga.addEventListener("mouseover", over_descarga);
			var_descarga.addEventListener("mouseout", out_descarga);

			descargas_consultadas[i] = {val: false};
			//descargas_consultadas.push(descargas_consultadas[i]);

			
			} 
		}

			
			
			


		//total_descargas.splice(-1, 1);

		//console.log(total_descargas.length)
		//masinfo_consultados.splice(-1, 1);
		

		////

		

		///

		
		total_videos = [];
		videos_vistos = [];
		
		//console.log(cantidad_videos)
		
		if (cantidad_videos>0){

			

		for (i = 0; i < cantidad_videos; i++) { 
		//console.log(i)

			if(!parent.videos_vimeo){
				var var_video = document.getElementById("video"+i);
				total_videos[i] = var_video;
				total_videos.push(total_videos[i]);

				if(parent.navega_lineal){

					if($("#video"+i).attr('data-orden')!=0){
						//document.getElementById("video"+i).className = "videox";
						$("#video"+i).closest(".cont_video").addClass("cont_videox")
						$("#video"+i).closest(".cont_video").removeClass("cont_video")

					}
				}

				
			} else {
				
				$(function() {
				
					iframe_vid = document.getElementById('video'+i);
					var_video = new Vimeo.Player(iframe_vid);
				    //iframe_vid = $('#video'+i)[0];
				    //var_video = $f(iframe_vid);

				    total_videos[i] = var_video;
					total_videos.push(total_videos[i]);
				        //console.log("jkjlkj",var_video)
					//varVideo(var_video)
				   	var_video.on('ended', function() {
					    console.log('the end');
					    //console.log('a',a);
					    //console.log('b',b);

					    console.log(this.element.id)
					    id_vid = this.element.id;
						id_vid = id_vid.replace("video", "");

						control_flechas(id_vid,"fin_video");

					    //var_video.destroy();
					});
				   });
			}

				videos_vistos[i] = {val: false};
				videos_vistos.push(videos_vistos[i]);
		}
		}

		/*function varVideo(vax_video){
			 vax_video.addEvent('ready', function() {
				        //status.text('ready');
				        vax_video.addEvent('finish', onFinish);
				        
				    });
		}*/
		
		//console.log(videos_vistos)

		/*function onFinish(data,id) {

		
			//console.log("fin_video")
			//id_vid = var_video.element.id;
			id = id.replace("video", "");
		

			control_flechas(id,"fin_video");


				        //status.text('finished');
				       
						
				        //terminaVideo();
				
		}*/

		videos_vistos.splice(-1, 1);

		
		/////


		total_audios = [];
		audios_vistos = [];
		
		//console.log(cantidad_videos)
		
		if (cantidad_audios>0){

			

			for (i = 0; i < cantidad_audios; i++) { 
			//console.log(i)
				var var_audio = document.getElementById("audio"+i);
					total_audios[i] = var_audio;
					total_audios.push(total_audios[i]);



					audios_vistos[i] = {val: false};
					audios_vistos.push(audios_vistos[i]);


					var_audio.addEventListener("ended", function(){
					    var_audio.currentTime = 0;
						id = $(this)[0].id;
						id = id.replace("audio", "");

						control_flechas(id,"fin_audio");

					    
					});
			}
		}

		

		audios_vistos.splice(-1, 1);



		/////


		total_zona_sensible = []

		//if (tipo != "arrastre" && tipo != "arrastre_final"){

		for (i = 0; i < cantidad_sensibles; i++) { 
			var var_zona_sensible = document.getElementById("zona_sensible"+i);
			total_zona_sensible[i] = var_zona_sensible;
			//total_zona_sensible.push(total_zona_sensible[i]);
			sensibles.push(total_zona_sensible[i]);
			zona_actual = total_zona_sensible[i];
			f_zona_over(zona_actual);
			sensibles_over[i] = {val: false};
			if(tipo=="arrastre_txt_varios"){
			sensibles_over[i] = {val: true};

			}
			sensibles_over.push(sensibles_over[i]);

		//} 
		sensibles_over.splice(-1, 1);
		/*
		} else {

			for (i = 0; i < cantidad_sensibles; i++) { 
			var var_zona_sensible = opciones[i];
			total_zona_sensible[i] = var_zona_sensible;
			total_zona_sensible.push(total_zona_sensible[i]);
			sensibles.push(total_zona_sensible[i]);
			zona_actual = total_zona_sensible[i];
			f_zona_over(zona_actual);
			sensibles_over[i] = {val: false};
			sensibles_over.push(sensibles_over[i]);
			

		} 
		sensibles_over.splice(-1, 1);
		*/


		}

	

	//console.log(total_textos_clave)

	palabras_claves_activadas = [];



	//for (i = 0; i < textos_clave.length; i++) { 
		//var var_texto_clave = document.getElementById("clave"+i);
					
		//var texto_clave = new createjs.DOMElement(var_texto_clave);
					
		//texto_clave.visible = false;
		//texto_clave.alpha = 0;
		//total_textos_clave.push(texto_clave);
		//total_textos.push(texto_clave);

		//palabras_claves_activadas[i] = {val: false};

		//palabras_claves_activadas.push(palabras_claves_activadas[i]);
		

	//}	
	//console.log(arr_primeros_clic,"arr_primeros_clic")

	function activaFirstClic(act_cic){

		if(arr_primeros_clic[act_cic].length>0){
			if(arr_primeros_clic[act_cic][0]!=undefined&&arr_primeros_clic[act_cic][0]!=null){
				if($("#clic"+arr_primeros_clic[act_cic][0]).attr('class')!="clic_visto"){
					$("#clic"+arr_primeros_clic[act_cic][0]).attr('class',"clic_abierto");
				}

				permitido_clic[arr_primeros_clic[act_cic][0]].val = true;
				clic_interno(arr_primeros_clic[act_cic][0]);
				
			}

			if(arr_primeros_clic[act_cic][1]!=undefined&&arr_primeros_clic[act_cic][1]!=null){
				if($("#clic"+arr_primeros_clic[act_cic][1]).attr('class')!="clic_visto"){
					$("#clic"+arr_primeros_clic[act_cic][1]).attr('class',"clic_abierto");
				}
					permitido_clic[arr_primeros_clic[act_cic][1]].val = true;
					clic_interno(arr_primeros_clic[act_cic][1]);
				
			}
			
		}
	}
	
	if(tipo=="tipo2"){
		if($("#clic0").closest(".c_principal").length==1){
			activaFirstClic(0)
		}
	}
	/*		
	if(cantidad_clics>0){	
		for (ixc = 0; ixc < arr_primeros_clic.length; ixc++) { 
			$("#clic"+arr_primeros_clic[ixc]).attr('class',"clic_abierto");
			permitido_clic[arr_primeros_clic[ixc]].val = true;
			clic_interno(arr_primeros_clic[ixc]);
		}
	}
	*/

	//console.log(arr_primeros_clic_b)
	/*
	if(cantidad_clicsb>0){	
		for (ixc = 0; ixc < arr_primeros_clic_b.length; ixc++) { 
			$("#clicb"+arr_primeros_clic_b[ixc]).attr('class',"clic_abiertob");
			permitido_clicb[arr_primeros_clic_b[ixc]].val = true;
			clic_internob(arr_primeros_clic_b[ixc]);
		}
	}
	*/
	clic_actual_okb = 0;
	clic_actual_ok = 0;
	
	//palabras_claves_activadas.splice(-1, 1);

	y_inicial = 90;
	y_final = 390;

	x_final1 = 120;
	x_final11 = 430;

	x_final2 = 720;
	x_final21 = 490;

					
					
	margen_abajo = 20;

	dif_y = y_final - y_inicial;
	div_total = dif_y // / (textos_clave.length + 1);

					

	/*
	
	if (parent.znThisPage<parent.pagina_superior || !parent.completado){
	
		equis.alpha = 0;
		for (i = 0; i < textos_clave.length; i++) { 
		//createjs.Tween.get(total_textos_clave[i]).to({visible:false},velocidad_media);
		total_textos_clave[i].visible = false;
		total_textos_clave[i].alpha = 0;
		if (textos_clave.length == 1){
					y_actual = contenedor_iaudio.y + document.getElementById("boton_audiob").clientHeight + 10;
					total_textos_clave[i].y = y_actual;
					} else {
					y_actual =  (div_total * (i+1)) + y_inicial;
					total_textos_clave[i].y = y_actual;

					if(i>0){
					alto_clave_anterior = document.getElementById("clave"+(i-1)).clientHeight;
					top_clave_anterior = total_textos_clave[i-1].y;
					
						if(y_actual<=top_clave_anterior+alto_clave_anterior){
							total_textos_clave[i].y = top_clave_anterior+alto_clave_anterior + div_total/textos_clave.length-1;
							y_actual = total_textos_clave[i].y;
					 	}
					}
					
					

					}


					//console.log(y_actual);
					createjs.Tween.get(total_textos_clave[i]).to({alpha:1},velocidad_lenta);
					

					if (x_personaje==930) {
						
						if (y_actual < contenedor_iaudio.y + document.getElementById("boton_audiob").clientHeight){
						
						x_clave_final = 20;
						x_clave_inicial = x_clave_final + 70;
						total_textos_clave[i].x = x_clave_inicial;
						//console.log(x_iaudio,bounds_contenedor_audio.width)
						document.getElementById("clave"+i).style.width = x_iaudio-document.getElementById("boton_audiob").clientWidth-x_clave_final-10+"px";
						//document.getElementById("clave"+i).style.border = "1px solid red"
						createjs.Tween.get(total_textos_clave[i]).to({x:x_clave_final},velocidad_lenta);

						//total_textos_clave[i].x = x_contenedor_iaudio - bounds_contenedor_audio.width - 385;
			 
						} else {
						
						x_clave_final = 100;//contenedor_personaje.x - bounds_personaje.width - 400 - 10;
						x_clave_inicial = x_clave_final + 70;
						total_textos_clave[i].x = x_clave_inicial;
						
						document.getElementById("clave"+i).style.width = x_iaudio-x_clave_final+"px";
						//document.getElementById("clave"+i).style.border = "1px solid red"
						createjs.Tween.get(total_textos_clave[i]).to({x:x_clave_final},velocidad_lenta);
						}
					} else {
						
						if (y_actual < contenedor_iaudio.y + document.getElementById("boton_audiob").clientHeight){
						

						x_clave_final = contenedor_iaudio.x+document.getElementById("boton_audiob").clientWidth+10;
						x_clave_inicial = x_clave_final - 70;
						total_textos_clave[i].x = x_clave_inicial;
						document.getElementById("clave"+i).style.width = ancho_canvas - x_clave_final-2+"px";
						//document.getElementById("clave"+i).style.border = "1px solid red"
						createjs.Tween.get(total_textos_clave[i]).to({x:x_clave_final},velocidad_lenta);
						
						//total_textos_clave[i].x = x_contenedor_iaudio + bounds_contenedor_audio.width;
						} else {
						
						x_clave_final = x_iaudio;
						x_clave_inicial = x_clave_final - 70;
						total_textos_clave[i].x = x_clave_inicial;
						document.getElementById("clave"+i).style.width = ancho_canvas-x_clave_final-2+"px";
						//document.getElementById("clave"+i).style.border = "1px solid red"
						createjs.Tween.get(total_textos_clave[i]).to({x:x_clave_final},velocidad_lenta);
						
						}
					}
		}
	} else {
		equis.alpha = 0	;
		for (i = 0; i < textos_clave.length; i++) { 
		//createjs.Tween.get(total_textos_clave[i]).to({visible:false},velocidad_media);
		total_textos_clave[i].visible = false;
		total_textos_clave[i].alpha = 0;
		}
	}
	*/
	if(parent.tipo_curso == "plataformas"){


		//console.log(parent.znInt)
		for(i = 0; i <= parent.znInt; i++){
			//console.log(i,"i sensibles clic")
			if(i<cantidad_circulos){
				permitido_btn[i].val = true;
			}
			if(i<parent.znInt){
					sensibles_clic[i] = {val: true};
			}
		}
		
		sig_interact = parseInt($(".c_principal").eq(parent.znInt).attr("data-orden"));//parent.znInt;
		//sig_interact += 1;
		console.log(sig_interact,"sig_interact")

		for(i = 0; i < parent.znInt; i++){
						
			$(".mas_personaje").each(function(index){
				if($(this).attr("id")=="contenido_c"+i+"_mp"){
					val_mas_personajes[index].val = true;
				}
			})

			console.log(i,"i znInt")
			$("#circ_btn"+i).attr("class","circulos_botones_vistos");
			$("#cb"+i).attr("class","cb_int_visto");
			
			$("#contenido_c"+i).find(".clic_abierto").each(function(index){
				//console.log(index,"index-a")
				$(this).attr("class","clic_visto");
				el_actdo = $(this).attr("id")
				el_actdo = el_actdo.replace("clic", "");
				clics_internos_vistos[el_actdo].val = true;
				permitido_clic[el_actdo].val = true;
			});
			$("#contenido_c"+i).find(".clic").each(function(index){
				//console.log(index,"index-b")
				$(this).attr("class","clic_visto");
				el_actdo = $(this).attr("id")
				el_actdo = el_actdo.replace("clic", "");
				clics_internos_vistos[el_actdo].val = true;
				permitido_clic[el_actdo].val = true;
			});

			$("#contenido_c"+i).find(".clic_abiertob").each(function(index){
				//console.log(index,"index-a")
				$(this).attr("class","clic_vistob");
				el_actdo = $(this).attr("id")
				el_actdo = el_actdo.replace("clicb", "");
				clics_internos_vistosb[el_actdo].val = true;
				permitido_clicb[el_actdo].val = true;
			});
			$("#contenido_c"+i).find(".clicb").each(function(index){
				//console.log(index,"index-b")
				$(this).attr("class","clic_vistob");
				el_actdo = $(this).attr("id")
				el_actdo = el_actdo.replace("clicb", "");
				clics_internos_vistosb[el_actdo].val = true;
				permitido_clicb[el_actdo].val = true;
			});

			$("#contenido_c"+i).find(".negrilla_sensiblex").each(function(index){
				//console.log(index,"index-a")
				$(this).attr("class","negrilla_sensible2");
				el_actdo = $(this).attr("id")
				el_actdo = el_actdo.replace("zona_sensible", "");
				sensibles_over[el_actdo].val = true;
				//permitido_clic[el_actdo].val = true;
				tipo_elemento = document.getElementById("zona_sensible"+el_actdo).parentNode.nodeName;
				id_elemento = document.getElementById("zona_sensible"+el_actdo).id;

				console.log("tipo_elemento-a",tipo_elemento)
				if(tipo_elemento == "MAP"){
					objetos_over[el_actdo].estado = "visto";
					objetos_over[el_actdo].bgcolor = boton_visto;
					//objetos_over[i].opacidad = opacidad_icono_baja;
						
					objetos_over[el_actdo].render_highlight = {fillOpacity: opacidad_icono_alta,fillColor:boton_highlight,strokeColor:boton_highlight,strokeOpacity:0}
					objetos_over[el_actdo].render_select = {fillOpacity: opacidad_icono_baja_2,fillColor:boton_visto,strokeColor:boton_visto,strokeOpacity: 1}
					objetos_over[el_actdo].area = new Areas(id_elemento, true, objetos_over[el_actdo].render_select,objetos_over[el_actdo].render_highlight);
				}



			});
			$("#contenido_c"+i).find(".negrilla_sensible").each(function(index){
				//console.log(index,"index-b")
				$(this).attr("class","negrilla_sensible2");
				el_actdo = $(this).attr("id")
				el_actdo = el_actdo.replace("zona_sensible", "");
				sensibles_over[el_actdo].val = true;
				//permitido_clic[el_actdo].val = true;


				tipo_elemento = document.getElementById("zona_sensible"+el_actdo).parentNode.nodeName;
				id_elemento = document.getElementById("zona_sensible"+el_actdo).id;
				console.log("tipo_elemento-b",tipo_elemento)

				if(tipo_elemento == "MAP"){
					objetos_over[el_actdo].estado = "visto";
					objetos_over[el_actdo].bgcolor = boton_visto;
					//objetos_over[i].opacidad = opacidad_icono_baja;
						
					objetos_over[el_actdo].render_highlight = {fillOpacity: opacidad_icono_alta,fillColor:boton_highlight,strokeColor:boton_highlight,strokeOpacity:0}
					objetos_over[el_actdo].render_select = {fillOpacity: opacidad_icono_baja_2,fillColor:boton_visto,strokeColor:boton_visto,strokeOpacity: 1}
					objetos_over[el_actdo].area = new Areas(id_elemento, true, objetos_over[el_actdo].render_select,objetos_over[el_actdo].render_highlight);
				}
			});


			$("#contenido_c"+i).find(".boton_masinfox").each(function(index){
				//console.log(index,"index-a")
				$(this).attr("class","boton_masinfo_visto");
				el_actdo = $(this).attr("id")
				el_actdo = el_actdo.replace("masinfo", "");
				masinfo_consultados[el_actdo].val = true;
				//permitido_clic[el_actdo].val = true;
			});
			$("#contenido_c"+i).find(".boton_masinfo").each(function(index){
				//console.log(index,"index-b")
				$(this).attr("class","boton_masinfo_visto");
				el_actdo = $(this).attr("id")
				el_actdo = el_actdo.replace("masinfo", "");
				masinfo_consultados[el_actdo].val = true;
				//permitido_clic[el_actdo].val = true;
			});
		
			
		}
		$("#circ_btn"+parent.znInt).attr("class","circulos_botones_abiertos");

		if(cantidad_infografias>0){
			console.log(cantidad_infografias,"fsdfsdf")
			for (i = 0; i < cantidad_infografias; i++) { 
			 	zonas_infografia = "#Mapa"+i;
			 	zonas_info = [];
				for (ind = 0; ind < cantidad_sensibles; ind++) {
					
					if(objetos_over[ind].infografia == zonas_infografia){
						zonas_info.push(objetos_over[ind].area);

					}
				}
				total_zonas_info[i] = zonas_info;
				//console.log(zonas_infografia,total_zonas_info[i]);
				crearMapa(zonas_infografia,total_zonas_info[i]);
			}
		}

		/*
		console.log("A-A")
		//cant_inteact

		setTimeout(function(){

			//for(i = 0; i < parent.znInt; i++){
			$('[data-orden]').each(function(index){
				console.log("B-B",index,"-",$(this))
				if(index<parent.znInt){
					el_actdo = $(this).attr("id")
					if($(this).hasClass("negrilla_sensiblex")){
						el_actdo = el_actdo.replace("zona_sensible", "");
						actdo = "over";
					} else if ($(this).hasClass("boton_zoomx")){
						el_actdo = el_actdo.replace("boton_zoom", "");
						actdo = "clic_zoom";
					} else if ($(this).hasClass("descargax")){
						el_actdo = el_actdo.replace("descarga", "");
						actdo = "descarga_clic";
					} else if ($(this).hasClass("boton_masinfox")){
						el_actdo = el_actdo.replace("masinfo", "");
						actdo = "masinfo_clic";
					} else if ($(this).hasClass("cont_videox")){
						el_actdo = el_actdo.replace("video", "");
						actdo = "fin_video";
					} else if ($(this).hasClass("mas_personaje")){
						//el_actdo = el_actdo.replace("zona_sensible", "");
						//actdo = "mas_personaje";
						
						//apareceBtnPer();

					} else if($(this).hasClass("c_principal")){
						console.log("btn_principal");
						el_actdo = el_actdo.replace("contenido_c", "");
						clic_circulos_grandes(contenedor_circulos_html[el_actdo]);

					}
					//console.log(el_actdo,"el_actdo",index)
				};
				//control_flechas(el_actdo,actdo)
			});
			//}
		}, 3000);
		*/
		


		parent.$(".boton_volveresc").click(function(){
			//parent.contenedor_personajeini.x = parent.x_personajeanima_inicial_ini;
			createjs.Tween.get(parent.contenedor_personajeini).to({x:parent.x_personajeanima_inicial_ini,alpha:0},parent.velocidad_lenta*2, createjs.Ease.backOut);

			//parent.animaPersonajeIni();
			parent.pausaAnimaPerIni();
			
			parent.$(".txt_puntfin").text(parseInt(parent.puntaje));
			parent.$(".mensaje_final").css("opacity",0)
			parent.$(".mensaje_final").fadeOut(0)
			parent.$(".mensaje_final").css("z-index",zio_mensajefinal)
			parent.$(".cont_trofeo").css("z-index",zio_trofeo)
			parent.$("#boton_cerrar").css("z-index",zio_boton_cerrar)
			parent.$("#canvas_principal").css("z-index",zio_canvas_principal)
			//parent.$("#ifrm").css("z-index",0)
			parent.$(".boton_volveresc").fadeOut(0)

			if(parent.con_trofeos){

				parent.$(".cont_trofeo").removeClass("cont_trofeo_fin");
				
			}

			pausa_game = false;
		})


		txt_instrplat_avace = "En "+parent.tx_tumin+" teclado, "+parent.tx_mantemin+" presionada la flecha que apunta hacia la derecha para avanzar.";
		txt_instrplat_salta = "En "+parent.tx_tumin+" teclado, "+parent.tx_mantemin+" presionada la flecha que apunta hacia arriba para saltar.";
		txt_instrplat_interact = parent.tx_presionamay+" la barra espaciadora para consultar la información.";
		
		txt_instrplat_palanca = parent.tx_presionamay+" y "+parent.tx_muevemin+" este botón para recorrer el escenario.";
		txt_instrplat_btninterac = parent.tx_presionamay+" este botón para consultar la información.";

		$('body').append("<div class='inst_navegajuego inst_avanza'><div class='inst_nava'><div>"+txt_instrplat_avace+"</div><div><div class='tecla'>"+parent.icono_tecla_sig+"</div></div></div></div>")
		$('body').append("<div class='inst_navegajuego inst_salta'><div class='inst_nava'><div>"+txt_instrplat_salta+"</div><div><div class='tecla'>"+parent.icono_tecla_arriba+"</div></div></div></div>")
		$('body').append("<div class='inst_navegajuego inst_interact'><div class=''><div>"+txt_instrplat_interact+"</div><div><div class='tecla_espacio'></div></div></div></div>")

		$('body').append("<div class='inst_navegajuego inst_navega_sf'><div class=''><div>"+txt_instrplat_palanca+"</div><div>"+parent.icono_indica_down+"</div></div></div>")
		$('body').append("<div class='inst_navegajuego inst_navega_sfbtn'><div class=''><div>"+txt_instrplat_palanca+"</div><div>"+parent.icono_indica_down+"</div></div></div>")



		$('body').append("<div id='controles_sp' class='controles_sp'><p></p><div id='mov_sp' class='avance_sp' > </div></div><div id='boton_sp' class='boton_sp'><div id='btn_sp' class='btn_sp' >"+parent.icono_bombillo+"</div></div>");



		$('#mov_sp').draggable({scroll: false, containment: "parent"});
  
  		position_control_original = $("#mov_sp").position();

		$("#mov_sp").animate( { 'left': 50, 'top': 50}, 'fast', function()
                  {
			 //position_control_left = position_control_original.left;
			 //position_control_left = parseInt(position_control_left);//.toFixed(1);
			 position_control_left = 50;

			 //position_control_top = position_control_original.top;
			 //position_control_top = parseInt(position_control_top);//.toFixed(1);
			 position_control_top = 50;

			 //console.log(position_control_left,"position_control_left")
			//console.log(position_control_top,"position_control_top")
			                      
        });
		
		$("#boton_sp").click(function(){
			if(puede_abrircont){

				clic_circulos_grandes(contenedor_circulos_html[num_interact]);
			}
		});


		//$(".inst_navega_sf").css("left",($("#controles_sp").position().left + $(".inst_navega_sf").width()/2)+"px")
		//$(".inst_navega_sf").fadeIn()
		//$(".inst_navega_sfbtn").fadeIn()


		//$(".inst_navegajuego").fadeOut();


		ancho_fondo = 0;///Cambiar por el ultimo interact + 600
		
		ancho_paso = 8;//30;// 

		//left_divs = 0;

		alto_salto_inicial = 25;
		alto_salto = alto_salto_inicial;

		vy = -alto_salto;
		gravity = 1.8; 

		salta_una_vez = true;
		una_vezinssalta = true;

		pausa_game = true;
		
		avanza_personaje = false;
		retrocede_personaje = false;
		salta_personaje = false;
		cae_personaje = false;
		piensa_personaje = false;
		stop_colper = [];

		salta_una_vez = true;
		avanza_una_vez = true;
		retrocede_una_vez = true;
		stand_una_vez = true;
		think_una_vez = true;

		sale_consulta = false;

		velocidad_fondo = 10;
		const_piso = 7 + 25;///7 de espacio vacío bajo el personaje, 25 es la mitad del alto del suelo
		const_pisoplat = 7 + 10;

		const_pisointerac = 8;
		const_pisoplatinterac = 3;

		distancia_per_interac = 75;


		plataforma_sobre = false;

		colision = false;

		pisa_plataforma = 0;

		puede_abrircont = false;

		num_interact = 0;

		position_control = $("#mov_sp").position();

		presiona_movsp = false;
		$("#mov_sp").mousedown(function(){
			presiona_movsp = true;
		});

		
		$("#canvas").mouseup(function(){
			console.log("dsffsdf")
			endControl();

		});


		$("#mov_sp").mouseup(function(){
			console.log("BBBBB")
			endControl();
		});

		parent.$("#html_completo").mouseup(function(){
			endControl();
		});

		parent.$("#canvas_principal").mouseup(function(){
			endControl();
		});
			

		function endControl(){
			presiona_movsp = false;
			
			avanza_personaje = false;
			retrocede_personaje = false;

			
			$("#mov_sp").animate( { 'left': 50, 'top': 50}, 'fast', function()
	          	{
		    				//valoresOcupados();
	                			
	          	});
		}
		
		$("#mov_sp").mousemove(function(){

			
			if(presiona_movsp && !pausa_game){
				
				position_control = $("#mov_sp").position();
				
				position_cleft = position_control.left;
				position_cleft = parseInt(position_cleft);//.toFixed(1);

				position_ctop = position_control.top;
				position_ctop = parseInt(position_ctop);

				//////CONTROL//////
				//console.log(position_cleft)
				//console.log(parent.position_control_left)
				//console.log(position_control_left,"position_control_left")
				//console.log(position_cleft,"position_cleft")

				if(position_cleft<position_control_left){
					avanza_personaje = false;
					retrocede_personaje = true;
						//console.log("atras")

				} else if(position_cleft>position_control_left){
					avanza_personaje = true;
					retrocede_personaje = false;
					piensa_personaje = false;
						//console.log("adeante")


				} else {
					avanza_personaje = false;
					retrocede_personaje = false;
						//console.log("pausa")


				}
				
				if(position_ctop<=position_control_top/4){
					salta_personaje = true;
					

				} else {
					//salta_personaje = false;

				}
			} else {
				avanza_personaje = false;
				retrocede_personaje = false;
				//piensa_personaje = false;
				salta_personaje = false;

			}
	    	
		});

		
		contenedor_juego = new createjs.Container();
		contenedor_juego.alpha = 0;
		contenedor_suelos = new createjs.Container();
		//contenedor_suelos.alpha = 0;

		contenedor_decoraback = new createjs.Container();
		contenedor_decorafront = new createjs.Container();


		suelos_escenarios = [];
	
		//for(i = 0; i < (ancho_fondo*1.5)/2000; i++){

			suelos_escenarios[0] =new createjs.Bitmap("images/suelo.png");
    		bounds_suelos_escenarios = suelos_escenarios[0].getBounds();
			suelos_escenarios[0].x = 0;
			suelos_escenarios[0].y = $("#canvas").height() - bounds_suelos_escenarios.height;
			suelos_escenarios[0].regX = 0;
			suelos_escenarios[0].regY = 0;
			suelos_escenarios[0].alpha = 1;
			
			contenedor_suelos.addChild(suelos_escenarios[0]);


		//}
		


		y_personaje_juego_inicial = suelos_escenarios[0].y + const_piso;
		y_personaje_juego = y_personaje_juego_inicial;

    	arr_idle = [];
		arr_walk = [];
		arr_jump = [];
		arr_fall = [];
		arr_think = [];
		arr_think_orig = [];

		for(i = 0; i < 23; i++){
			arr_walk[i] = i;
		}

		for(i = 0; i < 27; i++){
			arr_idle[i] = i+arr_walk.length;
		}

		ciclo_think = [64,79]
		inxpx = 0;

		for(i = 0; i < 47; i++){
			add_think = i+arr_walk.length+arr_idle.length;
			arr_think_orig[i] = add_think;//i+arr_walk.length+arr_idle.length;
			
			if(add_think==ciclo_think[1]){
				for(inxp = 0; inxp < 30; inxp++){
					if(inxp<15||inxp>=30&&inxp<45||inxp>=60&&inxp<75){
					//inxpx--
					add_think = i+arr_walk.length+arr_idle.length-inxp;//-(ciclo_think[1]-ciclo_think[0]);
						if(inxp>30){
							//add_think = add_think-20;
						}

					} else {
					add_think++;//-(ciclo_think[1]-ciclo_think[0]);

					}
					arr_think.push(add_think);
				}	
			} else if(add_think==95) {
				for(inxp = 0; inxp < 15; inxp++){
					arr_think.push(add_think);

				}
			} else {
					arr_think.push(add_think);

			}
		}

		for(i = 0; i < 36; i++){
			arr_jump[i] = i+arr_walk.length+arr_idle.length+arr_think_orig.length;
		}

		for(i = 0; i < arr_jump.length/2; i++){
			arr_fall[i] = arr_jump[arr_jump.length/2 + i];
		}

		per_principal = new createjs.SpriteSheet({
			images: ["../../images/animaciones_atlas_1.png"],
			frames: ["../../images/animaciones_atlas_1.png"], "frames": parent.frames_animacion,
			animations: {
				"idle": {
					frames: arr_idle,
					next: "idle",
	            	speed: 1/2

				},
				"walk": {
					frames: arr_walk,
					next: "walk",
	            	speed: 1.3
				},
				"jump": {
					frames: arr_jump,
					next: "jump",
	            	speed: 1.2
				},
				"fall": {
					frames: arr_jump,
					next: "fall",
	            	speed: 1
				},
				"think": {
					frames: arr_think,
					next: "think",
	            	speed: 1/2
				},
				"bye": {
					//frames: [0,1,14,21],
					frames: [0,3],
					next: "bye",
	            	speed: 1/6
				}				
			}
		});

		per_game = new createjs.Sprite(per_principal);
		bounds_per_game = per_game.getBounds();
		per_game.regX = bounds_per_game.width/2;
		per_game.regY = bounds_per_game.height/2;
		per_game.y = y_personaje_juego_inicial-per_game.regY;
		per_game.x = $("#canvas").width()/2; 
		
		per_game.alpha = 0;
		y_personaje_juego = y_personaje_juego_inicial-per_game.regY;
		

		/*
		$.getJSON("images/plataformas_atlas_.json", function(json) {
			frames_plataformas = json.frames;

			plataformas = new createjs.SpriteSheet({
				images: ["images/plataformas_atlas_.png"],
				frames: ["images/plataformas_atlas_.png"], "frames": frames_plataformas
			});
			console.log(frames_plataformas)
	    });
	    */
		contenedor_plataformas = new createjs.Container();
		plataformas = [];
		bounds_plataformas = [];
		espacio_plataformas = 42;
		cant_plat = 0;
		xinicial_plat = $("#canvas").width()*2 - 20;

		if(cantidad_circulos==5){
			cant_plat = 16;

			for(i = 0; i < cant_plat; i++){
				plataformas[i] =new createjs.Bitmap("images/plataforma.png");
	    		bounds_plataformas[i] = plataformas[i].getBounds();

	    		if(i==0){
	    			plataformas[i].x = xinicial_plat;
	    		} else {
	    			plataformas[i].x = xinicial_plat + bounds_plataformas[i].width*i - espacio_plataformas*i;
	    		}

				plataformas[i].y = suelos_escenarios[0].y - bounds_plataformas[i].height + const_piso;

	    		if(i==0||i==1||i==12||i==13||i==14||i==15){
	    			plataformas[i].y = suelos_escenarios[0].y - bounds_plataformas[i].height + const_piso;
	    		} else if(i==2||i==3||i==4||i==5||i==10||i==11){
	    			plataformas[i].y = suelos_escenarios[0].y - bounds_plataformas[i].height*2 + const_piso;
	    		} else {
	    			plataformas[i].y = suelos_escenarios[0].y - bounds_plataformas[i].height*3 + const_piso;
	    		} 

	    		plataformas[i].regX = 0;
				plataformas[i].regY = 0;
				plataformas[i].alpha = 1;

				contenedor_plataformas.addChild(plataformas[i]);


			}

		}

		contenedor_juego.addChild(contenedor_plataformas);
	
		/*
		for(ix = 0; ix < x_plataformas.length; ix++){



			for(i = ix*cant_plat; i < (ix*cant_plat)+cant_plat; i++){
				//console.log(i,"i")
				plataformas[i] =new createjs.Bitmap("images/plataformas.png");
	    		bounds_plataformas[i] = plataformas[i].getBounds();
	    		//console.log(bounds_plataformas[i],"bounds_plataformas[i]");

	    		
	    		if(i == ix*cant_plat){
					plataformas[i].x = x_plataformas[ix];
					plataformas[i].y = suelos_escenarios[0].y - bounds_plataformas[i].height + const_piso;

				} else if(i == ix*cant_plat + 1){
					plataformas[i].x = x_plataformas[ix]+bounds_plataformas[i].width - espacio_plataformas;// - bounds_per_game.width/4;
					plataformas[i].y = suelos_escenarios[0].y - bounds_plataformas[i].height + const_piso// -bounds_plataformas[i].height;

				} else if(i == ix*cant_plat + 2){
					plataformas[i].x = x_plataformas[ix]+bounds_plataformas[i].width*2 - espacio_plataformas*2;// - bounds_per_game.width/4;
					plataformas[i].y = suelos_escenarios[0].y - bounds_plataformas[i].height + const_piso //-bounds_plataformas[i].height;

				} else if(i == ix*cant_plat + 3){
					plataformas[i].x = x_plataformas[ix]+bounds_plataformas[i].width*3 - espacio_plataformas*3;// - bounds_per_game.width/4;
					plataformas[i].y = suelos_escenarios[0].y - bounds_plataformas[i].height + const_piso //-bounds_plataformas[i].height;

				} else if(i == ix*cant_plat + 4){
					plataformas[i].x = x_plataformas[ix]+bounds_plataformas[i].width*4 - espacio_plataformas*4;// - bounds_per_game.width/4;
					plataformas[i].y = suelos_escenarios[0].y - bounds_plataformas[i].height*2 + const_piso //-bounds_plataformas[i].height;

				} else if(i == ix*cant_plat + 5){
					plataformas[i].x = x_plataformas[ix]+bounds_plataformas[i].width*5 - espacio_plataformas*5;// - bounds_per_game.width/4;
					plataformas[i].y = suelos_escenarios[0].y - bounds_plataformas[i].height*2 + const_piso //-bounds_plataformas[i].height;

				} else if(i == ix*cant_plat + 6){
					plataformas[i].x = x_plataformas[ix]+bounds_plataformas[i].width*6 - espacio_plataformas*6;// - bounds_per_game.width/4;
					plataformas[i].y = suelos_escenarios[0].y - bounds_plataformas[i].height*2 + const_piso //-bounds_plataformas[i].height;

				} else if(i == ix*cant_plat + 7){
					plataformas[i].x = x_plataformas[ix]+bounds_plataformas[i].width*7 - espacio_plataformas*7;// - bounds_per_game.width/4;
					plataformas[i].y = suelos_escenarios[0].y - bounds_plataformas[i].height*2 + const_piso //-bounds_plataformas[i].height;

				} else if(i == ix*cant_plat + 8){
					plataformas[i].x = x_plataformas[ix]+bounds_plataformas[i].width*8 - espacio_plataformas*8;// - bounds_per_game.width/4;
					plataformas[i].y = suelos_escenarios[0].y - bounds_plataformas[i].height*3 + const_piso //-bounds_plataformas[i].height;

				} else if(i == ix*cant_plat + 9){
					plataformas[i].x = x_plataformas[ix]+bounds_plataformas[i].width*9 - espacio_plataformas*9;// - bounds_per_game.width/4;
					plataformas[i].y = suelos_escenarios[0].y - bounds_plataformas[i].height*3 + const_piso //-bounds_plataformas[i].height;

				} else if(i == ix*cant_plat + 10){
					plataformas[i].x = x_plataformas[ix]+bounds_plataformas[i].width*10 - espacio_plataformas*10;// - bounds_per_game.width/4;
					plataformas[i].y = suelos_escenarios[0].y - bounds_plataformas[i].height*3 + const_piso //-bounds_plataformas[i].height;

				} else if(i == ix*cant_plat + 11){
					plataformas[i].x = x_plataformas[ix]+bounds_plataformas[i].width*11 - espacio_plataformas*11;// - bounds_per_game.width/4;
					plataformas[i].y = suelos_escenarios[0].y - bounds_plataformas[i].height*3 + const_piso //-bounds_plataformas[i].height;

				} else if(i == ix*cant_plat + 12){
					plataformas[i].x = x_plataformas[ix]+bounds_plataformas[i].width*12 - espacio_plataformas*12;// - bounds_per_game.width/4;
					plataformas[i].y = suelos_escenarios[0].y - bounds_plataformas[i].height*2 + const_piso //-bounds_plataformas[i].height;

				} else if(i == ix*cant_plat + 13){
					plataformas[i].x = x_plataformas[ix]+bounds_plataformas[i].width*13 - espacio_plataformas*13;// - bounds_per_game.width/4;
					plataformas[i].y = suelos_escenarios[0].y - bounds_plataformas[i].height*2 + const_piso //-bounds_plataformas[i].height;

				} else if(i == ix*cant_plat + 14){
					plataformas[i].x = x_plataformas[ix]+bounds_plataformas[i].width*14 - espacio_plataformas*14;// - bounds_per_game.width/4;
					plataformas[i].y = suelos_escenarios[0].y - bounds_plataformas[i].height*2 + const_piso //-bounds_plataformas[i].height;

				} else if(i == ix*cant_plat + 15){
					plataformas[i].x = x_plataformas[ix]+bounds_plataformas[i].width*15 - espacio_plataformas*15;// - bounds_per_game.width/4;
					plataformas[i].y = suelos_escenarios[0].y - bounds_plataformas[i].height*2 + const_piso //-bounds_plataformas[i].height;

				} else if(i == ix*cant_plat + 16){
					plataformas[i].x = x_plataformas[ix]+bounds_plataformas[i].width*16 - espacio_plataformas*16;// - bounds_per_game.width/4;
					plataformas[i].y = suelos_escenarios[0].y - bounds_plataformas[i].height + const_piso //-bounds_plataformas[i].height;

				} else if(i == ix*cant_plat + 17){
					plataformas[i].x = x_plataformas[ix]+bounds_plataformas[i].width*17 - espacio_plataformas*17;// - bounds_per_game.width/4;
					plataformas[i].y = suelos_escenarios[0].y - bounds_plataformas[i].height + const_piso //-bounds_plataformas[i].height;

				} else if(i == ix*cant_plat + 18){
					plataformas[i].x = x_plataformas[ix]+bounds_plataformas[i].width*18 - espacio_plataformas*18;// - bounds_per_game.width/4;
					plataformas[i].y = suelos_escenarios[0].y - bounds_plataformas[i].height + const_piso //-bounds_plataformas[i].height;

				} else if(i == ix*cant_plat + 19){
					plataformas[i].x = x_plataformas[ix]+bounds_plataformas[i].width*19 - espacio_plataformas*19;// - bounds_per_game.width/4;
					plataformas[i].y = suelos_escenarios[0].y - bounds_plataformas[i].height + const_piso //-bounds_plataformas[i].height;

				} 



				plataformas[i].regX = 0;
				plataformas[i].regY = 0;
				plataformas[i].alpha = 1;

				contenedor_juego.addChild(plataformas[i]);

			}

		}
		*/
  		frames_interac = [];
  		sprites_interac = [];
  		sprites_interacgame = [];
		bounds_interacgame = [];

		console.log(cantidad_circulos,"cantidad_circulos")

		for(i = 0; i < cantidad_circulos; i++){
			framesInterac(i);
		}

		function framesInterac(num){
			$.getJSON("images/interac"+num+"_atlas_1.json", function(json) {
				frames_interac[num] = json.frames;
				spritesInterac(num);		    
				if(num==cantidad_circulos-1){
					addPersonaje();
				}
		    });   

		}
		
		cantidad_decorafront = 2
		scalefront = 1.4;
		velfront = 1.1;

		

		for(numi = 0; numi < cantidad_decorafront; numi++){
			decorafront = new createjs.Bitmap("images/decora"+0+".png");
			bounds_decorafront = decorafront.getBounds();
			if(numi==0){
				decorafront.x = plataformas[0].x + (plataformas[0].x - per_game.x - $("#canvas").width()*1/4)*velfront  //;
			}
			if(numi==1){
				decorafront.x = (plataformas[plataformas.length-1].x + bounds_plataformas[plataformas.length-1].width) + (plataformas[plataformas.length-1].x + bounds_plataformas[plataformas.length-1].width - per_game.x  + $("#canvas").width()*3/4)*velfront// + $("#canvas").width()*3/4;

			}

			decorafront.y = $("#canvas").height();// - bounds_decorafront.height/2;
			decorafront.regX = (bounds_decorafront.width/2) *scalefront;
			decorafront.regY = bounds_decorafront.height*3/4;
			decorafront.scaleX = scalefront;
			decorafront.scaleY = scalefront;
			decorafront.alpha = 1;
			
			contenedor_decorafront.addChild(decorafront);
		}


		function addPersonaje(){
			contenedor_juego.addChild(contenedor_decoraback);
			contenedor_juego.addChild(per_game);
			contenedor_juego.addChild(contenedor_decorafront);

		}

		function spritesInterac(num){
			stop_colper[num] = {val: false};
			arr_anima = [];
			for(int = 0; int < frames_interac[num].length; int++){
				arr_anima[int] = int;
			}

			sprites_interac[num] = new createjs.SpriteSheet({
				images: ["images/interac"+num+"_atlas_1.png"],
				frames: ["images/interac"+num+"_atlas_1.png"], "frames": frames_interac[num],
				animations: {
					"status0": {
						frames: arr_anima,
						next: "status0",
		            	speed: 1/4
					},
					"status1": {
						frames: arr_anima,
						next: "status1",
		            	speed: 1/3
					},
					"status2": {
						frames: [0,2],
						next: "status2",
		            	speed: 1/20
					}
					
				}
			});

			sprites_interacgame[num] = new createjs.Sprite(sprites_interac[num]);
		
			bounds_interacgame[num] = sprites_interacgame[num].getBounds();
			
			sprites_interacgame[num].regX = 0;//bounds_interacgame[num].width/2;
			sprites_interacgame[num].regY = 0;//bounds_interacgame[num].height/2;
			
			if(cantidad_circulos==5){

				cantidad_decoraback = 3;

				if(num==0){
					sprites_interacgame[num].x = $("#canvas").width() + 200;
					sprites_interacgame[num].y = y_personaje_juego_inicial - bounds_interacgame[num].height - const_pisointerac;
				} else if(num==1){
					sprites_interacgame[num].x = plataformas[4].x - bounds_interacgame[num].width/2;
					sprites_interacgame[num].y = plataformas[4].y - bounds_interacgame[num].height + const_pisoplatinterac;
				} else if(num==2){
					sprites_interacgame[num].x = plataformas[8].x - bounds_interacgame[num].width/2;
					sprites_interacgame[num].y = plataformas[8].y - bounds_interacgame[num].height + const_pisoplatinterac;
				} else if(num==3){
					sprites_interacgame[num].x = plataformas[14].x - bounds_interacgame[num].width/2;
					sprites_interacgame[num].y = plataformas[14].y - bounds_interacgame[num].height + const_pisoplatinterac;
				} else if(num==4){
					sprites_interacgame[num].x = plataformas[15].x + bounds_plataformas[0].width - bounds_interacgame[num].width/2 + $("#canvas").width();
					sprites_interacgame[num].y = y_personaje_juego_inicial - bounds_interacgame[num].height - const_pisointerac;
					

				}

			}

			for(numi = 0; numi < cantidad_decoraback; numi++){
				if(numi==0||numi==2){
					numx = 0
				} else {
					numx = 1
				}
				decoraback = new createjs.Bitmap("images/decora"+numx+".png");
				bounds_decoraback = decoraback.getBounds();
				decoraback.regX = bounds_decoraback.width/2;
				decoraback.regY = bounds_decoraback.height/2;
				decoraback.y = $("#canvas").height() - bounds_suelos_escenarios.height - bounds_decoraback.height/2;
				if(numi==0){
					x_decora = $("#canvas").width()/8;// - bounds_decoraback.width/2;
				} else if(numi==1){
					x_decora = $("#canvas").width()*3/4;// - bounds_decoraback.width/2;
				} else if(numi==2){
					x_decora = plataformas[9].x + bounds_plataformas[0].width - bounds_decoraback.width/2;
					decoraback.y = plataformas[9].y - bounds_decoraback.height/2;
				}

				decoraback.x = x_decora; ;
				
				decoraback.alpha = 1;
				
				contenedor_decoraback.addChild(decoraback);
			}


			if(num==cantidad_circulos-1){
				ancho_fondo = sprites_interacgame[num].x + $("#canvas").width()/2 + bounds_interacgame[num].width/2; 

				//console.log(frames_interac,"frames_interac2")
				 ancho_suelo = bounds_suelos_escenarios.width;

				 //console.log(ancho_suelo,ancho_fondo,ancho_fondo/ancho_suelo,"ancho_fondo///")

				 for(i = 1; i < (ancho_fondo + $("#canvas").width()/2)/ancho_suelo; i++){
				 	//console.log(i,"i suelos")

					suelos_escenarios[i] =new createjs.Bitmap("images/suelo.png");
		    		bounds_suelos_escenarios = suelos_escenarios[i].getBounds();
					suelos_escenarios[i].x = bounds_suelos_escenarios.width*i;
					suelos_escenarios[i].y = $("#canvas").height() - bounds_suelos_escenarios.height;
					suelos_escenarios[i].regX = 0;
					suelos_escenarios[i].regY = 0;
					suelos_escenarios[i].alpha = 1;
					
					contenedor_suelos.addChild(suelos_escenarios[i]);


				}
				contenedor_juego.addChild(contenedor_suelos);
				for(intx = 0; intx < cantidad_circulos; intx++){
					contenedor_juego.addChild(sprites_interacgame[intx]);
				}

			}

			if(num==cantidad_circulos-1){
				if(parent.znInt>0){
					//console.log(sprites_interacgame,"sprites_interacgame")
					//setTimeout(function(){

					posx_pergame =  sprites_interacgame[parent.znInt-1].x + bounds_interacgame[parent.znInt-1].width + bounds_per_game.width/2 + (distancia_per_interac*2.75) - $("#canvas").width()/2;

					posx_pergame = Math.ceil(posx_pergame/ancho_paso);
					posx_pergame = (posx_pergame*ancho_paso)+ancho_paso;

					per_game.x += posx_pergame;
					contenedor_juego.x -= posx_pergame;
					parent.mapa_completo.x -= posx_pergame/velocidad_fondo;// - $("#canvas").width()/2;
					contenedor_decorafront.x -= posx_pergame*velfront ;
			

					//}, velocidad_media);
					
				}
			}


		}



		   

		//console.log(plataformas,"plataformas")
		//plataformas =new createjs.Bitmap("images/plataformas.png");
		//bounds_plataformas = plataformas.getBounds();
		//console.log(bounds_plataformas,"bounds_plataformas")
		//console.log(plataformas,"plataformas")
		//plataformas.x = 700;
		//plataformas.y = suelos_escenarios[0].y - bounds_plataformas.height + const_piso;
		



		total_imagenes.push(contenedor_juego);




		document.onkeydown = keyDown;
		parent.document.onkeydown = keyDown;

		function keyDown(e) {

		    e = e || window.event;

		    if (!e) e = window.event;
				var keyCode = e.keyCode || e.which;

				if(!pausa_game){

					if (keyCode == '38' || keyCode == '87'){
						salta_personaje = true;	
					} 
					if (keyCode == '40' || keyCode == '83') {

					} 
					if (keyCode == '39' || keyCode == '68') {
						//if(!cae_personaje&&!salta_personaje){
							avanza_personaje = true;
						//}
					} 
					if (keyCode == '37' || keyCode == '65') {
						//if(!cae_personaje&&!salta_personaje){
							retrocede_personaje = true;
						//}
					} 
					if (keyCode == '32' || keyCode == '13') {
						if(puede_abrircont){
							clic_circulos_grandes(contenedor_circulos_html[num_interact]);
						}
					}
		   		}

			}


		document.onkeyup  = keyUp;
		parent.document.onkeyup  = keyUp;

		function keyUp(e) {
			

		    e = e || window.event;

		    if (!e) e = window.event;
				var keyCode = e.keyCode || e.which;

				if(!pausa_game){
					if (keyCode == '38' || keyCode == '87'){
					} 
					if (keyCode == '40' || keyCode == '83') {
					} 
					if (keyCode == '39' || keyCode == '68') {
						avanza_personaje = false;
					} 
					if (keyCode == '37' || keyCode == '65') {
						retrocede_personaje = false;
					} 
					if (keyCode == '32' || keyCode == '13') {
					}
		   		}

			}

		}


	if(parent.tipo_curso == "isometrico" || parent.tipo_curso=="plataformas"){
		//parent.$(".cubre_imgfondo").css("background-color",parent.bg_cubreimgfondo);
    	parent.$(".cubre_imgfondo").addClass("cubre_imgfondoact");
    }
	if(parent.tipo_curso == "isometrico"){
		//parent.$(".cubre_imgfondo").css("background-color",parent.bg_cubreimgfondo);
    	//parent.$(".cubre_imgfondo").addClass("cubre_imgfondoact");
    	if(parent.znThisPage<parent.znPages){
    		flecha_next = new createjs.Bitmap("images/flecha_next.png");
			bounds_flecha_next = flecha_next.getBounds();
			flecha_next.regX = bounds_flecha_next.width/2;
			flecha_next.regY = bounds_flecha_next.height/2;
			flecha_next.alpha = 1;
			flecha_next.scaleX = 0;
			flecha_next.scaleY = -1;
			flecha_next.visible = false;
			flecha_next.x = coord_flecha_next[0];
			flecha_next.y = coord_flecha_next[1];
			flecha_next.cursor = "pointer";

			total_imagenes.push(flecha_next);

			flecha_next.addEventListener("mouseover", over_flecha_next);

			function over_flecha_next(){
	    		

					createjs.Tween.get(flecha_next,{override:true}).to({alpha:1,scaleX:1.1,scaleY:1.1},velocidad_lenta*4,createjs.Ease.elasticOut);
			}
			flecha_next.addEventListener("mouseout", out_flecha_next);

			function out_flecha_next(){
					createjs.Tween.get(flecha_next,{override:true}).to({alpha:1,scaleX:1,scaleY:1},velocidad_lenta*4,createjs.Ease.elasticOut);
			}
			flecha_next.addEventListener("click", clic_flecha_next);

			function clic_flecha_next(){
				flecha_next.visible = false;

				parent.znThisPage++;
				parent.pagina = "pages/page"+ parent.znThisPage + "/page"+ parent.znThisPage + ".html";
				createjs.Tween.get(parent.paginas_frame,{override:true}).to({x:-100, alpha:0},velocidad_media).call(parent.llamarPagina);
				//parent.lugarFlechas();
				parent.flechaNumero();
				parent.visibilidadFlechas();
				parent.clicCirculosMenuNav(parent.znThisPage-1)
			}

    	}
    	if(parent.znThisPage!=1){
    		flecha_last = new createjs.Bitmap("images/flecha_last.png");
			bounds_flecha_last = flecha_last.getBounds();
			flecha_last.regX = bounds_flecha_last.width/2;
			flecha_last.regY = bounds_flecha_last.height/2;
			flecha_last.alpha = 1;
			flecha_last.scaleX = 0;
			flecha_last.scaleY = -1;
			flecha_last.visible = false;
			flecha_last.x = coord_flecha_last[0];
			flecha_last.y = coord_flecha_last[1];
			flecha_last.cursor = "pointer";

			total_imagenes.push(flecha_last);

			flecha_last.addEventListener("mouseover", over_flecha_last);

			function over_flecha_last(){
	    		

					createjs.Tween.get(flecha_last,{override:true}).to({alpha:1,scaleX:1.1,scaleY:1.1},velocidad_lenta*4,createjs.Ease.elasticOut);
			}
			
			flecha_last.addEventListener("mouseout", out_flecha_last);

			function out_flecha_last(){
					createjs.Tween.get(flecha_last,{override:true}).to({alpha:1,scaleX:1,scaleY:1},velocidad_lenta*4,createjs.Ease.elasticOut);
			}
			
			flecha_last.addEventListener("click", clic_flecha_last);

			function clic_flecha_last(){
				flecha_last.visible = false;

				parent.znThisPage--;
				parent.pagina = "pages/page"+ parent.znThisPage + "/page"+ parent.znThisPage + ".html";
				createjs.Tween.get(parent.paginas_frame,{override:true}).to({x:325, alpha:0},velocidad_media).call(parent.llamarPagina);
				//parent.lugarFlechas();
				parent.flechaNumero();
				parent.visibilidadFlechas();
				parent.clicCirculosMenuNav(parent.znThisPage-1)

			}

    	}

	}

	if (cantidad_sensibles>0){
		var_enlace = document.getElementById("enlace");
		enlace_globos = new createjs.DOMElement(var_enlace);
		enlace_globos.visible = false;
		total_textos.push(enlace_globos);

		//console.log("Hola", var_enlace);

	}


		
	for (i = 0; i < sensibles.length; i++) { 
			sensibles[i].cursor= "pointer";
			sensible_actual = sensibles[i];
			f_sensible_clic(sensible_actual);
	}

	for (i = 0; i < total_imagenes.length; i++) { 
			stage.addChild(total_imagenes[i]);

		//	console.log(total_imagenes[i].htmlElement)
		}
		
	for (i = 0; i < total_textos.length; i++) { 
			stage.addChild(total_textos[i]);

		}

		//n_p = total_textos.indexOf(boton_volver);

		//console.log(n_p)
			var context = new createjs.Shape();
			context.graphics.beginFill("rgb(100,100,100)").drawCircle (100, 100, radio_circulo_negro);
    			
			
	

	stage.update();

	if(parent.tipo_curso == "isometrico"){

	}
	/*
	stage.setBounds( 10,  10,  10,  10 );
	bounds_stage = stage.getBounds();
	console.log(bounds_stage);
	stage.canvas.width = window.innerWidth;
    stage.canvas.height = window.innerHeight;  


*/
	if(cantidad_circulos>0 && tipo=="tipo3"){
		posiciones_finales_circulos_x = [];
		posiciones_finales_circulos_y = [];

		if(posabs_btncirc){
			$('.c_principal').each(function(index){
				pos_absbtncirc = $(this).attr("data-posabsbtn");	
				pos_absbtncirc = pos_absbtncirc.split(",")	
				//console.log(pos_absbtncirc,"pos_absbtncirc")
				posiciones_finales_circulos_x[index] = parseInt(pos_absbtncirc[0]);
				posiciones_finales_circulos_y[index] = parseInt(pos_absbtncirc[1]);

			})
		} else {
			if (cantidad_circulos == 1) {
				posiciones_finales_circulos_x[0] = ancho_canvas*1/2 //- bounds_contenedor_circulo.width/2;
				posiciones_finales_circulos_y[0] = y_circulos_g;

			}
			
			else if (cantidad_circulos == 2){

			

				posiciones_finales_circulos_x[0] = ancho_canvas*1/3 //- bounds_contenedor_circulo.width/2;
				posiciones_finales_circulos_y[0] = y_circulos_g;

				posiciones_finales_circulos_x[1] = ancho_canvas*2/3 //- bounds_contenedor_circulo.width/2;
				posiciones_finales_circulos_y[1] = y_circulos_g;
			}

			else if (cantidad_circulos == 3){
				posiciones_finales_circulos_x[0] = ancho_canvas*1/4 - ancho_circulos_html/4;//bounds_contenedor_circulo.width/4;
				posiciones_finales_circulos_y[0] = y_circulos_g;

				posiciones_finales_circulos_x[1] = ancho_canvas/2 //- bounds_contenedor_circulo.width/2;
				posiciones_finales_circulos_y[1] = y_circulos_g;
				
				posiciones_finales_circulos_x[2] = ancho_canvas*3/4 + ancho_circulos_html/4;
				posiciones_finales_circulos_y[2] = y_circulos_g;

			}
			else if (cantidad_circulos == 4){
				posiciones_finales_circulos_x[0] = ancho_canvas*1/5 - ancho_circulos_html/4;
				posiciones_finales_circulos_y[0] = y_circulos_g - 30;

				posiciones_finales_circulos_x[1] = ancho_canvas*2/5 - ancho_circulos_html/12;
				posiciones_finales_circulos_y[1] = y_circulos_g + 20;

				posiciones_finales_circulos_x[2] = ancho_canvas*3/5 + ancho_circulos_html/12;
				posiciones_finales_circulos_y[2] = y_circulos_g + 20;

				posiciones_finales_circulos_x[3] = ancho_canvas*4/5 + ancho_circulos_html/4;
				posiciones_finales_circulos_y[3] = y_circulos_g - 30;

			}
			else if (cantidad_circulos == 5){

				posiciones_finales_circulos_x[0] = ancho_canvas*1/6 - ancho_circulos_html/4;
				posiciones_finales_circulos_y[0] = y_circulos_g+40;

				posiciones_finales_circulos_x[1] = ancho_canvas*1/3 - ancho_circulos_html/8;
				posiciones_finales_circulos_y[1] = y_circulos_g-40;
				
				posiciones_finales_circulos_x[2] = ancho_canvas*1/2 //- bounds_contenedor_circulo.width/2;
				posiciones_finales_circulos_y[2] = y_circulos_g+40;

				posiciones_finales_circulos_x[3] = ancho_canvas*2/3 + ancho_circulos_html/8;
				posiciones_finales_circulos_y[3] = y_circulos_g-40;

				posiciones_finales_circulos_x[4] = ancho_canvas*5/6 + ancho_circulos_html/4;
				posiciones_finales_circulos_y[4] = y_circulos_g+40;
			}

			else if (cantidad_circulos == 6){

				posiciones_finales_circulos_x[0] = ancho_canvas*1/7 - ancho_circulos_html/4;
				posiciones_finales_circulos_y[0] = 190;

				posiciones_finales_circulos_x[1] = ancho_canvas*2/7 - ancho_circulos_html/8;
				posiciones_finales_circulos_y[1] = 250;
				
				posiciones_finales_circulos_x[2] = ancho_canvas*3/7 - ancho_circulos_html/28;
				posiciones_finales_circulos_y[2] = 190;

				posiciones_finales_circulos_x[3] = ancho_canvas*4/7 + ancho_circulos_html/28;
				posiciones_finales_circulos_y[3] = 250;

				posiciones_finales_circulos_x[4] = ancho_canvas*5/7 + ancho_circulos_html/8;
				posiciones_finales_circulos_y[4] = 190;

				posiciones_finales_circulos_x[5] = ancho_canvas*6/7 + ancho_circulos_html/4;
				posiciones_finales_circulos_y[5] = 250;
			} else if (cantidad_circulos == 7){

				posiciones_finales_circulos_x[0] = ancho_canvas*1/8 //- bounds_contenedor_circulo.width/2;
				posiciones_finales_circulos_y[0] = 190;

				posiciones_finales_circulos_x[1] = ancho_canvas*2/8 //- bounds_contenedor_circulo.width/2;
				posiciones_finales_circulos_y[1] = 250;
				
				posiciones_finales_circulos_x[2] = ancho_canvas*3/8 //- bounds_contenedor_circulo.width/2;
				posiciones_finales_circulos_y[2] = 190;

				posiciones_finales_circulos_x[3] = ancho_canvas*4/8 //- bounds_contenedor_circulo.width/2;
				posiciones_finales_circulos_y[3] = 250;

				posiciones_finales_circulos_x[4] = ancho_canvas*5/8 //- bounds_contenedor_circulo.width/2;
				posiciones_finales_circulos_y[4] = 190;

				posiciones_finales_circulos_x[5] = ancho_canvas*6/8 //- bounds_contenedor_circulo.width/2;
				posiciones_finales_circulos_y[5] = 250;

				posiciones_finales_circulos_x[6] = ancho_canvas*7/8 //- bounds_contenedor_circulo.width/2;
				posiciones_finales_circulos_y[6] = 190;
			} 

			if (cantidad_circulos == 7 && parent.znThisPage==600){

				posiciones_finales_circulos_x[0] = 300;//ancho_canvas*1/8 //- bounds_contenedor_circulo.width/2;
				posiciones_finales_circulos_y[0] = 420;

				posiciones_finales_circulos_x[1] = 400;//ancho_canvas*2/8 //- bounds_contenedor_circulo.width/2;
				posiciones_finales_circulos_y[1] = 290;
				
				posiciones_finales_circulos_x[2] = 820;//ancho_canvas*3/8 //- bounds_contenedor_circulo.width/2;
				posiciones_finales_circulos_y[2] = 260;

				posiciones_finales_circulos_x[3] = 880 //- bounds_contenedor_circulo.width/2;
				posiciones_finales_circulos_y[3] = 190;

				posiciones_finales_circulos_x[4] = 895//ancho_canvas*5/8 //- bounds_contenedor_circulo.width/2;
				posiciones_finales_circulos_y[4] = 80;

				posiciones_finales_circulos_x[5] = 350//ancho_canvas*7/8 //- bounds_contenedor_circulo.width/2;
				posiciones_finales_circulos_y[5] = 190;

				posiciones_finales_circulos_x[6] = 720//ancho_canvas*6/8 //- bounds_contenedor_circulo.width/2;
				posiciones_finales_circulos_y[6] = 60;

				
			}
		}

		if(btn_zonaper){
			for (i = 0; i < cantidad_circulos; i++) { 

				console.log(i,objetos_btn,"objetos_btn")
				posiciones_finales_circulos_x[i] = parseInt(objetos_btn[i].left,10);
				posiciones_finales_circulos_y[i] = parseInt(objetos_btn[i].top,10);

				

				document.getElementById("circ_btn"+i).style.width = objetos_btn[i].width;
				document.getElementById("cb"+i).style.width = parseInt(objetos_btn[i].width,10) - 50 +"px";
				
				document.getElementById("circ_btn"+i).style.height = objetos_btn[i].height;
				document.getElementById("cb"+i).style.height = parseInt(objetos_btn[i].height,10) - 50 +"px";


				contenedor_circulos[i].regX = parseInt(objetos_btn[i].width,10)/2;
				contenedor_circulos[i].regY = parseInt(objetos_btn[i].height,10)/2;
			}
		}
	}


	function animacionCirculos(cantidad_circulos){

		for (i = 0; i < cantidad_circulos; i++) { 
			if(parent.znThisPage<parent.znAnterior){
				//contenedor_circulos[i].rotation=-1440;
				//contenedor_circulos[i].x=-300;
				//contenedor_circulos[i].skewX=15;


			
			} else {
				//contenedor_circulos[i].rotation=1440;
				//contenedor_circulos[i].x=1300;
				//contenedor_circulos[i].skewX=-15;




			}


		} 

		

		if (cantidad_circulos>0 && tipo=="tipo3"){
		for (i = 0; i < cantidad_circulos; i++) { 
			contenedor_circulos[i].x = posiciones_finales_circulos_x[i];
			contenedor_circulos[i].y = posiciones_finales_circulos_y[i];
			contenedor_circulos[i].scaleX = 0;
			contenedor_circulos[i].scaleY = 0;
			contenedor_circulos[i].alpha = 1;
			
			///DCRI
			//createjs.Tween.get(contenedor_circulos[i],{override:true}).wait(velocidad_media*(i+0.3)).to({scaleX:scale_circulos_grandes_no_over,scaleY:scale_circulos_grandes_no_over,skewX:0},velocidad_lenta*3,createjs.Ease.elasticOut);

		} 
		

		if(cantidad_circulos<6){
		width_titulos_circulos = 250;

		} else {
		width_titulos_circulos = 160;

		}

		orig_xtit = [];
		orig_ytit = [];

		for (i = 0; i < cantidad_circulos; i++) { 
			titulos_circulos[i].visible = true;

			document.getElementById("titulo_c"+i).style.width = width_titulos_circulos+"px";


			if(!ini_especial){
				if(cantidad_circulos<6){
			titulos_circulos[i].x = contenedor_circulos[i].x - width_titulos_circulos/2; //- bounds_contenedor_circulo.width/2 //- width_titulos_circulos/2;
				titulos_circulos[i].y = contenedor_circulos[i].y + alto_circulos_html/2 // + width_titulos_circulos/50;
				
			} else {
			titulos_circulos[i].x = contenedor_circulos[i].x - width_titulos_circulos/2; //- bounds_contenedor_circulo.width/2 //- width_titulos_circulos/2;
				titulos_circulos[i].y = contenedor_circulos[i].y + alto_circulos_html/2*0.7; // + width_titulos_circulos/50;

			}
		} else {

			if(btn_zonaper){
					console.log(btn_zonaper,"btn_zonaper")
					titulos_circulos[i].visible = false;
					titulos_circulos[i].scaleY = 0;
			
				}

			if(i==0||i==2){
				
				titulos_circulos[i].x = x_btnanima[i]-330;// - width_titulos_circulos/2; //- bounds_contenedor_circulo.width/2 //- width_titulos_circulos/2;
				titulos_circulos[i].y = y_btnanima[i];//contenedor_circulos[i].y + alto_circulos_html/2*0.7; // + width_titulos_circulos/50;
				
			} else {
				titulos_circulos[i].x = x_btnanima[i]+130;// - width_titulos_circulos/2; //- bounds_contenedor_circulo.width/2 //- width_titulos_circulos/2;
				titulos_circulos[i].y = y_btnanima[i];//contenedor_circulos[i].y + alto_circulos_html/2*0.7; // + width_titulos_circulos/50;
			}

			orig_xtit[i] = titulos_circulos[i].x;
			orig_ytit[i] = titulos_circulos[i].y;

		}


		} 
		for (i = 0; i < cantidad_circulos; i++) { 
			if(parent.znThisPage==600){
			createjs.Tween.get(titulos_circulos[i],{override:true}).to({alpha:0},velocidad_media);			

			} else{
			///DCRI

			//createjs.Tween.get(titulos_circulos[i],{override:true}).to({alpha:1},velocidad_media);			

			}

		} 


		} else {
			
		}


		//contenedor_circulos[0].y = 0;
		

		

	}

	function posicionTitulos(){
		
		for (i = 0; i < cantidad_circulos; i++) { 
			titulos_circulos[i].x = contenedor_circulos[i].x - width_titulos_circulos/2; //- bounds_contenedor_circulo.width/2 //- width_titulos_circulos/2;
			titulos_circulos[i].y = contenedor_circulos[i].y + bounds_contenedor_circulo.height/2 // + width_titulos_circulos/50;

		} 
		for (i = 0; i < cantidad_circulos; i++) { 
			if(parent.znThisPage==600){
			createjs.Tween.get(titulos_circulos[i],{override:true}).to({alpha:0},velocidad_media);			

			} else{
			createjs.Tween.get(titulos_circulos[i],{override:true}).to({alpha:1},velocidad_media);			

			}

		} 

	}



	entradaTitulo()

	function entradaTitulo(){
		
		//createjs.Tween.get(circulo_negro).to({alpha:1,scaleX:1,scaleY:1},velocidad_lenta*2, createjs.Ease.bounceIn);
		//createjs.Tween.get(circulo_amarillo).wait(velocidad_lenta*0.5).to({alpha:1,scaleX:1,scaleY:1},velocidad_lenta*2, createjs.Ease.bounceIn);
		


		var_titulo_pagina.innerHTML = parent.znThisPage +".</span>" + "<p>"+parent.titulos_pantallas[parent.znThisPage-1]+ "</p>";
		var_titulo_pagina.style.width = "auto";

		///DCRI
		var_titulo_pagina.style.maxWidth = "670px";
		//createjs.Tween.get(numero_titulo_pagina).wait(velocidad_lenta*2.5).to({alpha:1, scaleX:1, scaleY:1},velocidad_lenta);
		if(tipo=="tipo1"){
		titulo_pagina.x = x_titulo_final;
		titulo_pagina.y = y_titulo_final;

		///DCRI




				createjs.Tween.get(titulo_pagina).wait(velocidad_lenta*2).to({x:x_titulo_final,y:y_titulo_final,scaleX:1,scaleY:1,skewX:1},velocidad_lenta, createjs.Ease.bounceIn).call(contenidoTitulo);
		//createjs.Tween.get(titulo_pagina).wait(velocidad_lenta*2).to({alpha:1, scaleY:1,skewX:1,scaleX:1},velocidad_lenta, createjs.Ease.bounceOut).wait(velocidad_lenta).to({x:x_titulo_final,y:y_titulo_final,scaleX:1,scaleY:1,skewX:1},velocidad_lenta).call(contenidoTitulo);
			

		} else {
			if(parent.titulos_pantallas[parent.znThisPage-1]!="Objetivo"){
				createjs.Tween.get(titulo_pagina).wait(velocidad_lenta*2).to({alpha:1, scaleY:1,skewX:1,scaleX:1},velocidad_lenta, createjs.Ease.bounceOut).call(contenidoTitulo);
			} else {
				contenidoTitulo();
			}


		}
	}
	
	function contenidoTitulo(){
		//var_titulo_pagina.style.color = "#FFFFFF";
		
	}
	function clic_equis_zoom(){
		//var_zoom.style.visibility = "hidden";

		if(parent.con_sonidoclic){
									parent.audio_clic.play();
								}

		control_flechas(numero_arreglo_zoom,"clic_zoom");
		
		parent.$("#zoom").removeClass("scale1x").addClass("scale0x");

		setTimeout(function(){
			var_contenido_zoom.innerHTML = "";
			

		}, velocidad_media);


	}

	function over_equis_zoom(){
		//this.style.backgroundColor = "rgb(0,147,221)";//"rgb(236,27,35)";
		//this.style.color = "rgb(255,255,255)"//"white";		

	}

	function out_equis_zoom(){
		//this.style.backgroundColor = "rgb(255,255,255)"//"rgb(236,27,35)";
		//this.style.color = "rgb(0,147,221)";//"white";
	}
	function over_interno(){
		this.style.opacity = 0.9;
	}

	function out_interno(){
		this.style.opacity = 1;
	}

	function over_internob(){
		this.style.opacity = 0.9;
	}

	function out_internob(){
		this.style.opacity = 1;
	}

	function over_btnpersonaje(){
		if(clic_en_btnpersonaje == false){
			//////ACA PERSOBAJE
			if(version_personaje==1){
		createjs.Tween.get(contenedor_btnpersonaje_per1,{override:true}).to({scaleX:parent.scalebigx_contenedor_btnpersonaje_per1,scaleY:parent.scalebigy_contenedor_btnpersonaje_per1},velocidad_lenta*2,createjs.Ease.elasticOut);
			
		} else if(version_personaje==2){
		createjs.Tween.get(contenedor_btnpersonaje_per2,{override:true}).to({scaleX:parent.scalebigx_contenedor_btnpersonaje_per2,scaleY:parent.scalebigy_contenedor_btnpersonaje_per2},velocidad_lenta*2,createjs.Ease.elasticOut);
			
		} else if(version_personaje==3){
		createjs.Tween.get(contenedor_btnpersonaje_per3,{override:true}).to({scaleX:parent.scalebigx_contenedor_btnpersonaje_per3,scaleY:parent.scalebigy_contenedor_btnpersonaje_per3},velocidad_lenta*2,createjs.Ease.elasticOut);
			
		} else if(version_personaje==4){
		createjs.Tween.get(contenedor_btnpersonaje_per4,{override:true}).to({scaleX:parent.scalebigx_contenedor_btnpersonaje_per4,scaleY:parent.scalebigy_contenedor_btnpersonaje_per4},velocidad_lenta*2,createjs.Ease.elasticOut);
			
		}
		//createjs.Tween.get(audio_btnoff,{override:true}).to({alpha:0},velocidad_lenta*1);
		//createjs.Tween.get(audio_btnon,{override:true}).to({alpha:1},velocidad_lenta*0.2);
		//createjs.Tween.get(audio_btnclico,{override:true}).to({alpha:0},velocidad_lenta*1);
		//createjs.Tween.get(audio_btnclicof,{override:true}).to({alpha:0},velocidad_lenta*1);
		} else {
		//createjs.Tween.get(audio_btnoff,{override:true}).to({alpha:0},velocidad_lenta*1);
		//createjs.Tween.get(audio_btnon,{override:true}).to({alpha:0},velocidad_lenta*1);
		//createjs.Tween.get(audio_btnclico,{override:true}).to({alpha:0},velocidad_lenta*1);
		//createjs.Tween.get(audio_btnclicof,{override:true}).to({alpha:1},velocidad_lenta*0.2);
		}

		
	}
	function out_btnpersonaje(){
		if(clic_en_btnpersonaje == false){
			//////ACA PERSOBAJE

			if(version_personaje==1){
			createjs.Tween.get(contenedor_btnpersonaje_per1,{override:true}).to({scaleX:parent.scalesmallx_contenedor_btnpersonaje_per1,scaleY:parent.scalesmally_contenedor_btnpersonaje_per1},velocidad_lenta*2,createjs.Ease.elasticOut);
		createjs.Tween.get(audio_btnoff_per1,{override:true}).to({alpha:1},velocidad_lenta*0.2);
		createjs.Tween.get(audio_btnon_per1,{override:true}).to({alpha:0},velocidad_lenta*1);
		createjs.Tween.get(audio_btnclico_per1,{override:true}).to({alpha:0},velocidad_lenta*1);
		createjs.Tween.get(audio_btnclicof_per1,{override:true}).to({alpha:0},velocidad_lenta*1);
		} else if(version_personaje==2){
			createjs.Tween.get(contenedor_btnpersonaje_per2,{override:true}).to({scaleX:parent.scalesmallx_contenedor_btnpersonaje_per2,scaleY:parent.scalesmally_contenedor_btnpersonaje_per2},velocidad_lenta*2,createjs.Ease.elasticOut);
		createjs.Tween.get(audio_btnoff_per2,{override:true}).to({alpha:1},velocidad_lenta*0.2);
		createjs.Tween.get(audio_btnon_per2,{override:true}).to({alpha:0},velocidad_lenta*1);
		createjs.Tween.get(audio_btnclico_per2,{override:true}).to({alpha:0},velocidad_lenta*1);
		createjs.Tween.get(audio_btnclicof_per2,{override:true}).to({alpha:0},velocidad_lenta*1);
		} else if(version_personaje==3){
			createjs.Tween.get(contenedor_btnpersonaje_per3,{override:true}).to({scaleX:parent.scalesmallx_contenedor_btnpersonaje_per3,scaleY:parent.scalesmally_contenedor_btnpersonaje_per3},velocidad_lenta*2,createjs.Ease.elasticOut);
		createjs.Tween.get(audio_btnoff_per3,{override:true}).to({alpha:1},velocidad_lenta*0.2);
		createjs.Tween.get(audio_btnon_per3,{override:true}).to({alpha:0},velocidad_lenta*1);
		createjs.Tween.get(audio_btnclico_per3,{override:true}).to({alpha:0},velocidad_lenta*1);
		createjs.Tween.get(audio_btnclicof_per3,{override:true}).to({alpha:0},velocidad_lenta*1);
		} else if(version_personaje==4){
			createjs.Tween.get(contenedor_btnpersonaje_per4,{override:true}).to({scaleX:parent.scalesmallx_contenedor_btnpersonaje_per4,scaleY:parent.scalesmally_contenedor_btnpersonaje_per4},velocidad_lenta*2,createjs.Ease.elasticOut);
		createjs.Tween.get(audio_btnoff_per4,{override:true}).to({alpha:1},velocidad_lenta*0.2);
		createjs.Tween.get(audio_btnon_per4,{override:true}).to({alpha:0},velocidad_lenta*1);
		createjs.Tween.get(audio_btnclico_per4,{override:true}).to({alpha:0},velocidad_lenta*1);
		createjs.Tween.get(audio_btnclicof_per4,{override:true}).to({alpha:0},velocidad_lenta*1);
		}
		
		} else {
		//createjs.Tween.get(audio_btnoff,{override:true}).to({alpha:0},velocidad_lenta*1);
		//createjs.Tween.get(audio_btnon,{override:true}).to({alpha:0},velocidad_lenta*1);
		//createjs.Tween.get(audio_btnclico,{override:true}).to({alpha:1},velocidad_lenta*0.2);
		//createjs.Tween.get(audio_btnclicof,{override:true}).to({alpha:0},velocidad_lenta*1);
		}
	}



	function clic_btnpersonaje(){
		$('audio').each(function(){
	    	this.pause(); // Stop playing
	    	//this.currentTime = 0; // Reset time
	    	$(this)[0].currentTime = 0;
		}); 
		$('video').each(function(){
			
			if(!this.muted){
	    		this.pause(); // Stop playing
	    	//this.currentTime = 0; // Reset time
	    	}
		}); 
		if(parent.znThisPage==150){
			img = document.getElementById("gif0");
			img.src = img.src.replace(/\?.*$/,"")+"?x="+Math.random();
		}
		parent.cerrarMensaje();
		var_maspersonaje_actual = document.getElementById("contenido_c"+circulo_actual_ok).id;
		numero_arreglo_maspersonajeactual = contenidos_circulos_html_maspersonaje_origen.indexOf(var_maspersonaje_actual);
		if(cantidad_masinfo>0){
		if(!clic_en_masinfo){
			clic_masinfo();
			out_masinfo();
		}
		}
		if(clic_en_btnpersonaje == false){

			if(parent.con_sonidoclic){
									parent.audio_clic.play();
								}


		audio_activo = true;
		clic_en_btnpersonaje = true;
		clic_audio();
			if(parent.$("#txt_ie2").find("div").eq(0).text() == ""+parent.tx_pulsamay+" aquí."){
				createjs.Tween.get(parent.instruccion_especial2,{override:true}).to({alpha:0},velocidad_rapida);
			} else {
				createjs.Tween.get(parent.instruccion_especial2,{override:true}).to({alpha:1},velocidad_media);

			}
		if(tipo!="tipo2"&&tipo!="tipo3"){
			
			$("#contenido_c0").addClass("transition");
				if(parent.con_botonesavance||parent.con_menunumeros_vhz){
				document.getElementById('contenido_c0').style.width = "1105px";

				} else {
				document.getElementById('contenido_c0').style.width = "1015px";

				}
			}
			
			
		//////ACA PERSOBAJE
		if(version_personaje==1){
			createjs.Tween.get(contenedor_btnpersonaje_per1,{override:true}).to({scaleX:parent.scalebigx_contenedor_btnpersonaje_per1,scaleY:parent.scalebigy_contenedor_btnpersonaje_per1},velocidad_lenta*2,createjs.Ease.elasticOut);
			createjs.Tween.get(audio_btnoff_per1,{override:true}).to({alpha:0},velocidad_lenta*1);
			createjs.Tween.get(audio_btnon_per1,{override:true}).to({alpha:0},velocidad_lenta*1);
			createjs.Tween.get(audio_btnclico_per1,{override:true}).to({alpha:0},velocidad_lenta*1);
			createjs.Tween.get(audio_btnclicof_per1,{override:true}).to({alpha:1},velocidad_lenta*0.2);
		} else if(version_personaje==2){
			createjs.Tween.get(contenedor_btnpersonaje_per2,{override:true}).to({scaleX:parent.scalebigx_contenedor_btnpersonaje_per2,scaleY:parent.scalebigy_contenedor_btnpersonaje_per2},velocidad_lenta*2,createjs.Ease.elasticOut);
			createjs.Tween.get(audio_btnoff_per2,{override:true}).to({alpha:0},velocidad_lenta*1);
			createjs.Tween.get(audio_btnon_per2,{override:true}).to({alpha:0},velocidad_lenta*1);
			createjs.Tween.get(audio_btnclico_per2,{override:true}).to({alpha:0},velocidad_lenta*1);
			createjs.Tween.get(audio_btnclicof_per2,{override:true}).to({alpha:1},velocidad_lenta*0.2);
		} else if(version_personaje==3){
			createjs.Tween.get(contenedor_btnpersonaje_per3,{override:true}).to({scaleX:parent.scalebigx_contenedor_btnpersonaje_per3,scaleY:parent.scalebigy_contenedor_btnpersonaje_per3},velocidad_lenta*2,createjs.Ease.elasticOut);
			createjs.Tween.get(audio_btnoff_per3,{override:true}).to({alpha:0},velocidad_lenta*1);
			createjs.Tween.get(audio_btnon_per3,{override:true}).to({alpha:0},velocidad_lenta*1);
			createjs.Tween.get(audio_btnclico_per3,{override:true}).to({alpha:0},velocidad_lenta*1);
			createjs.Tween.get(audio_btnclicof_per3,{override:true}).to({alpha:1},velocidad_lenta*0.2);
		} else if(version_personaje==4){
			createjs.Tween.get(contenedor_btnpersonaje_per4,{override:true}).to({scaleX:parent.scalebigx_contenedor_btnpersonaje_per4,scaleY:parent.scalebigy_contenedor_btnpersonaje_per4},velocidad_lenta*2,createjs.Ease.elasticOut);
			createjs.Tween.get(audio_btnoff_per4,{override:true}).to({alpha:0},velocidad_lenta*1);
			createjs.Tween.get(audio_btnon_per4,{override:true}).to({alpha:0},velocidad_lenta*1);
			createjs.Tween.get(audio_btnclico_per4,{override:true}).to({alpha:0},velocidad_lenta*1);
			createjs.Tween.get(audio_btnclicof_per4,{override:true}).to({alpha:1},velocidad_lenta*0.2);
		}
		
		//console.log("hola",contenidos_circulos_html_maspersonaje[numero_arreglo_maspersonajeactual].id)

		//txt_instinterna = $(this).text();
		if(cantidad_maspersonaje>0){
		id_acmp = $(contenidos_circulos_html_maspersonaje[numero_arreglo_maspersonajeactual])[0].id;
		//console.log(id_acmp)
		//console.log($("#"+id_acmp).find("img").length!=0)
		if($("#"+id_acmp).text().trim().length!=0||$("#"+id_acmp).find("img").length!=0){

		//if(contenidos_circulos_html_maspersonaje[numero_arreglo_maspersonajeactual].innerHTML != "nada"){
		createjs.Tween.get(total_mas_personajes[numero_arreglo_maspersonajeactual],{override:true}).to({scaleX:1,scaleY:1,x:x_final_maspersonaje,y:y_final_maspersonaje},velocidad_lenta*1.5,createjs.Ease.circOut);

		//$('#cubre_cont'+numero_arreglo_maspersonajeactual).fadeIn(0);
		desapareceContPr()
		
	
		$('#cubre_masper'+numero_arreglo_maspersonajeactual).fadeIn(0);
			setTimeout(function(){
			$('#cubre_masper'+numero_arreglo_maspersonajeactual).fadeOut(0);
			
			}, duracion_anima);
		animaElemPage("#contenido_c",actual_circ,"_mp");

		parent.document.getElementById("instruccion_especial2").style.zIndex="1";
		}
		}
		
		} else {
		audio_activo = false;
		clic_audio();
		setTimeout(function(){

			createjs.Tween.get(parent.instruccion_especial2,{override:true}).to({alpha:1},velocidad_media);
		},10);
		
		clic_en_btnpersonaje = false;
		//////ACA PERSOBAJE

		if(version_personaje==1){
			createjs.Tween.get(contenedor_btnpersonaje_per1,{override:true}).to({scaleX:parent.scalesmallx_contenedor_btnpersonaje_per1,scaleY:parent.scalesmally_contenedor_btnpersonaje_per1},velocidad_lenta*2,createjs.Ease.elasticOut);
			createjs.Tween.get(audio_btnoff_per1,{override:true}).to({alpha:0},velocidad_lenta*1);
			createjs.Tween.get(audio_btnon_per1,{override:true}).to({alpha:1},velocidad_lenta*0.2);
			createjs.Tween.get(audio_btnclico_per1,{override:true}).to({alpha:0},velocidad_lenta*1);
			createjs.Tween.get(audio_btnclicof_per1,{override:true}).to({alpha:0},velocidad_lenta*1);
		} else if(version_personaje==2){
			createjs.Tween.get(contenedor_btnpersonaje_per2,{override:true}).to({scaleX:parent.scalesmallx_contenedor_btnpersonaje_per2,scaleY:parent.scalesmally_contenedor_btnpersonaje_per2},velocidad_lenta*2,createjs.Ease.elasticOut);
			createjs.Tween.get(audio_btnoff_per2,{override:true}).to({alpha:0},velocidad_lenta*1);
			createjs.Tween.get(audio_btnon_per2,{override:true}).to({alpha:1},velocidad_lenta*0.2);
			createjs.Tween.get(audio_btnclico_per2,{override:true}).to({alpha:0},velocidad_lenta*1);
			createjs.Tween.get(audio_btnclicof_per2,{override:true}).to({alpha:0},velocidad_lenta*1);
		} else if(version_personaje==3){
			createjs.Tween.get(contenedor_btnpersonaje_per3,{override:true}).to({scaleX:parent.scalesmallx_contenedor_btnpersonaje_per3,scaleY:parent.scalesmally_contenedor_btnpersonaje_per3},velocidad_lenta*2,createjs.Ease.elasticOut);
			createjs.Tween.get(audio_btnoff_per3,{override:true}).to({alpha:0},velocidad_lenta*1);
			createjs.Tween.get(audio_btnon_per3,{override:true}).to({alpha:1},velocidad_lenta*0.2);
			createjs.Tween.get(audio_btnclico_per3,{override:true}).to({alpha:0},velocidad_lenta*1);
			createjs.Tween.get(audio_btnclicof_per3,{override:true}).to({alpha:0},velocidad_lenta*1);
		} else if(version_personaje==4){
			createjs.Tween.get(contenedor_btnpersonaje_per4,{override:true}).to({scaleX:parent.scalesmallx_contenedor_btnpersonaje_per4,scaleY:parent.scalesmally_contenedor_btnpersonaje_per4},velocidad_lenta*2,createjs.Ease.elasticOut);
			createjs.Tween.get(audio_btnoff_per4,{override:true}).to({alpha:0},velocidad_lenta*1);
			createjs.Tween.get(audio_btnon_per4,{override:true}).to({alpha:1},velocidad_lenta*0.2);
			createjs.Tween.get(audio_btnclico_per4,{override:true}).to({alpha:0},velocidad_lenta*1);
			createjs.Tween.get(audio_btnclicof_per4,{override:true}).to({alpha:0},velocidad_lenta*1);
		}


		

		createjs.Tween.get(total_mas_personajes[numero_arreglo_maspersonajeactual],{override:true}).to({scaleX:0,scaleY:0,x:x_inicial_maspersonaje-30,y:y_inicial_maspersonaje},velocidad_media,createjs.Ease.circOut).call(initValP);
			function initValP(){
				//id_acmp = $(contenidos_circulos_html_maspersonaje[numero_arreglo_maspersonajeactual])[0].id;

				initialValueAnima("#contenido_c",actual_circ,"_mp");
				$('#cubre_masper'+actual_circ).fadeIn(0);
				
				apareceContPr()

			}
		}
	}

	function desapareceContPr(){

		if(clic_en_masinfo==clic_en_masinfo){
			if(parent.tipo_curso=="estandar"){
				$('#cubre_cont'+actual_circ).removeClass("opc_cubre_00").addClass("opc_cubre_10");
			}
			$('#cubre_cont'+actual_circ).stop(true,true).fadeIn(duracion_anima/2)
		}
	}

	/*
	function apareceContPr(){
		//console.log(clic_en_masinfo)
		if(cantidad_maspersonaje>0){
			id_acmp = $(contenidos_circulos_html_maspersonaje[numero_arreglo_maspersonajeactual])[0].id;
			eval_perc = $("#"+id_acmp).text().trim().length>0||$("#"+id_acmp).find("img").length>0;
		} else {
			eval_perc = true;
		}

		if(eval_perc){
		
			if(clic_en_masinfo!=clic_en_btnpersonaje){
				
				initialValueAnima("#contenido_c",actual_circ,"");//para contenido principal
				
				setTimeout(function(){
					animaElemPage("#contenido_c",actual_circ,"");//para contenido principal
					$('#cubre_cont'+actual_circ).removeClass("opc_cubre_10").addClass("opc_cubre_00");
					$('#cubre_cont'+actual_circ).stop(true,true).fadeOut(duracion_anima);
				},10);
			}
		} else {
			if(clic_en_btnpersonaje){
				initialValueAnima("#contenido_c",actual_circ,"");//para contenido principal
				
				setTimeout(function(){
					animaElemPage("#contenido_c",actual_circ,"");//para contenido principal
					$('#cubre_cont'+actual_circ).removeClass("opc_cubre_10").addClass("opc_cubre_00");
					$('#cubre_cont'+actual_circ).stop(true,true).fadeOut(duracion_anima);
				},10);
			}
		
		}
	}
	*/

		function apareceContPr(){
		
		
		if(cantidad_maspersonaje>0){
			id_acmp = $(contenidos_circulos_html_maspersonaje[numero_arreglo_maspersonajeactual])[0].id;
			eval_perc = $("#"+id_acmp).text().trim().length>0||$("#"+id_acmp).find("img").length>0;
		} else {
			eval_perc = true;
		}


		
		if(eval_perc){
		
			if(clic_en_masinfo!=clic_en_btnpersonaje){
				
				initialValueAnima("#contenido_c",actual_circ,"");//para contenido principal
				
				setTimeout(function(){
					animaElemPage("#contenido_c",actual_circ,"");//para contenido principal
					$('#cubre_cont'+actual_circ).removeClass("opc_cubre_10").addClass("opc_cubre_00");
					$('#cubre_cont'+actual_circ).stop(true,true).fadeOut(duracion_anima);
				},10);
			}
		} else {
			
			if(clic_en_masinfo==false&&clic_en_btnpersonaje==false){
				initialValueAnima("#contenido_c",actual_circ,"");//para contenido principal
				
				
			} else {
				
				setTimeout(function(){
					animaElemPage("#contenido_c",actual_circ,"");//para contenido principal
					$('#cubre_cont'+actual_circ).removeClass("opc_cubre_10").addClass("opc_cubre_00");
					$('#cubre_cont'+actual_circ).stop(true,true).fadeOut(duracion_anima);
				},10);
				
			}

		
		
		}
	}


	function over_iaudio(){
				
		if(contenedor_iaudio.alpha == 1 ){

		createjs.Tween.get(contenedor_iaudio,{override:true}).to({scaleX:1,scaleY:1},velocidad_lenta*2,createjs.Ease.elasticOut);
		}
		
	}
	function out_iaudio(){
		if(contenedor_iaudio.alpha == 1 && document.getElementById("boton_audiob").className == "boton_audio"){
		createjs.Tween.get(contenedor_iaudio,{override:true}).to({scaleX:0.9,scaleY:0.9},velocidad_lenta*2,createjs.Ease.elasticOut);
		}
	}


	function over_equis(){
		if(equis.alpha == 1){

		//createjs.Tween.get(equis,{override:true}).to({scaleX:1,scaleY:1},velocidad_lenta*2,createjs.Ease.elasticOut);
		}
		
	}
	function out_equis(){
		if(equis.alpha == 1){
		//createjs.Tween.get(equis,{override:true}).to({scaleX:0.9,scaleY:0.9},velocidad_lenta*2,createjs.Ease.elasticOut);
		}
	}

	function over_icono_personaje(){
		if(icono_personaje_activo){
		createjs.Tween.get(icono_personaje,{override:true}).to({scaleX:1,scaleY:1},velocidad_lenta*2,createjs.Ease.elasticOut);			
		}
		
	}
	function out_icono_personaje(){
		if(icono_personaje_activo){
		createjs.Tween.get(icono_personaje,{override:true}).to({scaleX:0.8,scaleY:0.8},velocidad_lenta*2,createjs.Ease.elasticOut);
		}
		
	}

	
	function contenidoElem(elemento_clic,elemento_clic_id){
		while (elemento_clic != undefined && elemento_clic != null && elemento_clic.tagName.toUpperCase() != 'BODY' && elemento_clic_id != "contenedor_clics"){
				       
				        elemento_clic = elemento_clic.parentNode;
				        elemento_clic_id = elemento_clic.id;
						
						if(elemento_clic_id.length>15){
				        	elemento_clic_id = elemento_clic_id.substr(0, 16);
						}
						if (elemento_clic_id == "contenedor_clics"){
				        	
							elemento_clic_id2 = elemento_clic.id;

							//return elemento_clic_id2[elemento_clic_id2.length-1];
				        	
				        	elemento_clic_id2_s = elemento_clic_id2.split("contenedor_clics")
				        	return elemento_clic_id2_s[1];

				        }
					
				    }

	}

	function contenidoElemb(elemento_clic,elemento_clic_id){
		while (elemento_clic != undefined && elemento_clic != null && elemento_clic.tagName.toUpperCase() != 'BODY' && elemento_clic_id != "contenedor_clicsb"){
				       
				        elemento_clic = elemento_clic.parentNode;
				        elemento_clic_id = elemento_clic.id;
						
						if(elemento_clic_id.length>15){
				        	elemento_clic_id = elemento_clic_id.substr(0, 17);
						}
						if (elemento_clic_id == "contenedor_clicsb"){
				        	
							elemento_clic_id2 = elemento_clic.id;

							//return elemento_clic_id2[elemento_clic_id2.length-1];
				        	
				        	elemento_clic_id2_s = elemento_clic_id2.split("contenedor_clicsb")
				        	return elemento_clic_id2_s[1];

				        }
					
				    }

	}
	function clic_interno(ci_c){
		

		if(parent.con_sonidoclic){
									parent.audio_clic.play();
								}


		numero_arreglo_clic_interno = total_clics_internos.indexOf(this);


		or_numero_arreglo_clic_interno = numero_arreglo_clic_interno;
		if(numero_arreglo_clic_interno==-1){
			numero_arreglo_clic_interno=ci_c;
			id_clic_act = "clic"+ci_c;
		} else{
			id_clic_act = this.id;
		}
		
		


		if(clic_actual_ok!=numero_arreglo_clic_interno||or_numero_arreglo_clic_interno==-1){
		
		if(permitido_clic[numero_arreglo_clic_interno].val){
			clic_actual_ok = numero_arreglo_clic_interno;
			$("#clic"+clic_actual_ok).closest(".contenedor_clics_scroll").find("div[class*=clic]").removeClass("selected_clic");
			
			$("#clic"+clic_actual_ok).addClass("selected_clic");
			scrollMenuClic($("#clic"+numero_arreglo_clic_interno).closest(".contenedor_clics_scroll"))
			
			if(clic_actual_ok>=clic_mayor_actual){
				clic_mayor_actual = clic_actual_ok
			}
//console.log(clic_actual_ok,numero_arreglo_clic_interno)
		
		parent.cerrarMensaje();
		$('audio').each(function(){
	    	this.pause(); // Stop playing
	    	//this.currentTime = 0; // Reset time
	    	$(this)[0].currentTime = 0;
		}); 

		if($('#txt_interno'+numero_arreglo_clic_interno).find("audio").length==1){
			console.log("audio int")
			setTimeout(function () {
				$('#txt_interno'+numero_arreglo_clic_interno).find("audio")[0].play();
			}, 500);
			
		}


		if (cantidad_videos>0){

			for (i = 0; i < total_videos.length-1; i++) { 
				if(parent.videos_vimeo){

						//iframe_vid = $('#video'+i)[0];
				    	//var_video = $f(iframe_vid);
						 //var_video.api('pause');

						 iframe_vid = document.getElementById('video'+i);
							var_video = new Vimeo.Player(iframe_vid);
							var_video.pause()

					} else if(parent.videos_youtube) {
						if(cant_loadyt==cantidad_videos){
						player_yt[i].pauseVideo();
						}
					} else {
						 var_video = document.getElementById("video"+i);
						var_video.pause();

					}
			}
		}



		if(parent.znThisPage==2&&numero_arreglo_clic_interno==0){//&&document.getElementById("clic"+numero_arreglo_clic_interno).className == "clic_abierto"

			//		parent.document.getElementById("instruccion_info").style.visibility = "visible";	

				}
				
		if($("#clic"+numero_arreglo_clic_interno).hasClass("clic_abierto")){
				

				document.getElementById("clic"+numero_arreglo_clic_interno).className = "clic_abierto2 selected_clic";
				
			}
		//numero_contenido = document.getElementById("clic"+numero_arreglo_clic_interno).parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.id;
		
		elemento_clic = document.getElementById("clic"+numero_arreglo_clic_interno);
		elemento_clic_id = elemento_clic.id;

		numero_contenido = contenidoElem(elemento_clic,elemento_clic_id)

		
		

		//numero_contenido = numero_contenido[numero_contenido.length-1];
		//console.log(numero_contenido)
		//document.getElementById("textos"+numero_contenido).innerHTML = document.getElementById("texto"+numero_arreglo_clic_interno).innerHTML

		//document.getElementById("instruccion_clics"+numero_contenido).style.visibility = "hidden";
		//document.getElementById("instruccion_clics"+numero_contenido).style.position = "absolute";
		//document.getElementById("instruccion_clics"+numero_contenido).style.top = 0;
		//ocument.getElementById("instruccion_clics"+numero_contenido).style.left = 0;
			

		

		
		//console.log(document.getElementById("textos"+numero_contenido).innerHTML)
		if(!parent.navega_lineal){
		
			clics_internos_vistos[numero_arreglo_clic_interno].val = true;
		}

		//$('#cubre_clic'+actual_circ).removeClass("opc_cubre_00").addClass("opc_cubre_10");
		//$('#cubre_clic'+actual_circ).stop(true,true).fadeIn(duracion_anima/2, function(){
		//	for (i = 0; i < total_clics_internos.length; i++) { 
		//	initialValueAnima("#txt_interno",i,"");//para contenido en más mas per
		//	}	
		//})


		//parent_clic = $("#"+id_clic_act).closest(".c_principal");
		if($("#"+id_clic_act).closest(".c_principal").length>0){
			classe_contieneclic = ".c_principal";
		} else if($("#"+id_clic_act).closest(".c_masinfo").length>0){
			classe_contieneclic = ".c_masinfo";
		}

		
		$("#"+id_clic_act).closest(classe_contieneclic).find('[id^=clic]').each(function(index){
	    		id_clicac = this.id;
	    		id_clicac = id_clicac.replace("clic", "");
	    		

	    		if(!isNaN(id_clicac)){
					document.getElementById("indicador_c"+id_clicac).style.visibility = "hidden";
	    			
		    		initialValueAnima("#txt_interno",id_clicac,"");//para contenido en más mas per
					$('#txt_interno'+id_clicac).find(".cubre_index").removeClass("opc_cubre_00").addClass("opc_cubre_10");
					$('#txt_interno'+id_clicac).find(".cubre_index").stop(true,true).fadeIn(duracion_anima/2);
	    		}
		});



		
		//animaElemPage("#txt_interno",numero_arreglo_clic_interno,"")
		animaElemPage("#txt_interno",numero_arreglo_clic_interno,"");//para contenido principal

		//setTimeout(function(){
			$('#txt_interno'+numero_arreglo_clic_interno).find(".cubre_index").removeClass("opc_cubre_10").addClass("opc_cubre_00");
			$('#txt_interno'+numero_arreglo_clic_interno).find(".cubre_index").stop(true,true).fadeOut(duracion_anima);
		//},0);
		//document.getElementById("clic"+numero_arreglo_clic_interno).style.color = "#ffffff";

		//document.getElementById("clic"+numero_arreglo_clic_interno).style.backgroundColor = "#D10019";

		//document.getElementById("clic"+numero_arreglo_clic_interno).className = "clic_seleccionado";

		document.getElementById("indicador_c"+numero_arreglo_clic_interno).style.visibility = "visible";

		control_flechas(numero_arreglo_clic_interno,"clic_interno");

		
		if($('#txt_interno'+numero_arreglo_clic_interno).find(".txt_internob").length>0){
		//	console.log($('#txt_interno'+numero_arreglo_clic_interno).find('[id^=clicb]').eq(0).attr("class"))
			if(!$('#txt_interno'+numero_arreglo_clic_interno).find('[id^=clicb]').eq(0).hasClass("clic_vistob")||$('#txt_interno'+numero_arreglo_clic_interno).find('[id^=clicb]').eq(0).hasClass("clic_abiertob")){
				
				$('#txt_interno'+numero_arreglo_clic_interno).find('[id^=clicb]').eq(0).attr('class',"clic_abiertob");

			}
				//console.log(id_intcb)
				id_intcb = $('#txt_interno'+numero_arreglo_clic_interno).find('[id^=clicb]').eq(0).attr("id")

				id_intcbx = id_intcb.replace("clicb", "");
				id_intcbx = parseInt(id_intcbx);
				permitido_clicb[id_intcbx].val = true;
				//console.log(id_intcbx)

				clic_internob(id_intcbx);
			
		}

		} else {



			if($("#"+id_clic_act).closest(".c_principal").length>0){
			classe_contieneclic = ".c_principal";
			} else if($("#"+id_clic_act).closest(".c_masinfo").length>0){
			classe_contieneclic = ".c_masinfo";
			}

			$("#"+id_clic_act).closest(classe_contieneclic).find('[id^=clic]').each(function(index){
	    		id_clicac = this.id;
	    		id_clicac = id_clicac.replace("clic", "");
	    		if(!isNaN(id_clicac)){
	    			if($("#clic"+id_clicac).hasClass("clic_abierto")||$("#clic"+id_clicac).hasClass("clic_abierto2")){
							mayor_clicvisto = parseInt(id_clicac);
					}

	    		}
	    	});

	    	
					for (i = 0; i < cantidad_clics; i++) { 
						if(permitido_clic[i].val){
						//	mayor_clicvisto = i;
						}
					}


					
						if(mayor_clicvisto+1==numero_arreglo_clic_interno){
						parent.document.getElementById("texto_mensaje_avance").innerHTML = "Para acceder a este botón "+parent.tx_te+" falta finalizar<br/>la consulta de la opción anterior.";

						} else {
						dif_btn = (numero_arreglo_clic_interno) - (mayor_clicvisto);
						parent.document.getElementById("texto_mensaje_avance").innerHTML = "Para acceder a este botón "+parent.tx_te+" falta finalizar<br/>la consulta de las "+dif_btn+" opciones anteriores.";

						}
					parent.verMensaje();
		}
		}

	}

	function clic_internob(ci_cb){

		if(parent.con_sonidoclic){
									parent.audio_clic.play();
								}
		numero_arreglo_clic_internob = total_clics_internosb.indexOf(this);
		
		or_numero_arreglo_clic_internob = numero_arreglo_clic_internob;
		if(numero_arreglo_clic_internob==-1){
			numero_arreglo_clic_internob=ci_cb;
			id_clic_actb = "clicb"+ci_cb;
		} else{
			id_clic_actb = this.id;
		}
		//console.log(clic_actual_okb,numero_arreglo_clic_internob,or_numero_arreglo_clic_internob,-1)
		if(clic_actual_okb!=numero_arreglo_clic_internob||or_numero_arreglo_clic_internob==-1){
		 //console.log(permitido_clicb[numero_arreglo_clic_internob].val)

		if(permitido_clicb[numero_arreglo_clic_internob].val){
			clic_actual_okb = numero_arreglo_clic_internob;
			$("#clicb"+clic_actual_okb).closest(".contenedor_clics_scroll_hz").find("div[class*=clicb]").removeClass("selected_clicb");
			//console.log(clic_actual_okb,"clic_actual_okb")
			$("#clicb"+clic_actual_okb).addClass("selected_clicb");
			scrollMenuClicB($("#clicb"+numero_arreglo_clic_internob).closest(".contenedor_clics_scroll_hz"))

			if(clic_actual_okb>=clic_mayor_actualb){
				clic_mayor_actualb = clic_actual_okb
			}
			parent.cerrarMensaje();

		if (cantidad_videos>0){
			for (i = 0; i < total_videos.length-1; i++) { 
			if(parent.videos_vimeo){

						//iframe_vid = $('#video'+i)[0];
				    	//var_video = $f(iframe_vid);
						 //var_video.api('pause');

						 iframe_vid = document.getElementById('video'+i);
							var_video = new Vimeo.Player(iframe_vid);
							var_video.pause()

					} else if(parent.videos_youtube) {
						player_yt[i].pauseVideo();
					} else {
						 var_video = document.getElementById("video"+i);
						var_video.pause();

					}
			}
		}
		$('audio').each(function(){
	    	this.pause(); // Stop playing
	    	//this.currentTime = 0; // Reset time
	    	$(this)[0].currentTime = 0;
		}); 
		if($("#clicb"+numero_arreglo_clic_internob).hasClass("clic_abiertob")){

									
				document.getElementById("clicb"+numero_arreglo_clic_internob).className = "clic_abiertob2 selected_clicb";

				
			}
		//console.log(numero_arreglo_clic_internob)
			
		//numero_contenidob = document.getElementById("clicb"+numero_arreglo_clic_internob).parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.id;
		

		//numero_contenidob = numero_contenidob[numero_contenidob.length-1];

		//numero_contenidob = numero_contenidob.split("texto");
		//numero_contenidob = numero_contenidob[1];

		elemento_clic = document.getElementById("clicb"+numero_arreglo_clic_internob);
			elemento_clic_id = elemento_clic.id;
			numero_contenidob = contenidoElemb(elemento_clic,elemento_clic_id)

		elemento_clic = document.getElementById("clic"+numero_arreglo_clic_interno);
		elemento_clic_id = elemento_clic.id;

		//console.log(numero_contenidob)
		//document.getElementById("textos"+numero_contenido).innerHTML = document.getElementById("texto"+numero_arreglo_clic_interno).innerHTML

		//document.getElementById("instruccion_clicsb"+numero_contenidob).style.visibility = "hidden";
		//document.getElementById("instruccion_clicsb"+numero_contenidob).style.position = "absolute";
		//document.getElementById("instruccion_clicsb"+numero_contenidob).style.top = 0;
		//document.getElementById("instruccion_clicsb"+numero_contenidob).style.left = 0;
			

		

		
		//console.log(document.getElementById("textos"+numero_contenido).innerHTML)
		if(!parent.navega_lineal){
		clics_internos_vistosb[numero_arreglo_clic_internob].val = true;
		}
		if($("#"+id_clic_actb).closest(".c_principal").length>0){
			classe_contieneclic = ".c_principal";
		} else if($("#"+id_clic_actb).closest(".c_masinfo").length>0){
			classe_contieneclic = ".c_masinfo";
		}

		
		$("#"+id_clic_actb).closest(classe_contieneclic).find('[id^=clicb]').each(function(index){
	    		id_clicac = this.id;
	    		id_clicac = id_clicac.replace("clicb", "");

	    
	    		if(!isNaN(id_clicac)){
					document.getElementById("indicador_cb"+id_clicac).style.visibility = "hidden";
	    			
		    		initialValueAnima("#txt_internob",id_clicac,"");//para contenido en más mas per
					$('#txt_internob'+id_clicac).find(".cubre_index").removeClass("opc_cubre_00").addClass("opc_cubre_10");
					$('#txt_internob'+id_clicac).find(".cubre_index").stop(true,true).fadeIn(duracion_anima/2);
	    		}
		}); 

		animaElemPage("#txt_internob",numero_arreglo_clic_internob,"");//para contenido principal

		//setTimeout(function(){
			$('#txt_internob'+numero_arreglo_clic_internob).find(".cubre_index").removeClass("opc_cubre_10").addClass("opc_cubre_00");
			$('#txt_internob'+numero_arreglo_clic_internob).find(".cubre_index").stop(true,true).fadeOut(duracion_anima);
		//},10);

		//document.getElementById("clicb"+numero_arreglo_clic_internob).style.color = "#ffffff";

		//document.getElementById("clicb"+numero_arreglo_clic_internob).style.backgroundColor = "#D10019";
		document.getElementById("indicador_cb"+numero_arreglo_clic_internob).style.visibility = "visible";

		control_flechas(numero_arreglo_clic_internob,"clic_internob")
		} else {

			if($("#"+id_clic_actb).closest(".c_principal").length>0){
			classe_contieneclic = ".c_principal";
			} else if($("#"+id_clic_actb).closest(".c_masinfo").length>0){
			classe_contieneclic = ".c_masinfo";
			}

			$("#"+id_clic_actb).closest(classe_contieneclic).find('[id^=clicb]').each(function(index){
	    		id_clicac = this.id;
	    		id_clicac = id_clicac.replace("clicb", "");
	    		if(!isNaN(id_clicac)){
	    			if($("#clicb"+id_clicac).hasClass("clic_abiertob")||$("#clicb"+id_clicac).hasClass("clic_abiertob2")){
							mayor_clicvistob = parseInt(id_clicac);
					}

	    		}
	    	});

			//console.log(mayor_clicvistob,numero_arreglo_clic_internob)

			for (i = 0; i < cantidad_clicsb; i++) { 
						if(permitido_clicb[i].val){
							//mayor_clicvistob = i;
						}
					}
				
						if(mayor_clicvistob+1==numero_arreglo_clic_internob){
						parent.document.getElementById("texto_mensaje_avance").innerHTML = "Para acceder a este botón "+parent.tx_te+" falta finalizar<br/>la consulta la opción anterior.";

						} else {
						//console.log(numero_arreglo_clic_internob,mayor_clicvistob,"mayor_clicvistob")
						dif_btnb = numero_arreglo_clic_internob - mayor_clicvistob;
						parent.document.getElementById("texto_mensaje_avance").innerHTML = "Para acceder a este botón "+parent.tx_te+" falta finalizar<br/>la consulta de las "+dif_btnb+" opciones anteriores.";

						}
					parent.verMensaje();
		}
		}
	}


	function clic_descarga(){

		if(!$(this).hasClass("descargax")){


		numero_arreglo_htmldescarga = total_htmldescarga.indexOf(this);
		if (numero_arreglo_htmldescarga == -1){
			numero_arreglo_htmldescarga = total_texto_html_descarga.indexOf(this);

		}
		//nombre_documento = document.getElementById("document"+numero_arreglo_htmldescarga).innerHTML
		//window.open("documents/"+nombre_documento, "_blank");
		control_flechas(numero_arreglo_htmldescarga,"descarga_clic")

		this.className = "descarga_visto"; // OVER CUANDO YA SE VIERON
		
		this_id_down = "#"+this.id;
		$(this_id_down).find(".arrow").removeClass("animated bounceup2");

			//sigInteract();		
		

		//total_texto_html_descarga[numero_arreglo_htmldescarga].style.backgroundColor = color_boton;

		/*
		createjs.Tween.get(total_descarga[numero_arreglo_htmldescarga],{override:true}).to({scaleX:0.8,scaleY:0.8,rotation:0},velocidad_lenta,createjs.Ease.bounceOut);	
		*/
		}

	}

	function over_descarga(){

		
		//this.style.opacity = 0.5;
		numero_arreglo_htmldescarga = total_htmldescarga.indexOf(this);

		if (numero_arreglo_htmldescarga == -1){
			numero_arreglo_htmldescarga = total_texto_html_descarga.indexOf(this);

		}

		
		//console.log(numero_arreglo_htmldescarga, total_htmldescarga)
		//total_texto_html_masinfo[numero_arreglo_htmlmasinfo].style.color = "transparent";		
		//total_descarga[numero_arreglo_htmldescarga]. y = y_botones - 10;
		
		//createjs.Tween.get(total_descarga[numero_arreglo_htmldescarga],{override:true}).to({scaleX:1,scaleY:1},velocidad_media,createjs.Ease.bounceOut);	
		
		//total_texto_masinfo[0].visible = true;
		//createjs.Tween.get(total_texto_masinfo[numero_arreglo_htmlmasinfo],{override:true}).wait(velocidad_media/2).to({scaleX:1},velocidad_media).call(color_masinfo);	
		
		//total_htmldescarga[numero_arreglo_htmldescarga].style.color = "rgb(255,255,255)";
		//total_htmldescarga[numero_arreglo_htmldescarga].style.backgroundColor = color_boton;
		//total_htmldescarga[numero_arreglo_htmldescarga].style.borderColor = "rgb(255,255,255)";
		
		total_htmldescarga[numero_arreglo_htmldescarga].style.opacity = 0.7;

		//total_texto_html_descarga[numero_arreglo_htmldescarga].style.color = "transparent";		

		//createjs.Tween.get(total_descarga[numero_arreglo_htmldescarga],{override:true}).to({scaleX:1,scaleY:1},velocidad_rapida);	

		//total_texto_descarga[0].visible = true;
		//createjs.Tween.get(total_texto_descarga[numero_arreglo_htmldescarga],{override:true}).wait(velocidad_media/2).to({scaleX:1},velocidad_lenta,createjs.Ease.bounceOut);	

		//total_htmldescarga[numero_arreglo_htmldescarga].style.color = "rgb(255,255,255)";
		//total_htmldescarga[numero_arreglo_htmldescarga].style.backgroundColor = color_boton;
		//total_htmldescarga[numero_arreglo_htmldescarga].style.borderColor = "rgb(255,255,255)";

		//total_texto_html_descarga[numero_arreglo_htmldescarga].style.backgroundColor = "rgb(255,255,255)";
		//total_texto_html_descarga[numero_arreglo_htmldescarga].style.color = color_boton;
		//total_texto_html_descarga[numero_arreglo_htmldescarga].style.borderColor = color_boton;


		
	}
	function out_descarga(){
		numero_arreglo_htmldescarga = total_htmldescarga.indexOf(this);

		if (numero_arreglo_htmldescarga == -1){
			numero_arreglo_htmldescarga = total_texto_html_descarga.indexOf(this);

		}

		//console.log(numero_arreglo_htmldescarga, total_htmldescarga)
		//total_texto_html_descarga[numero_arreglo_htmldescarga].style.color = "transparent";		
		
		//createjs.Tween.get(total_descarga[numero_arreglo_htmldescarga],{override:true}).to({scaleX:0.8,scaleY:0.8},velocidad_lenta,createjs.Ease.bounceOut);	
		
		//total_texto_descarga[0].visible = true;
		//createjs.Tween.get(total_texto_descarga[numero_arreglo_htmldescarga],{override:true}).to({scaleX:0},velocidad_media);
		
		//total_htmldescarga[numero_arreglo_htmldescarga].style.color = color_boton;
		//total_htmldescarga[numero_arreglo_htmldescarga].style.backgroundColor = "rgb(255,255,255)";
		//total_htmldescarga[numero_arreglo_htmldescarga].style.borderColor = color_boton;

		total_htmldescarga[numero_arreglo_htmldescarga].style.opacity = 1;

		//total_texto_html_descarga[numero_arreglo_htmldescarga].style.backgroundColor = "rgb(255,255,255)";
		//total_texto_html_descarga[numero_arreglo_htmldescarga].style.color = color_boton;
		//total_texto_html_descarga[numero_arreglo_htmldescarga].style.borderColor = color_boton;






	}
	function clic_boton_zoom(){
		if(!$(this).hasClass("boton_zoomx")){

		numero_arreglo_zoom = total_zooms.indexOf(this);
		
		var_imgzoom = document.getElementById("img_zoom"+numero_arreglo_zoom);
		//var_imgzoom_src = document.getElementById("img_zoom"+numero_arreglo_zoom).src;

		pathImg = var_imgzoom.src.split( '/' );
		//pathImg = pathImg[-2];
		imgName = pathImg[pathImg.length-1];

		this_id_down = "#"+this.id;
		$(this_id_down).find(".arrow").removeClass("animated amplia2");
		
		document.getElementById("img_zoom"+numero_arreglo_zoom).src = "pages/page"+parent.znThisPage+"/images/"+imgName;

		var_zoom.style.visibility = "visible";	
		
		parent.$("#zoom").removeClass("scale0x").addClass("scale1x");

		var_contenido_zoom.innerHTML = "";
		var_contenido_zoom.innerHTML = document.getElementById("zoom"+numero_arreglo_zoom).innerHTML;
		

		//var_contenido_zoom.style.backgroundImage = "none";

		//var_contenido_zoom.style.backgroundImage = document.getElementById("zoom"+numero_arreglo_zoom).style.backgroundImage;

		//control_flechas(numero_arreglo_zoom,"clic_zoom");

		//document.getElementById("video_imagen"+numero_arreglo_zoom).innerHTML = "<img src='../../images/video_off.gif' style='height:160px'>"
		//if(!zoom_consultados[i]){
			this.className = "boton_zoom_visto";//"rgb(255,255,255)";	

			//sigInteract();		
		//}
		}
	}

	function over_boton_zoom(){
		//numero_arreglo_zoom = total_zooms.indexOf(this);
		
		//this.className = "boton_zoom_a";//"rgb(255,255,255)";			
		 //document.getElementById("video_imagen"+numero_arreglo_zoom).innerHTML = "<img src='../../images/video_off.gif' style='height:160px'>"
		//this.style.backgroundColor = bgtxt_visto;//"rgb(255,255,255)";			
		//this.style.color = "rgb(255,255,255)"//"rgb(236,27,35)";
		//console.log("fafds")
	}


	function out_boton_zoom(){
		//numero_arreglo_zoom = total_zooms.indexOf(this);
		
		//this.className = "boton_zoom";//"rgb(255,255,255)";			
		//document.getElementById("video_imagen"+numero_arreglo_zoom).innerHTML = "<img src='../../images/video_on.gif' style='height:160px'>"
		
		//this.style.backgroundColor = "rgb(255,255,255)"//"rgb(236,27,35)";
		//this.style.color = bgtxt_visto//"white";			
	}

	function clic_video(){

		createjs.Tween.get(parent.instruccion_especial2,{override:true}).to({alpha:0},velocidad_lenta).to({visible:false},velocidad_rapida/2);

	}

	function clic_volver(){

		
			no_clic_masinfo = true;
			no_clic_volver = false;

			
			numero_arreglo_volver = total_htmlvolver.indexOf(this);
			var_id = document.getElementById("volver"+numero_arreglo_volver).parentNode;
			numero_arreglo_volver_html = contenidos_circulos_html_masinfo.indexOf(var_id);
			
			var_id_id = var_id.id;

			var_id_2 = var_id_id.substring(0, var_id_id.length - 2);

			var_html_contenido = document.getElementById(var_id_2);

			

			numero_arreglo_contenidos = contenidos_circulos_html.indexOf(var_html_contenido);

			//console.log(numero_arreglo_contenidos)


			//console.log(numero_arreglo_volver, var_id.id, var_id_2, numero_arreglo_contenidos)
			//total_texto_volver[numero_arreglo_htmlmasinfo].alpha = 0;
			//total_texto_volver[numero_arreglo_htmlmasinfo].visible = false;
		
			//total_volver[numero_arreglo_volver_html].alpha = 0;
			//total_volver[numero_arreglo_volver_html].visible = false;

			total_texto_masinfo[numero_arreglo_volver].visible = true;
			total_texto_masinfo[numero_arreglo_volver].alpha = 1;
			total_texto_masinfo[numero_arreglo_volver].scaleX = 0;


	

			//contenido_mas_info = contenidos_circulos_masinfo[numero_arreglo_masinfo]
			//contenidos_circulos_masinfo[numero_arreglo_masinfo].visible = true;
			
			//contenidos_circulos[numero_arreglo_contenidos].scaleX = 0;
			//contenidos_circulos[numero_arreglo_contenidos].scaleY = 0;
			//contenidos_circulos[numero_arreglo_contenidos].x = 90;
			//contenidos_circulos[numero_arreglo_contenidos].y = 370;
			//contenidos_circulos[numero_arreglo_contenidos].alpha = 1;

			//createjs.Tween.get(contenidos_circulos[numero_arreglo_contenidos],{override:true}).wait(velocidad_lenta/2).to({y:145,scaleX:1,scaleY:1},velocidad_lenta)
			//if (cantidad_circulos>0){
				createjs.Tween.get(contenidos_circulos[numero_arreglo_contenidos],{override:true}).wait(velocidad_lenta/2).to({alpha:1},velocidad_lenta*1.2)
			//} 
																			
			createjs.Tween.get(contenidos_circulos_masinfo[numero_arreglo_volver_html],{override:true}).to({alpha:0,scaleX:0,scaleY:0,x:115,y:370},velocidad_lenta);	
			//createjs.Tween.get(total_volver[numero_arreglo_volver_html],{override:true}).to({alpha:0,visible:false},velocidad_lenta*2);	

			//document.getElementById(var_id.id-"_0").style.zIndex = 1;

			total_masinfo[numero_arreglo_volver].visible = true;
			total_masinfo[numero_arreglo_volver].scaleX  = 0.8;
			total_masinfo[numero_arreglo_volver].scaleY  = 0.8;
			total_masinfo[numero_arreglo_volver].alpha  = 1;

			
			

					if (cantidad_videos>0){
						for (i = 0; i < total_videos.length-1; i++) { 
						if(parent.videos_vimeo){

						//iframe_vid = $('#video'+i)[0];
				    	//var_video = $f(iframe_vid);
						 //var_video.api('pause');

						 iframe_vid = document.getElementById('video'+i);
							var_video = new Vimeo.Player(iframe_vid);
							var_video.pause()

					} else if(parent.videos_youtube) {
						player_yt[i].pauseVideo();
					} else {
						 var_video = document.getElementById("video"+i);
						var_video.pause();

					}
						}
					}
			
			//opcion_actual.alpha = 0.5;
			//console.log(numero_arreglo_masinfo, var_id)
			//document.getElementById("masinfo"+numero_arreglo_masinfo).style.opacity = .5;
			//div_superior = document.getElementById("masinfo0").parentNode;

	}

	no_clic_masinfo = true;
	no_clic_volver = true;
	clic_en_masinfo = true;

	function clic_masinfo(){
		//sigInteract();

		if(parent.con_sonidoclic){
									parent.audio_clic.play();
								}

		$('video').each(function(){
			
			if(!this.muted){
	    		this.pause(); // Stop playing
	    	//this.currentTime = 0; // Reset time
	    	}
		}); 
		//$('audio').each(function(){
	    //	this.pause(); // Stop playing
	    	//this.currentTime = 0; // Reset time
		//}); 
		parent.cerrarMensaje();
	if (cantidad_videos>0){
						for (i = 0; i < total_videos.length-1; i++) { 
						if(parent.videos_vimeo){

						//iframe_vid = $('#video'+i)[0];
				    	//var_video = $f(iframe_vid);
						 //var_video.api('pause');

						 iframe_vid = document.getElementById('video'+i);
							var_video = new Vimeo.Player(iframe_vid);
							var_video.pause()

					} else if(parent.videos_youtube) {
						player_yt[i].pauseVideo();
					} else {
						 var_video = document.getElementById("video"+i);
						var_video.pause();

					}
						}
					}

			if(cantidad_maspersonaje>0 && clic_en_btnpersonaje){
				for (i = 0; i < total_mas_personajes.length; i++) { 

				//createjs.Tween.get(total_mas_personajes[i],{override:true}).to({scaleX:0,scaleY:0,x:x_inicial_maspersonaje,y:y_inicial_maspersonaje},velocidad_lenta*1.5,createjs.Ease.circOut);
				}
				clic_btnpersonaje()
				out_btnpersonaje()

			}
			if(tipo=="tipo2"){
				numero_arreglo_masinfo = 0;
				var_id = document.getElementById("masinfo"+numero_arreglo_masinfo).parentNode;

			} else {
				if(!clic_en_masinfo){
					numero_arreglo_masinfo = num_actual_masinfo;
				} else {
					numero_arreglo_masinfo = total_htmlmasinfo.indexOf(this);
					num_actual_masinfo = numero_arreglo_masinfo;

				}
				//console.log(numero_arreglo_maspersonajeactual)
				if(numero_arreglo_masinfo==-1 && cantidad_maspersonaje>0){
					var_id2 = document.getElementById("masinfo"+numero_arreglo_maspersonajeactual);
					numero_arreglo_masinfo = total_htmlmasinfo.indexOf(var_id2);
					console.log(numero_arreglo_maspersonajeactual)
							
				}
				
				var_id = document.getElementById("masinfo"+numero_arreglo_masinfo).parentNode;

			}

$('audio').each(function(){
	    	this.pause(); // Stop playing
	    	//this.currentTime = 0; // Reset time
	    	$(this)[0].currentTime = 0;
		}); 
			//console.log(numero_arreglo_masinfo)
			if (clic_en_masinfo){

				if($('#contenido_c'+actual_circ+"_0").find("audio").length==1){
			//console.log("audio int")
			setTimeout(function () {
				$('#contenido_c'+actual_circ+"_0").find("audio")[0].play();
			}, 500);
			
		}
				contenidos_circulos_html_masinfo[numero_arreglo_htmlmasinfo].style.zIndex = 2;
			clic_en_masinfo = false;
				$(".c_masinfo").find('[id^=clic]').each(function(index){
		    		id_clicac = this.id;
		    		id_clicac = id_clicac.replace("clic", "");
		    		if(!isNaN(id_clicac)){

				    	if(document.getElementById("indicador_c"+id_clicac).style.visibility=="visible"){
			    			clic_actual_ok = id_clicac;		    			
			    		}
			    	}
	    		});

				$(".c_masinfo").find('[id^=clicb]').each(function(index){
		    		id_clicac = this.id;
		    		id_clicac = id_clicac.replace("clicb", "");
			    	if(document.getElementById("indicador_cb"+id_clicac).style.visibility=="visible"){
		    			clic_actual_okb = id_clicac;		    			
		    		}
	    		});
			
			//document.getElementById("texto_masinfo"+numero_arreglo_htmlmasinfo).className = "texto_masinfo_on";
			if(document.getElementById("masinfo"+numero_arreglo_htmlmasinfo).className != "boton_masinfo_visto"){
			document.getElementById("masinfo"+numero_arreglo_htmlmasinfo).className = "boton_masinfo_on";
			}
			document.getElementById("accion_btnmasinfo"+numero_arreglo_htmlmasinfo).innerHTML = "Cerrar";
			//document.getElementById("accion_btnmasinfo"+numero_arreglo_htmlmasinfo).innerHTML = "cerrar";

			//document.getElementById("texto_masinfo"+numero_arreglo_htmlmasinfo).style.color = "red";
			/*

			for (i = 0; i < var_id.children.length; i++) {
					

				if (i!=0){

					//var_id.children[i].style.opacity = "0.4";


					//var_id.children[i].style.zIndex = "-3";
					
				}
		        
    		}
			*/
			//document.getElementById("masinfo"+numero_arreglo_ma[2]sinfo).parentNode.style.opacity = "0.4";
			//document.getElementById("masinfo"+numero_arreglo_masinfo).parentNode.
			numero_arreglo_masinfo_html = contenidos_circulos_html.indexOf(var_id);

			//total_masinfo[numero_arreglo_htmlmasinfo].alpha = 0;
			//total_masinfo[numero_arreglo_htmlmasinfo].visible = false;

			
			//total_texto_masinfo[numero_arreglo_htmlmasinfo].alpha = 0;
			//total_texto_masinfo[numero_arreglo_htmlmasinfo].visible = false;
	

			//contenido_mas_info = contenidos_circulos_masinfo[numero_arreglo_masinfo]
			contenidos_circulos_masinfo[numero_arreglo_masinfo].visible = true;
			contenidos_circulos_masinfo[numero_arreglo_masinfo].scaleX = 1;
			contenidos_circulos_masinfo[numero_arreglo_masinfo].scaleY = 1;
			contenidos_circulos_masinfo[numero_arreglo_masinfo].x = x_div_mas_info;
			contenidos_circulos_masinfo[numero_arreglo_masinfo].y = y_div_mas_info;
			contenidos_circulos_masinfo[numero_arreglo_masinfo].alpha = 1;


			if(cantidad_circulos>1){
				x_final_masinfo = 0;
				y_final_masinfo = y_contenidos_final_2 + 25;
			}else{
				x_final_masinfo = 0;
				y_final_masinfo = y_contenidos_final_2 + 15;
			}
			
			//createjs.Tween.get(contenidos_circulos_masinfo[numero_arreglo_masinfo],{override:true}).to({y:y_final_masinfo,scaleX:1,scaleY:1},velocidad_lenta,createjs.Ease.bounceOut)
			contenidos_circulos_masinfo[numero_arreglo_masinfo].scaleX=1;
			contenidos_circulos_masinfo[numero_arreglo_masinfo].y=600;
			createjs.Tween.get(contenidos_circulos_masinfo[numero_arreglo_htmlmasinfo],{override:true}).to({y:y_final_masinfo,visible:true},velocidad_lenta,createjs.Ease.circOut)

			

			desapareceContPr()
			//.addClass("opc_cubre_10")//, function(){
				//para contenido principal
			//});
			$('#cubre_masinfo'+numero_arreglo_masinfo).fadeIn(0);




			setTimeout(function(){
			$('#cubre_masinfo'+numero_arreglo_masinfo).fadeOut(0);
			}, duracion_anima);

			setTimeout(function(){
			animaElemPage("#contenido_c",actual_circ,"_0");

			}, duracion_anima/5);

			parent.document.getElementById("instruccion_especial2").style.zIndex="0";

			
			//createjs.Tween.get(total_masinfo[numero_arreglo_htmlmasinfo],{override:true}).to({alpha:0,visible:false},velocidad_media);
			//createjs.Tween.get(total_masinfo[numero_arreglo_htmlmasinfo],{override:true}).to({scaleX:0.8,scaleY:0.8,rotation:0,visible:false},velocidad_media);	
			
			//if (cantidad_circulos>0){
			
			//createjs.Tween.get(contenidos_circulos[numero_arreglo_masinfo_html],{override:true}).to({alpha:0.4},velocidad_rapida);	
			
			//}

			total_htmlmasinfo[numero_arreglo_htmlmasinfo].innerHTML = parent.icono_menos;
			

			//color_boton = "#6A696A";



			//color_masinfo();
			
			//total_htmlmasinfo[numero_arreglo_htmlmasinfo].style.color = color_boton;
			//total_htmlmasinfo[numero_arreglo_htmlmasinfo].style.backgroundColor = "rgb(255,255,255)";
			//total_htmlmasinfo[numero_arreglo_htmlmasinfo].style.borderColor = color_boton;




			//total_masinfo[numero_arreglo_htmlmasinfo].alpha = 1;

			//createjs.Tween.get(contenidos_circulos[numero_arreglo_masinfo_html],{override:true}).to({alpha:0,scaleX:0,scaleY:0,x:90,y:370},velocidad_lenta);	

			
			//document.getElementById(var_id.id+"_0").style.zIndex = 1;

			//total_volver[numero_arreglo_htmlmasinfo].visible = true;
			//total_volver[numero_arreglo_htmlmasinfo].scaleX  = 0.8;
			//total_volver[numero_arreglo_htmlmasinfo].scaleY  = 0.8;
			//total_volver[numero_arreglo_htmlmasinfo].alpha  = 1;

			
			


			control_flechas(numero_arreglo_masinfo,"masinfo_clic")

			if(tipo=="tipo2"){
				if($("#clic0").closest(".c_masinfo").length==1){
					activaFirstClic(0)
				}
			}
		
		} else {

			//document.getElementById("texto_masinfo"+numero_arreglo_htmlmasinfo).className = "texto_masinfo";
			if(document.getElementById("masinfo"+numero_arreglo_htmlmasinfo).className != "boton_masinfo_visto"){

			document.getElementById("masinfo"+numero_arreglo_htmlmasinfo).className = "boton_masinfo";
			} else {
			document.getElementById("estado_btnmasinfo"+numero_arreglo_masinfo).innerHTML = parent.icono_indica;

			}
			document.getElementById("accion_btnmasinfo"+numero_arreglo_htmlmasinfo).innerHTML = "Ver";



			if(total_htmlmasinfo[numero_arreglo_htmlmasinfo].innerHTML != parent.icono_check){
				
				//document.getElementById("estado_btnmasinfo"+numero_arreglo_htmlmasinfo).innerHTML = parent.icono_check;
				//total_htmlmasinfo[masinfo_actual].innerHTML = "å";
				total_htmlmasinfo[numero_arreglo_htmlmasinfo].innerHTML = parent.icono_mas;

			}
			clic_en_masinfo = true;


			$(".c_principal").find('[id^=clic]').each(function(index){
		    		id_clicac = this.id;
		    		id_clicac = id_clicac.replace("clic", "");
		    		if(!isNaN(id_clicac)){

				    	if(document.getElementById("indicador_c"+id_clicac).style.visibility=="visible"){
			    			clic_actual_ok = id_clicac;		    			
			    		}
			    	}
	    		});

				$(".c_principal").find('[id^=clicb]').each(function(index){
		    		id_clicac = this.id;
		    		id_clicac = id_clicac.replace("clicb", "");
			    	if(document.getElementById("indicador_cb"+id_clicac).style.visibility=="visible"){
		    			clic_actual_okb = id_clicac;		    			
		    		}
	    		});

			for (i = 0; i < var_id.children.length; i++) {
				if (i!=0){
					var_id.children[i].style.opacity = "1";
					//console.log(var_id.children[i].style.zIndex)
				}
		        
    		}

			//total_htmlmasinfo[numero_arreglo_htmlmasinfo].innerHTML = "{";
			//total_htmlmasinfo[numero_arreglo_htmlmasinfo].style.color = "rgb(255,255,255)";
			//total_htmlmasinfo[numero_arreglo_htmlmasinfo].style.backgroundColor = color_boton;
			//total_htmlmasinfo[numero_arreglo_htmlmasinfo].style.borderColor = "rgb(255,255,255)";
			contenidos_circulos_masinfo[numero_arreglo_htmlmasinfo].scaleX=1;
			contenidos_circulos_masinfo[numero_arreglo_htmlmasinfo].y=y_final_masinfo;
			//console.log(actual_circ)
			initialValueAnima("#contenido_c",actual_circ,"");
			createjs.Tween.get(contenidos_circulos_masinfo[numero_arreglo_htmlmasinfo],{override:true}).to({y:550,visible:false},velocidad_media,createjs.Ease.backIn).call(initValM)
			function initValM(){
			
			initialValueAnima("#contenido_c",actual_circ,"_0");
			
			apareceContPr();
			

			$('#cubre_masinfo'+numero_arreglo_masinfo).fadeIn(0);
				contenidos_circulos_html_masinfo[numero_arreglo_htmlmasinfo].style.zIndex = -1;

			}



		}

	}



	function over_masinfo(){
		
		//this.style.opacity = 0.5;
		numero_arreglo_htmlmasinfo = total_htmlmasinfo.indexOf(this);

		createjs.Tween.get(total_masinfo[numero_arreglo_htmlmasinfo],{override:true}).to({scaleX:1,scaleY:1},velocidad_media,createjs.Ease.cubicOut);	
		//total_texto_masinfo[0].visible = true;
		if (clic_en_masinfo){
		
		//total_texto_html_masinfo[numero_arreglo_htmlmasinfo].style.color = "transparent";		

		

		
		//createjs.Tween.get(total_texto_masinfo[numero_arreglo_htmlmasinfo],{override:true}).wait(velocidad_media/2).to({scaleX:1},velocidad_media,createjs.Ease.bounceOut);	

		//total_htmlmasinfo[numero_arreglo_htmlmasinfo].style.color = "rgb(255,255,255)";
		//total_htmlmasinfo[numero_arreglo_htmlmasinfo].style.backgroundColor = color_boton;
		//total_htmlmasinfo[numero_arreglo_htmlmasinfo].style.borderColor = "rgb(255,255,255)";
		}

		
	}

	function over_volver(){
		//this.style.opacity = 0.5;
		console.log("Volver")
		numero_arreglo_htmlvolver = total_htmlvolver.indexOf(this);


		//total_texto_html_masinfo[numero_arreglo_htmlmasinfo].style.color = "transparent";		

		//createjs.Tween.get(total_volver[numero_arreglo_htmlvolver],{override:true}).to({scaleX:1,scaleY:1},velocidad_media, createjs.Ease.bounceOut);	

		//total_texto_masinfo[0].visible = true;
		//createjs.Tween.get(total_texto_masinfo[0],{override:true}).wait(velocidad_media/2).to({scaleX:1},velocidad_media).call(color_masinfo);	
		

		
	}

	function out_volver(){
		if (no_clic_volver){
			
			//createjs.Tween.get(total_volver[numero_arreglo_htmlvolver],{override:true}).to({scaleX:0.8,scaleY:0.8},velocidad_media, createjs.Ease.bounceOut);	
			
		}
		
			
	}

	function color_masinfo(){
		total_texto_html_masinfo[numero_arreglo_htmlmasinfo].style.color = color_boton;
		total_texto_html_masinfo[numero_arreglo_htmlmasinfo].style.borderColor = color_boton;
	}

	function color_descarga(){
		total_texto_html_descarga[numero_arreglo_htmldescarga].style.color = "rgb(0,147,221)";
	}

	function out_masinfo(){
		//nuero_arreglo_htmlmasinfo = total_htmlvolver.indexOf(this);

			//total_texto_html_masinfo[numero_arreglo_htmlmasinfo].style.color = "transparent";		
			//createjs.Tween.get(total_masinfo[numero_arreglo_htmlmasinfo],{override:true}).to({scaleX:0.8,scaleY:0.8},velocidad_lenta,createjs.Ease.bounceOut);	
			//createjs.Tween.get(total_texto_masinfo[numero_arreglo_htmlmasinfo],{override:true}).to({scaleX:0},velocidad_media);	
			
		if (clic_en_masinfo){
			//total_htmlmasinfo[nuero_arreglo_htmlmasinfo].style.color = "rgb(255,255,255)";
			//total_htmlmasinfo[numero_arreglo_htmlmasinfo].style.backgroundColor = color_boton;
			//total_htmlmasinfo[numero_arreglo_htmlmasinfo].style.borderColor = color_boton;

			createjs.Tween.get(total_masinfo[numero_arreglo_htmlmasinfo],{override:true}).to({scaleX:0.9,scaleY:0.9},velocidad_media,createjs.Ease.cubicIn);	

		
		} else {

		}
		
			
	}

	function f_opciones_s_final(opcion_actual){
		opcion_actual.addEventListener("click", clic_s_final);
		function clic_s_final()
		{
			color_seleccion = "rgba(235, 177, 76, 0.9)";
			color_no_seleccion = "rgba(131, 120, 111, 0.7)";

			numero_arreglo_s1 = correctos.indexOf(opcion_actual);
			numero_arreglo_s2 = incorrectos.indexOf(opcion_actual);
			count_seleccionados_correctos = 0;
			count_seleccionados_incorrectos = 0;
			//numero_arreglo_s = numero_arreglo_vf1 + numero_arreglo_vf2 + 1;

			if (correctos.length == 1){

				for (i = 0; i < correctos.length; i++) { 
						document.getElementById("correcto"+i).style.backgroundColor = color_no_seleccion;
						correctos_seleccionados[i].val = false;
				}
				
				for (i = 0; i < incorrectos.length; i++) { 
						document.getElementById("incorrecto"+i).style.backgroundColor = color_no_seleccion;
						incorrectos_seleccionados[i].val = false;
				}
				

				if(numero_arreglo_s1!=-1){
					
					if (correctos_seleccionados[numero_arreglo_s1].val == false){
						
						opcion_actual.style.backgroundColor = color_seleccion;
						correctos_seleccionados[numero_arreglo_s1].val = true;
						
						

					} else {
						
						opcion_actual.style.backgroundColor = color_no_seleccion;
						correctos_seleccionados[numero_arreglo_s1].val = false;
						
						
					}
				} else {
					
					if (incorrectos_seleccionados[numero_arreglo_s2].val == false){
						
						opcion_actual.style.backgroundColor = color_seleccion;
						incorrectos_seleccionados[numero_arreglo_s2].val = true;

					} else {
						
						opcion_actual.style.backgroundColor = color_no_seleccion;
						incorrectos_seleccionados[numero_arreglo_s2].val = false;
					}
				}

				for (i = 0; i < correctos_seleccionados.length-1; i++){
					if (correctos_seleccionados[i].val == true){
					count_seleccionados_correctos++
					} 
				}

				for (i = 0; i < incorrectos_seleccionados.length-1; i++){
					if (incorrectos_seleccionados[i].val == true){
					count_seleccionados_incorrectos++
					}

				}


				suma_counts_sel = count_seleccionados_correctos + count_seleccionados_incorrectos;

				cantidad_correctos_s = cantidad_circulos[0]

				if(cantidad_correctos_s==suma_counts_sel){
					document.getElementById("retroalimentacion").style.opacity = 1;
					if (correctos_seleccionados.length-1 == count_seleccionados_correctos){
						
						if (parent.znThisPage != parent.var_paginas_totales) {
							document.getElementById("retroalimentacion").innerHTML = "Muy bien. "+parent.tx_hasmay+" seleccionado la respuesta correcta. "+parent.tx_puedesmay+" avanzar a la siguiente pregunta."
							//parent.document.getElementById("flecha_abajo").style.visibility = "visible";
							suma_total()
							document.getElementById("contenido_c0").style.zIndex = -1;
						} else {
							document.getElementById("retroalimentacion").style.visibility = "visible";
							document.getElementById("retroalimentacion").innerHTML = "Muy bien. "+parent.tx_hasmay+" finalizado con éxito el entranamiento para el Examen Final. "+parent.tx_hazmay+" clic en 'Salir'.";
							document.getElementById("contenido_c0").style.zIndex = -1;
						}
						//parent.puntaje += 100;
					} else {
						document.getElementById("retroalimentacion").innerHTML = "Incorrecto. Inténtelo de nuevo."
					}
				} else {document.getElementById("retroalimentacion").style.opacity = 0}

				//document.getElementById("retroalimentacion").innerHTML = ""+parent.tx_tienesmay+" "+ diferencia +" respuesta incorrecta. "+parent.tx_siguelomay+" intentando.";

				//incorrectos_seleccionados

			}



			
				
		}

	}

	clic_vf_activo = true;

	function f_opciones_vf(opcion_actual){
		console.log(opcion_actual)
		opcion_actual.addEventListener("mouseover", over_vf);
		function over_vf(){
			

			numero_arreglo_vf1 = incorrectos.indexOf(opcion_actual);
			numero_arreglo_vf2 = correctos.indexOf(opcion_actual);


			if (numero_arreglo_vf1 != -1 && incorrectos_vf[numero_arreglo_vf1].val == true){
				
			} else if (numero_arreglo_vf2 != -1 && correctos_vf[numero_arreglo_vf2].val == true){
				
			} else {
				//opcion_actual.style.color = "#FFFFFF"
				//opcion_actual.style.backgroundColor = "#999999";
				//opcion_actual.className = "#999999";
			}
			
			
		}
		
		opcion_actual.addEventListener("mouseout", out_vf);
		function out_vf(){
			numero_arreglo_vf1 = incorrectos.indexOf(opcion_actual);
			numero_arreglo_vf2 = correctos.indexOf(opcion_actual);


			if (numero_arreglo_vf1 != -1 && incorrectos_vf[numero_arreglo_vf1].val == true){
				
			} else if (numero_arreglo_vf2 != -1 && correctos_vf[numero_arreglo_vf2].val == true){
				
			} else {
				//opcion_actual.style.color = "#0063A9"
				//opcion_actual.style.backgroundColor = "#e5e0df";

			}
			
			
			
		}
		
		opcion_actual.addEventListener("click", clic_vf);
		function clic_vf()
		{
			
			if(parent.con_sonidoclic){
									parent.audio_clic.play();
								}


			selecciones = 0;
			selecciones_correctas = 0;
			numero_arreglo_vf1 = incorrectos.indexOf(opcion_actual);
			numero_arreglo_vf2 = correctos.indexOf(opcion_actual);

			numero_arreglo_vf = numero_arreglo_vf1 + numero_arreglo_vf2 + 1;
			




		

						//console.log(color_seleccion, color_no_seleccion)

			if (numero_arreglo_vf2 == -1) {
				document.getElementById("incorrecto"+numero_arreglo_vf).className = "vf_seleccionado";
				document.getElementById("correcto"+numero_arreglo_vf).className = "verdadero";

				//document.getElementById("incorrecto"+numero_arreglo_vf).style.color = color_seleccion;
				//document.getElementById("correcto"+numero_arreglo_vf).style.color = color_no_seleccion;

				//document.getElementById("incorrecto"+numero_arreglo_vf).style.backgroundColor = bgcolor_seleccion;
				//document.getElementById("correcto"+numero_arreglo_vf).style.backgroundColor = bgcolor_no_seleccion;
				
				correctos_vf[numero_arreglo_vf].val = false;
				incorrectos_vf[numero_arreglo_vf].val = true;
			} else {
				//document.getElementById("incorrecto"+numero_arreglo_vf).style.color = color_no_seleccion;
				//document.getElementById("correcto"+numero_arreglo_vf).style.color = color_seleccion;
				
				document.getElementById("incorrecto"+numero_arreglo_vf).className = "verdadero";
				document.getElementById("correcto"+numero_arreglo_vf).className = "vf_seleccionado";

				//document.getElementById("incorrecto"+numero_arreglo_vf).style.backgroundColor= bgcolor_no_seleccion;
				//document.getElementById("correcto"+numero_arreglo_vf).style.backgroundColor = bgcolor_seleccion;
				
				correctos_vf[numero_arreglo_vf].val = true;
				incorrectos_vf[numero_arreglo_vf].val = false;
			}

			selecciones_correctas = 0;
			coun_inc = 0;
			for (i = 0; i < cantidad_circulos; i++) { 
				if (correctos_vf[i].val == true) {
					selecciones_correctas += 1;
				}
				if (incorrectos_vf[i].val == true) {
					coun_inc += 1;
				}

			}

			selecciones = selecciones_correctas + coun_inc;
			//console.log(selecciones,selecciones_correctas,coun_inc)

			/*
			for (i = 0; i < cantidad_circulos; i++) { 
				variable1 = document.getElementById("incorrecto"+i).style.backgroundColor;
				variable2 = document.getElementById("correcto"+i).style.backgroundColor;
				
				if (variable1 != variable2){
					selecciones += 1;
				}	


				if (variable2 == color_seleccion)
				{
					selecciones_correctas += 1;
					
				}
			}
			*/

			
				
				if (selecciones == cantidad_circulos) {
					respuestasCompletas();

					//document.getElementById("instruccion_circulos").style.color = "rgb(255,231,1)";
					//nuevo_score_vf = Math.round(selecciones_correctas/cantidad_circulos*100)/2;
				
					//if(nuevo_score_vf>parent.nuevo_puntaje_vf){
						//parent.nuevo_puntaje_vf = nuevo_score_vf;
					//}
					/*
					nuevo_puntaje = Math.round(selecciones_correctas/cantidad_circulos*100);
					if(nuevo_puntaje>parent.puntaje){
					parent.puntaje = nuevo_puntaje;
					}
					*/
					//console.log(parent.nuevo_puntaje_vf)
					//console.log(parent.nuevo_puntaje)
					//suma_total();
					if(parent.znThisPage == parent.znPages){
							//parent.completado = true;
							
							if(cantidad_maspersonaje==0){
								txt_complemento =""+parent.tx_puedesmay+" cerrar la ventana para finalizar."
							} else {
								txt_complemento =""

							}

						} else {
							txt_complemento =""+parent.tx_puedesmay+" continuar a la siguiente pantalla."

						}
			
					
					createjs.Tween.get(instruccion_circulos).to({alpha:0},velocidad_lenta).call(fInstruccion);
				    function fInstruccion() {
						createjs.Tween.get(instruccion_circulos).wait(velocidad_lenta).to({alpha:1},velocidad_lenta);
						if(con_retrovf){
						document.getElementById("contenido_c0").style.zIndex = -1;
						}

						if (selecciones_correctas == cantidad_circulos) {
						document.getElementById("contenido_c0").style.zIndex = -1;

						if(con_retrovf){
							$("#instruccion_circulos_span").html($(".retro_vf").html())
						} else {
							if (tipo=="vf_final" && parent.znThisPage != parent.var_paginas_totales){
							document.getElementById("instruccion_circulos_span").innerHTML = "<span class='simbolos_texto2'>å </span> Excelente. Todas las respuestas son correctas. "+parent.tx_puedesmay+" hacer clic en SALIR para finalizar.";	
							} else if (tipo=="vf_final" && parent.znThisPage == parent.var_paginas_totales) {
							document.getElementById("instruccion_circulos_span").innerHTML = "<span class='simbolos_texto2'>å </span> Excelente. "+parent.tx_hasmay+" finalizado el entrenamiento para el Examen Final de forma exitosa. "+parent.tx_hazmay+" clic en 'Salir'.";	
							}else {
							document.getElementById("instruccion_circulos_span").innerHTML = "Excelente. Todas las respuestas son correctas. "+ txt_complemento;
							
							}
						}
						//if (parent.znThisPage != parent.var_paginas_totales) {
							//parent.document.getElementById("flecha_abajo").style.visibility = "visible";
							//suma_total();
						//}

						if(cantidad_maspersonaje>0){
						//parent.audio_correcto.play();
						setTimeout(function(){
							clic_btnpersonaje();
							//document.getElementById("contenido_c0").style.zIndex = -1;

						}, 700);

						} else {
						suma_total();	
						}
						
						//SimboloRetroalimentacion("å",color_retrocorr);
						animacionCorrecto();

						

					} else if (selecciones_correctas == 0) {
						if(con_retrovf){
							$("#instruccion_circulos_span").html($(".retro_vf").html());
							suma_total();	

						} else {

							if(parent.cantidad_intentos_act==cuenta_intentos_act&&parent.cantidad_intentos_act>0){
							agotaIntentosAct();
						document.getElementById("instruccion_circulos_span").innerHTML = "Todas las respuestas han sido incorrectas. "+txt_complemento

						} else {
						document.getElementById("instruccion_circulos_span").innerHTML = "Todas las respuestas han sido incorrectas. "+parent.tx_vuelvelomay+" a intentar."
						}
						
						for (i = 0; i < cantidad_circulos; i++) { 
								correctos_vf[i].val = false;
								incorrectos_vf[i].val = false;
								document.getElementById("incorrecto"+i).className = "verdadero";
								document.getElementById("correcto"+i).className = "verdadero";
								//document.getElementById("incorrecto"+i).className = color_no_seleccion;
								//document.getElementById("correcto"+i).className = color_no_seleccion;
								
								//document.getElementById("incorrecto"+i).style.color = color_no_seleccion;
								//document.getElementById("correcto"+i).style.color = color_no_seleccion;

								//document.getElementById("incorrecto"+i).style.backgroundColor = bgcolor_no_seleccion;
								//document.getElementById("correcto"+i).style.backgroundColor = bgcolor_no_seleccion;
							}
						
						}
						//SimboloRetroalimentacion("ã",color_retroincorr);
						animacionIncorrecto();


					} else if (selecciones_correctas == cantidad_circulos-1) {

						diferencia = cantidad_circulos - selecciones_correctas;
						if(con_retrovf){
							$("#instruccion_circulos_span").html($(".retro_vf").html());
							if(cantidad_maspersonaje>0){
						//parent.audio_correcto.play();
						setTimeout(function(){
							clic_btnpersonaje();
							//document.getElementById("contenido_c0").style.zIndex = -1;

						}, 700);

						} else {
						suma_total();	
						}

						} else {
							if(parent.cantidad_intentos_act==cuenta_intentos_act&&parent.cantidad_intentos_act>0){
							agotaIntentosAct();
						document.getElementById("instruccion_circulos_span").innerHTML = ""+parent.tx_tuvistemay+" "+ diferencia +" respuesta incorrecta. "+txt_complemento

						} else {
							document.getElementById("instruccion_circulos_span").innerHTML = ""+parent.tx_tuvistemay+" "+ diferencia +" respuesta incorrecta. "+parent.tx_siguelomay+" intentando.";
						
							for (i = 0; i < cantidad_circulos; i++) { 
								correctos_vf[i].val = false;
								incorrectos_vf[i].val = false;
								
								document.getElementById("incorrecto"+i).className = "verdadero";
								document.getElementById("correcto"+i).className = "verdadero";
								
								//document.getElementById("incorrecto"+i).style.color = color_no_seleccion;
								//document.getElementById("correcto"+i).style.color = color_no_seleccion;

								//document.getElementById("incorrecto"+i).style.backgroundColor = bgcolor_no_seleccion;
								//document.getElementById("correcto"+i).style.backgroundColor = bgcolor_no_seleccion;
							}
							}
						}
						animacionIncorrecto();


						}
						else {
						diferencia = cantidad_circulos - selecciones_correctas;
						if(con_retrovf){
							$("#instruccion_circulos_span").html($(".retro_vf").html());
							if(cantidad_maspersonaje>0){
						//parent.audio_correcto.play();
						setTimeout(function(){
							clic_btnpersonaje();
							//document.getElementById("contenido_c0").style.zIndex = -1;

						}, 700);

						} else {
						suma_total();	
						}

						} else {

							if(parent.cantidad_intentos_act==cuenta_intentos_act&&parent.cantidad_intentos_act>0){
							agotaIntentosAct();
						document.getElementById("instruccion_circulos_span").innerHTML = ""+parent.tx_tuvistemay+" "+ diferencia +" respuestas incorrectas. "+txt_complemento

						} else {
							document.getElementById("instruccion_circulos_span").innerHTML = ""+parent.tx_tuvistemay+" "+ diferencia +" respuestas incorrectas. "+parent.tx_siguelomay+" intentando."

							for (i = 0; i < cantidad_circulos; i++) { 
								correctos_vf[i].val = false;
								incorrectos_vf[i].val = false;
								document.getElementById("incorrecto"+i).className = "verdadero";
								document.getElementById("correcto"+i).className = "verdadero";
								//document.getElementById("incorrecto"+i).style.color = color_no_seleccion;
								//document.getElementById("correcto"+i).style.color = color_no_seleccion;

								//document.getElementById("incorrecto"+i).style.backgroundColor = bgcolor_no_seleccion;
								//document.getElementById("correcto"+i).style.backgroundColor = bgcolor_no_seleccion;
							}
						}
						}
						animacionIncorrecto();


					}
				        
				    };


 
					

					
				} else {
					mensaje_actual_vf = mensaje_instruccion == document.getElementById("instruccion_circulos").innerHTML;
					
					if(!mensaje_actual_vf){
					createjs.Tween.get(instruccion_circulos).to({alpha:0},velocidad_lenta).call(fInstruccion2);
				    function fInstruccion2() {
					//document.getElementById("instruccion_circulos").style.color = "red";
					
					document.getElementById("instruccion_circulos").innerHTML = mensaje_instruccion;
					createjs.Tween.get(instruccion_circulos).to({alpha:1},velocidad_lenta);
					}
					}
					SimboloRetroalimentacionDesaparece();

				}

				


			

		}



	}

function respuestasCompletas(){
	cuenta_intentos_act++
	$(".txt_intentosact").find("b").text(cuenta_intentos_act);
};
					
function agotaIntentosAct(){
	if(tipo=="vf"){
		for (i = 0; i < cantidad_circulos; i++) { 
			//if(correctos_vf[i].val){
				$("#correcto"+i).find(".simbretvf").html(parent.icono_check);
			//}
			
			//if(incorrectos_vf[i].val){
				$("#incorrecto"+i).find(".simbretvf").html(parent.icono_wrong);	
			//}
			
		}
	} else if (tipo=="selecciones"){
		$(".c_principal").find('[id^=correcto]').find(".simbretvf").html(parent.icono_check);
		$(".c_principal").find('[id^=incorrecto]').find(".simbretvf").html(parent.icono_wrong);
				

	} else if (tipo=="arrastre_txt_varios"){
		//console.log(verdadero_ubicados,cantidad_circulos,cantidad_circulos,opcionestxt_html)
		
		 	for (i = 0; i < cantidad_circulos; i++) { 

				if(correcto_carr[i]==1){
							$("#txt_arrastre"+i).find(".simbretvf").html(parent.icono_check);

						} else{

							for (ind = 0; ind < cantidad_espacios_opciones; ind++) { 
								if(c_carr[ind].includes(i)){
	    				
									$("#txt_arrastre"+i).find(".simbretvf").html(parent.icono_wrong+"<br/>"+(ind+1)+"");
			    				
			    				
			    				} 
							}


						}
			}
			


			if($(".retroactiv").length>0){
    		//console.log("entra retroactiv")
			tiene_retopev = $(".retroactiv").text().trim().length!=0||$(".retroactiv").find("img").length!=0||$(".retroactiv").find("video").length!=0;
    		
			console.log(tiene_retopev,"tiene_retopev")
			if(tiene_retopev){
				ancho_1 = $(".item_c").eq(0).width();
				ancho_total = $(".item_c").eq(0).width() + $(".item_c").eq(1).width();
				left_oa2a = $("#opcion_arrastretxt0").offset().left

				
				$(".item_c").eq(0).width(0)
				$(".fondo_opciones").css("opacity","0");
				$(".fondo_opciones").css("width","0");

				ancho_retro = $(".retroactiv").attr("data-ancho");
				if(ancho_retro==undefined){
					ancho_retro = ancho_1;
				}
				nuevo_ancho2 = ancho_total - ancho_retro;

				$(".item_c").eq(1).width(nuevo_ancho2)
				$(".retroactiv").width(ancho_retro)

				
				setTimeout(function(){
					left_oa2b = $("#opcion_arrastretxt0").offset().left;
					dif_loa2 = left_oa2a - left_oa2b;

					$(".txt_arrastre2").each(function(){

						left_ta2 = $(this).offset().left;
						nleft_ta2 = (left_ta2 - dif_loa2);
						//console.log(left_ta2,"left_ta2",ancho_1,nleft_ta2,dif_loa2)
						$(this).css("margin-left",-dif_loa2);
					});
				}, 1000);

			}

    	}

	} else if(tipo=="arrastre"){
		for (in2 = 0; in2 < cantidad_circulos; in2++) { 
			document.getElementById('enunciado'+in2).style.opacity = 1;
				bounds_opcion = document.getElementById('opcion'+in2).getBoundingClientRect();

			for (ind = 0; ind < cantidad_circulos; ind++) { 
					//console.log(ind)

					bounds_enunciado = document.getElementById('enunciado'+ind).getBoundingClientRect();

					
	    			if (bounds_opcion.left > bounds_enunciado.left && bounds_opcion.left < bounds_enunciado.left + bounds_enunciado.width && bounds_opcion.top > bounds_enunciado.top && bounds_opcion.top < bounds_enunciado.top + bounds_enunciado.height){
    					respuestas_arrastre_html[ind] = opciones_html[i];
    						if (in2 == ind) {
								$("#opcion"+in2).find(".simbretvfact").html(parent.icono_check);
								
							} else {
								$("#opcion"+in2).find(".simbretvfact").html(parent.icono_wrong);
								
								if($("#opcion"+in2).text().trim().length>0){
									$("#opcion"+in2).find("span").text($("#opcion"+ind).find("p").text());
									$("#opcion"+in2).find("span").fadeIn("slow");
									$("#opcion"+in2).find("p").addClass("tachado");
								} else {
									//console.log("in2",in2,$("#enunciado"+ind).find("p").text())
									//$("#enunciado"+in2).find("span").text($("#opcion"+in2).find("p").text());
									$("#enunciado"+ind).find("div").eq(0).find("span").text($("#enunciado"+in2).find("p").text());
									$("#enunciado"+ind).find("div").eq(0).find("span").fadeIn("slow");
									$("#enunciado"+ind).find("div").eq(0).find("p").addClass("tachado");
								}
							}
    				}

	    		}
    	}

		
    	if($(".retroactiv").length>0){
    		
			tiene_retopev = $(".retroactiv").text().trim().length!=0||$(".retroactiv").find("img").length!=0||$(".retroactiv").find("video").length!=0;
    		

			if(tiene_retopev){
				ancho_1 = $(".item_c").eq(0).width();
				ancho_total = $(".item_c").eq(0).width() + $(".item_c").eq(1).width();
				
				$(".item_c").eq(0).width(0)

				ancho_retro = $(".retroactiv").attr("data-ancho");
				if(ancho_retro==undefined){
					ancho_retro = ancho_1;
				}
				nuevo_ancho2 = ancho_total - ancho_retro;

				$(".item_c").eq(1).width(nuevo_ancho2)
				$(".retroactiv").width(ancho_retro)



			}

    	}
    	$(".simbretvfact").fadeIn("slow");

	} else if(tipo=="arrastre_txt2"){

		

    	for (in2 = 0; in2 < cantidad_circulos; in2++) { 
				//document.getElementById('enunciado'+in2).style.opacity = 1;
				bounds_opcion = document.getElementById('txt_arrastre'+in2).getBoundingClientRect();
		

			for (ind = 0; ind < cantidad_circulos; ind++) { 
					//console.log(ind)

					bounds_enunciado = document.getElementById('opcion_arrastretxt'+ind).getBoundingClientRect();
		

					
	    			if (bounds_opcion.left > bounds_enunciado.left && bounds_opcion.left < bounds_enunciado.left + bounds_enunciado.width && bounds_opcion.top > bounds_enunciado.top && bounds_opcion.top < bounds_enunciado.top + bounds_enunciado.height){
    					respuestas_arrastre_html_txt[ind] = opcionestxt_html[i];
		

    						if (in2 == ind) {
    							
								$("#txt_arrastre"+in2).find(".simbretvf").html(parent.icono_check);
								
							} else {
								
								$("#txt_arrastre"+in2).find(".simbretvf").html(parent.icono_wrong);
								
								if($("#opcion_arrastretxt"+in2).text().trim().length>0){
									$("#txt_arrastre"+in2).find("p").text($("#txt_arrastre"+ind).find(".txt_opc").text());
									//$("#opcion_arrastretxt"+in2).find("span").fadeIn("slow");
									$("#txt_arrastre"+in2).find(".txt_opc").addClass("tachado");
								} else {
									//console.log("in2",in2,$("#enunciado"+ind).find("p").text())
									//$("#enunciado"+in2).find("span").text($("#opcion"+in2).find("p").text());
									



									//$("#txt_arrastre"+ind).find("div").eq(0).find("span").text($("#enunciado"+in2).find("p").text());
									//$("#txt_arrastre"+ind).find("div").eq(0).find("span").fadeIn("slow");
									//$("#txt_arrastre"+ind).find("div").eq(0).find("p").addClass("tachado");
									$("#txt_arrastre"+in2).find("p").text($("#txt_arrastre"+ind).find(".txt_opc").text());

									$("#txt_arrastre"+in2).find(".txt_opc").addClass("tachado");

								}
							}
    				}

	    		}
	    	}

    }
	$(".simbretvf").fadeIn("slow");

	document.getElementById("contenido_c0").style.zIndex = -1;

	if(cantidad_maspersonaje>0){
							//parent.audio_correcto.play();
							setTimeout(function(){
								clic_btnpersonaje();
								//document.getElementById("contenido_c0").style.zIndex = -1;

							}, 700);

							} else {
							suma_total();	
							}
}



function SimboloRetroalimentacionDesaparece(){
	createjs.Tween.get(simbolo_retroalimentacion).to({alpha:0},velocidad_media);


}



	function f_opciones_arrastre(opcion_actual){

		
		var bounds_opcion_actual = boca6.getBounds();
		var calificacion = 0;
		//console.log(bounds_opcion_actual)
		
		opcion_actual.addEventListener("mouseover", over_opcion);
		function over_opcion(){
			numero_arreglo_opcion = opciones_html.indexOf(opcion_actual);
			
		}
			
		
		opcion_actual.addEventListener("mousedown", down_opcion);
		function down_opcion(){

			console.log("DOWN")

			actual_down = true;

			for (i = 0; i < cantidad_circulos; i++) {
				
	    		
	    		if (opcion_actual.x > bounds_enunciados[i].left && opcion_actual.x < bounds_enunciados[i].left + bounds_enunciados[i].width && opcion_actual.y > bounds_enunciados[i].top && opcion_actual.y < bounds_enunciados[i].top + bounds_enunciados[i].height) {
    				//console.log("3")
    				//ocupados[i].val = false;
    				//console.log("down", i, ocupados[i].val)

    				//fondos[numero_arreglo_opcion].graphics.clear().beginFill("rgb(0,0,0)").drawRoundRect (0, 0, bounds_opciones[numero_arreglo_opcion].width+padding_opciones, bounds_opciones[numero_arreglo_opcion].height+alto_opciones,5);

    			}
    		}

		}


		opcion_actual.addEventListener("mousemove", press_opcion);
		function press_opcion(){

			if (actual_down){
    			console.log("OK")
    				opciones[numero_arreglo_opcion].x = stage.mouseX//-bounds_opcion_actual.width/2;
					opciones[numero_arreglo_opcion].y = stage.mouseY-180//-bounds_opcion_actual.height/2;
					for (i = 0; i < cantidad_circulos; i++) {
			document.getElementById("enunciado"+i).style.opacity = 1;

    		if (stage.mouseX > bounds_enunciados[i].left && stage.mouseX < bounds_enunciados[i].left + bounds_enunciados[i].width && stage.mouseY > bounds_enunciados[i].top && stage.mouseY < bounds_enunciados[i].top + bounds_enunciados[i].height) {
    		document.getElementById("enunciado"+i).style.opacity = .5;
    		
			}
		}
    		} else {
    			console.log("NO_OK")
    		}

		
		//console.log(bounds_enunciados[0].width, bounds_contenedor_opciones[0].width)
		console.log("MOVE")

	


		//console.log(bounds_opcion_actual)
		
				
		}

		opcion_actual.addEventListener("mouseup", up_opcion);
		function up_opcion(){
			console.log("UP")

			actual_down = false;
		
		var todas_colocadas = false;
		for (i = 0; i < cantidad_circulos; i++) {
			document.getElementById("enunciado"+i).style.opacity = 1;
    		if (stage.mouseX > bounds_enunciados[i].left && stage.mouseX < bounds_enunciados[i].left + bounds_enunciados[i].width && stage.mouseY > bounds_enunciados[i].top && stage.mouseY < bounds_enunciados[i].top + bounds_enunciados[i].height) {
    		
    		//opcion_actual.x = bounds_enunciados[i].x + bounds_enunciados[i].width/2 - bounds_contenedor_opciones[numero_arreglo_opcion].width/2;
	    		

	    		if(ocupados[i].val == false){
	    		ocupados[i].val = true;


	    		
	    		//createjs.Tween.get(fondos[numero_arreglo_opcion]).to({scaleX:0.5 }, velocidad_rapida)

	    		//fondos[numero_arreglo_opcion].graphics.clear().beginFill("rgb(0,0,0)").drawRoundRect (0, 0, 160, bounds_opciones[numero_arreglo_opcion].height+alto_opciones,5);
	    		opcion_actual.x = bounds_enunciados[i].left + 10;
	    		opcion_actual.y = bounds_enunciados[i].top + 10;


	    		//console.log("up", i, ocupados[i].val)

	    		for(i = 0; i < cantidad_circulos; i++){
	    			
	    			if(opciones[i].y == top_opciones){
	    				todas_colocadas = false;
	    				break;
	    			} else {todas_colocadas = true;}
	    			

	    			

	    		}

	    		
	    		if (todas_colocadas == true){
	    			document.getElementById("contenedor2").style.opacity = 1;
	    			calificacion = 0;
	    			errores = 0;
	    			for(i = 0; i < cantidad_circulos; i++){
	    				if (opciones[i].x > bounds_enunciados[i].left && opciones[i].x < bounds_enunciados[i].left + bounds_enunciados[i].width && contenedor_opciones[i].y > bounds_enunciados[i].top && contenedor_opciones[i].y < bounds_enunciados[i].top + bounds_enunciados[i].height) {
	    				calificacion += 1; ///cantidad_circulos*10;
	    				;    				
		    			}
		    			errores = cantidad_circulos - calificacion;
	    				    			
	    			}
	    			if (errores == 0){
	    				//parent.puntaje += 100;
	    				if(tipo =="arrastre_final" && parent.znThisPage == parent.var_paginas_totales ) {
	    					document.getElementById("contenedor2").innerHTML = "Muy bien. Todas las respuestas son correctas. "+parent.tx_hasmay+" finalizado su preparación para el Examen Final con éxito. "+parent.tx_hazmay+" clic en 'Salir'.";	

	    					
	    				} else if (tipo =="arrastre_final" && parent.znThisPage != parent.var_paginas_totales) {
	    					document.getElementById("contenedor2").innerHTML = "Muy bien. Todas las respuestas son correctas. "+parent.tx_puedesmay+" avanzar a la siguiente pregunta.";	
	    					//parent.document.getElementById("flecha_abajo").style.visibility = "visible";
	    					suma_total();
	    					//parent.document.getElementById("contenido_c0").style.visibility.style.zIndex = -2;
	    					//parent.puntaje += 100;
	    				} else {
		    			
		    			document.getElementById("contenedor2").innerHTML = "Muy bien. Todas las respuestas son correctas. "+parent.tx_puedesmay+" continuar a la pantalla final del módulo.";
		    			//parent.document.getElementById("flecha_abajo").style.visibility = "visible";
		    			suma_total();
		    			//parent.document.getElementById("contenido_c0").style.visibility.style.zIndex = 2;
		    			//parent.nuevo_puntaje += cantidad_circulos/2;

		    			}

		    		} else if (errores == contenedor_opciones.length){
		    			
		    		document.getElementById("contenedor2").innerHTML = "Los "+errores+ " conceptos están ubicados de forma incorrecta. "+parent.tx_siguelomay+" intentando.";}
		    		else {
		    			document.getElementById("contenedor2").innerHTML = ""+parent.tx_tienesmay+" "+errores+" errores. "+parent.tx_siguelomay+" intentando.";
		    			parent.nuevo_puntaje += (cantidad_circulos-errores)/2;
		    			//console.log(parent.nuevo_puntaje)
		    		}


	    			

    			}
				break;
				} else {
				opcion_actual.x = x_original[numero_arreglo_opcion];
				opcion_actual.y = y_original[numero_arreglo_opcion];
				
				
				}
				
				

    		} else {
    		opcion_actual.x = x_original[numero_arreglo_opcion];
			opcion_actual.y = y_original[numero_arreglo_opcion];
			//ocupados[i].val = false;
			//document.getElementById("contenedor2").style.opacity = 0;
			}
		}			
		
		//console.log(numero_arreglo_opcion)
		
		//numero_arreglo_opcion = opciones.indexOf(opcion_actual);
				
		}

	}


	function crearMapa(id_mapa,areas_infografia){

			//console.log(areas_infografias_totales)

			
			$(id_mapa).mapster({

			isSelectable:false,
			mapKey: 'id',
			
			clickNavigate : false,
			fade: true,
			fadeDuration: velocidad_lenta*1.1,

			stroke:false,
			strokeWidth: 0,


			areas : areas_infografia
			});

			//activarAnimacionMapa();
			
		}
       
		function animacionMapa(id_mapa,opacidad_icono){

			
			$(id_mapa).mapster({

			isSelectable:false,
			mapKey: 'id',
			fillOpacity : opacidad_icono,
			clickNavigate : false,
			fade: true,
			fadeDuration: 300,


			areas : areas_infografias_totales
			});
			
		}

		

		function f_zona_over(zona_actual){
		
		
		zona_actual.addEventListener("mouseleave", leave_pop);
		function leave_pop()
			{
			if (tipo == "tipo5" && numero_arreglo_zona<9){
				
				document.getElementById("zona_sensible"+Number(numero_arreglo_zona+1)).style.visibility = "visible";	
				document.getElementById("zona_sensible"+Number(numero_arreglo_zona+1)).style.opacity = 1;	

			}
		}
		



	function contieneInfografia(elemento,parentInf){
	 	while (elemento != undefined && elemento != null && elemento.tagName.toUpperCase() != 'BODY'){
					//parentObj2 = parentObj + "_0";

					
				        if (elemento == parentInf){
				        	
				        	infografia_actual = parentInf.id;
							infografia_actual = infografia_actual.replace("infografia", "Mapa");
							break;

				        }
				        elemento = elemento.parentNode;


				    }



				}


	zona_actual.addEventListener("mouseover", over_pop);
		function over_pop()
		{

			//console.log($(this).hasClass("negrilla_sensiblex"),"negrilla_sensiblex")

			if(!$(this).hasClass("negrilla_sensiblex")){


				una_vez_globo = true;
		

		for (i = 0; i < objetos_over.length; i++) {
			
			if(objetos_over[i].ident == zona_actual.id){
				actual_estado = objetos_over[i].estado;
				i_actual = i;
			}
			 			
		}

		numero_arreglo_zona = total_zona_sensible.indexOf(zona_actual);


		
		pop_actual=total_pop[numero_arreglo_zona];
		if(actual_estado != "cerrado") {
			sobre_sensible = true;
			pop_actual.visible = true;
					
		} 

		
		cambia_img = document.getElementById("zona_sensible"+numero_arreglo_zona).getAttribute("data-imgchange");
		
		
		if(cambia_img!=null){
			org_imgchange = document.getElementById(cambia_img).innerHTML;
			document.getElementById(cambia_img).innerHTML = document.getElementById("img_change"+numero_arreglo_zona).innerHTML;
		}

		//pop_actual.alpha = 1;


	bound_zonasensible = document.getElementById("zona_sensible"+numero_arreglo_zona).getBoundingClientRect();



			bound_enlace = document.getElementById("enlace").getBoundingClientRect();

			alto_enlace = bound_enlace.height;
			ancho_enlace = bound_enlace.width;


			
			pop_actual.scaleX = 1;
			pop_actual.scaleY = 1;
			pop_actual.alpha = 0;
			
			alto_pop = document.getElementById("pop"+numero_arreglo_zona).clientHeight;
			ancho_pop = document.getElementById("pop"+numero_arreglo_zona).clientWidth;
			enlace_globos.visible = true;
			
			
			//alto_zonasensible = document.getElementById("zona_sensible"+numero_arreglo_zona).clientHeight;
			//ancho_zonasensible = document.getElementById("zona_sensible"+numero_arreglo_zona).clientWidth;
			//x_zonasensible = document.getElementById("zona_sensible"+numero_arreglo_zona).offsetLeft;
			//y_zonasensible = document.getElementById("zona_sensible"+numero_arreglo_zona).offsetTop;
			
			
			padtop_zonasensible = parseInt(window.getComputedStyle(document.getElementById("zona_sensible"+numero_arreglo_zona)).getPropertyValue("padding-top"),10);
			martop_zonasensible = parseInt(window.getComputedStyle(document.getElementById("zona_sensible"+numero_arreglo_zona)).getPropertyValue("margin-top"),10);
			


			padleft_zonasensible = parseInt(window.getComputedStyle(document.getElementById("zona_sensible"+numero_arreglo_zona)).getPropertyValue("padding-left"),10);
			marleft_zonasensible = parseInt(window.getComputedStyle(document.getElementById("zona_sensible"+numero_arreglo_zona)).getPropertyValue("margin-left"),10);
			
			//positiondocument.getElementById("zona_sensible"+numero_arreglo_zona).style.position)


			//padleft_zonasensible = document.getElementById("zona_sensible"+numero_arreglo_zona).getAttribute('class')
			

			x_zonasensible = bound_zonasensible.left;
			y_zonasensible = bound_zonasensible.top;
			alto_zonasensible = bound_zonasensible.height;
			ancho_zonasensible = bound_zonasensible.width;

	



			tiene_icono = document.getElementById("zona_sensible"+numero_arreglo_zona).getAttribute("data-graf");
						

			
			

			coordenadas_inf = document.getElementById("zona_sensible"+numero_arreglo_zona).getAttribute("coords");

			

			if(coordenadas_inf!= undefined && coordenadas_inf!= null ){
			coordenadas_inf_arr = coordenadas_inf.split(',');
				
				for (int = 0; int < cantidad_infografias; int++) { 
					//console.log(i,int)
					elemento = document.getElementById("zona_sensible"+numero_arreglo_zona);
					parentInf = document.getElementById("infografia"+int);

					contieneInfografia(elemento,parentInf)



				}

				
				if(coordenadas_inf_arr.length==3){

					bound_infografias= document.getElementById(infografia_actual).getBoundingClientRect();


					y_zonasensible = bound_infografias.top;//0;//bound_infografias.y-bound_infografias.height*4;
					x_zonasensible = bound_infografias.left;//0;//bound_infografias.y-bound_infografias.height*4;
					//x_zonasensible = 0;

					alto_zonasensible = bound_infografias.height;
					ancho_zonasensible = bound_infografias.width;
				

					arreglo_coords = JSON.parse("[" + coordenadas_inf + "]");
					x_arr = arreglo_coords[0]-ancho_zonasensible/2;
					x_arr_izquierda = arreglo_coords[0];
					y_arr_abajo = arreglo_coords[1]-alto_zonasensible;
					y_arr_arriba = arreglo_coords[1];
					rad_arr = arreglo_coords[2];
					rad_arr2 = 0;
					ancho_enlace = bound_enlace.width;

					//alto_zonasensible = ;

					

					//console.log(y_zonasensible,bound_infografias)
				} else if (coordenadas_inf_arr.length==4) {
					bound_infografias= document.getElementById(infografia_actual).getBoundingClientRect();


					y_zonasensible = bound_infografias.top;//0;//bound_infografias.y-bound_infografias.height*4;
					x_zonasensible = bound_infografias.left;//0;//bound_infografias.y-bound_infografias.height*4;
					//x_zonasensible = 0;

					alto_zonasensible = bound_infografias.height;
					ancho_zonasensible = bound_infografias.width;
				

					arreglo_coords = JSON.parse("[" + coordenadas_inf + "]");
					x_arr = coordenadas_inf_arr[0]-ancho_zonasensible/2+(coordenadas_inf_arr[2]-coordenadas_inf_arr[0])/2;
					x_arr_izquierda = coordenadas_inf_arr[0]+(coordenadas_inf_arr[2]-coordenadas_inf_arr[0])/2;
					y_arr_abajo = coordenadas_inf_arr[3]-alto_zonasensible;
					y_arr_arriba = parseInt(coordenadas_inf_arr[1]);//y_zonasensible+;//-coordenadas_inf_arr[3];//coordenadas_inf_arr[1]-coordenadas_inf_arr[3]-alto_pop;
					rad_arr = 0;//coordenadas_inf_arr[2];
					rad_arr2 = 0;
					ancho_enlace = bound_enlace.width;

					//alto_zonasensible = ;

				} else if (coordenadas_inf_arr.length>4){
					bound_infografias= document.getElementById(infografia_actual).getBoundingClientRect();
					y_zonasensible = bound_infografias.top;
					x_zonasensible = bound_infografias.left;

					alto_zonasensible = bound_infografias.height;
					ancho_zonasensible = bound_infografias.width;
					
					coordenadas_inf_arrx = coordenadas_inf_arr.filter(function(el, index) {
					    // normally even numbers have the feature that number % 2 === 0;
					    // JavaScript is, however, zero-based, so want those elements with a modulo of 1:
					    return index % 2 === 0;
					  });

					coordenadas_inf_arry = coordenadas_inf_arr.filter(function(el, index) {
					    // normally even numbers have the feature that number % 2 === 0;
					    // JavaScript is, however, zero-based, so want those elements with a modulo of 1:
					    return index % 2 === 1;
					  });

					for (ixn = 0; ixn < coordenadas_inf_arrx.length; ixn++) { 
						coordenadas_inf_arrx[ixn] = parseInt(coordenadas_inf_arrx[ixn])
					}

					for (ixn = 0; ixn < coordenadas_inf_arry.length; ixn++) { 
						coordenadas_inf_arry[ixn] = parseInt(coordenadas_inf_arry[ixn])
					}

					

					//console.log(coordenadas_inf_arr,coordenadas_inf_arrx,coordenadas_inf_arry,Math.min.apply(Math, coordenadas_inf_arrx),Math.max.apply(Math, coordenadas_inf_arrx));
					arreglo_coords = JSON.parse("[" + coordenadas_inf + "]");
					x_arr =  - bound_infografias.width/2 + (Math.max.apply(Math, coordenadas_inf_arrx) -Math.min.apply(Math, coordenadas_inf_arrx))/2 + Math.min.apply(Math, coordenadas_inf_arrx) ;//coordenadas_inf_arr[0]-ancho_zonasensible/2+(coordenadas_inf_arr[2]-coordenadas_inf_arr[0])/2;
					x_arr_izquierda = - bound_infografias.width/2 + (Math.max.apply(Math, coordenadas_inf_arrx) -Math.min.apply(Math, coordenadas_inf_arrx))/2 + Math.min.apply(Math, coordenadas_inf_arrx); //coordenadas_inf_arr[0]+(coordenadas_inf_arr[2]-coordenadas_inf_arr[0])/2;
					y_arr_abajo = - bound_infografias.height + Math.max.apply(Math, coordenadas_inf_arry);//-70;//coordenadas_inf_arr[3]-alto_zonasensible;
					y_arr_arriba = - bound_infografias.height + Math.min.apply(Math, coordenadas_inf_arry)//parseInt(coordenadas_inf_arr[1]);//y_zonasensible+;//-coordenadas_inf_arr[3];//coordenadas_inf_arr[1]-coordenadas_inf_arr[3]-alto_pop;
					rad_arr = 0;//coordenadas_inf_arr[2];
					rad_arr2 = 0;
					ancho_enlace = bound_enlace.width;
				}


			} else if (tiene_icono=="si"){

				

			//x_zonasensible =bound_zonasensible.x;
			//	y_zonasensible = bound_zonasensible.y;
			
			

				alto_zonasensible = document.getElementById("icono_graf"+numero_arreglo_zona).offsetHeight;
				ancho_zonasensible = document.getElementById("icono_graf"+numero_arreglo_zona).offsetWidth;

				bound_zonasensible = document.getElementById("icono_graf"+numero_arreglo_zona).getBoundingClientRect();
				y_zonasensible = bound_zonasensible.top
				x_zonasensible = bound_zonasensible.left +10

				//padding_zonasensible = document.getElementById("icono_graf"+numero_arreglo_zona).style;
			

				y_arr_abajo = y_zonasensible+alto_zonasensible;//y_zonasensible//alto_zonasensible;//document.getElementById("icono_graf"+numero_arreglo_zona).offsetHeight/2;
				x_arr = 0;//;
				y_arr_arriba = y_zonasensible-alto_zonasensible*1.5;
				rad_arr = -y_zonasensible-alto_zonasensible;//alto_zonasensible;
				rad_arr2 = -(y_zonasensible*2-alto_zonasensible/2);//-alto_zonasensible;//-(y_zonasensible-alto_zonasensible);//alto_zonasensible;
				ancho_enlace = bound_enlace.width;
				
				//y_zonasensible - padtop_zonasensible - alto_enlace  + y_arr_arriba - rad_arr + rad_arr2

				///console.log(x_zonasensible,y_zonasensible,alto_zonasensible,ancho_zonasensible)				
				//console.log(padding_zonasensible)				

			} else {
				x_arr = 0;//;
				y_arr_abajo = 0;
				y_arr_arriba = 0;
				rad_arr = 0;
				rad_arr2 = 0;
				ancho_enlace = 0;

			}
			
			console.log(x_arr,y_arr_arriba,rad_arr)
			
			//left_actual = x_zonasensible + ancho_zonasensible/2 - padleft_zonasensible - marleft_zonasensible;
			left_actual = x_zonasensible + ancho_zonasensible/2 ;
			top_actual = y_zonasensible + alto_zonasensible/2;

			total_ancho = left_actual + ancho_pop + 25 + x_arr;
			total_alto = top_actual + alto_pop + 25 + y_arr_arriba;

			console.log(total_ancho,total_alto)
			//console.log(total_alto,(top_actual + alto_pop + 25 + y_arr_arriba),top_actual, alto_pop , 25 , y_arr_arriba,"total_alto",alto_canvas,coordenadas_inf_arr[3],coordenadas_inf_arr[1],alto_pop,y_zonasensible)
			//console.log(left_actual,ancho_pop)
			//console.log(total_ancho,ancho_canvas)
			//console.log(total_alto,top_actual,alto_pop,alto_canvas)
			//console.log(total_ancho,ancho_canvas)
			//console.log(total_alto,alto_canvas)
			if(total_ancho<ancho_canvas) {
				if (total_alto<alto_canvas-30){

						//console.log(document.getElementById("icono_graf"+numero_arreglo_zona).offsetHeight);

					//console.log(alto_zonasensible,bound_zonasensible)

					//console.log("1")
					//enlace_globos.x = x_zonasensible + ancho_zonasensible/2 - padleft_zonasensible - marleft_zonasensible - ancho_enlace/2 + x_arr;//- ancho_enlace/2;//stage.mouseX;
					enlace_globos.x = x_zonasensible + ancho_zonasensible/2 - padleft_zonasensible -  ancho_enlace/2 + x_arr;//- ancho_enlace/2;//stage.mouseX;
					
					//enlace_globos.y = y_zonasensible + alto_zonasensible+padtop_zonasensible+martop_zonasensible + y_arr_abajo + rad_arr;
					enlace_globos.y = y_zonasensible + alto_zonasensible+padtop_zonasensible + y_arr_abajo + rad_arr;
					
					pop_actual.x = x_zonasensible + ancho_zonasensible/2 + x_arr -30;
					y_pop_actual_p = enlace_globos.y+8;
					pop_actual.y = y_pop_actual_p+100;
					document.getElementById("enlace").className = "enlace-arriba";
					
				} else {
					//console.log("2")
					
					
					//enlace_globos.x = x_zonasensible + ancho_zonasensible/2 - padleft_zonasensible - marleft_zonasensible - ancho_enlace/2 + x_arr; //- ancho_enlace/2;//stage.mouseX;
					enlace_globos.x = x_zonasensible + ancho_zonasensible/2 - padleft_zonasensible  - ancho_enlace/2 + x_arr; //- ancho_enlace/2;//stage.mouseX;
					
					//enlace_globos.y = y_zonasensible - padtop_zonasensible - martop_zonasensible - alto_enlace  + y_arr_arriba - rad_arr;
					enlace_globos.y = y_zonasensible - padtop_zonasensible - alto_enlace  + y_arr_arriba - rad_arr + rad_arr2;
					
					pop_actual.x = x_zonasensible+ ancho_zonasensible/2 + x_arr -42;
					y_pop_actual_p = (enlace_globos.y) - (alto_pop) - 0;
					pop_actual.y = y_pop_actual_p-100;
					document.getElementById("enlace").className = "enlace-abajo";
					
				}
				

			} else {

				if (total_alto<alto_canvas-30){
					//console.log("3")
			
				

					//enlace_globos.x = x_zonasensible + ancho_zonasensible/2 - padleft_zonasensible - marleft_zonasensible - ancho_enlace/2 + x_arr;//- ancho_enlace/2;//stage.mouseX;
					enlace_globos.x = x_zonasensible + ancho_zonasensible/2 - padleft_zonasensible  - ancho_enlace/2 + x_arr;//- ancho_enlace/2;//stage.mouseX;
					//enlace_globos.y = y_zonasensible + alto_zonasensible+padtop_zonasensible+martop_zonasensible + y_arr_abajo + rad_arr;
					enlace_globos.y = y_zonasensible + alto_zonasensible+padtop_zonasensible + y_arr_abajo + rad_arr;
					pop_actual.x = x_zonasensible-ancho_pop+ ancho_zonasensible/2 + x_arr +40;
					y_pop_actual_p = enlace_globos.y+8;

					pop_actual.y = y_pop_actual_p+100;
					document.getElementById("enlace").className = "enlace-arriba";
					
				} else {
					//console.log("4")
				
					
					//enlace_globos.x = x_zonasensible + ancho_zonasensible/2 - padleft_zonasensible - marleft_zonasensible - ancho_enlace/2;//(rad_arr*2); //- ancho_enlace/2;//stage.mouseX;
					//enlace_globos.x = x_zonasensible + ancho_zonasensible/2 - padleft_zonasensible - marleft_zonasensible - ancho_enlace/2 + x_arr;//(rad_arr*2); //- ancho_enlace/2;//stage.mouseX;
					enlace_globos.x = x_zonasensible + ancho_zonasensible/2 - padleft_zonasensible  - ancho_enlace/2 + x_arr;//(rad_arr*2); //- ancho_enlace/2;//stage.mouseX;
					//enlace_globos.y = y_zonasensible - padtop_zonasensible - martop_zonasensible - alto_enlace + y_arr_arriba - rad_arr;
					enlace_globos.y = y_zonasensible - padtop_zonasensible - alto_enlace + y_arr_arriba - rad_arr + rad_arr2;
					pop_actual.x = x_zonasensible-ancho_pop+ ancho_zonasensible/2 + x_arr + 30;
					y_pop_actual_p = (enlace_globos.y) - (alto_pop) - 2;
					pop_actual.y = y_pop_actual_p-100;
					document.getElementById("enlace").className = "enlace-abajo";
					
				}
				
			}
		//}



		//pop_actual.x = stage.mouseX;
		//pop_actual.y = stage.mouseY;
		
		enlace_globos.alpha = 0; 
		

		if($("#pop"+numero_arreglo_zona).find("audio").length==1){
			$('audio').each(function(){
	    	this.pause(); // Stop playing
	    	//this.currentTime = 0; // Reset time
	    	$(this)[0].currentTime = 0;
			}); 
			finaudiopopact = false;
			idaudiopop = "audiopop"+numero_arreglo_zona;
			$("#pop"+numero_arreglo_zona).find("audio").attr("id",idaudiopop)
			audio_popact = $("#pop"+numero_arreglo_zona).find("audio");
			audio_popact[0].play();
			$("#"+idaudiopop)[0].addEventListener('ended', function() {
			//$("#"+idaudiopop).on('ended', function() {
			   finaudiopopact = true;
			   console.log("end audio")
			   // enable button/link
			});
			$("#"+idaudiopop)[0].addEventListener('timeupdate', function() {
				timeactpop = $("#"+idaudiopop)[0].currentTime;
				durationactpop = $("#"+idaudiopop)[0].duration;

				progactpop = (timeactpop / durationactpop) * $("#pop"+numero_arreglo_zona).find(".contprogaudiopop").width();

				if(timeactpop / durationactpop == 1){
					globoAbierto()
				}
				//console.log(progactpop)
				$("#pop"+numero_arreglo_zona).find(".progaudiopop").width(progactpop+"px")
			});

		}

		//console.log(y_pop_actual_p,enlace_globos.y)
		//createjs.Tween.get(pop_actual,{override:true}).wait(velocidad_rapida/2).to({alpha:1},velocidad_rapida);//.call(globoAbierto);	
		createjs.Tween.get(pop_actual,{override:true}).to({alpha:1,y:y_pop_actual_p},velocidad_lenta, createjs.Ease.elasticInOut)//;.call(globoAbierto);	
		createjs.Tween.get(enlace_globos,{override:true}).wait(velocidad_rapida + velocidad_media).to({alpha:1},velocidad_rapida/2);	


		tiene_cambiaimg = document.getElementById("zona_sensible"+numero_arreglo_zona).getAttribute("data-cimg");
		if(tiene_cambiaimg!=null||tiene_cambiaimg!=undefined){
			id_cambiaimg = document.getElementById("zona_sensible"+numero_arreglo_zona).getAttribute("data-idimg");
			//$("#"+tiene_cambiaimg).stop(true,true).fadeTo(0,0, function(){
				$("#"+tiene_cambiaimg).find("div").fadeOut(0);
				$("#"+tiene_cambiaimg).find("#"+id_cambiaimg).fadeIn(0);
				
			//	$(this).fadeTo(20,1);
			//});
		
		}

		}
		
	}

		
	
		
	

		zona_actual.addEventListener("mouseout", out_pop);
		function out_pop()
		{
		
			if(!$(this).hasClass("negrilla_sensiblex")){

		numero_arreglo_zona = total_zona_sensible.indexOf(zona_actual);

		if(parent.znThisPage == 3 && numero_arreglo_zona==7){
					//document.getElementById("imagen_cambia").src = "images/page3c-m1.png";
				}
		/*
		if (parent.znThisPage<parent.pagina_superior){
			tipo_infografia_actual = "no";

			} else {
		tipo_infografia_actual = document.getElementById("zona_sensible"+numero_arreglo_zona).parentNode.getAttribute("data-restriccion"); 

			}
		*/
		cambia_img = document.getElementById("zona_sensible"+numero_arreglo_zona).getAttribute("data-imgchange");

		if(cambia_img!=null){
			//org_imgchange = document.getElementById(cambia_img).innerHTML;
			document.getElementById(cambia_img).innerHTML = org_imgchange;
		}
		if($("#pop"+numero_arreglo_zona).find("audio").length==1){
			//if(finaudiopopact){
			//	globoAbierto()

			//}
			audio_popact = $("#pop"+numero_arreglo_zona).find("audio");
			audio_popact[0].pause();
			audio_popact[0].currentTime = 0;
			console.log("tiene audio")
		} else {
				globoAbierto()

		}
		if(vistos_over_completo[numero_arreglo_zona].val){
				
					cantidad_visto_over[numero_arreglo_zona] += 1;

					
						if(cantidad_visto_over[numero_arreglo_zona]==1){
						globoAbierto2(numero_arreglo_zona)

						}


		}
		

		pop_actual=total_pop[numero_arreglo_zona];
		pop_actual.alpha = 0;
		pop_actual.scaleX = 0;
		pop_actual.scaleY = 0;
		
		pop_actual.visible = false;
		enlace_globos.visible = false;
		
		//createjs.Tween.get(pop_actual,{override:true}).to({alpha:0},velocidad_rapida);	
		//createjs.Tween.get(pop_actual).to({scaleX:0.1, scaleY:0.1, alpha:0},velocidad_rapida);
		//createjs.Tween.get(enlace_globos,{override:true}).to({alpha:1},velocidad_rapida/2);		
		
		//createjs.Tween.get(pop_actual,{override:true}).wait(velocidad_media).to({visible:false},velocidad_media);	
		//pop_actual.alpha = 0;
		sobre_sensible = false;

		if(objetos_over[i_actual].estado == "visto"){
		if(tipo!="arrastre_txt_varios"){

			$('#zona_sensible'+i_actual).mapster('set',false,{ 
                fillColor: boton_visto,
                fillOpacity: opacidad_icono_baja_2,
                strokeColor: boton_visto,
				});

				$('#zona_sensible'+i_actual).mapster('set',true,{ 
                fillColor: boton_visto,
                fillOpacity: opacidad_icono_baja_2,
                strokeColor: boton_visto,

				});
			}
		}
		

		tiene_cambiaimg = document.getElementById("zona_sensible"+numero_arreglo_zona).getAttribute("data-cimg");
		if(tiene_cambiaimg!=null||tiene_cambiaimg!=undefined){
			id_cambiaimg = document.getElementById("zona_sensible"+numero_arreglo_zona).getAttribute("data-idimg");
			//$("#"+tiene_cambiaimg).stop(true,true).fadeTo(20,0, function(){
				$("#"+tiene_cambiaimg).find("div").fadeOut(0);
				$("#"+tiene_cambiaimg).find("div").eq(0).fadeIn(0);
				//$(this).fadeTo(20,1);
			//});

			

		}

		//crearMapa("#Mapa0",total_zonas_info[0]);
		//ActualizaMapas();

		//activarSiguienteInfo()
		}
		
		
		}


	function activarSiguienteInfo(){
			
			if(objetos_over[i_actual].estado == "visto"){
				vistos_over_completo[numero_arreglo_zona].val = true;
				//control_flechas(numero_arreglo_zona,"over");
			}
			
			if(objetos_over[i_actual].estado == "abierto"){
				vistos_over_completo[numero_arreglo_zona].val = true;
				//control_flechas(numero_arreglo_zona,"over");
			
				objetos_over[i_actual].estado = "visto";
				objetos_over[i_actual].bgcolor = boton_visto;
				objetos_over[i_actual].area.fillColor = objetos_over[i_actual].bgcolor;
				
		if(tipo!="arrastre_txt_varios"){
				
				$('#zona_sensible'+i_actual).mapster('set',false,{ 
                fillColor: boton_visto,
                fillOpacity: opacidad_icono_baja_2,
                strokeColor: boton_visto,
				});

				$('#zona_sensible'+i_actual).mapster('set',true,{ 
                fillColor: boton_visto,
                fillOpacity: opacidad_icono_baja_2,
                strokeColor: boton_visto,

				});
				
				}

				/*
				$('#Mapa'+objetos_over[i_actual].numero_infografia).mapster('set',false,'zona_sensible'+i_actual,{ 
					
                	fillColor: boton_visto,
                	strokeColor: boton_visto,

                	
            	});
            	$('#Mapa'+objetos_over[i_actual].numero_infografia).mapster('set',true,'zona_sensible'+i_actual,{ 
					
                	fillColor: boton_visto,
                	strokeColor: boton_visto,

                	
            	});
				*/

			}

			if(objetos_over[i_actual].restriccion == "si" && objetos_over[i_actual].estado != "cerrado" && objetos_over[i_actual].lugar != "ultimo" && objetos_over[i_actual+1].estado == "cerrado"){
				objetos_over[i_actual+1].estado = "abierto";
				objetos_over[i_actual+1].bgcolor = boton_abierto;
				objetos_over[i_actual+1].area.fillColor = objetos_over[i_actual+1].bgcolor;

				$('#zona_sensible'+(i_actual+1)).mapster('set',false,{ 
                fillColor: boton_abierto,
                strokeColor: boton_abierto,

				});

				$('#zona_sensible'+(i_actual+1)).mapster('set',true,{ 
                fillColor: boton_abierto,
                strokeColor: boton_abierto,

				});
			}


			
			


		//crearMapa(id_infografia_actual);
		//crearMapa(id_infografia_actual);


		}

		

		function globoAbierto(){
			//console.log(numero_arreglo_zona)
			
			if(una_vez_globo){
				una_vez_globo = false;

				/*
				if(parent.znThisPage == 3 && numero_arreglo_zona==7){
					document.getElementById("imagen_cambia").src = "images/page3c-m1.gif";
				}
				*/
				//setTimeout(function(){
								
				if(pop_actual.alpha == 1 && pop_actual.scaleX == 1 ){

					tipo_elemento_2 = document.getElementById("zona_sensible"+numero_arreglo_zona).parentNode.nodeName;

					if(tipo_elemento_2 != "MAP"){
						//document.getElementById("zona_sensible"+numero_arreglo_zona).style.backgroundColor = "#6A696A";

			if(tipo!="arrastre_txt_varios"&&!vistos_over_completo[numero_arreglo_zona].val){
						
						document.getElementById("zona_sensible"+numero_arreglo_zona).className = "negrilla_sensible2";

						vistos_over_completo[numero_arreglo_zona].val = true;

						//sigInteract();



						control_flechas(numero_arreglo_zona,"over");
						
						//console.log(document.getElementById("icono_graf"+numero_arreglo_zona))

						var tiene_icono = document.getElementById("zona_sensible"+numero_arreglo_zona).getAttribute("data-graf");
						
						if(tiene_icono=="si"){
							document.getElementById("icono_graf"+numero_arreglo_zona).className = "icono_graf_visto";
							document.getElementById("txt_graf"+numero_arreglo_zona).className = "txt_graf_visto";

						}

						//globoAbierto2(numero_arreglo_zona)

						
						}
						
					} else {
						document.getElementById("zona_sensible"+numero_arreglo_zona).className = "negrilla_sensible2";

						control_flechas(numero_arreglo_zona,"over");

					activarSiguienteInfo();
					}


					//areas_infografias[numero_arreglo_zona] = {selected: false};
					//areas_infografias_restringidas[numero_arreglo_zona]["fillColor"] = 'ff0000';

					
					} 
							
					//}, velocidad_lenta*1.3);
					}

					

			}
		}





		function globoAbierto2(numero_arreglo_zona){
			var tiene_sig = document.getElementById("zona_sensible"+numero_arreglo_zona).getAttribute("data-sig");
						if(tiene_sig!=null){
							
							partes_tiene_sig = tiene_sig.split(',');

							//console.log(partes_tiene_sig.length)

							for (ixn = 0; ixn < partes_tiene_sig.length; ixn++) { 
								//document.getElementById(partes_tiene_sig[i]).style.visibility = "visible";
							
								

						//		setTimeout(function(){
									tiempoAparece(ixn)


							}
						}
						

			
		}


		function tiempoAparece(ixn){
			setTimeout(function () {

						//			console.log(ixn)
									estilo_div = document.getElementById(partes_tiene_sig[ixn]).className;

  									estilo_div2 = estilo_div.substring(0, 8);

  								//	console.log(estilo_div2)
  									if(estilo_div2=="img-graf"){
								document.getElementById(partes_tiene_sig[ixn]).className = "img-graf-fadein";

  									} else {
								document.getElementById(partes_tiene_sig[ixn]).className = "zona-grow";

  									}


								}, ixn*700);

		}



	function f_sensible_clic(sensible_actual){
		numero_arreglo_sensibles = sensibles.indexOf(sensible_actual);
		
		sensible_actual.addEventListener("mouseover", over_sensible);
		function over_sensible()
		{
			
			//numero_arreglo_circulo_sensible = contenedor_circulos.indexOf(sensible_actual);
			numero_arreglo_circulo_sensible = contenedor_circulos_html.indexOf(sensible_actual);


			if (numero_arreglo_circulo_sensible > -1){
				
				if(!anima_btncirc){

				 if (!circulo_g && activos_circulos_internos[numero_arreglo_circulo_sensible].val == false || posabs_btncirc ) { //parent.tipo_curso=="isometrico"

					sobre_circulo_interno = true;
					//texto_titulo_pantalla = "<span class='texto_titulo_pantalla'>"+parent.titulos_pantallas[numero_arr_contcircmenu]+"</span>"
					document.getElementById("over_circulos_internos").innerHTML = document.getElementById("titulo_c"+numero_arreglo_circulo_sensible).innerHTML;
					$("#over_circulos_internos div").removeClass( "numero_titulo_c" );
					$("#over_circulos_internos div").removeClass( "numero_titulo_c2" );
					$("#over_circulos_internos div").addClass( "numero_titulo_c_over" );
					
					
					
					//console.log(document.getElementById("over_circulos_internos").innerHTML = document.getElementById("titulo_c"+numero_arreglo_circulo_sensible).innerHTML)



					pop_circulos_internos.x = contenedor_circulos[numero_arreglo_circulo_sensible].x-document.getElementById("over_circulos_internos").clientWidth+20;
					
					//if(parent.tipo_curso=="isometrico"){
					if(posabs_btncirc){


						if($("#circ_btn"+numero_arreglo_circulo_sensible).offset().left>$("#canvas").width()/2){
							$("#enlace_circulos_internos2").fadeOut(0);
							$("#enlace_circulos_internos").fadeIn(0);

							$("#enlace_circulos_internosb2").fadeOut(0);
							$("#enlace_circulos_internosb").fadeIn(0);
							
							pop_circulos_internos.x = contenedor_circulos[numero_arreglo_circulo_sensible].x-document.getElementById("over_circulos_internos").clientWidth+20;

							//console.log("derecha")

						} else {
							$("#enlace_circulos_internos").fadeOut(0);
							$("#enlace_circulos_internos2").fadeIn(0);

							$("#enlace_circulos_internosb").fadeOut(0);
							$("#enlace_circulos_internosb2").fadeIn(0);
							//console.log("izquierda")
							pop_circulos_internos.x = contenedor_circulos[numero_arreglo_circulo_sensible].x-20;

						}

						if($("#circ_btn"+numero_arreglo_circulo_sensible).offset().top>$("#canvas").height()/2){
							$("#cont_enlace_circulos_internos").fadeOut(0);
							$("#cont_enlace_circulos_internosb").fadeIn(0);
							pop_circulos_internos.y = contenedor_circulos[numero_arreglo_circulo_sensible].y-(document.getElementById("circ_btn"+numero_arreglo_circulo_sensible).clientHeight*scale_circulos_grandes_over)/2 - $("#cont_over_circulos_internos").height();

							//console.log("abajo")
						} else {
							$("#cont_enlace_circulos_internosb").fadeOut(0);
							$("#cont_enlace_circulos_internos").fadeIn(0);

							pop_circulos_internos.y = contenedor_circulos[numero_arreglo_circulo_sensible].y+(document.getElementById("circ_btn"+numero_arreglo_circulo_sensible).clientHeight*scale_circulos_grandes_over)/2;
							
							//console.log("arriba")
						}

					} else {
						$("#cont_enlace_circulos_internosb").fadeOut(0);
						$("#enlace_circulos_internos2").fadeOut(0);
						pop_circulos_internos.y = contenedor_circulos[numero_arreglo_circulo_sensible].y+(document.getElementById("circ_btn"+numero_arreglo_circulo_sensible).clientHeight*scale_circulos_pequenos_over)/2;

					}




					createjs.Tween.get(pop_circulos_internos,{override:true}).wait(velocidad_rapida).to({scaleX:1, scaleY:1, alpha:1},velocidad_media);
					//pop_circulos_internos.alpha = 1;
					//contenedor_circulos[numero_arreglo_circulo_sensible].scaleX = scale_circulos_pequenos_over;
					//contenedor_circulos[numero_arreglo_circulo_sensible].scaleY = scale_circulos_pequenos_over;
					
					


					//createjs.Tween.get(sensible_actual).to({scaleX:scale_circulos_pequenos_over,scaleY:scale_circulos_pequenos_over},velocidad_lenta/2, createjs.Ease.bounceOut)
				} 

				if (circulo_g && activos_circulos_internos[numero_arreglo_circulo_sensible].val == false){

					//createjs.Tween.get(sensible_actual).to({scaleX: 1, scaleY:1},velocidad_rapida);	
					//contenedor_circulos[numero_arreglo_circulo_sensible].scaleX = scale_circulos_grandes_over;
					//contenedor_circulos[numero_arreglo_circulo_sensible].scaleY = scale_circulos_grandes_over;

					createjs.Tween.get(contenedor_circulos[numero_arreglo_circulo_sensible],{override:true}).to({scaleX:scale_circulos_grandes_over,scaleY:scale_circulos_grandes_over,skewX:0},velocidad_media, createjs.Ease.bounceOut);

					//createjs.Tween.get(contenedor_circulos[numero_arreglo_circulo_sensible]).to({scaleX:scale_circulos_grandes_over,scaleY:scale_circulos_grandes_over},velocidad_lenta)
				} else if (!circulo_g && activos_circulos_internos[numero_arreglo_circulo_sensible].val == false){
					createjs.Tween.get(contenedor_circulos[numero_arreglo_circulo_sensible],{override:true}).to({scaleX:scale_circulos_pequenos_over,scaleY:scale_circulos_pequenos_over,skewX:0},velocidad_media, createjs.bounceOut);
				}
				}
			} else {
				//createjs.Tween.get(sensible_actual).to({alpha: 0.5},velocidad_rapida);	
				//	parent.cerrarMensaje();

			}

		}

		sensible_actual.addEventListener("mouseout", out_sensible);
		function out_sensible()
		{
			numero_arreglo_circulo_sensible = contenedor_circulos_html.indexOf(sensible_actual);
			
			if (numero_arreglo_circulo_sensible > -1){
				sobre_circulo_interno = false;
				createjs.Tween.get(pop_circulos_internos,{override:true}).to({scaleX:0, scaleY:0, alpha:0},velocidad_rapida);
			}
			//numero_arreglo_circulo_sensible = contenedor_circulos.indexOf(sensible_actual);
			//console.log(activos_circulos_internos[numero_arreglo_circulo_sensible].val)
			if (numero_arreglo_circulo_sensible > -1){
				if(!anima_btncirc){

				if (circulo_g && activos_circulos_internos[numero_arreglo_circulo_sensible].val == false){
					//createjs.Tween.get(sensible_actual).to({scaleX: 1, scaleY:1},velocidad_rapida);
					//contenedor_circulos[numero_arreglo_circulo_sensible].scaleX = scale_circulos_grandes_no_over;
					//contenedor_circulos[numero_arreglo_circulo_sensible].scaleY = scale_circulos_grandes_no_over;	

					createjs.Tween.get(contenedor_circulos[numero_arreglo_circulo_sensible],{override:true}).to({scaleX:scale_circulos_grandes_no_over,scaleY:scale_circulos_grandes_no_over,skewX:0},velocidad_media, createjs.Ease.bounceOut);

					//createjs.Tween.get(contenedor_circulos[numero_arreglo_circulo_sensible]).to({scaleX:v,scaleY:scale_circulos_grandes_no_over},velocidad_lenta)
				} else if (!circulo_g && activos_circulos_internos[numero_arreglo_circulo_sensible].val == false) {
					//contenedor_circulos[numero_arreglo_circulo_sensible].scaleX = scale_circulos_pequenos_no_over;
					//contenedor_circulos[numero_arreglo_circulo_sensible].scaleY = scale_circulos_pequenos_no_over;

					createjs.Tween.get(contenedor_circulos[numero_arreglo_circulo_sensible],{override:true}).to({scaleX:scale_circulos_pequenos_no_over,scaleY:scale_circulos_pequenos_no_over,skewX:0},velocidad_media, createjs.Ease.bounceOut);

					//createjs.Tween.get(contenedor_circulos[numero_arreglo_circulo_sensible]).to({scaleX:scale_circulos_grandes_no_over,scaleY:scale_circulos_pequenos_no_over},velocidad_lenta)
				} 
			}
			} else {
			//	createjs.Tween.get(sensible_actual).to({alpha: 1},velocidad_rapida);
			}


			
			
			
		}
		
		

		sensible_actual.addEventListener("click", clic_sensible);
		function clic_sensible()
		{
			numero_arreglo_circulo_sensible = contenedor_circulos_html.indexOf(sensible_actual);

			if (numero_arreglo_circulo_sensible > -1){
				if(permitido_btn[numero_arreglo_circulos].val){
				sobre_circulo_interno = false;
					parent.cerrarMensaje();

				createjs.Tween.get(pop_circulos_internos,{override:true}).to({scaleX:0, scaleY:0, alpha:1},velocidad_rapida/10);
				} else {
					//parent.mensaje_avance.alpha = 1;
					mensajeRestringeCirc(numero_arreglo_circulo_sensible);

				}
			}
			
			//numero_arreglo_circulo_sensible = contenedor_circulos.indexOf(sensible_actual);
			if (numero_arreglo_circulo_sensible > -1 && permitido_btn[numero_arreglo_circulos].val){
				for (i = 0; i < cantidad_circulos; i++) { 
					activos_circulos_internos[i].val = false;
					var_contenedor_circulos = document.getElementById("circ_btn"+i);
					//var_contenedor_circulos.setAttribute('class', 'circulos_botones_abiertos'); 

				}
				var_contenedor_circulos = document.getElementById("circ_btn"+numero_arreglo_circulo_sensible);
				//var_contenedor_circulos.setAttribute('class', 'circulos_botones_sel'); 
				activos_circulos_internos[numero_arreglo_circulo_sensible].val = true;
			}

			numero_arreglo_sensibles = sensibles.indexOf(sensible_actual);
			//consultados_clic[numero_arreglo_sensibles].val = true;
			
			
		}
			
	};


	function mensajeRestringeCirc(num_cs){
			for (i = 0; i < cantidad_circulos; i++) { 
						if(permitido_btn[i].val){
							mayor_btnvisto = i;
						}
					}
				if(mayor_btnvisto+1==num_cs){
						parent.document.getElementById("texto_mensaje_avance").innerHTML = "Para acceder a este botón "+parent.tx_te+" falta finalizar<br/>la consulta del botón anterior.";

						} else {
						dif_btn = (num_cs) - (mayor_btnvisto);

						parent.document.getElementById("texto_mensaje_avance").innerHTML = "Para acceder a este botón "+parent.tx_te+" falta finalizar<br/>la consulta de los "+dif_btn+" botones anteriores.";

						}
					parent.verMensaje();
			
		}

	control_animacion_menu_superior = true;

	

	function pantalla_1 (){
		for (i = 0; i < elementos_p1.length; i++) { 
			createjs.Tween.get(elementos_p1[i]).to({alpha: 1},velocidad_media);
			}	
	}
			
//	pantalla_1();
	agregar_duracion = true;
	var_contenedor_iaudio.addEventListener("click", clic_audio);
		function clic_audio()
		{
		//createjs.Tween.get(parent.instruccion_especial2,{override:true}).to({alpha:0},velocidad_lenta).to({visible:false},velocidad_rapida/2);
		createjs.Tween.get(parent.instruccion_especial,{override:true}).to({alpha:0},velocidad_lenta).to({visible:false},velocidad_rapida/2);


		if(parent.con_sonidoclic){
									parent.audio_clic.play();
								}

		//if(contenedor_iaudio.alpha == 1){
			animacion_final_brazos = false;
			if (audio_activo){
				
				audio_activo = false;
				if(animacion_cierre){
				locucion = createjs.Sound.play("sounds/audio"+parent.znThisPage+"b_"+parent.personaje_elegido+".mp3");
				if(parent.nueva_puntuacion>=170){
					//locucion.stop();
					
					} else {
						//locucion

						duracion_audio = locucion.getDuration();
						locucion.position = duracion_audio-110;
					}

				} else {
		//createjs.Tween.get(parent.instruccion_especial2,{override:true}).to({alpha:0},velocidad_media).to({visible:false},velocidad_rapida);

			//	locucion = createjs.Sound.play("sounds/audio"+parent.znThisPage+".mp3");

				}
				icono_play.alpha = 0;
				icono_stop.alpha = 1;
				locucion.pan = 0.0001;
				locucion.play();

				document.getElementById("boton_audiob").className = "boton_audio2";

	document.getElementById("btn_play_perb").style.width = "0px";
	document.getElementById("btn_stop_perb").style.width = "70px";


				duracion_audio = locucion.getDuration();
				if (agregar_duracion){
				pausas_audio[1].push(duracion_audio);
				agregar_duracion = false;
				}

				} else {
				audio_activo = true;
				icono_play.alpha = 1;
				icono_stop.alpha = 0;
				locucion.stop();

				//clic_btnaudio = false;
				document.getElementById("boton_audiob").className = "boton_audio";

				document.getElementById("btn_play_perb").style.width = "75px";
				document.getElementById("btn_stop_perb").style.width = "0px";
				for (i = 0; i < bocas_per1.length; i++) { 
					bocas_per1[i].alpha = 0;
					bocas_per2[i].alpha = 0;
					bocas_per3[i].alpha = 0;
					bocas_per4[i].alpha = 0;
				}
				bocas_per1[0].alpha = 1;
				bocas_per2[0].alpha = 1;
				bocas_per3[0].alpha = 1;
				bocas_per4[0].alpha = 1;

			}
		//}
			
		}	
	iniciar = true;
	iniciar_brazo_derecho = true;
	iniciar_movimiento_brazos = true;
	iniciar_cabeza = true;
	iniciar_claves = true;
	createjs.Ticker.addEventListener("tick", Lipsync);

	video_una_vez = true;


	function activarAnimacionMapa(){
			/*
			setInterval(function(){
				if(aumentando){
					opacidad_icono_liberado -= 0.04; 
					if(opacidad_icono_liberado<opacidad_icono+0.2){
						aumentando = false;
					}
				} 
				areas_infografias_totales[0]["fillOpacity"] = opacidad_icono_liberado;

			//id_infografia_actual = document.getElementById("zona_sensible"+numero_arreglo_zona).parentNode.id;
			//id_infografia_actual = id_infografia_actual.replace("infografia", "#Mapa");

			id_infografia_actual = "#Mapa0"

			animacionMapa(id_infografia_actual,opacidad_icono_liberado);
			}, 1000);
			*/

			
		}

	function saltaPersonaje(){
		if(salta_una_vez){
			//console.log(salta_personaje,cae_personaje,"salta/cae")
			if(salta_personaje){
				per_game.gotoAndPlay("jump");
				vy = -alto_salto;
				salta_una_vez = false;	
			} else if(cae_personaje){
				per_game.gotoAndPlay("fall");
				vy = 0;
				salta_una_vez = false;	
			}
		}

		
		vy += gravity;
		per_game.y += vy;

		//console.log("mientras_salta")
		if(cae_inicial){
			for(i = 0; i < plataformas.length; i++){
				if((per_game.x-bounds_per_game.width/4 < plataformas[i].x + bounds_plataformas[i].width)&&(per_game.x + bounds_per_game.width > plataformas[i].x)){
					if(per_game.y+bounds_per_game.height/2>plataformas[i].y + const_pisoplat){
						//pisa_plataformaold = pisa_plataforma;
						//console.log(i,"pisa_plataforma")
						pisa_plataforma = $("#canvas").height()  - plataformas[i].y - bounds_suelos_escenarios.height + const_piso - const_pisoplat;
						cae_inicial = false;
						$(".inst_avanza").fadeIn(velocidad_media);


					} 
				}
			}
		}

		

		

		if(per_game.y>=y_personaje_juego-pisa_plataforma){
			//if(cae_personaje){
			//	per_game.gotoAndPlay("idle");	
			//}
			salta_personaje = false;
			cae_personaje = false;

			//console.log(pisa_plataforma,"pisa_plataforma")
    		per_game.y = y_personaje_juego-pisa_plataforma;
    		vy = -alto_salto;
			//

    		if(parent.proporciones_realistas){
    			createjs.Tween.get(contenedor_juego).to({y:pisa_plataforma},velocidad_lenta);
    		} 	else {
				createjs.Tween.get(contenedor_juego).to({y:pisa_plataforma*0.8},velocidad_lenta);
    		}
    		//
    		
    		createjs.Tween.get(parent.mapa_completo).to({y:pisa_plataforma/(4*velocidad_fondo) + parent.y_inimc},velocidad_media);
    		createjs.Tween.get(contenedor_decorafront).to({y:pisa_plataforma*velfront},velocidad_lenta);
					

    		//parent.$("#mapa_completo").css("transform","translateY("+((pisa_plataforma*3))+"px)")
    		//console.log(parent.mapa_completo.y,"parent.mapa_completo")

			salta_una_vez = true;
	    	avanza_una_vez = true;
	    	retrocede_una_vez = true;
	    	think_una_vez = true;

	    	if(cae_inicial){
				$(".inst_avanza").fadeIn(velocidad_media);

				cae_inicial = false;
			}

    		//nuevo_y_stage = (y_personaje_juego_inicial-y_personaje_juego-per_game.regY)+pisa_plataforma;
			//parent.y_contenedor_mapa = parent.y_contenedor_mapa_orig;
    		//per_game.y = y_personaje_juego-pisa_plataforma;
		}
			

		
	}

	function colisionInterac(){
		puede_abrircont = false;

		//console.log(distancia_per_interac,"distancia_per_interac")

		if(avanza_personaje){
			for(i = cantidad_circulos-1; i >= 0; i--){
				if((per_game.x + bounds_per_game.width/2 > sprites_interacgame[i].x-distancia_per_interac) && (per_game.x - bounds_per_game.width/2 < sprites_interacgame[i].x + bounds_interacgame[i].width + distancia_per_interac)){
					
					puede_abrircont = true;


					//console.log("encuentra interact",i)
					//console.log(document.getElementById("circ_btn"+i).className)
					//console.log(document.getElementById("circ_btn"+i).className != "circulos_botones_vistos")
						num_interact = i;
					
					if(document.getElementById("circ_btn"+i).className != "circulos_botones_vistos"){
						colision = true;
						piensa_personaje = true;	

						//console.log("colisiona interact")

					} else {
						colision = false;
						piensa_personaje = false;						

					}
				}
			}
		} else if(retrocede_personaje){
			piensa_personaje = false;
			for(i = cantidad_circulos-1; i >= 0; i--){
				if((per_game.x + bounds_per_game.width/2 > sprites_interacgame[i].x-distancia_per_interac) && (per_game.x - bounds_per_game.width/2 < sprites_interacgame[i].x + bounds_interacgame[i].width +distancia_per_interac)){
						num_interact = i;
					
					puede_abrircont = true;
					num_interact = i;

					//colision = false;
					//piensa_personaje = false;	

				}						
			}
			//console.log("rerocede de colison")
			;
		}
	}

	function colisionPlataformas(){
		
		if(avanza_personaje){
			for(i = plataformas.length-1; i >= 0; i--){
				//console.log(i,"i avanza")
				
				if((per_game.x+bounds_plataformas[i].width/8>plataformas[i].x)&&(per_game.x - bounds_plataformas[i].width < plataformas[i].x + bounds_plataformas[i].width)){
						//console.log("colision x avanza ",i)
					if(per_game.y+bounds_per_game.height/2>plataformas[i].y + const_pisoplat){
						colision = true;
							if(i==0 && una_vezinssalta){
								if(!parent.dispositivo_movil){
									$(".inst_salta").fadeIn(velocidad_media);
								}
							}
						if(per_game.x + bounds_per_game.width > plataformas[i].x + bounds_plataformas[i].width){
							colision = false;
							
						}
					} else {
						colision = false;
						
						if(per_game.x >plataformas[i].x){
							
							pisa_plataformaold = pisa_plataforma;
							pisa_plataforma = $("#canvas").height()  - plataformas[i].y - bounds_suelos_escenarios.height + const_piso - const_pisoplat;

							if(pisa_plataforma<pisa_plataformaold){
								//console.log("cae")
								cae_personaje = true;
							}
						} 
						if(per_game.x - bounds_per_game.width/16 > plataformas[i].x + bounds_plataformas[i].width){
							cae_personaje = true;
							pisa_plataforma = 0;
						}
					}
					break;

				} else {
					colision = false;
					//pisa_plataforma = 0;
				}
			}

			
			
		} else if(retrocede_personaje){
			if(una_vezinssalta){
				$(".inst_salta").fadeOut(velocidad_media);
			}
			for(i = 0; i < plataformas.length; i++){

				if((per_game.x-bounds_per_game.width/4 < plataformas[i].x + bounds_plataformas[i].width)&&(per_game.x + bounds_per_game.width > plataformas[i].x)){
					//console.log("colision x retro")
					if(per_game.y+bounds_per_game.height/2>plataformas[i].y + const_pisoplat){
						colision = true;
						//console.log(per_game.x,per_game.x + bounds_per_game.width, plataformas[i].x)
						if(per_game.x - bounds_per_game.width < plataformas[i].x){
							colision = false;
						}
					} else {
						colision = false;

						if(per_game.x  < plataformas[i].x + bounds_plataformas[i].width){
							//pisa_plataforma = bounds_plataformas[i].height - const_pisoplat;
							/*if(pisa_plataformaold=!pisa_plataforma){
								cae_personaje = true;
							}*/

							pisa_plataformaold = pisa_plataforma;
							
							pisa_plataforma = $("#canvas").height()  - plataformas[i].y - bounds_suelos_escenarios.height + const_piso - const_pisoplat;
							//console.log(pisa_plataformaold,pisa_plataforma,"pisa_plataforma")
							
							if(pisa_plataforma<pisa_plataformaold){
								//console.log("cae")
								cae_personaje = true;
							}

						}
						
						if(per_game.x + bounds_per_game.width/16 < plataformas[i].x){
							cae_personaje = true;
							pisa_plataforma = 0;
						}

					}
					break;
				} else {
					colision = false;
					//pisa_plataforma = 0;
				}
			}

		}
	}
	function piensaPersonaje(){
		if(think_una_vez){
			per_game.gotoAndPlay("think");
			think_una_vez = false;
		}

		//retrocede_personaje = false;

		//salta_una_vez = true;
	    //avanza_una_vez = true;
	    //retrocede_una_vez = true;
	}

	function caminaPersonaje(){
		//console.log(avanza_personaje,"avanza_personaje")
		//console.log(retrocede_personaje,"retrocede_personaje")

		if(avanza_personaje){
			//console.log(piensa_personaje,"piensa_personaje")
			//console.log(salta_personaje,"salta_personaje")
			//console.log(cae_personaje,"cae_personaje")
		   	if(!salta_personaje&&!cae_personaje&&!piensa_personaje){
		   		if(avanza_una_vez){
		   			//console.log("avanza anim")

					per_game.gotoAndPlay("walk");
					avanza_una_vez = false;
				}
				think_una_vez = true;

			}
			per_game.scaleX = 1;

			if(sale_consulta){
				//+ bounds_per_game.width/2 // + distancia_per_interac
				if(circulo_actual_ok<cantidad_circulos-1){
					if(per_game.x > sprites_interacgame[circulo_actual_ok].x + bounds_interacgame[circulo_actual_ok].width + bounds_per_game.width/2 + distancia_per_interac*2.75){
						avanza_personaje = false;
						sale_consulta = false;
						pausa_game = false;

						parent.$(".cubre_imgfondo").removeClass("cubre_imgfondoact");

						///SPCONTROL
						if(parent.dispositivo_movil){
							$("#boton_sp").fadeIn(velocidad_rapida);
							$("#controles_sp").fadeIn(velocidad_rapida);
						} 

					}
				} else { 
					//console.log("fin.anima",per_game.x,ancho_fondo, $("#canvas").width()/2)
					if(per_game.x > ancho_fondo + $("#canvas").width()/2 - 200){
						avanza_personaje = false;
						//sale_consulta = false;
						//pausa_game = true;

						parent.$(".cubre_imgfondo").removeClass("cubre_imgfondoact");
						//setTimeout(function(){ 
						
							//console.log(parent.$(".mensaje_final").css("z-index"))
							//console.log(parent.$("#canvas_principal").css("z-index"))
							//console.log(parent.$("#ifrm").css("z-index"))
							//console.log(parent.$("#boton_cerrar").css("z-index"))
							zio_mensajefinal = parent.$(".mensaje_final").css("z-index");
							zio_canvas_principal = parent.$("#canvas_principal").css("z-index");
							zio_ifrm = parent.$("#ifrm").css("z-index");
							zio_boton_cerrar = parent.$("#boton_cerrar").css("z-index");
							zio_trofeo = parent.$(".cont_trofeo").css("z-index");


							parent.contenedor_personajeini.x = parent.x_personajeanima_inicial_ini;
							createjs.Tween.get(parent.contenedor_personajeini).to({x:parent.x_personajeanima_inicial_fin,alpha:1},parent.velocidad_lenta*2, createjs.Ease.backOut);

							parent.animaPersonajeIni();

							parent.$(".txt_puntfin").text(parseInt(parent.puntaje));
							parent.$(".mensaje_final").css("opacity",1)
							parent.$(".mensaje_final").fadeIn(parent.velocidad_rapida)
							parent.$(".mensaje_final").css("z-index",4)
							parent.$(".cont_trofeo").css("z-index",6)
							parent.$("#boton_cerrar").css("z-index",6)
							parent.$("#canvas_principal").css("z-index",5)

							parent.$(".boton_volveresc").fadeIn(parent.velocidad_rapida)

							
							//parent.$("#ifrm").css("z-index",0)

							if(parent.con_trofeos){
			
								parent.$(".cont_trofeo").addClass("cont_trofeo_fin");
								
							}
					 	//}, parent.velocidad_lenta);
					}
			 	}
			}

			colisionPlataformas();
			colisionInterac();

			
			if(!colision){
				//console.log(per_game.x,ancho_fondo,contenedor_juego.x,"avanza")
				una_vezinsini = true;
				//console.log(per_game.x,"per_game.x",$("#canvas").width()/2,ancho_paso*5)
				if(una_vezinsini&&per_game.x>($("#canvas").width()/2) + (ancho_paso*5)){
					///SPCONTROL
					if(parent.dispositivo_movil){
						$(".inst_navega_sf").fadeOut(velocidad_lenta);

					} else {

						$(".inst_avanza").fadeOut(velocidad_lenta);
						
					}
					una_vezinsini = false;



				}

				if(una_vezinssalta&&per_game.x>plataformas[0].x + (ancho_paso*5)){
					$(".inst_salta").fadeOut(velocidad_lenta);
					una_vezinssalta = false;
				}

				if(per_game.x >= $("#canvas").width()/2 && per_game.x <= ancho_fondo){
					per_game.x += ancho_paso;
					contenedor_juego.x -= ancho_paso;
					parent.mapa_completo.x -= ancho_paso/velocidad_fondo;
					contenedor_decorafront.x -= ancho_paso*velfront;
				} else if(per_game.x < $("#canvas").width()/2 || per_game.x < ancho_fondo + $("#canvas").width()/2 - bounds_per_game.width/2){
					per_game.x += ancho_paso;
				}

				/*
				if(per_game.x < $("#canvas").width()/2){
					per_game.x += ancho_paso;
				} else if(per_game.x <= ancho_fondo){
					per_game.x += ancho_paso;
					contenedor_juego.x -= ancho_paso;
					parent.mapa_completo.x -= ancho_paso/velocidad_fondo;
				}  else if(per_game.x <= ancho_fondo + $("#canvas").width()/2) {
					per_game.x += ancho_paso;

				}
				*/

				//if(per_game.x >= $("#canvas").width()/2 && per_game.x <= ancho_fondo - $("#canvas").width()/2){
					//contenedor_juego.x -= (per_game.x - $("#canvas").width()/2);//ancho_paso;
					//parent.mapa_completo.x -= ancho_paso/velocidad_fondo;



					//parent.$("#mapa_completo").css("transform","translateX("+(contenedor_juego.x/velocidad_fondo)+"px)")
					//left_divs += ancho_paso
					//$(".moveplat").css("left",left_divs)
				//}
			}





	    } else {
			avanza_una_vez = true;
	    }

	    if(retrocede_personaje){
	    	//console.log(piensa_personaje,"piensa_personaje")
	    	if(!salta_personaje&&!cae_personaje&&!piensa_personaje){
		   		if(retrocede_una_vez){
		   			//console.log("retocede anim")
					per_game.gotoAndPlay("walk");
					retrocede_una_vez = false;
				}
				think_una_vez = true;

			}
			if(parent.znInt>0){
				$(".inst_avanza").fadeOut(velocidad_lenta);
			}
			per_game.scaleX = -1;
			
			colisionPlataformas();
			colisionInterac();

			
			if(!colision){
				//console.log(per_game.x,ancho_fondo,contenedor_juego.x,"retrocede")

				if(per_game.x > $("#canvas").width()/2 && per_game.x < ancho_fondo + ancho_paso){
					per_game.x -= ancho_paso;
					contenedor_juego.x += ancho_paso;
					parent.mapa_completo.x += ancho_paso/velocidad_fondo;
					contenedor_decorafront.x += ancho_paso*velfront;

				} else if(per_game.x <= $("#canvas").width()/2 && per_game.x > bounds_per_game.width/2 || per_game.x > ancho_fondo - bounds_per_game.width/2){
					per_game.x -= ancho_paso;

				}

				/*
				if(per_game.x > ancho_fondo + $("#canvas").width()/2){
					per_game.x -= ancho_paso;
				} else if(per_game.x >= $("#canvas").width()/2){
					per_game.x -= ancho_paso;
					contenedor_juego.x += ancho_paso;
					parent.mapa_completo.x += ancho_paso/velocidad_fondo;
				} else if(per_game.x >= bounds_per_game.width/2){
					per_game.x -= ancho_paso;

				}
				*/

				
				//if(per_game.x  >= $("#canvas").width()/2 && per_game.x <= ancho_fondo - $("#canvas").width()/2 ){
					//contenedor_juego.x += ancho_paso;
					//parent.mapa_completo.x += ancho_paso/velocidad_fondo;

					/*
					if(contenedor_juego.x>0){
						contenedor_juego.x=0;
					}

					if(parent.mapa_completo.x>0){
						parent.mapa_completo.x = 0;
					}
					*/

					//parent.$("#mapa_completo").css("transform","translateX("+(contenedor_juego.x/velocidad_fondo)+"px)")
					//left_divs -= ancho_paso
					//$(".moveplat").css("left",left_divs)

				//}
			}
			//console.log(per_game.x,"per_game.x")
			

	    }	else {
			retrocede_una_vez = true;

	    }

		activaAnimaInteract();


	}

	function standPersonaje(){
		if(stand_una_vez){
			per_game.gotoAndPlay("idle");
			stand_una_vez = false;

			salta_una_vez = true;
	    	avanza_una_vez = true;
	    	retrocede_una_vez = true;
	    	think_una_vez = true;

		}
	}


	function activaAnimaInteract(){
		for (i = 0; i < cantidad_circulos; i++) { 
			if(sprites_interacgame[i].x<ancho_canvas-contenedor_juego.x&&sprites_interacgame[i].x+bounds_interacgame[i].width>-contenedor_juego.x){
				if(sprites_interacgame[i].paused){
					//console.log(i,"i play")
					sprites_interacgame[i].gotoAndPlay("status0");
				}
			} else {
				if(!sprites_interacgame[i].paused){
					//console.log(i,"i pause")
					sprites_interacgame[i].gotoAndStop("status0");
				}
			}
		}
	}
			
	function Lipsync() {

		//////////////////////////// INI ANIMA PERSONAJE JUEGO /////////////////////////////////
		if(salta_personaje||cae_personaje){
	    	saltaPersonaje();
		}

		if(avanza_personaje||retrocede_personaje){
			caminaPersonaje();
		}
		

		if(piensa_personaje){
			//avanza_personaje = false;
			//retrocede_personaje = false;
			//console.log("piensa act")
			piensaPersonaje();
		}

	    if(!avanza_personaje&&!retrocede_personaje&&!salta_personaje&&!cae_personaje&&!piensa_personaje){
	    	standPersonaje();
		} else {
	    	stand_una_vez = true;
	    }

	    if(puede_abrircont&&!pausa_game){
	    	///SPCONTROL
			if(parent.dispositivo_movil){
				$(".inst_navega_sfbtn").fadeIn(velocidad_media);
				$("#btn_sp").addClass("btn_sp2");
			} else {
				$(".inst_interact").fadeIn(velocidad_media);
			}


			

		} else {
			///SPCONTROL
			if(parent.dispositivo_movil){
				$(".inst_navega_sfbtn").fadeOut(velocidad_media);
				$("#btn_sp").removeClass("btn_sp2");
			} else {
				$(".inst_interact").fadeOut(velocidad_media);
			}

			


		}




		//////////////////////////// FIN ANIMA PERSONAJE JUEGO /////////////////////////////////



		//console.log(parent.completado, parent.puntaje)

		//contenedor_rostro.rotation += 1
		//contenedor_antebrazo_mano_derecha.rotation -=1;

		//contenedor_antebrazo_mano_izquierda.rotation -=1;

		if (sobre_circulo_interno && tipo == "tipo3"){
		ancho_pop_int = document.getElementById("over_circulos_internos").clientWidth;
		//console.log(ancho_pop_int)
		//pop_circulos_internos.x = stage.mouseX-ancho_pop_int+25;
		//pop_circulos_internos.y = stage.mouseY+30;
			//createjs.Tween.get(pop_circulos_internos).to({x:stage.mouseX + 25, y:stage.mouseY - 25},velocidad_rapida,createjs.Ease.elasticOut);
			
			
		}

		///Control X Visible

		//contenedor_antebrazo_mano_derecha.rotation += 1;
		//contenedor_antebrazo_mano_izquierda.rotation -= 1;
		//contenedor_brazo_derecho.rotation += 1;
		//contenedor_brazo_izquierdo.rotation += 1;
		//contenedor_rostro.rotation += 1; //OK

		

		//// VIDEO


		if (cantidad_videos>0){
			for (i = 0; i < cantidad_videos; i++) { 

			if(!parent.videos_vimeo){
				
			var_video = document.getElementById("video"+i);
			var_video_posicion = var_video.currentTime;
			var_video_duracion = var_video.duration;
			
			//if(var_video_posicion > var_video_duracion-3 && videos_vistos[i].val == false) {
				//var_video.stop;
			$('#video'+i)[0].addEventListener('ended', function() {
    			id_vide = $(this).attr('id');
				id_vide = id_vide.replace("video", "");
				if(videos_vistos[id_vide].val == false){
				//videos_vistos[i].val = true;
				$("#video"+id_vide).closest(".cont_video").addClass("cont_video_visto");
				$("#video"+id_vide).closest(".cont_video").removeClass("cont_video");
				control_flechas(id_vide,"fin_video");
				}
			});

				//video_una_vez = false;

			//}
			}
			}
		}

		/*
		if (cantidad_videos>0){
		

			for (i = 0; i < total_videos.length-1; i++) { 
			var_video = document.getElementById("video"+i);
			var_video_posicion = var_video.currentTime;
			var_video_duracion = var_video.duration;
			
			if(var_video_posicion > var_video_duracion-3 ) {
				//videos_vistos[i].val = true;
				num_modulo_act = parent.document.getElementById("numero_modulo").innerHTML;
			        
					
					
					if(parent.znThisPage==1 && num_modulo_act == "1" && (parent.estados_numeros[0].val == "abierto" || parent.estados_numeros[1].val == "abierto") ){
						//$("#instruccion_dinamica").fadeOut("slow");
						
						parent.document.getElementById("txt_ie2").innerHTML = "<div style='width:230px;line-height:18px;padding:10px 0;height:'auto''>Ahora "+parent.tx_puedesmay+" avanzar a la siguiente pantalla y seguir aprendiendo sobre Gestión del Desempeño. Para hacerlo "+parent.tx_hazmay+" clic en el número 2 del menú superior o presiona la flecHas que apunta a la derecha. Ten presente que es necesario consultar la totalidad de los contenidos de cada pantalla para avanzar a la siguiente. Podrás saber que has completado la consulta de una pantalla porque su botón y el de la pantalla siguiente cambian de color, como Has ocurrido con los números 1 y 2.<br/>¡Éxitos!</div>";
						parent.document.getElementById("s3").innerHTML = "í";
						parent.document.getElementById("s4").innerHTML = "í";
						parent.instruccion_especial2.x = 930;
						parent.instruccion_especial2.y = 130;
						parent.instruccion_especial2.visible = true;
						createjs.Tween.get(parent.instruccion_especial2,{override:true}).to({alpha:1},velocidad_lenta);

					}
					
					if(video_una_vez){
						$("#instruccion_dinamica").fadeOut("slow", function() {
							document.getElementById("instruccion_dinamica").innerHTML = "<div class='resaltado_especial' style='margin-bottom:30px'>¡Muy bien!</div><br/><br/><br/><br/><br/><br/><br/><br/><br/>";

							$("#instruccion_dinamica").fadeIn("slow");


						});

				control_flechas(i,"fin_video");
				video_una_vez = false;
				}

			} else {
					//createjs.Tween.get(parent.instruccion_especial,{override:true}).to({alpha:0},velocidad_lenta).to({visible:false},velocidad_rapida/2);

			}
			

			}
		}
		*/
/*
			///
		if (sobre_sensible && !sensibles_restriccion[numero_arreglo_zona].val){

			
			//globoAbierto();
			

			pop_actual.alpha = 1;
			left_actual = stage.mouseX;
			top_actual = stage.mouseY;
			alto_pop = document.getElementById("pop"+numero_arreglo_zona).clientHeight;
			ancho_pop = document.getElementById("pop"+numero_arreglo_zona).clientWidth;
			enlace_globos.visible = true;
			total_ancho = left_actual + ancho_pop + 25;
			total_alto = top_actual + alto_pop + 25;
			
			

			if(total_ancho<ancho_canvas) {
				if (total_alto<alto_canvas-30){
					
					enlace_globos.x = stage.mouseX;
					enlace_globos.y = stage.mouseY+27;
					pop_actual.x = enlace_globos.x-20;
					pop_actual.y = enlace_globos.y+8;
					document.getElementById("enlace").className = "enlace-arriba";
					
				} else {
					
					enlace_globos.x = stage.mouseX;
					enlace_globos.y = stage.mouseY-20;
					pop_actual.x = enlace_globos.x-20;
					y_pop_actual_p = (enlace_globos.y) - (alto_pop) - 2;
					pop_actual.y = y_pop_actual_p;
					document.getElementById("enlace").className = "enlace-abajo";
					
				}
				

			} else {
				if (total_alto<alto_canvas-30){
					enlace_globos.x = stage.mouseX;
					enlace_globos.y = stage.mouseY+27;
					pop_actual.x = stage.mouseX-ancho_pop+30;
					pop_actual.y = enlace_globos.y+8;
					document.getElementById("enlace").className = "enlace-arriba";
					
				} else {
					enlace_globos.x = stage.mouseX;
					enlace_globos.y = stage.mouseY-20;
					pop_actual.x = stage.mouseX-ancho_pop+30;
					y_pop_actual_p = (enlace_globos.y) - (alto_pop) - 2;
					pop_actual.y = y_pop_actual_p;
					document.getElementById("enlace").className = "enlace-abajo";
					
				}
				
			}



		
			if (tipo == "tipo5"){

				if (numero_arreglo_zona == 0 || numero_arreglo_zona == 1 || numero_arreglo_zona == 4 || numero_arreglo_zona == 5 || numero_arreglo_zona == 6 || numero_arreglo_zona == 7 || numero_arreglo_zona == 8 || numero_arreglo_zona == 9){
				document.getElementById("col"+numero_arreglo_zona+"a").style.visibility = "visible";
				document.getElementById("col"+numero_arreglo_zona+"a").style.opacity = 1;
				document.getElementById("col"+numero_arreglo_zona+"b").style.visibility = "visible";
				document.getElementById("col"+numero_arreglo_zona+"b").style.opacity = 1;
				} else if (numero_arreglo_zona == 3) {
				document.getElementById("col"+numero_arreglo_zona+"a").style.visibility = "visible";
				document.getElementById("col"+numero_arreglo_zona+"a").style.opacity = 1;
				document.getElementById("col"+numero_arreglo_zona+"b").style.visibility = "visible";
				document.getElementById("col"+numero_arreglo_zona+"b").style.opacity = 1;
				document.getElementById("col"+numero_arreglo_zona+"c").style.visibility = "visible";
				document.getElementById("col"+numero_arreglo_zona+"c").style.opacity = 1;
				document.getElementById("col"+numero_arreglo_zona+"d").style.visibility = "visible";
				document.getElementById("col"+numero_arreglo_zona+"d").style.opacity = 1;
				document.getElementById("col"+numero_arreglo_zona+"e").style.visibility = "visible";
				document.getElementById("col"+numero_arreglo_zona+"e").style.opacity = 1;
				document.getElementById("col"+numero_arreglo_zona+"f").style.visibility = "visible";
				document.getElementById("col"+numero_arreglo_zona+"f").style.opacity = 1;
				} else {
				document.getElementById("col"+numero_arreglo_zona+"a").style.visibility = "visible";
				document.getElementById("col"+numero_arreglo_zona+"a").style.opacity = 1;
				document.getElementById("col"+numero_arreglo_zona+"b").style.visibility = "visible";
				document.getElementById("col"+numero_arreglo_zona+"b").style.opacity = 1;
				document.getElementById("col"+numero_arreglo_zona+"c").style.visibility = "visible";
				document.getElementById("col"+numero_arreglo_zona+"c").style.opacity = 1;
				document.getElementById("col"+numero_arreglo_zona+"d").style.visibility = "visible";
				document.getElementById("col"+numero_arreglo_zona+"d").style.opacity = 1;

				}
				


				//var_columna = document.getElementById("col1a"); //("col"+numero_arreglo_zona+"a");

				//var_columna.visible = true;
				//createjs.Tween.get(var_columna).to({alpha:1},velocidad_lenta);
				

				
			}



		} 

*/

		/////LIPSYNC
		if(audio_activo){
			//////ACA PERSOBAJE
				for (i = 0; i < bocas_per1.length; i++) { 		
				bocas_per1[i].alpha = 0;
				bocas_2_per1[i].alpha = 0;
				}
				bocas_per1[0].alpha = 1;
				bocas_2_per1[0].alpha = 1;
				

				for (i = 0; i < bocas_per2.length; i++) { 		
				bocas_per2[i].alpha = 0;
				bocas_2_per2[i].alpha = 0;
				}
				bocas_per2[0].alpha = 1;
				bocas_2_per2[0].alpha = 1;

				for (i = 0; i < bocas_per3.length; i++) { 		
				bocas_per3[i].alpha = 0;
				bocas_2_per3[i].alpha = 0;
				}
				bocas_per3[0].alpha = 1;
				bocas_2_per3[0].alpha = 1;

				for (i = 0; i < bocas_per4.length; i++) { 		
				bocas_per4[i].alpha = 0;
				bocas_2_per4[i].alpha = 0;
				}
				bocas_per4[0].alpha = 1;
				bocas_2_per4[0].alpha = 1;


		} else {
			
			if(parent.con_globotxt&&!clic_en_btnpersonaje){
				globo_texto_personaje.visible = true;
			} else {
				globo_texto_personaje.visible = false;
			}
			globo_texto_personaje.alpha = 1;

			//console.log(globo_texto_personaje)

			createjs.Tween.get(globo_texto_personaje,{override:true}).to({x:x_globo_texto_personaje,scaleX:1, scaleY:1},velocidad_media*1.3, createjs.Ease.bouceInOut);//.call(paginas);





			posicion_audio = locucion.getPosition();
			audio_estado = locucion.playState; 
			//console.log(audio_estado,posicion_audio,duracion_audio,locucion)
			//if (posicion_audio > duracion_audio-110 ) {
			if (audio_estado == "playFinished") {

			//	console.log("lkjlkj")
				clic_audio();
				createjs.Tween.get(contenedor_iaudio,{override:true}).to({scaleX:0.9,scaleY:0.9},velocidad_lenta*2,createjs.Ease.elasticOut);

				audio_activo = true;
				icono_play.alpha = 1;
				icono_stop.alpha = 0;
				//////ACA PERSOBAJE
				for (i = 0; i < bocas_per1.length; i++) { 
					bocas_per1[i].alpha = 0;
				}
				bocas_per1[0].alpha = 1;

				for (i = 0; i < bocas_per2.length; i++) { 
					bocas_per2[i].alpha = 0;
				}
				bocas_per2[0].alpha = 1;


				for (i = 0; i < bocas_per3.length; i++) { 
					bocas_per3[i].alpha = 0;
				}
				bocas_per3[0].alpha = 1;


				for (i = 0; i < bocas_per4.length; i++) { 
					bocas_per4[i].alpha = 0;
				}
				bocas_per4[0].alpha = 1;


				if(clic_en_btnpersonaje){
					//console.log("numero_arreglo_maspersonajeatual")
				//console.log("clic_en_btnpersonaje1",contenidos_circulos_html_maspersonaje[numero_arreglo_maspersonajeactual].innerHTML,clic_en_per[numero_arreglo_maspersonajeactual],clic_en_per[numero_arreglo_maspersonajeactual],over_en_per[numero_arreglo_maspersonajeactual],over_en_per[numero_arreglo_maspersonajeactual])
				

				//console.log("clic_en_btnpersonaje2",contenidos_circulos_html_maspersonaje[numero_arreglo_maspersonajeactual].innerHTML,clic_en_per[numero_arreglo_maspersonajeactual],clic_en_per[numero_arreglo_maspersonajeactual],over_en_per[numero_arreglo_maspersonajeactual],over_en_per[numero_arreglo_maspersonajeactual])

				id_acmp = $(contenidos_circulos_html_maspersonaje[numero_arreglo_maspersonajeactual])[0].id;
				//console.log(id_acmp)
				if(cantidad_maspersonaje>0){
				id_acmp = $(contenidos_circulos_html_maspersonaje[numero_arreglo_maspersonajeactual])[0].id;
				eval_perc = $("#"+id_acmp).text().trim().length>0||$("#"+id_acmp).find("img").length>0;
				} else {
					eval_perc = true;
				}
				


				//if(eval_perc){
					if(eval_perc || (clic_en_per[numero_arreglo_maspersonajeactual]==undefined||clic_en_per[numero_arreglo_maspersonajeactual]==null&&over_en_per[numero_arreglo_maspersonajeactual]==undefined||over_en_per[numero_arreglo_maspersonajeactual]==null)){

						clic_btnpersonaje();
						out_btnpersonaje();
						parent.instruccion_especial2.visible = true;
						parent.instruccion_especial2.alpha = 1;
						parent.instruccion_especial2.x = 1120;
					//	parent.instruccion_especial2.y = 540;
						x_final_instrperint = 1160;
						parent.instruccion_especial2.x = x_final_instrperint;
						parent.instruccion_especial2.y = parent.y_instruccionper;


						//console.log("hkkjh")
						parent.document.getElementById("txt_ie2").innerHTML = "<div style='width:auto; padding:0px 0; line-height:18px'><span class='simbolos'>"+parent.icono_check+"</span></div>";

					} else {
						if(version_personaje==1){
							createjs.Tween.get(audio_btnoff_per1,{override:true}).to({alpha:0},velocidad_lenta*1);
						createjs.Tween.get(audio_btnon_per1,{override:true}).to({alpha:0},velocidad_lenta*1);
						createjs.Tween.get(audio_btnclico_per1,{override:true}).to({alpha:1},velocidad_lenta*0.2);
						createjs.Tween.get(audio_btnclicof_per1,{override:true}).to({alpha:0},velocidad_lenta*1);
						} else if(version_personaje==2){
							createjs.Tween.get(audio_btnoff_per2,{override:true}).to({alpha:0},velocidad_lenta*1);
						createjs.Tween.get(audio_btnon_per2,{override:true}).to({alpha:0},velocidad_lenta*1);
						createjs.Tween.get(audio_btnclico_per2,{override:true}).to({alpha:1},velocidad_lenta*0.2);
						createjs.Tween.get(audio_btnclicof_per2,{override:true}).to({alpha:0},velocidad_lenta*1);
						} else if(version_personaje==3){
							createjs.Tween.get(audio_btnoff_per3,{override:true}).to({alpha:0},velocidad_lenta*1);
						createjs.Tween.get(audio_btnon_per3,{override:true}).to({alpha:0},velocidad_lenta*1);
						createjs.Tween.get(audio_btnclico_per3,{override:true}).to({alpha:1},velocidad_lenta*0.2);
						createjs.Tween.get(audio_btnclicof_per3,{override:true}).to({alpha:0},velocidad_lenta*1);
						} else if(version_personaje==4){
							createjs.Tween.get(audio_btnoff_per3,{override:true}).to({alpha:0},velocidad_lenta*1);
						createjs.Tween.get(audio_btnon_per3,{override:true}).to({alpha:0},velocidad_lenta*1);
						createjs.Tween.get(audio_btnclico_per3,{override:true}).to({alpha:1},velocidad_lenta*0.2);
						createjs.Tween.get(audio_btnclicof_per3,{override:true}).to({alpha:0},velocidad_lenta*1);
						}


						
					}
				control_flechas(numero_arreglo_maspersonajeactual,"mas_personaje");

				} else {
					////CONTROL DE FLECHAS
					
					
					if (tipo == "tipoA" || tipo == "tipo1" || (cantidad_descargas==0 && cantidad_masinfo==0 && cantidad_clics==0 && cantidad_zoom==0 && cantidad_circulos==0 && cantidad_sensibles==0 && cantidad_maspersonaje==0 && cantidad_videos==0 && cantidad_audios==0)){
					
						
						//suma_total();
						


						setTimeout(function(){ 
					
					//parent.document.getElementById("flecha_abajo").style.visibility = "visible";
					//contenedores_circulos_menu[znThisPage].

					//parent.contenedores_circulos_menu[parent.znThisPage]
					control_animacion_pantalla_final = true;
					if(tipo=="cuestionario"){
						$(".inicia_cuestionario").fadeIn("slow");

					} else {
						suma_total();
					}
					if(parent.contenedores_circulos_menu.length>1){
                                                if(parent.znThisPage==1&&parent.estados_numeros[parent.znThisPage+1].val=="cerrado"){
                                                        
                                                        parent.numerosVistos();
                                                }
                                        }
					
					}, velocidad_lenta);

					}

					
							
					//suma_total();
					if (tipo != "tipo1" && tipo != "solo_video" && tipo != "tipoA"){
						cerrar_personaje();

					};
				}
				

				
			} 
		///PALABRAS CLAVE

		/*		

		if(posicion_audio > duracion_audio-110){
			for (i = 0; i < textos_clave.length; i++) { 
				palabras_claves_activadas[i].val = false;
			}
		}
		

		
			if(iniciar_claves){
			
			iniciar_claves = false;
			


			for (i = 0; i < textos_clave.length; i++) { 



				condicion_textos = (textos_clave[i]<=posicion_audio &&  posicion_audio < textos_clave[i]+velocidad_lenta*1.3)
				//condicion_pausas = (pausas_audio[0][i]<=posicion_audio);

				//console.log(posicion_audio,pausas_audio[0][i])

				if (condicion_textos && palabras_claves_activadas[i].val == false) {

					palabras_claves_activadas[i].val = true;
					//azar_textos_clave = Math.floor((Math.random() * 10) + 1);
					//azar_textos_clave2 = Math.floor((Math.random() * 10) + 1);

					//textos_clave_totales = []

				
					//var var_texto_clave = document.getElementById("clave"+i);
					
					//var texto_clave = new createjs.DOMElement(var_texto_clave);
					
					total_textos_clave[i].visible = true;
					total_textos_clave[i].alpha = 0;
					
					
					//document.getElementById("clave"+i).style.visibility = "visible";


					
						//bounds_anterior = document.getElementById("clave"+(i-1)).getBoundingClientRect();
						//y_actual = bounds_anterior.top + bounds_anterior.height + margen_abajo;
					if (textos_clave.length == 1){
					y_actual = contenedor_iaudio.y + bounds_contenedor_audio.height + 10;
					total_textos_clave[i].y = y_actual;
					} else {
					y_actual =  (div_total * (i+1)) + y_inicial;
					total_textos_clave[i].y = y_actual;

					if(i>0){
					alto_clave_anterior = document.getElementById("clave"+(i-1)).clientHeight;
					top_clave_anterior = total_textos_clave[i-1].y;
					
						if(y_actual<=top_clave_anterior+alto_clave_anterior){
							total_textos_clave[i].y = top_clave_anterior+alto_clave_anterior + div_total/textos_clave.length-1;
					 	}
					}
					
					

					}


					//console.log(y_actual);
					createjs.Tween.get(total_textos_clave[i]).to({alpha:1},velocidad_lenta);
					

					if (x_personaje==930) {
						
						if (y_actual < contenedor_iaudio.y + bounds_contenedor_audio.height){
						
						x_clave_final = 20;
						x_clave_inicial = x_clave_final + 70;
						total_textos_clave[i].x = x_clave_inicial;
						//console.log(x_iaudio,bounds_contenedor_audio.width)
						document.getElementById("clave"+i).style.width = x_iaudio-bounds_contenedor_audio.width-x_clave_final-10+"px";
						//document.getElementById("clave"+i).style.border = "1px solid red"
						createjs.Tween.get(total_textos_clave[i]).to({x:x_clave_final},velocidad_lenta);

						//total_textos_clave[i].x = x_contenedor_iaudio - bounds_contenedor_audio.width - 385;
			 
						} else {
						
						x_clave_final = 100;//contenedor_personaje.x - bounds_personaje.width - 400 - 10;
						x_clave_inicial = x_clave_final + 70;
						total_textos_clave[i].x = x_clave_inicial;
						
						document.getElementById("clave"+i).style.width = x_iaudio-x_clave_final+"px";
						//document.getElementById("clave"+i).style.border = "1px solid red"
						createjs.Tween.get(total_textos_clave[i]).to({x:x_clave_final},velocidad_lenta);
						}
					} else {
						
						if (y_actual < contenedor_iaudio.y + bounds_contenedor_audio.height){
						

						x_clave_final = contenedor_iaudio.x+bounds_contenedor_audio.width+10;
						x_clave_inicial = x_clave_final - 70;
						total_textos_clave[i].x = x_clave_inicial;
						document.getElementById("clave"+i).style.width = ancho_canvas - x_clave_final-2+"px";
						//document.getElementById("clave"+i).style.border = "1px solid red"
						createjs.Tween.get(total_textos_clave[i]).to({x:x_clave_final},velocidad_lenta);
						
						//total_textos_clave[i].x = x_contenedor_iaudio + bounds_contenedor_audio.width;
						} else {
						
						x_clave_final = x_iaudio;
						x_clave_inicial = x_clave_final - 70;
						total_textos_clave[i].x = x_clave_inicial;
						document.getElementById("clave"+i).style.width = ancho_canvas-x_clave_final-2+"px";
						//document.getElementById("clave"+i).style.border = "1px solid red"
						createjs.Tween.get(total_textos_clave[i]).to({x:x_clave_final},velocidad_lenta);
						
						}
					}
		
					//break;
				
				} else {
					//document.getElementById("clave"+i).style.visibility = "hidden";
				}
						
			}

			setTimeout(function(){
					iniciar_claves = true;
				}, 5);


			}
		*/

		///CABEZA
			//////ACA PERSOBAJE

		
		if(iniciar_cabeza){
			iniciar_cabeza = false;
			setTimeout(function(){
				rotacion_nueva_cabeza_per1 = rotaciones_cabezas[Math.floor(Math.random()*rotaciones_cabezas.length)];
				createjs.Tween.get(contenedor_rostro_per1).to({rotation:rotacion_nueva_cabeza_per1},velocidad_media);	
				//createjs.Tween.get(contenedor_rostro_per1).to({rotation:rotacion_nueva_cabeza_per1},velocidad_media);	
				iniciar_cabeza = true;
				tiempo_cabeza_actual2 = tiempo_cabeza_actual;

				
				//if (tiempo_cabeza_actual2 == tiempo_cabeza_actual){
					tiempo_cabeza_actual = tiempos_cabeza[Math.floor(Math.random()*tiempos_cabeza.length)];
				//}

			}, tiempo_cabeza_actual);


			setTimeout(function(){
				rotacion_nueva_cabeza_per2 = rotaciones_cabezas[Math.floor(Math.random()*rotaciones_cabezas.length)];
				createjs.Tween.get(contenedor_rostro_per2).to({rotation:rotacion_nueva_cabeza_per2},velocidad_media);	
				//createjs.Tween.get(contenedor_rostro_per2).to({rotation:rotacion_nueva_cabeza},velocidad_media);	
				iniciar_cabeza = true;
				tiempo_cabeza_actual2 = tiempo_cabeza_actual;

				
				//if (tiempo_cabeza_actual2 == tiempo_cabeza_actual){
					tiempo_cabeza_actual = tiempos_cabeza[Math.floor(Math.random()*tiempos_cabeza.length)];
				//}

			}, tiempo_cabeza_actual);

			setTimeout(function(){
				rotacion_nueva_cabeza_per3 = rotaciones_cabezas[Math.floor(Math.random()*rotaciones_cabezas.length)];
				createjs.Tween.get(contenedor_rostro_per3).to({rotation:rotacion_nueva_cabeza_per3},velocidad_media);	
				//createjs.Tween.get(contenedor_rostro_per2).to({rotation:rotacion_nueva_cabeza},velocidad_media);	
				iniciar_cabeza = true;
				tiempo_cabeza_actual2 = tiempo_cabeza_actual;

				
				//if (tiempo_cabeza_actual2 == tiempo_cabeza_actual){
					tiempo_cabeza_actual = tiempos_cabeza[Math.floor(Math.random()*tiempos_cabeza.length)];
				//}

			}, tiempo_cabeza_actual);


			setTimeout(function(){
				rotacion_nueva_cabeza_per4 = rotaciones_cabezas[Math.floor(Math.random()*rotaciones_cabezas.length)];
				createjs.Tween.get(contenedor_rostro_per4).to({rotation:rotacion_nueva_cabeza_per4},velocidad_media);	
				//createjs.Tween.get(contenedor_rostro_per2).to({rotation:rotacion_nueva_cabeza},velocidad_media);	
				iniciar_cabeza = true;
				tiempo_cabeza_actual2 = tiempo_cabeza_actual;

				
				//if (tiempo_cabeza_actual2 == tiempo_cabeza_actual){
					tiempo_cabeza_actual = tiempos_cabeza[Math.floor(Math.random()*tiempos_cabeza.length)];
				//}

			}, tiempo_cabeza_actual);
		}
		

		if(posicion_audio>duracion_audio-3000 && !animacion_final_brazos){
			
					animacion_final_brazos = true;

					if(!posturas_der[azar_mano_der].mano_ocupada){
						azar_mano_der = Math.floor((Math.random() * 2 + 1));
					}
					if(!posturas_iz[azar_mano_iz].mano_ocupada){
						azar_mano_iz = Math.floor((Math.random() * 2 + 1));
					}

					azar_mov_brazos_der = 0;
					azar_mov_antebrazos_der = 0;
					azar_mov_brazos_iz = 0;
					azar_mov_antebrazos_iz = 0;
					
			posicionesBrazos();
				

		}
		

		///BRAZOS
		if(iniciar_movimiento_brazos){
			iniciar_movimiento_brazos = false;


			//////ACA PERSOBAJE
			setTimeout(function(){
				rotacion_nueva_cabeza_per1 = rotaciones_cabezas[Math.floor(Math.random()*rotaciones_cabezas.length)];
				rotacion_nueva_cabeza_per2 = rotaciones_cabezas[Math.floor(Math.random()*rotaciones_cabezas.length)];
				rotacion_nueva_cabeza_per3 = rotaciones_cabezas[Math.floor(Math.random()*rotaciones_cabezas.length)];
				rotacion_nueva_cabeza_per4 = rotaciones_cabezas[Math.floor(Math.random()*rotaciones_cabezas.length)];
				createjs.Tween.get(contenedor_rostro_per1).to({rotation:rotacion_nueva_cabeza_per1},velocidad_media);	
				createjs.Tween.get(contenedor_rostro_per2).to({rotation:rotacion_nueva_cabeza_per2},velocidad_media);	
				createjs.Tween.get(contenedor_rostro_per3).to({rotation:rotacion_nueva_cabeza_per3},velocidad_media);	
				createjs.Tween.get(contenedor_rostro_per4).to({rotation:rotacion_nueva_cabeza_per4},velocidad_media);	

				
				if(!animacion_final_brazos){
					
					azar_mov = Math.floor((Math.random() * 10))

					if(azar_mov>6){
			
						if(!posturas_der[azar_mano_der].mano_ocupada){
							azar_mano_der = Math.floor((Math.random() * 3));
						}
						if(!posturas_iz[azar_mano_iz].mano_ocupada){
							azar_mano_iz = Math.floor((Math.random() * 3));
						}

						azar_mov_brazos_der = 0;
						azar_mov_antebrazos_der = 0;
						azar_mov_brazos_iz = 0;
						azar_mov_antebrazos_iz = 0;
					} else {

						if(!posturas_der[azar_mano_der].fijo){
						azar_mov_brazos_der = Math.floor((Math.random() * rotaciones_brazos_sin_cambio.length));
						azar_mov_antebrazos_der = Math.floor((Math.random() * rotaciones_brazos_sin_cambio.length));
						
						azar_mov_brazos_der = rotaciones_brazos_sin_cambio[azar_mov_brazos_der];
						azar_mov_antebrazos_der = rotaciones_brazos_sin_cambio[azar_mov_antebrazos_der];
						} else {
							azar_mov_brazos_der = 0;
							azar_mov_antebrazos_der = 0;
						}
						if(!posturas_iz[azar_mano_iz].fijo){
						azar_mov_brazos_iz = Math.floor((Math.random() * rotaciones_brazos_sin_cambio.length));
						azar_mov_antebrazos_iz = Math.floor((Math.random() * rotaciones_brazos_sin_cambio.length));
						
						azar_mov_brazos_iz = rotaciones_brazos_sin_cambio[azar_mov_brazos_iz];
						azar_mov_antebrazos_iz = rotaciones_brazos_sin_cambio[azar_mov_antebrazos_iz];

						} else {
							azar_mov_brazos_iz = 0;
							azar_mov_antebrazos_iz = 0;
						}
					}						
				}
				
				iniciar_movimiento_brazos = true;
				posicionesBrazos();

				azar_duracion_movimientos = Math.floor((Math.random() * duraciones_movimientos.length))
				duracion_movimiento = duraciones_movimientos[azar_duracion_movimientos];
			}, duracion_movimiento);


			
		}
		
						
		
		
		/////LYPSINC
		if(iniciar){
			iniciar = false;
			


			for (i = 0; i < pausas_audio_nuevo[0].length; i++) { 

				if(i<pausas_audio_nuevo[0].length-1){
				condicion_pausas = (pausas_audio_nuevo[0][i]<=posicion_audio &&  posicion_audio < pausas_audio_nuevo[1][i])
				//condicion_pausas = (pausas_audio[0][i]<=posicion_audio);
				} else {
				condicion_pausas = posicion_audio >= pausas_audio_nuevo[0][i];
				}
				//console.log(posicion_audio,pausas_audio[0][i])
				//////ACA PERSOBAJE

				if (condicion_pausas) {
					for (ind = 0; ind < bocas_per1.length; ind++) { 
					bocas_per1[ind].alpha = 0;
					bocas_2_per1[ind].alpha = 0;
					}	
					bocas_per1[0].alpha = 1;
					bocas_2_per1[0].alpha = 1;

					for (ind = 0; ind < bocas_per2.length; ind++) { 
					bocas_per2[ind].alpha = 0;
					bocas_2_per2[ind].alpha = 0;
					}	
					bocas_per2[0].alpha = 1;
					bocas_2_per2[0].alpha = 1;

					for (ind = 0; ind < bocas_per3.length; ind++) { 
					bocas_per3[ind].alpha = 0;
					bocas_2_per3[ind].alpha = 0;
					}	
					bocas_per3[0].alpha = 1;
					bocas_2_per3[0].alpha = 1;


					for (ind = 0; ind < bocas_per4.length; ind++) { 
					bocas_per4[ind].alpha = 0;
					bocas_2_per4[ind].alpha = 0;
					}	
					bocas_per4[0].alpha = 1;
					bocas_2_per4[0].alpha = 1;

					break;
				
				} else {
					for (ind = 0; ind < bocas_per1.length; ind++) { 
					bocas_per1[ind].alpha = 0;
					bocas_2_per1[ind].alpha = 0;
					}	

					azar4 = Math.floor((Math.random() * 6) + 1);
				
					bocas_per1[azar4].alpha = 1;
					bocas_2_per1[azar4].alpha = 1;
					//console.log("chao")


					for (ind = 0; ind < bocas_per2.length; ind++) { 
					bocas_per2[ind].alpha = 0;
					bocas_2_per2[ind].alpha = 0;
					}	

					azar4 = Math.floor((Math.random() * 6) + 1);
				
					bocas_per2[azar4].alpha = 1;
					bocas_2_per2[azar4].alpha = 1;
					//console.log("chao")
					//console.log(azar4)

					for (ind = 0; ind < bocas_per3.length; ind++) { 
					bocas_per3[ind].alpha = 0;
					bocas_2_per3[ind].alpha = 0;
					}	

					azar4 = Math.floor((Math.random() * 6) + 1);
				
					bocas_per3[azar4].alpha = 1;
					bocas_2_per3[azar4].alpha = 1;
					//console.log("chao")
					//console.log(azar4)

					for (ind = 0; ind < bocas_per4.length; ind++) { 
					bocas_per4[ind].alpha = 0;
					bocas_2_per4[ind].alpha = 0;
					}	

					azar4 = Math.floor((Math.random() * 6) + 1);
				
					bocas_per4[azar4].alpha = 1;
					bocas_2_per4[azar4].alpha = 1;
				}
						
			}

			setTimeout(function(){
					iniciar = true;
				}, 82);


			}
		}





	}

	function movimientoBrazoIzquierdo(){

		if (numero_arreglo_rotaciones_iniciales_antebrazo_izquierdo == 0) {

			rotacion_nueva_antebrazo_izquierdo = rotaciones_antebrazo_izquierdo_0[Math.floor(Math.random()*rotaciones_antebrazo_izquierdo_0.length)];
			rotacion_nueva_brazo_izquierdo = rotaciones_brazo_izquierdo[Math.floor(Math.random()*rotaciones_brazo_izquierdo.length)];

			createjs.Tween.get(contenedor_antebrazo_mano_izquierda).to({rotation:rotacion_nueva_antebrazo_izquierdo},velocidad_lenta*1);	
			//createjs.Tween.get(contenedor_brazo_izquierdo).to({rotation:rotacion_nueva_brazo_izquierdo},velocidad_lenta*1.2);	
		} else if (numero_arreglo_rotaciones_iniciales_antebrazo_izquierdo == 1) {
			rotacion_nueva_antebrazo_izquierdo = rotaciones_antebrazo_izquierdo_1[Math.floor(Math.random()*rotaciones_antebrazo_izquierdo_1.length)];
			createjs.Tween.get(contenedor_antebrazo_mano_izquierda).to({rotation:rotacion_nueva_antebrazo_izquierdo},velocidad_lenta*1);	

		} else if (numero_arreglo_rotaciones_iniciales_antebrazo_izquierdo == 2) {
			rotacion_nueva_antebrazo_izquierdo = rotaciones_antebrazo_izquierdo_2[Math.floor(Math.random()*rotaciones_antebrazo_izquierdo_2.length)];
			createjs.Tween.get(contenedor_antebrazo_mano_izquierda).to({rotation:rotacion_nueva_antebrazo_izquierdo},velocidad_lenta*1);	
					
		}
	}

	function movimientoBrazoIzq(){

		movbrazos = [1,2,3,4,5,6,7,8,9,10];
		azar_movbrazos = movbrazos[Math.floor(Math.random()*movbrazos.length)];



		

		if(azar_movbrazos<4){
		createjs.Tween.get(contenedor_antebrazo_mano_izquierda,{override:true}).to({rotation:-80},velocidad_lenta*15, createjs.Ease.circInOut).call(movimientoBrazoIzq);	
		createjs.Tween.get(contenedor_manos_izquierdas,{override:true}).wait(velocidad_lenta).to({rotation:0},velocidad_lenta*6);	
		createjs.Tween.get(contenedor_brazo_izquierdo,{override:true}).to({rotation:-20},velocidad_lenta*3, createjs.Ease.circInOut);	
		createjs.Tween.get(mano_izquierda1,{override:true}).wait(velocidad_media).to({alpha:0},velocidad_rapida);	
		createjs.Tween.get(mano_izquierda2,{override:true}).to({alpha:1},velocidad_media);	
		createjs.Tween.get(mano_izquierda3,{override:true}).wait(velocidad_media).to({alpha:0},velocidad_rapida);	

		

		pos_bi1 = false;
		pos_bi2 = true;
		pos_bi3 = true;
		} else if(azar_movbrazos<7){
			


		createjs.Tween.get(contenedor_antebrazo_mano_izquierda,{override:true}).to({rotation:rotacion_antebrazo_izquierdo_actual},velocidad_lenta*2.4);	
		createjs.Tween.get(contenedor_manos_izquierdas,{override:true}).to({rotation:0},velocidad_rapida);	
		createjs.Tween.get(contenedor_brazo_izquierdo,{override:true}).to({rotation:rotacion_brazo_izquierdo},velocidad_lenta*2.4, createjs.Ease.circInOut);	
		createjs.Tween.get(mano_izquierda1,{override:true}).to({alpha:1},velocidad_media);	
		createjs.Tween.get(mano_izquierda2,{override:true}).wait(velocidad_media).to({alpha:0},velocidad_rapida);
		createjs.Tween.get(mano_izquierda3,{override:true}).wait(velocidad_media).to({alpha:0},velocidad_rapida);	

		setTimeout(function(){
			movimientoBrazoIzq();
		}, velocidad_lenta*10);

		

		pos_bi1 = true;
		pos_bi2 = false;
		pos_bi3 = true;
		
		} else if(azar_movbrazos<=10){
		createjs.Tween.get(contenedor_antebrazo_mano_izquierda,{override:true}).to({rotation:-100},velocidad_lenta*3, createjs.Ease.sineIn).call(movimientoBrazoIzq);	
		createjs.Tween.get(contenedor_manos_izquierdas,{override:true}).to({rotation:10},velocidad_lenta*2);	
		createjs.Tween.get(contenedor_brazo_izquierdo,{override:true}).to({rotation:20},velocidad_lenta*3, createjs.Ease.circInOut);	
		createjs.Tween.get(mano_izquierda1,{override:true}).wait(velocidad_lenta).to({alpha:0},velocidad_rapida);	
		createjs.Tween.get(mano_izquierda2,{override:true}).wait(velocidad_lenta).to({alpha:0},velocidad_rapida);	
		createjs.Tween.get(mano_izquierda3,{override:true}).to({alpha:1},velocidad_media);	

		

		pos_bi1 = false;
		pos_bi2 = false;
		pos_bi3 = true;
		
		}
	}

	function movimientoBrazoDer(){

		movbrazos2 = [1,2,3,4,5,6,7,8,9,10];
		azar_movbrazos2 = movbrazos[Math.floor(Math.random()*movbrazos.length)];



		

		if(azar_movbrazos2<4){
		createjs.Tween.get(contenedor_antebrazo_mano_derecha,{override:true}).to({rotation:-80},velocidad_lenta*15, createjs.Ease.circInOut).call(movimientoBrazoDer);	
		createjs.Tween.get(contenedor_manos_derecha,{override:true}).wait(velocidad_lenta).to({rotation:0},velocidad_lenta*6);	
		createjs.Tween.get(contenedor_brazo_derecho,{override:true}).to({rotation:-60},velocidad_lenta*2, createjs.Ease.circInOut);	
		createjs.Tween.get(mano_derecha1,{override:true}).wait(velocidad_media).to({alpha:0},velocidad_rapida);	
		createjs.Tween.get(mano_derecha2,{override:true}).to({alpha:1},velocidad_media);	
		createjs.Tween.get(mano_derecha3,{override:true}).wait(velocidad_media).to({alpha:0},velocidad_rapida);	

		

		pos_bd1 = false;
		pos_bd2 = true;
		pos_bd3 = true;
		} else if(azar_movbrazos2<7){
			


		createjs.Tween.get(contenedor_antebrazo_mano_derecha,{override:true}).to({rotation:rotacion_antebrazo_derecho_actual},velocidad_lenta*2.4);	
		createjs.Tween.get(contenedor_manos_derecha,{override:true}).to({rotation:0},velocidad_rapida);	
		createjs.Tween.get(contenedor_brazo_derecho,{override:true}).to({rotation:rotacion_brazo_derecho},velocidad_lenta*2.4, createjs.Ease.circInOut);	
		createjs.Tween.get(mano_derecha1,{override:true}).to({alpha:1},velocidad_media);	
		createjs.Tween.get(mano_derecha2,{override:true}).wait(velocidad_media).to({alpha:0},velocidad_rapida);
		createjs.Tween.get(mano_derecha3,{override:true}).wait(velocidad_media).to({alpha:0},velocidad_rapida);	

		setTimeout(function(){
			movimientoBrazoDer();
		}, velocidad_lenta*10);

		

		pos_bd1 = true;
		pos_bd2 = false;
		pos_bd3 = true;
		
		} else if(azar_movbrazos2<=10){
		createjs.Tween.get(contenedor_antebrazo_mano_derecha,{override:true}).to({rotation:-120},velocidad_lenta*4, createjs.Ease.sineIn).call(movimientoBrazoDer);	
		createjs.Tween.get(contenedor_manos_derecha,{override:true}).to({rotation:10},velocidad_lenta*2);	
		createjs.Tween.get(contenedor_brazo_derecho,{override:true}).to({rotation:-30},velocidad_lenta*4, createjs.Ease.circInOut);	
		createjs.Tween.get(mano_derecha1,{override:true}).wait(velocidad_lenta).to({alpha:0},velocidad_rapida);	
		createjs.Tween.get(mano_derecha2,{override:true}).wait(velocidad_lenta).to({alpha:0},velocidad_rapida);	
		createjs.Tween.get(mano_derecha3,{override:true}).to({alpha:1},velocidad_media);	

		

		pos_bd1 = false;
		pos_bd2 = false;
		pos_bd3 = true;
		
		}
	}

	/// Funciones Pantallas Tipo 3


		var x_titulos = 30;
		
		//y_titulos = 60;
		y_titulos = 95;

		if((parent.tipo_curso=="plataformas"||parent.tipo_curso=="isometrico")&&parent.znPages==1){
		y_titulos = 45;

		}

		y_titulos_arriba = y_titulos -15;
		y_titulos_abajo = y_titulos + 15;

		x_titulos_arriba = x_titulos -15;
		x_titulos_abajo = x_titulos + 15;

		tamano_fuente_titulos_grande = 35;
		tamano_fuente_titulos_pequeno = 30;

		var circulo_g = true;
		
		var x_circ_p = ancho_canvas - 110;
		var y_circ_p = 90;

		var inicio = true;

	primera_vez_cerrar = true;
	primera_vez_icono_personaje = true;

	activarFondo();


	var_equis.addEventListener("click", cerrar_personaje);


	if (parent.znThisPage<parent.pagina_superior || parent.completado){
		if(tipo != "tipoA" && !sin_personaje){
			fondo_p1.addEventListener("click", cerrar_personaje);
		}
		if(tipo!="tipo1"){
		var_globo_texto_personaje.addEventListener("click", cerrar_personaje);
		}

	}
		//fondo_p1.addEventListener("click", cerrar_personaje); ///BORRAR

	
	var activar_cerrar = true;
	var activar_cerrar2 = true;
	var bounds_indicador = indicador.getBounds();

	if(sin_personaje){
		cerrar_personaje();
	}



function activarFondo(){
	if (cantidad_circulos>0 && tipo == "tipo3"){

		if (!circulo_g){

			//document.getElementById("contenido_c"+numero_arreglo_circulos).style.zIndex = 0;

			
		}

		if (inicio) {
			
			//createjs.Tween.get(contenidos_circulos[0]).to({alpha:1},velocidad_media);	
			//document.getElementById("contenido_c0").style.zIndex = 0;
			
			for (i = 0; i < cantidad_circulos; i++) { 

				if(tipo == "tipo3"){
				//titulos_circulos[i].alpha = 1;
				}
				//contenedor_circulos[i].alpha = 1;
				if (tipo== "tipo4"){
					//contenedor_circulos[i].alpha = .6;
				}
			}
			if (tipo == "tipo4"){
			//contenedor_circulos[0].alpha = 1;
			}
			inicio = false;



		}

		
	} else {
			contenidos_circulos[0].alpha=0;

			fondo_p1.alpha = parent.opacidad_fondop1;;
		
		createjs.Tween.get(instruccion_circulos).to({alpha:0},velocidad_lenta);



			if(parent.znThisPage<parent.znAnterior){
				//contenidos_circulos[0].skewX=15;
				contenidos_circulos[0].y=parent.y_frame_final-200;

			
			} else {
				//contenidos_circulos[0].skewX=-15;
				contenidos_circulos[0].y=parent.y_frame_final+100;


			}
			//fondo_p1.alpha = 1;
			
			///DCRI
			//createjs.Tween.get(contenidos_circulos[0]).wait(velocidad_media).to({alpha:1,y:0},velocidad_lenta*7, createjs.Ease.elasticOut);	
			
			//createjs.Tween.get(contenidos_circulos[0]).to({x:0,skewX:0},velocidad_lenta*7, createjs.Ease.bounceOut);	

			//document.getElementById("contenido_c0").style.zIndex = 0;


			
		if(tipo == "arrastre" || tipo == "arrastre_unico" ){
			document.getElementById("contenido_c0").style.zIndex = 0; //OJO
		}

	}
	fondo_p1.addEventListener("click", clic_fondo_p1);
	if (tipo!="tipo1"){

	clic_icono_personaje2();

	}
	if (tipo != "arrastre" && tipo != "arrastre_unico"){
			fondo_p1.alpha = parent.opacidad_fondop1;

	setTimeout(function(){
	animacionCirculos(cantidad_circulos);
		
	}, velocidad_media);

	}

	//setTimeout(function(){
		//clic_audio();	
	//}, 1300);

}

function clic_fondo_p1(){

}



function animaElemPage(div_c,act_cont,t_c){
	//console.log("anima",div_c,act_cont,t_c)
	if(div_c=="#contenido_c"){
		$(div_c+act_cont+t_c).find("iframe").css("opacity","1");
		$(div_c+act_cont+t_c).find(".contador_preguntas").css("opacity","1");
	}
	if(div_c=="#txt_interno"||div_c=="#txt_internob"){
			$(div_c+act_cont+t_c).each(function(){
				$(this).addClass("reset_translate");
			});
	}
	if(div_c=="#txt_interno"){
		$(div_c+act_cont+t_c).find('.contenedor_clics_scroll_hz').addClass("reset_translate");
	}
		$(div_c+act_cont+t_c).find('>.item_cont>.xcl>.item_c').each(function(idx){
			//$(div_c+act_cont+t_c).find('.item_c').each(function(idx){
			azar_delaytrans_c = Math.floor((Math.random() * (delay_transcont.length)));
			//$('#contenido_c'+act_cont+t_c).find(".item_c").delay(delay_transcont[azar_delaytrans_c]).queue(function(){
	    		$(this).addClass("reset_translate");
			//});
		});
		
		$(div_c+act_cont+t_c).find('.enunciado_vf').each(function(idx){
	    	$(this).addClass("reset_translate");
		});
		
		$(div_c+act_cont+t_c).find('.verdadero').removeClass("scale3").addClass("scale1");
		$(div_c+act_cont+t_c).find('.falso').removeClass("scale3").addClass("scale1");

		$(div_c+act_cont+t_c).find('.opcion').removeClass("scale3").addClass("scale1");
		
		$(div_c+act_cont+t_c).find('.celda_crucigrama_cont').each(function(idx){
	    	$(this).addClass("reset_translate");
		});
		
		$(div_c+act_cont+t_c).find('.enunciado').each(function(idx){
	    	$(this).addClass("reset_translate");
		});
		$(div_c+act_cont+t_c).find('.opcion_preg').each(function(idx){
	    	$(this).addClass("reset_translate");
		});
		$(div_c+act_cont+t_c).find('.th_decora').each(function(idx){
	    	$(this).addClass("reset_translate");
		});
		$(div_c+act_cont+t_c).find('.td_decora').each(function(idx){
	    	$(this).addClass("reset_translate");
		});

		$(div_c+act_cont+t_c).find('code').each(function(idx){
	    	$(this).addClass("reset_translate");
		});


		//$("#contenido_c"+act_cont+t_c).find('.resaltado_especial').delay(delay_anima).queue(function(){
		$(div_c+act_cont+t_c).find('.resaltado_especial').removeClass("scale6").addClass("scale1");
		//});

		//$("#contenido_c"+act_cont+t_c).find('.resaltado_especial2').delay(delay_anima).queue(function(){
		$(div_c+act_cont+t_c).find('.resaltado_especial2').removeClass("scale3").addClass("scale1");
		//});
		
		$(div_c+act_cont+t_c).find('.lista_vinetas').find("td").each(function(idx){
			//$(this).delay(40*(idx+1)).queue(function(){
				$(this).removeClass("scale3 "+txt_translate_contenido).addClass("reset_translate2");
	      	//});
		});

		$(div_c+act_cont+t_c).find('.vineta').each(function(){
			$(this).removeClass("scale3" +txt_translate_contenido).addClass("reset_translate2");
		});


		//$("#contenido_c"+act_cont+t_c).find('video').delay(delay_anima).queue(function(){
		//$("#contenido_c"+act_cont+t_c).find('video').removeClass("scale1_2").addClass("scale1");
		//});

		
		//$("#contenido_c"+act_cont+t_c).find('video').delay(delay_anima).queue(function(){
		$(div_c+act_cont+t_c).find('img').removeClass("scale2").addClass("scale1");
		$(div_c+act_cont+t_c).find('video').removeClass("scale5").addClass("scale1");
		$(div_c+act_cont+t_c).find('video').removeClass("scale5").addClass("scale1");

      	//});

		//$("#contenido_c"+act_cont+t_c).find('.instruccion_interna').delay(delay_anima).queue(function(){
		$(div_c+act_cont+t_c).find('.instruccion_interna').removeClass("t_n").addClass("reset_translate2");
      	//});

      	//$("#contenido_c"+act_cont+t_c).find('.cont_descarga').delay(delay_anima).queue(function(){
      	$(div_c+act_cont+t_c).find('.cont_descarga').removeClass("t_n").addClass("reset_translate");
      	//});	
      	$(div_c+act_cont+t_c).find('.cont_zoom').removeClass("t_n").addClass("reset_translate");

      	//$("#contenido_c"+act_cont+t_c).find('.icono_graf').delay(delay_anima).queue(function(){
      	$(div_c+act_cont+t_c).find('.icono_graf').removeClass("t_s").addClass("reset_translate");
      	//});
      	
      	//$("#contenido_c"+act_cont+t_c).find('.icono_graf_visto').delay(delay_anima).queue(function(){
      	$(div_c+act_cont+t_c).find('.icono_graf_visto').removeClass("t_s").addClass("reset_translate2");
      	//});	

      	//console.log(mas_en_circ,mas_en_circ[act_cont],act_cont)
      //	console.log(div_c+act_cont+t_c,$(div_c+act_cont+t_c).find('[id^=masinfo]').length)
      	if($(div_c+act_cont+t_c).find('[id^=masinfo]').length>0){
				
      		
      			if(!$(div_c+act_cont).find('[id^=masinfo]').hasClass("boton_masinfox")){
			
					idmi = $(div_c+act_cont).find('[id^=masinfo]').attr('id');
					idmi = idmi.replace("masinfo", "");

					createjs.Tween.get(total_masinfo[idmi],{override:true}).wait(delay_anima).to({y:y_botones_mas+5},velocidad_lenta,createjs.Ease.elasticOut);	
					createjs.Tween.get(total_texto_masinfo[idmi],{override:true}).wait(delay_anima/3).to({x:x_botones + 10,alpha:1},velocidad_lenta*2);	
			}
			
		}

		$(div_c+act_cont+t_c).find('.negrilla_sensible').each(function(){
			//$(this).addClass("reset_translate");
			$(this).removeClass("scale8").addClass("scale1");

		});
		$(div_c+act_cont+t_c).find('.negrilla_sensible2').each(function(){
			//$(this).addClass("reset_translate");
			$(this).removeClass("scale8").addClass("scale1");

		});
		$(div_c+act_cont+t_c).find('.negrilla').each(function(){
			$(this).removeClass("scale8").addClass("scale1");
		}); 

		if(tipo!="tipo3"){
			setTimeout(function(){ 
				if (cantidad_maspersonaje>0&&tipo!="tipo2"&&tipo!="tipo3"){
					if(val_mas_personajes[0].val==true){
					document.getElementById("contenido_c0").style.zIndex = -1;		
					} else {
					document.getElementById("contenido_c0").style.zIndex = 0;		

					}

				} else {
					document.getElementById("contenido_c0").style.zIndex = 0;		

				}

				if(tipo=="arrastre"&&!lee_pos){
					lee_pos = true;
					actualizaPosOpcArr()
				}
			}, duracion_anima*1.01);

		}

		
		
}

function activaBtnCirc(){
	anima_btncirc = false;
}

function cerrar_personaje(){

	if(parent.tipo_curso == "plataformas"){
		/*for(i = 0; i < suelos_escenarios.length; i++){
			createjs.Tween.get(suelos_escenarios[i],{override:true}).wait(velocidad_media).to({alpha:1},velocidad_lenta);

		}*/

		cae_inicial = true;
		createjs.Tween.get(contenedor_juego,{override:true}).wait(velocidad_media).to({alpha:1},velocidad_lenta);
		//createjs.Tween.get(contenedor_suelos,{override:true}).wait(velocidad_media).to({alpha:1},velocidad_lenta);
		//createjs.Tween.get(contenedor_plataformas,{override:true}).wait(velocidad_media).to({alpha:1},velocidad_lenta);

		

		per_game.y = y_personaje_juego-alto_salto_inicial*15;
		//salta_personaje = true;
		//avanza_personaje = true;
		//setTimeout(function () {
			cae_personaje = true;
			createjs.Tween.get(per_game,{override:true}).wait(velocidad_lenta).to({alpha:1},velocidad_lenta);
			pausa_game = false;
		//}, 1000);
	

		///SPCONTROL
		//$(".inst_avanza").fadeOut(0);
		if(parent.dispositivo_movil){
			$("#boton_sp").delay(parent.velocidad_lenta*2).fadeIn(velocidad_media);
			$("#controles_sp").delay(parent.velocidad_lenta*2).fadeIn(velocidad_media);
			$(".inst_navega_sf").delay(parent.velocidad_lenta*2).fadeIn(velocidad_media);
			
		} else {
			//$(".inst_avanza").delay(parent.velocidad_lenta*3).fadeIn(velocidad_media);
			//$(".inst_interact").delay(parent.velocidad_lenta*2).fadeIn();
		}


		




	}
	if(parent.tipo_curso == "isometrico" || parent.tipo_curso=="plataformas"){
    	parent.$(".cubre_imgfondo").removeClass("cubre_imgfondoact");
    }
	if(parent.tipo_curso == "isometrico"){
		//parent.$(".cubre_imgfondo").css("background-color","rgba(255,255,255,0)");
    	//parent.$(".cubre_imgfondo").removeClass("cubre_imgfondoact");
    	if(parent.znThisPage<parent.pagina_superior){
    		console.log("visible next")
			flecha_next.visible = true;

			createjs.Tween.get(flecha_next,{override:true}).wait(velocidad_media).to({scaleX:1,scaleY:1},velocidad_lenta*4,createjs.Ease.elasticOut);

    	}
    	if(parent.znThisPage!=1){
			flecha_last.visible = true;

			createjs.Tween.get(flecha_last,{override:true}).wait(velocidad_media).to({scaleX:1,scaleY:1},velocidad_lenta*4,createjs.Ease.elasticOut);
		}

	}

	if((parent.completado||parent.znThisPage<parent.pagina_superior)&&tipo=="cuestionario"){

		$(".inicia_cuestionario").fadeIn("slow");
	}

	////anima_btncirc = true;
	anima_btncirc = false;
	
	if(parent.con_sonidoclic){
									parent.audio_clic.play();
								}

	if(tipo=="selecciones"||tipo=="arrastre"||tipo=="vf"||tipo=="arrastre_txt2"||tipo=="arrastre_txt_varios"){
	

		if(parent.cantidad_intentos_act>0){
	

		$(".txt_intentosact").delay(400).fadeIn("slow");
		}
	}


	if (cantidad_descargas==0 && cantidad_masinfo==0 && cantidad_clics==0 && cantidad_zoom==0 && cantidad_circulos==0 && cantidad_sensibles==0 && cantidad_maspersonaje==0 && cantidad_videos==1 && tipo == "tipo2"){
			var_video = document.getElementById("video"+0);
						var_video.play();
						$(".cubre_video").fadeOut();
		}

		if (cantidad_descargas==0 && cantidad_masinfo==0 && cantidad_clics==0 && cantidad_zoom==0 && cantidad_circulos==0 && cantidad_videos==0 && tipo == "tipo2"){
			if($("#contenido_c0").find("audio").length==1){
					setTimeout(function () {
					$("audio")[0].play();
				}, 500);
			}
				
		}
	if(parent.tipo_curso!="plataformas"){
		if (cantidad_circulos>0 && tipo=="tipo3" && !personaje_cerrado){
			for (i = 0; i < cantidad_circulos; i++) { 
			contenedor_circulos[i].scaleX = 0
			contenedor_circulos[i].scaleY = 1
			if(i<cantidad_circulos-1){
				createjs.Tween.get(contenedor_circulos[i],{override:true}).wait(velocidad_media*(i+0.3)).to({scaleX:scale_circulos_grandes_no_over,scaleY:scale_circulos_grandes_no_over,skewX:0},velocidad_lenta*1.5, createjs.Ease.elasticOut);
			} else if(i==cantidad_circulos-1){
				createjs.Tween.get(contenedor_circulos[i],{override:true}).wait(velocidad_media*(i+0.3)).to({scaleX:scale_circulos_grandes_no_over,scaleY:scale_circulos_grandes_no_over,skewX:0},velocidad_lenta*1.5, createjs.Ease.elasticOut).call(activaBtnCirc);
			}
			//if(parent.tipo_curso!="isometrico"){
			if(!posabs_btncirc){

				createjs.Tween.get(titulos_circulos[i],{override:true}).to({alpha:1},velocidad_media);			
			}
			}

		}
	} else {
		for (i = 0; i < cantidad_circulos; i++) { 
			contenedor_circulos[i].visible = false;
		}
	}


	if(tipo!="tipo3"){

		
		//createjs.Tween.get(contenidos_circulos[0]).wait(velocidad_media).to({alpha:1,y:0},velocidad_lenta*4, createjs.Ease.elasticOut).call(F);	
		contenidos_circulos[0].alpha = 1;
		contenidos_circulos[0].y = 0;

		if(tipo=="cuestionario"){
		$(".inicia_cuestionario").fadeOut();
		}
		setTimeout(function(){ 

		animaElemPage("#contenido_c",0,"");
		},10);
		//createjs.Tween.get(contenidos_circulos[0]).wait(velocidad_media).to({alpha:1,y:0},velocidad_lenta*1, createjs.Ease.backOut).call(animaElemPage);	


	}


	personaje_cerrado = true;
	
	if(parent.znThisPage==2&&parent.pagina_superior==2&&parent.con_instrucciones_nav){//

		if(instruccion_vista){
			continuaf = true;
		} else {
			continuaf = false;

			setTimeout(function(){ 
			parent.document.getElementById("instruccion_circ").style.visibility = "visible";	

			parent.audio_estrella.play();
		
			}, 800);
		}

		

	} else 	if(parent.znThisPage==3&&parent.pagina_superior==3&&parent.con_instrucciones_nav){//
		if(instruccion_vista){
			continuaf = true;
		} else {
			continuaf = false;

		setTimeout(function(){ 
			 parent.document.getElementById("instruccion_per").style.visibility = "visible";	
			parent.audio_estrella.play();
		
		}, 800);
		}
	} else 	if(parent.znThisPage==4&&parent.pagina_superior==4&&parent.con_instrucciones_nav){//
		if(instruccion_vista){
			continuaf = true;
		} else {
			continuaf = false;

		setTimeout(function(){ 
			 parent.document.getElementById("instruccion_clics").style.visibility = "visible";	
			parent.audio_estrella.play();
		
		}, 800);
	}

	} else {
		continuaf = true;
	}

	parent.cerrarMensaje();
	globo_texto_personaje.visible = false;

	//y_instr_actual = parent.instruccion_especial.y;
	//if(tipo!="tipo3"){
	//createjs.Tween.get(parent.instruccion_especial,{override:true}).to({alpha:0,y:y_instr_actual-20,visible:false},velocidad_media);
	//}
	//agregar_duracion = true;

			//if(clic_en_btnpersonaje||cantidad_maspersonaje==0){
				//createjs.Tween.get(parent.instruccion_especial,{override:true}).to({alpha:0},velocidad_media).to({visible:false},velocidad_rapida);
				y_instr_actual = parent.instruccion_especial.y;
				createjs.Tween.get(parent.instruccion_especial,{override:true}).to({alpha:0,y:y_instr_actual-20,visible:false},velocidad_media);
			//}
	//locucion.stop();
	if(parent.znThisPage==1 && num_modulo_act == "1"){
						//$("#instruccion_dinamica").fadeOut("slow");
		//if(una_vez_personaje){
			//una_vez_personaje = false;
			//parent.document.getElementById("instruccion_especial").style = "color: #FFFFFF;background-color:#15A399;";

			
			//parent.document.getElementById("instruccion_especial").style.maxHeight = "37px";
		
			//parent.document.getElementById("txt_ie").innerHTML = "<div style='width:630px; padding:7px 0; line-height:18px'>Cuando finalice la lectura de esta pantalla, "+parent.tx_pulsamay+" en el número 2 para continuar.</div>";
			
			//parent.document.getElementById("s1").innerHTML = "";
			//parent.document.getElementById("s2").innerHTML = "<img src='images/flecha.gif' class='flecha_down'>";
			
			//parent.instruccion_especial.x = 250;
			//parent.instruccion_especial.y = 400;
			//parent.instruccion_especial.visible = true;
			
			//createjs.Tween.get(parent.instruccion_especial,{override:true}).to({alpha:1,y:20},velocidad_media);

			//createjs.Tween.get(parent.instruccion_especial2,{override:true}).to({alpha:0},velocidad_lenta).to({visible:false},velocidad_rapida);




		//	}		
	
	}

	if(continuaf){
	
	//var_titulo_pagina.style.width = "auto";
		//var_titulo_pagina.innerHTML = parent.znThisPage +".</span>" + "<p>"+parent.titulos_pantallas[parent.znThisPage-1]+ "</p>";

	var_titulo_pagina.innerHTML = parent.znThisPage +".</span>" + "<p>" + parent.titulos_pantallas[parent.znThisPage-1].replace("<br/>", " ") + "</p>";
	
		
	var_titulo_pagina.style.width = "auto";
	var_titulo_pagina.style.maxWidth = "1100px";
		
	createjs.Tween.get(titulo_pagina,{override:true}).to({x:x_titulo_final,y:y_titulo_final,scaleX:1,scaleY:1,skewX:1},velocidad_lenta);


	icono_personaje_activo = true;
	fondo_equis_activo = false;



	if(cantidad_circulos<1 || circulo_g){
		if(tipo=="arrastre" || tipo == "arrastre_unico"){
			y_titulo_contenido = 60;
		} else {
			y_titulo_contenido = 60;
		}
	if(parent.tipo_curso!="plataformas"){
		createjs.Tween.get(instruccion_circulos).to({alpha:1,y:y_titulo_contenido},velocidad_lenta*3, createjs.Ease.bounceInOut);
	} else {
		instruccion_circulos.y = y_titulo_contenido;
	}

	}

	if (cantidad_circulos>0 && tipo != "arrastre_unico" && tipo != "arrastre" && tipo !="crucigrama" && tipo != "vf" && tipo !="cuestionario" && tipo != "arrastre_txt2" && tipo != "arrastre_txt_varios" && tipo !="selecciones" && tipo != "arrastre_txt2" && tipo != "ruleta" && tipo != "varias_sel"){
		
		for (i = 0; i < contenidos_circulos.length; i++) { 
			document.getElementById("circ_btn"+i).style.zIndex = 1;

		}
	}
	if (cantidad_circulos>0 && tipo != "arrastre_unico" && tipo !="selecciones" && tipo != "ruleta" && tipo != "arrastre" && tipo !="crucigrama" && tipo != "vf" && tipo !="cuestionario" && tipo != "arrastre_txt_varios" && tipo != "arrastre_txt2" && tipo != "varias_sel" && !circulo_g){
		
		for (i = 0; i < contenidos_circulos.length; i++) { 
			if(contenidos_circulos[i].alpha == 1){
			document.getElementById("contenido_c"+i).style.zIndex = 1;
					
				}
		}
}


	
	//for (i = 0; i < textos_clave.length; i++) { 
		//createjs.Tween.get(total_textos_clave[i]).to({visible:false},velocidad_media);
		//total_textos_clave[i].visible = false;

	//}
			
	if (cantidad_masinfo>0){
					
			for (i = 0; i < cantidad_masinfo; i++) { 
				//contenidos_circulos_html_masinfo[i].style.zIndex = 1;
			}
		}



//////ACA PERSOBAJE

	for (i = 0; i < bocas_per1.length; i++) { 		
			bocas_per1[i].alpha = 0;
			bocas_2_per1[i].alpha = 0;
	}
	bocas_per1[0].alpha = 1;
	bocas_2_per1[0].alpha = 1;


	for (i = 0; i < bocas_per2.length; i++) { 		
			bocas_per2[i].alpha = 0;
			bocas_2_per2[i].alpha = 0;
	}
	bocas_per2[0].alpha = 1;
	bocas_2_per2[0].alpha = 1;

	for (i = 0; i < bocas_per3.length; i++) { 		
			bocas_per3[i].alpha = 0;
			bocas_2_per3[i].alpha = 0;
	}
	bocas_per3[0].alpha = 1;
	bocas_2_per3[0].alpha = 1;


	for (i = 0; i < bocas_per4.length; i++) { 		
			bocas_per4[i].alpha = 0;
			bocas_2_per4[i].alpha = 0;
	}
	bocas_per4[0].alpha = 1;
	bocas_2_per4[0].alpha = 1;


locucion.stop();
	


	

	if (tipo == "tipo5"){
		document.getElementById("zona_sensible0").style.visibility = "visible";	
		document.getElementById("zona_sensible0").style.opacity = 1;	
		document.getElementById("zona_sensible0").style.zIndex = 1;	
	}
	if (tipo == "tipo4")
		{
			fondo_grafico.alpha = 1;
			indicador.rotation = 0;
			indicador.x = contenedor_circulos[0].x + bounds_contenedor_circulo.width;
			indicador.y = contenedor_circulos[0].y + bounds_contenedor_circulo.height/2-20;
			createjs.Tween.get(contenidos_circulos[0]).to({alpha:1},velocidad_media);
			document.getElementById("contenido_c0").style.zIndex = 0;
			



		}

	if(tipo=="tipo2" || tipo == "tipo5" || tipo == "arrastre_unico" || tipo == "arrastre" || tipo =="crucigrama"  || tipo=="vf" || tipo == "varias_sel" || tipo =="selecciones" || tipo == "ruleta" || tipo =="cuestionario" || tipo=="arrastre_txt2" || tipo=="arrastre_txt_varios" || tipo=="sel_globos" || tipo == "arrastre_txt2"){
	

			if (activar_cerrar2 )
			{	
	

				activar_cerrar2 = false;
			/*
			 if(tipo=="tipo2" && cantidad_masinfo>0){

					numero_arreglo_masinfo = 0;
					numero_arreglo_masinfo_html = 0;
				}
			*/
	//console.log("!!!!!!!!!!!!!!",cantidad_circulos,cantidad_maspersonaje)
						 	
			 if((tipo=="tipo2" || tipo == "arrastre_unico" ||tipo=="arrastre"||tipo =="selecciones"|| tipo == "ruleta"|| tipo =="crucigrama"||tipo=="vf" || tipo == "varias_sel" || tipo =="cuestionario" ||tipo=="arrastre_txt_varios" || tipo == "arrastre_txt2") && cantidad_maspersonaje>0){
				//clic_btnpersonaje();

				//////ACA PERSOBAJE
				if(version_personaje==1){
			createjs.Tween.get(audio_btnoff_per1,{override:true}).to({alpha:1},velocidad_lenta*0.2);
				createjs.Tween.get(audio_btnon_per1,{override:true}).to({alpha:0},velocidad_lenta*1);
				createjs.Tween.get(audio_btnclico_per1,{override:true}).to({alpha:0},velocidad_lenta*1);
				createjs.Tween.get(audio_btnclicof_per1,{override:true}).to({alpha:0},velocidad_lenta*1);
				} else if(version_personaje==2){
					createjs.Tween.get(audio_btnoff_per2,{override:true}).to({alpha:1},velocidad_lenta*0.2);
				createjs.Tween.get(audio_btnon_per2,{override:true}).to({alpha:0},velocidad_lenta*1);
				createjs.Tween.get(audio_btnclico_per2,{override:true}).to({alpha:0},velocidad_lenta*1);
				createjs.Tween.get(audio_btnclicof_per2,{override:true}).to({alpha:0},velocidad_lenta*1);
				} else if(version_personaje==3){
				createjs.Tween.get(audio_btnoff_per3,{override:true}).to({alpha:1},velocidad_lenta*0.2);
				createjs.Tween.get(audio_btnon_per3,{override:true}).to({alpha:0},velocidad_lenta*1);
				createjs.Tween.get(audio_btnclico_per3,{override:true}).to({alpha:0},velocidad_lenta*1);
				createjs.Tween.get(audio_btnclicof_per3,{override:true}).to({alpha:0},velocidad_lenta*1);
				} else if(version_personaje==4){
				createjs.Tween.get(audio_btnoff_per4,{override:true}).to({alpha:1},velocidad_lenta*0.2);
				createjs.Tween.get(audio_btnon_per4,{override:true}).to({alpha:0},velocidad_lenta*1);
				createjs.Tween.get(audio_btnclico_per4,{override:true}).to({alpha:0},velocidad_lenta*1);
				createjs.Tween.get(audio_btnclicof_per4,{override:true}).to({alpha:0},velocidad_lenta*1);
				}
				
				clic_en_btnpersonaje = false;
				for (i = 0; i < total_mas_personajes.length; i++) { 

				createjs.Tween.get(total_mas_personajes[i],{override:true}).to({scaleX:0,scaleY:0,x:x_inicial_maspersonaje,y:y_inicial_maspersonaje},velocidad_media,createjs.Ease.circOut);
				
				}
				//locucion.stop();

				pausas_audio_nuevo = cantidad_audiop[0];

				

				locucion = createjs.Sound.play("sounds/audio"+parent.znThisPage+"_"+0+".mp3");
				locucion.stop();
				//duracion_actual = locucion.getDuration();
				//cant_pausas = pausas_audio_nuevo[0].length;
				//pausas_audio_nuevo[1][cant_pausas-1] = duracion_actual;

				//contenedor_btnpersonaje.x = 1;
				//contenedor_btnpersonaje.y = 1;
				//contenedor_btnpersonaje.alpha = 1;
				//contenedor_btnpersonaje.visible = true;

				//////ACA PERSOBAJE
				
				//parent.instruccion_especial.alpha = 0;
				if(tipo!="arrastre" && tipo != "arrastre_unico"&&tipo !="selecciones"&& tipo != "ruleta"&&tipo!="crucigrama"&&tipo!="vf"&& tipo != "varias_sel"&& tipo !="cuestionario"&&tipo!="arrastre_txt_varios"&&tipo != "arrastre_txt2"){
					parent.instruccion_especial2.visible = false;
					if(!parent.navega_lineal){
							apareceBtnPer();

						
					} else {
						if($("#contenido_c"+actual_circ+"_mp").attr('data-orden')==0){
							apareceBtnPer();
						}
					}

				if(parent.znThisPage<parent.pagina_superior||parent.completado){
							apareceBtnPer();

				}
					


				}
				

				parent.document.getElementById("instruccion_especial").style.maxHeight = "30px";
				parent.document.getElementById("instruccion_especial").style.zIndex = "-1";
				
				parent.instruccion_especial.x = 400;
				if(parent.znThisPage<parent.pagina_superior||parent.completado){
						parent.instruccion_especial2.y = parent.y_instruccionper;
					x_final_instrperint = 1160; 
					
					parent.instruccion_especial2.x = x_final_instrperint-50;
					parent.document.getElementById("txt_ie2").innerHTML = "<div style='width:auto; padding:0px 0; line-height:18px'><span class='simbolos'>"+parent.icono_check+"</span></div>";

				} else {
					parent.instruccion_especial2.y = parent.y_instruccionper;

					x_final_instrperint = 1115;
					parent.instruccion_especial2.x = x_final_instrperint-50;
					parent.document.getElementById("instruccion_especial2").style.zIndex="0";
					//parent.document.getElementById("instruccion_especial2").style.backgroundColor="transparent";
					
					parent.document.getElementById("txt_ie2").innerHTML = "<div style='width:auto; padding:0px 10px 0 0; line-height:20px;font-size:14px;display:block'>"+parent.tx_pulsamay+" aquí.</div> <div class='arrow animated bounceup2' style='width:auto; padding:0px 0; line-height:14px;font-size:14px;text-align:center;display:block'>"+parent.icono_indica_up+"</div>";


				}
			
				parent.document.getElementById("s3").innerHTML = "";
				parent.document.getElementById("s4").innerHTML = "";
			
				parent.instruccion_especial2.y = parent.y_instruccionper;
				if(tipo!="arrastre"&&tipo != "arrastre_unico"&&tipo!="selecciones"&& tipo != "ruleta"&&tipo!="crucigrama"&&tipo!="vf"&& tipo != "varias_sel"&& tipo !="cuestionario"&&tipo!="arrastre_txt_varios"&&tipo != "arrastre_txt2"){

				if(!parent.navega_lineal){

					parent.instruccion_especial2.visible = true;
				}
				createjs.Tween.get(parent.instruccion_especial2,{override:true}).to({alpha:1,x:x_final_instrperint},velocidad_lenta*2);
				}
				numero_arreglo_circulos = 0;

			}
			
			
				
			 //numero_arreglo_circulos = numero_arreglo_circulos_anterior;
				
				
			
				///OJO
				if(contenedor_circulos.length>0 && tipo != "arrastre_unico" && tipo != "arrastre" && tipo !="selecciones"&& tipo != "ruleta"&&tipo!="crucigrama"&& tipo != "vf"&& tipo != "varias_sel"&& tipo !="cuestionario"&&tipo!="arrastre_txt_varios"&&tipo != "arrastre_txt2") {


					indicador.x = contenedor_circulos[0].x + bounds_contenedor_circulo.width/4 + bounds_indicador.height/2;
					indicador.y = contenedor_circulos[0].y + bounds_contenedor_circulo.height/2 + 5;

					createjs.Tween.get(indicador).to({alpha:1},velocidad_lenta);

					createjs.Tween.get(contenidos_circulos[0]).to({alpha:1},velocidad_media);	

					document.getElementById("contenido_c0").style.zIndex = 0;


				} else {
						
						//createjs.Tween.get(contenidos_circulos[0]).to({alpha:1},velocidad_media);	
						
						//document.getElementById("contenido_c0").style.visibility = "visible";
						//document.getElementById("contenido_c0").style.marginTop = 150+"px";
						//if (activar_cerrar2 ){

						//document.getElementById("contenido_c0").style.zIndex = 0;
						

						//} else {
						//	document.getElementById("contenido_c0").style.zIndex = -1;

						//}

					}

			
			

			
			} else {
				//if (tipo!="arrastre" ){

					//	document.getElementById("contenido_c0").style.zIndex = 0;
				//		} else {
				//			document.getElementById("contenido_c0").style.zIndex = -1;

				//		}
			};




	}

	if (activar_cerrar){
		

		if (tipo == "tipo4") {
			//indicadores_visitados[0].alpha = 1;
			//indicador_seleccionado.x = contenedor_circulos[0].x;
			//indicador_seleccionado.y = contenedor_circulos[0].y;

			indicador_seleccionado.alpha = 1;
		}		
		
		icono_personaje.visible = false; ////
		//////ACA PERSOBAJE
		createjs.Tween.get(contenedor_personaje_per1,{override:true}).to({alpha:0},velocidad_lenta);
		createjs.Tween.get(contenedor_personaje_per2,{override:true}).to({alpha:0},velocidad_lenta);
		createjs.Tween.get(contenedor_personaje_per3,{override:true}).to({alpha:0},velocidad_lenta);
		createjs.Tween.get(contenedor_personaje_per4,{override:true}).to({alpha:0},velocidad_lenta);
	
		createjs.Tween.get(fondo_p1,{override:true}).to({alpha:0},velocidad_lenta);
		contenedor_iaudio.visible = false;
		createjs.Tween.get(contenedor_iaudio,{override:true}).to({alpha:0, visible: false},velocidad_lenta);
		createjs.Tween.get(equis,{override:true}).to({alpha:0, visible: false},velocidad_lenta);
		createjs.Tween.get(icono_personaje,{override:true}).to({alpha:1},velocidad_rapida);
		
		
		if (tipo == "arrastre" || tipo == "arrastre_unico"){

			//for (i = 0; i < cantidad_circulos; i++) { 
				//opciones[i].alpha = 1;
				//bounds_contenedor_opciones = [];
				//document.getElementById("contenido_c0").style.zIndex = 3; //OJO
			//}


			
			
		}
		

		
		
		/*
		if (tipo == "tipo5"){
			for (i = 0; i < contenedor_opciones.length; i++) { 
				console.log("HOLA")
								contenedor_opciones[i].alpha = 1;
				//bounds_contenedor_opciones = [];

			}
		}
		*/


			icono_play.alpha = 1;
			icono_stop.alpha = 0;
			audio_activo = true;


		setTimeout(function(){ 
			activar_cerrar = false;
		}, velocidad_lenta+20);
		}

		if (duracion_audio>0){

		locucion.stop();

		}

		
		}

	
		/*
		if (primera_vez_cerrar){	
		clic_icono_personaje();
		primera_vez_cerrar = false;
		}
		*/
	}

	function actualizaBoundsEnunciados(){

		for (i = 0; i < cantidad_circulos; i++) { 
				
				var bounds_enunciado = document.getElementById('enunciado'+i).getBoundingClientRect();
				bounds_enunciados[i] = bounds_enunciado;
				bounds_enunciados.push(bounds_enunciados[i]);

				x_enunciados=[]
				//var x_texto_enunciado = document.getElementById('enunciado'+i).offsetLeft - document.getElementById('enunciado'+i).scrollLeft + document.getElementById('enunciado'+i).clientLeft;
				x_enunciados[i] = bounds_enunciados[i].left;
				x_enunciados.push(x_enunciados[i]);

				


				y_enunciados=[]
				//var y_texto_enunciado = document.getElementById('enunciado'+i).offsetTop - document.getElementById('enunciado'+i).scrollTop + document.getElementById('enunciado'+i).clientTop+150;
				y_enunciados[i] = bounds_enunciados[i].top;
				y_enunciados.push(y_enunciados[i]);

			}

	}
	
	icono_personaje.addEventListener("click", clic_icono_personaje);
	
	
	
	function clic_icono_personaje (){
		globo_texto_personaje.visible = true;
		createjs.Tween.get(titulo_pagina,{override:true}).to({x:x_titulo_inicial,y:y_titulo_inicial,scaleX:1.3,scaleY:1.3,skewX:1},velocidad_lenta);

		animacion_final_brazos = false;

		if(icono_personaje_activo){
		fondo_p1.addEventListener("click", cerrar_personaje);

		clic_audio();
		icono_personaje_activo = false;
		fondo_equis_activo = true;



		for (i = 0; i < textos_clave.length; i++) { 
		//createjs.Tween.get(total_textos_clave[i]).to({visible:false},velocidad_media);
				//total_textos_clave[i].visible = true;

		}
		
		if (cantidad_masinfo>0){
					
			for (i = 0; i < cantidad_masinfo; i++) { 
				contenidos_circulos_html_masinfo[i].style.zIndex = -1;
			}
		}



		if (cantidad_circulos>0 && tipo != "arrastre_unico" && tipo != "arrastre"&&tipo!="crucigrama" && tipo != "vf" && tipo != "varias_sel"&& tipo !="selecciones"&& tipo != "ruleta"&& tipo !="cuestionario" && tipo != "arrastre_txt_varios"&&tipo != "arrastre_txt2"){
		
		for (i = 0; i < contenidos_circulos.length; i++) { 
			document.getElementById("contenido_c"+i).style.zIndex = -1;
					
				}
		} else {
			document.getElementById("contenido_c0").style.zIndex = -1;
		}


		contenedor_iaudio.visible = false;
		
		//if(parent.znThisPage<parent.pagina_superior){
			//equis.visible = true;
			//createjs.Tween.get(equis,{override:true}).to({alpha:1},velocidad_lenta);
		//} 
		createjs.Tween.get(contenedor_personaje,{override:true}).to({alpha:1,x:x_personaje_final},velocidad_lenta);
		//createjs.Tween.get(contenedor_iaudio).to({alpha:1},velocidad_lenta);
		contenedor_iaudio.alpha = 0;
		
		///DCRI
		//createjs.Tween.get(fondo_p1,{override:true}).wait(velocidad_media).to({alpha:.8},velocidad_lenta);	
		if(tipo == "tipoA"){
		equis.visible = false;
		createjs.Tween.get(fondo_p1,{override:true}).wait(velocidad_media).to({alpha:parent.opacidad_fondop1},velocidad_lenta);	

			} else {
		equis.visible = true;
			createjs.Tween.get(equis,{override:true}).to({alpha:1},velocidad_lenta);
		createjs.Tween.get(fondo_p1,{override:true}).wait(velocidad_media).to({alpha:parent.opacidad_fondop1},velocidad_lenta);	
		}

		createjs.Tween.get(icono_personaje,{override:true}).to({alpha:0, visible:false,scaleY:0.8,scaleX:0.8},velocidad_lenta/100);	

			

		setTimeout(function(){ 
			activar_cerrar = true;
		}, velocidad_media/2);

		}
		
	}


	function clic_icono_personaje2 (){
		
		
		icono_personaje_activo = false;

		fondo_equis_activo = true;


		//for (i = 0; i < textos_clave.length; i++) { 
		//createjs.Tween.get(total_textos_clave[i]).to({visible:false},velocidad_media);
				//total_textos_clave[i].visible = true;

		//}
		
		if (cantidad_masinfo>0){
					
			for (i = 0; i < cantidad_masinfo; i++) { 
				contenidos_circulos_html_masinfo[i].style.zIndex = -1;
			}
		}



		if (cantidad_circulos>0 && tipo != "arrastre_unico" && tipo != "arrastre" &&tipo!="crucigrama"&& tipo != "vf" && tipo != "varias_sel"&& tipo !="selecciones"&& tipo != "ruleta"&& tipo !="cuestionario" && tipo != "arrastre_txt_varios"&&tipo != "arrastre_txt2"){
		
		for (i = 0; i < contenidos_circulos.length; i++) { 
					document.getElementById("contenido_c"+i).style.zIndex = -1;
					
				}
		} else {document.getElementById("contenido_c0").style.zIndex = -1;}


		contenedor_iaudio.alpha = 1;
		contenedor_iaudio.visible = true;
		
		if(parent.znThisPage<parent.pagina_superior || parent.completado){
			if(tipo != "tipoA" && !sin_personaje){
				equis.visible = true;
				createjs.Tween.get(equis,{override:true}).wait(velocidad_lenta*2).to({alpha:1},velocidad_lenta);
			} else {
				equis.visible = false;

			}
		} 
		//////ACA PERSOBAJE
		//console.log(parent.version_personaje)
		if(version_personaje==1){
			createjs.Tween.get(contenedor_personaje_per1).to({alpha:1},velocidad_lenta);
		createjs.Tween.get(contenedor_personaje_per1).to({x:x_personaje_final},velocidad_lenta*3);
		
		} else if(version_personaje==2){
		


			createjs.Tween.get(contenedor_personaje_per2).to({alpha:1},velocidad_lenta);
		createjs.Tween.get(contenedor_personaje_per2).to({x:x_personaje_final},velocidad_lenta*3);
		} else if(version_personaje==3){
			createjs.Tween.get(contenedor_personaje_per3).to({alpha:1},velocidad_lenta);
		createjs.Tween.get(contenedor_personaje_per3).to({x:x_personaje_final},velocidad_lenta*3);
		} else if(version_personaje==4){
			createjs.Tween.get(contenedor_personaje_per4).to({alpha:1},velocidad_lenta);
		createjs.Tween.get(contenedor_personaje_per4).to({x:x_personaje_final},velocidad_lenta*3);
		}
		
		
		
		//createjs.Tween.get(contenedor_iaudio).to({alpha:1},velocidad_lenta);
		createjs.Tween.get(contenedor_iaudio,{override:true}).to({x:x_iaudio_final,y:y_audio_final,alpha:1,scaleX:scale_iaudio,scaleY:0.8},velocidad_lenta*3, createjs.Ease.elasticInOut);
		
		num_modulo_act = parent.document.getElementById("numero_modulo").innerHTML;
		
		if(!personaje_cerrado){

		//if(parent.znThisPage>1){
		if(posicion_personaje_actual==2){
			
		
		
		parent.document.getElementById("instruccion_especial").style.maxHeight = "28px";
		parent.document.getElementById("instruccion_especial").style.zIndex = "2";
		//parent.document.getElementById("instruccion_especial").style.backgroundColor = "#E6E6E6";
		//parent.document.getElementById("instruccion_especial").style.color = "#0063A9";
		parent.document.getElementById("instruccion_especial").style.padding = "2px 25px 2px 10px";
		
		parent.document.getElementById("instruccion_especial").style.fontSize = "15px";
		
		parent.document.getElementById("txt_ie").innerHTML = " "+parent.tx_pulsamay+" en el botón de Play.";
		parent.document.getElementById("s1").innerHTML = "";
		parent.document.getElementById("s2").innerHTML = "<span class='arrow animated bounce' style='font-size:18px;margin-left:10px'>"+parent.icono_indica+" </span>";
		
		ancho_inst = parent.document.getElementById("instruccion_especial").clientWidth
		
		//parent.instruccion_especial.x = contenedor_iaudio.x-ancho_inst-0;// 350;//x_personaje_final - 660;
		//console.log(ancho_inst,"ancho_inst")
			if(!parent.con_menunumeros_v2){
				ancho_inst = parent.document.getElementById("instruccion_especial").clientWidth
				parent.instruccion_especial.y = 200;

			} else {
				parent.instruccion_especial.y = 240;
			}
		} else {

			parent.document.getElementById("instruccion_especial").style.maxHeight = "28px";
		
		parent.document.getElementById("instruccion_especial").style.zIndex = "2";
		//parent.document.getElementById("instruccion_especial").style.backgroundColor = "#E6E6E6";
		parent.document.getElementById("instruccion_especial").style.fontSize = "15px";
		parent.document.getElementById("instruccion_especial").style.padding = "0px 10px 2px 25px";

		
		//parent.document.getElementById("instruccion_especial").style.color = "#0063A9";

		

		parent.document.getElementById("txt_ie").innerHTML = " "+parent.tx_pulsamay+" en el botón de Play.";
		parent.document.getElementById("s1").innerHTML = "<span class='arrow animated bounce' style='font-size:18px;margin-right:5px'>"+parent.icono_indica+" </span>";
		parent.document.getElementById("s2").innerHTML = "";
			ancho_inst = parent.document.getElementById("instruccion_especial").clientWidth
			if(!parent.con_menunumeros_v2){
				//parent.instruccion_especial.x = x_iaudio_final+contenedor_iaudio.regX+40;//180//420;//x_personaje_final + 300;
				//parent.instruccion_especial.x = x_iaudio_final+ancho_inst/2+50;//+contenedor_iaudio.regX+40;//180//420;//x_personaje_final + 300;
				parent.instruccion_especial.x = x_iaudio_final+contenedor_iaudio.regX+40;//180//420;//x_personaje_final + 300;

				parent.instruccion_especial.y = 200;
				
			} else {
			parent.instruccion_especial.x = x_iaudio_final+ancho_inst/2+50;//+contenedor_iaudio.regX+40;//180//420;//x_personaje_final + 300;

			parent.instruccion_especial.y = 240;
			}

		
		
		}
		parent.instruccion_especial.visible = true;
			if(!parent.con_menunumeros_v2){
			createjs.Tween.get(parent.instruccion_especial,{override:true}).to({alpha:1,y:450},velocidad_lenta*3);

		} else {
			createjs.Tween.get(parent.instruccion_especial,{override:true}).to({alpha:1,y:500},velocidad_lenta*3);
		}
		parent.instruccion_especial2.visible = false;
		}
		if(!parent.clic_anterior){

		parent.instruccion_especial2.x = 880;

			parent.instruccion_especial2.y = 0;

			//parent.document.getElementById("txt_ie2").innerHTML = "<div style='width:280px;line-height:16px;font-size:16px'>Podrás volver a consultar las pantallas anteriores haciendo clic en el número o en la flecHas que apunta a la izquierda.</div>";
			//parent.document.getElementById("s3").innerHTML = "<div style='margin-top:26px;letter-spacing:10px;'>ì ì</div>";
			//parent.document.getElementById("s4").innerHTML = "";

			parent.instruccion_especial2.visible = false;
			parent.instruccion_especial2.alpha = 0;

			//createjs.Tween.get(parent.instruccion_especial2,{override:true}).wait(velocidad_lenta*2).to({alpha:1,y:19,x:840},velocidad_lenta*3);

		}
			//} else {
				//parent.instruccion_especial.visible = false;
			//	parent.instruccion_especial2.visible = false;

			//}
			
			//DCRI
			//createjs.Tween.get(fondo_p1,{override:true}).to({alpha:.8},velocidad_media);	
			createjs.Tween.get(fondo_p1,{override:true}).to({alpha:parent.opacidad_fondop1},velocidad_media);	

			createjs.Tween.get(icono_personaje,{override:true}).to({alpha:0, visible:false},velocidad_lenta*2);	

		//clic_audio();
			

		setTimeout(function(){ 
			activar_cerrar = true;
		}, velocidad_lenta+20);

		
	}



		
	function f_circulos_clic2(circulo_actual){



			function clic_circulos_grandes (){

				if (cantidad_masinfo>0){


				for (i = 0; i < cantidad_masinfo; i++) { 
					document.getElementById("volver"+i).parentNode.style.visibility = "hidden";
					document.getElementById("volver"+i).parentNode.style.opacity = 0;
					document.getElementById("volver"+i).parentNode.style.zIndex = -1;

					var_video = document.getElementById("video");

					if (cantidad_videos>0){
						for (i = 0; i < total_videos.length-1; i++) { 
						if(parent.videos_vimeo){

						//iframe_vid = $('#video'+i)[0];
				    	//var_video = $f(iframe_vid);
						 //var_video.api('pause');


						 iframe_vid = document.getElementById('video'+i);
							var_video = new Vimeo.Player(iframe_vid);
							var_video.pause()

					} else if(parent.videos_youtube) {
						player_yt[i].pauseVideo();
					} else {
						 var_video = document.getElementById("video"+i);
						var_video.pause();

					}
						}
					}

					}
				}

				numero_arreglo_circulos = contenedor_circulos.indexOf(circulo_actual);

			control_flechas(numero_arreglo_circulos,"clic");

				/*
				
				
				
				createjs.Tween.get(indicador).to({x:x_indicador, alpha:1},velocidad_lenta);//call(posicion_final_titulos);

			for (i = 0; i < contenidos_circulos.length; i++) { 
					document.getElementById("contenido_c"+i).style.zIndex = -1;
					contenidos_circulos[i].alpha = 0;
				}
			createjs.Tween.get(contenidos_circulos[numero_arreglo_circulos]).to({alpha:1},velocidad_media);	
			document.getElementById("contenido_c"+numero_arreglo_circulos).style.zIndex = 0;
			*/
			if(tipo=="tipo2" || tipo == "tipo5"){
			numero_arreglo_circulos = contenedor_circulos.indexOf(circulo_actual);
			x_indicador = contenedor_circulos[numero_arreglo_circulos].x + bounds_contenedor_circulo.width/4 + bounds_indicador.height/2;
			createjs.Tween.get(indicador).to({x:x_indicador},velocidad_lenta);	
			}
			if(tipo=="tipo4"){
				numero_arreglo_circulos = contenedor_circulos.indexOf(circulo_actual);
				x_indicador = contenedor_circulos[numero_arreglo_circulos].x + bounds_contenedor_circulo.width;
				y_indicador = contenedor_circulos[numero_arreglo_circulos].y + bounds_contenedor_circulo.height/2;
				//indicador.x = contenedor_circulos[0].x + bounds_contenedor_circulo.width;
				//indicador.y = contenedor_circulos[0].y + bounds_contenedor_circulo.height/2-20;
				createjs.Tween.get(indicador).to({x:x_indicador, y:y_indicador},velocidad_lenta);
				
				createjs.Tween.get(indicador_seleccionado).to({x:contenedor_circulos[numero_arreglo_circulos].x-bounds_contenedor_circulo.width-var_pad2*7, y:contenedor_circulos[numero_arreglo_circulos].y-bounds_contenedor_circulo.width},velocidad_lenta);

				visitados[numero_arreglo_circulos].val = true;

				contenedor_circulos[numero_arreglo_circulos].alpha = 1;

				
				

			}
			//indicador.x = contenedor_circulos[0].x ;
			//indicador.y = contenedor_circulos[0].y + bounds_contenedor_circulo.height/2 + 5;


			for (i = 0; i < contenidos_circulos.length; i++) { 
					document.getElementById("contenido_c"+i).style.zIndex = -1;
					contenidos_circulos[i].alpha = 0;
				}
			createjs.Tween.get(contenidos_circulos[numero_arreglo_circulos]).to({alpha:1},velocidad_media);	
			document.getElementById("contenido_c"+numero_arreglo_circulos).style.zIndex = 0;
					
			}	
	}


	//function f_circulos_clic(circulo_actual){
	
		
			 
			function clic_circulos_grandes (circulo_actual){
				clic_btnesp = false;


				if(parent.con_sonidoclic){
									parent.audio_clic.play();
								}
			
			//numero_arreglo_circulos = contenedor_circulos.indexOf(circulo_actual);
			//actual_circ = circulo_actual;
			numero_arreglo_circulos = contenedor_circulos_html.indexOf(circulo_actual);
		
		if(permitido_btn[numero_arreglo_circulos].val){//&&numero_arreglo_circulos!=actual_circ){
			$('audio').each(function(){
	    	this.pause(); // Stop playing
	    	//this.currentTime = 0; // Reset time
	    	$(this)[0].currentTime = 0;
		}); 

		if($('#contenido_c'+numero_arreglo_circulos).find("audio").length==1){
			console.log("audio int")
			setTimeout(function () {
				$('#contenido_c'+numero_arreglo_circulos).find("audio")[0].play();
			}, 500);
			
		}

		
		


			if(ini_especial){
				if(document.getElementById("circ_btn"+numero_arreglo_circulos).className == "circulos_botones_vistos"){
					$(".btn_iniespecial").fadeIn(velocidad_media);
				}
				
				if(btn_zonaper){
					for(intx = 0; intx < cantidad_circulos; intx++){
						createjs.Tween.get(contenedor_circulos[intx],{override:true}).to({scaleX:0,scaleY:0},velocidad_rapida, createjs.Ease.bounceOut);
						

					}
				} else {

					for(intx = 0; intx < sprites_total_an.length; intx++){
						createjs.Tween.get(sprites_total_an[intx],{override:true}).to({scaleX:0,scaleY:0},velocidad_rapida, createjs.Ease.bounceOut);
					}
				}
			}

			if (cantidad_masinfo>0){
				
				for (i = 0; i < cantidad_masinfo; i++) { 
					document.getElementById("accion_btnmasinfo"+i).innerHTML = "Ver";

				createjs.Tween.get(total_masinfo[i],{override:true}).to({y:y_botones_mas_ini},velocidad_rapida,createjs.Ease.elasticOut);	
				//createjs.Tween.get(total_texto_masinfo[i],{override:true}).to({x:x_botones_masini},velocidad_rapida*2);	
				}
			
			}

			actual_circ = numero_arreglo_circulos;

			$('#cubre_cont'+actual_circ).removeClass("opc_cubre_10").addClass("opc_cubre_00");
				$('#cubre_cont'+actual_circ).stop(true,true).fadeOut(duracion_anima);


			if(entro_encirc[actual_circ]==0){
				activaFirstClic(actual_circ)
			}
			entro_encirc[actual_circ] = 1;
			//if(document.getElementById("cb"+(numero_arreglo_circulos)).className == "cb_int_abierto"||document.getElementById("cb"+(numero_arreglo_circulos)).className == "cb_int_visto"){
			if(document.getElementById("cb"+(numero_arreglo_circulos)).className == "cb_int_abierto"){
    			document.getElementById("indica_circ").style.visibility = "hidden";
    			var_instruccion_circulos.innerHTML = "<div style='color:transparent'>a</div>"
				instruccion_circulos.visible = false;
    		}
			
			//console.log(i)
			if(parent.znThisPage==200&&numero_arreglo_circulos==1&&document.getElementById("cb"+numero_arreglo_circulos).className == "cb_int_abierto"&&parent.con_instrucciones_nav){
				if(instruccion_vistab1){
			continuafb = true;
		} else {
			continuafb = false;
				setTimeout(function(){ 
					if(parent.con_instrucciones_nav){
					parent.document.getElementById("instruccion_inf").style.visibility = "visible";	
			}
			parent.audio_estrella.play();
		
		}, 1000);
			}

				} else if(parent.znThisPage==2&&numero_arreglo_circulos==1&&document.getElementById("cb"+numero_arreglo_circulos).className == "cb_int_abierto"&&parent.con_instrucciones_nav){//
				if(instruccion_vistab2){
			continuafb = true;
		} else {
			continuafb = false;
				setTimeout(function(){ 
					if(parent.con_instrucciones_nav){

					parent.document.getElementById("instruccion_ov").style.visibility = "visible";	
			parent.audio_estrella.play();
			}
		
		}, 1000);
			}
				} else {
continuafb = true;
				}


				

				if(continuafb){

			
			circulo_actual_ok = numero_arreglo_circulos;
			if(parent.znThisPage==600){
				createjs.Tween.get(fondo_p2,{override:true}).to({alpha:0},velocidad_lenta*1.5);

			}
			console.log(clic_en_btnpersonaje,"clic_en_btnpersonaje")

			if((numero_arreglo_circulos != numero_arreglo_circulos_anterior)||(posabs_btncirc&&(numero_arreglo_circulos == numero_arreglo_circulos_anterior))){

			
			if(document.getElementById("cb"+numero_arreglo_circulos).className == "cb_int_abierto"){
				var_instruccion_circulos.innerHTML = "<div style='color:transparent'>a</div>"
			instruccion_circulos.visible = false;
				document.getElementById("circ_btn"+numero_arreglo_circulos).className = "circulos_botones_abiertos2";
			}


			 if(clic_en_btnpersonaje){

				//clic_btnpersonaje();


//////ACA PERSOBAJE
		if(version_personaje==1){
			createjs.Tween.get(audio_btnoff_per1,{override:true}).to({alpha:1},velocidad_lenta*0.2);
				createjs.Tween.get(audio_btnon_per1,{override:true}).to({alpha:0},velocidad_lenta*1);
				createjs.Tween.get(audio_btnclico_per1,{override:true}).to({alpha:0},velocidad_lenta*1);
				createjs.Tween.get(audio_btnclicof_per1,{override:true}).to({alpha:0},velocidad_lenta*1);
		} else if(version_personaje==2){
			createjs.Tween.get(audio_btnoff_per2,{override:true}).to({alpha:1},velocidad_lenta*0.2);
				createjs.Tween.get(audio_btnon_per2,{override:true}).to({alpha:0},velocidad_lenta*1);
				createjs.Tween.get(audio_btnclico_per2,{override:true}).to({alpha:0},velocidad_lenta*1);
				createjs.Tween.get(audio_btnclicof_per2,{override:true}).to({alpha:0},velocidad_lenta*1);
		} else if(version_personaje==3){
			createjs.Tween.get(audio_btnoff_per3,{override:true}).to({alpha:1},velocidad_lenta*0.2);
				createjs.Tween.get(audio_btnon_per3,{override:true}).to({alpha:0},velocidad_lenta*1);
				createjs.Tween.get(audio_btnclico_per3,{override:true}).to({alpha:0},velocidad_lenta*1);
				createjs.Tween.get(audio_btnclicof_per3,{override:true}).to({alpha:0},velocidad_lenta*1);
		} else if(version_personaje==4){
			createjs.Tween.get(audio_btnoff_per4,{override:true}).to({alpha:1},velocidad_lenta*0.2);
				createjs.Tween.get(audio_btnon_per4,{override:true}).to({alpha:0},velocidad_lenta*1);
				createjs.Tween.get(audio_btnclico_per4,{override:true}).to({alpha:0},velocidad_lenta*1);
				createjs.Tween.get(audio_btnclicof_per4,{override:true}).to({alpha:0},velocidad_lenta*1);
		}
				
				clic_en_btnpersonaje = false;
				for (i = 0; i < total_mas_personajes.length; i++) { 

				createjs.Tween.get(total_mas_personajes[i],{override:true}).to({scaleX:0,scaleY:0,x:x_inicial_maspersonaje,y:y_inicial_maspersonaje},velocidad_media,createjs.Ease.circOut);
				
				}
				locucion.stop();



			}

			if(cantidad_audiop[numero_arreglo_circulos] != 0){
			pausas_audio_nuevo = cantidad_audiop[numero_arreglo_circulos];
			locucion = createjs.Sound.play("sounds/audio"+parent.znThisPage+"_"+numero_arreglo_circulos+".mp3");
			locucion.stop();
			//duracion_actual = locucion.getDuration();
			//console.log(duracion_actual, pausas_audio_nuevo)
			//cant_pausas = pausas_audio_nuevo[0].length;
			//pausas_audio_nuevo[1][cant_pausas-1] = duracion_actual;
			}

			
			if(tipo == "tipo3"){
				parent.instruccion_especial.visible = false;
				parent.instruccion_especial.alpha = 0;

				parent.instruccion_especial2.visible = false;
				parent.instruccion_especial2.alpha = 0;

					//console.log(cantidad_audiop[numero_arreglo_circulos],"variables4!!")


				if(cantidad_audiop[numero_arreglo_circulos]==0){
					//////ACA PERSOBAJE
					//console.log(parent.znThisPage,parent.pagina_superior,numero_arreglo_circulos, numero_arreglo_circulos_anterior,"variables!!")

					if(version_personaje==1){
						createjs.Tween.get(contenedor_btnpersonaje_per1,{override:true}).to({scaleX:-0,scaleY:0},velocidad_rapida,createjs.Ease.circInOut);
						createjs.Tween.get(audio_btnoff_per1,{override:true}).to({alpha:1},velocidad_lenta*0.2);
						createjs.Tween.get(audio_btnon_per1,{override:true}).to({alpha:0},velocidad_lenta*1);
					} else if(version_personaje==2){
						createjs.Tween.get(contenedor_btnpersonaje_per2,{override:true}).to({scaleX:-0,scaleY:0},velocidad_rapida,createjs.Ease.circInOut);
						createjs.Tween.get(audio_btnoff_per2,{override:true}).to({alpha:1},velocidad_lenta*0.2);
						createjs.Tween.get(audio_btnon_per2,{override:true}).to({alpha:0},velocidad_lenta*1);
					} else if(version_personaje==3){
						createjs.Tween.get(contenedor_btnpersonaje_per3,{override:true}).to({scaleX:-0,scaleY:0},velocidad_rapida,createjs.Ease.circInOut);
						createjs.Tween.get(audio_btnoff_per3,{override:true}).to({alpha:1},velocidad_lenta*0.2);
						createjs.Tween.get(audio_btnon_per3,{override:true}).to({alpha:0},velocidad_lenta*1);
					} else if(version_personaje==4){
						createjs.Tween.get(contenedor_btnpersonaje_per4,{override:true}).to({scaleX:-0,scaleY:0},velocidad_rapida,createjs.Ease.circInOut);
						createjs.Tween.get(audio_btnoff_per4,{override:true}).to({alpha:1},velocidad_lenta*0.2);
						createjs.Tween.get(audio_btnon_per4,{override:true}).to({alpha:0},velocidad_lenta*1);
					}
				

				
				//createjs.Tween.get(parent.instruccion_especial,{override:true}).to({alpha:0},velocidad_rapida);


				} else if (cantidad_audiop[numero_arreglo_circulos]!=0){
				
				//////ACA PERSOBAJE

					if(version_personaje==1){
						createjs.Tween.get(contenedor_btnpersonaje_per1,{override:true}).to({scaleX:-0,scaleY:0},velocidad_rapida,createjs.Ease.circInOut);
						createjs.Tween.get(audio_btnoff_per1,{override:true}).to({alpha:1},velocidad_lenta*0.2);
						createjs.Tween.get(audio_btnon_per1,{override:true}).to({alpha:0},velocidad_lenta*1);
					} else if(version_personaje==2){
						createjs.Tween.get(contenedor_btnpersonaje_per2,{override:true}).to({scaleX:-0,scaleY:0},velocidad_rapida,createjs.Ease.circInOut);
						createjs.Tween.get(audio_btnoff_per2,{override:true}).to({alpha:1},velocidad_lenta*0.2);
						createjs.Tween.get(audio_btnon_per2,{override:true}).to({alpha:0},velocidad_lenta*1);
					} else if(version_personaje==3){
						createjs.Tween.get(contenedor_btnpersonaje_per3,{override:true}).to({scaleX:-0,scaleY:0},velocidad_rapida,createjs.Ease.circInOut);
						createjs.Tween.get(audio_btnoff_per3,{override:true}).to({alpha:1},velocidad_lenta*0.2);
						createjs.Tween.get(audio_btnon_per3,{override:true}).to({alpha:0},velocidad_lenta*1);
					} else if(version_personaje==4){
						createjs.Tween.get(contenedor_btnpersonaje_per4,{override:true}).to({scaleX:-0,scaleY:0},velocidad_rapida,createjs.Ease.circInOut);
						createjs.Tween.get(audio_btnoff_per4,{override:true}).to({alpha:1},velocidad_lenta*0.2);
						createjs.Tween.get(audio_btnon_per4,{override:true}).to({alpha:0},velocidad_lenta*1);
					}
				
				//parent.instruccion_especial.alpha = 0;
				//////ACA PERSOBAJE
					parent.instruccion_especial2.visible = false;

					if(!parent.navega_lineal){
							apareceBtnPer();

						
					} else {
						if($("#contenido_c"+actual_circ+"_mp").attr('data-orden')==0){
							apareceBtnPer();
						}
					}
					//console.log(parent.znThisPage,parent.pagina_superior,numero_arreglo_circulos, numero_arreglo_circulos_anterior,"variables")
					if(parent.znThisPage<parent.pagina_superior||parent.completado||(numero_arreglo_circulos < numero_arreglo_circulos_anterior && numero_arreglo_circulos_anterior!=100 || document.getElementById("circ_btn"+numero_arreglo_circulos).className == "circulos_botones_vistos" )){
							apareceBtnPer();

					}
					/*
					if(version_personaje==1){
						createjs.Tween.get(contenedor_btnpersonaje_per1,{override:true}).wait(velocidad_lenta).to({scaleX:parent.scalesmallx_contenedor_btnpersonaje_per1,scaleY:parent.scalesmally_contenedor_btnpersonaje_per1},velocidad_lenta*2,createjs.Ease.bounceOut);
						createjs.Tween.get(audio_btnoff_per1,{override:true}).to({alpha:1},velocidad_lenta*0.2);
						createjs.Tween.get(audio_btnon_per1,{override:true}).to({alpha:0},velocidad_lenta*1);
					} else if(version_personaje==2){
						createjs.Tween.get(contenedor_btnpersonaje_per2,{override:true}).wait(velocidad_lenta).to({scaleX:parent.scalesmallx_contenedor_btnpersonaje_per2,scaleY:parent.scalesmally_contenedor_btnpersonaje_per2},velocidad_lenta*2,createjs.Ease.bounceOut);
						createjs.Tween.get(audio_btnoff_per2,{override:true}).to({alpha:1},velocidad_lenta*0.2);
						createjs.Tween.get(audio_btnon_per2,{override:true}).to({alpha:0},velocidad_lenta*1);
					} else if(version_personaje==3){
						createjs.Tween.get(contenedor_btnpersonaje_per3,{override:true}).wait(velocidad_lenta).to({scaleX:parent.scalesmallx_contenedor_btnpersonaje_per3,scaleY:parent.scalesmally_contenedor_btnpersonaje_per3},velocidad_lenta*2,createjs.Ease.bounceOut);
						createjs.Tween.get(audio_btnoff_per3,{override:true}).to({alpha:1},velocidad_lenta*0.2);
						createjs.Tween.get(audio_btnon_per3,{override:true}).to({alpha:0},velocidad_lenta*1);
					} else if(version_personaje==4){
						createjs.Tween.get(contenedor_btnpersonaje_per4,{override:true}).wait(velocidad_lenta).to({scaleX:parent.scalesmallx_contenedor_btnpersonaje_per4,scaleY:parent.scalesmally_contenedor_btnpersonaje_per4},velocidad_lenta*2,createjs.Ease.bounceOut);
						createjs.Tween.get(audio_btnoff_per4,{override:true}).to({alpha:1},velocidad_lenta*0.2);
						createjs.Tween.get(audio_btnon_per4,{override:true}).to({alpha:0},velocidad_lenta*1);
					}
					*/
				

				parent.document.getElementById("instruccion_especial").style.maxHeight = "30px";
				parent.document.getElementById("instruccion_especial").style.zIndex = "-1";
				
				if(parent.znThisPage<parent.pagina_superior||parent.completado){
					parent.instruccion_especial2.y = parent.y_instruccionper;
					x_final_instrperint = 1160; 
					
					parent.instruccion_especial2.x = x_final_instrperint-50;
					parent.document.getElementById("txt_ie2").innerHTML = "<div style='width:auto; padding:0px 0; line-height:18px'><span class='simbolos'>"+parent.icono_check+"</span></div>";

					
				
				} else {
					//parent.instruccion_especial.visible = false;

					//console.log(arreglo_masper)
					actual_masper = arreglo_masper[numero_arreglo_circulos]-1;
					//console.log(actual_masper)
					//console.log(val_mas_personajes[actual_masper])
					if(val_mas_personajes[actual_masper].val){
						
				parent.instruccion_especial2.y = parent.y_instruccionper;
					x_final_instrperint = 1160; 

					parent.instruccion_especial2.x = x_final_instrperint-50;
					parent.document.getElementById("instruccion_especial2").style.zIndex="0";
					
					parent.document.getElementById("txt_ie2").innerHTML = "<div style='width:auto; padding:0px 0; line-height:18px'><span class='simbolos'>"+parent.icono_check+"</span></div>";

					} else {
						parent.instruccion_especial2.y = parent.y_instruccionper;

					x_final_instrperint = 1115;
					parent.instruccion_especial2.x = x_final_instrperint-50;
					parent.document.getElementById("instruccion_especial2").style.zIndex="0";
					//parent.document.getElementById("instruccion_especial2").style.backgroundColor="transparent";
					
					parent.document.getElementById("txt_ie2").innerHTML = "<div style='width:auto; padding:0px 10px 0 0; line-height:20px;font-size:14px;display:block'>"+parent.tx_pulsamay+" aquí.</div> <div class='arrow animated bounceup2' style='width:auto; padding:0px 0; line-height:14px;font-size:14px;text-align:center;display:block'>"+parent.icono_indica_up+"</div>";


					}


				}
			
				parent.document.getElementById("s3").innerHTML = "";
				parent.document.getElementById("s4").innerHTML = "";
				//parent.instruccion_especial.x = 400;
				
					if(!parent.navega_lineal){
					parent.instruccion_especial2.visible = true;

					}
				createjs.Tween.get(parent.instruccion_especial2,{override:true}).to({alpha:1,x:x_final_instrperint},velocidad_lenta*2);
		
				}

				if(numero_arreglo_circulos != numero_arreglo_circulos_anterior){


      			
			for (i = 0; i < cantidad_masinfo; i++) { 
					
					var_id = document.getElementById("masinfo"+i).parentNode;
					
					numero_arreglo_masinfo_html = contenidos_circulos_html.indexOf(var_id);

					//if(mas_en_circ[act_cont]==1){
						//total_texto_masinfo[i].x = x_botones + 10 + 200;		
						//total_htmlmasinfo[i].y = y_botones_mas+5+80;
					//}


					//contenidos_circulos[numero_arreglo_masinfo_html].visible = true;
					//contenidos_circulos[numero_arreglo_masinfo_html].scaleX = 1;
					//contenidos_circulos[numero_arreglo_masinfo_html].scaleY = 1;
					//contenidos_circulos_masinfo[i].visible = false;
					//contenidos_circulos_masinfo[i].alpha = 0;

					//total_htmlmasinfo[i].innerHTML = "<i class='fa fa-hand-o-up' aria-hidden='true'></i>";
					//total_htmlmasinfo[i].style.color = "rgb(255,255,255)";
					//total_htmlmasinfo[i].style.backgroundColor = color_boton;
					//total_htmlmasinfo[i].style.borderColor = "rgb(255,255,255)";

					createjs.Tween.get(contenidos_circulos_masinfo[i],{override:true}).to({y:y_botones + 260,scaleX:0,scaleY:0},velocidad_media);
					clic_en_masinfo = true;
					//createjs.Tween.get(contenidos_circulos_masinfo[i],{override:true}).to({y:y_final_masinfo,visible:true},velocidad_lenta,createjs.Ease.circOut)

					setTimeout(function(){
						initialValueAnima("#contenido_c",i,"_0");
					}, velocidad_media);


					for (ix = 0; ix < var_id.children.length; ix++) {
					
						//if (i!=0){
							//var_id.children[ix].style.opacity = "1";
					//console.log(var_id.children[i].style.zIndex)
						//}
		        	}
		        		
			
						//document.getElementById("texto_masinfo"+i).className = "texto_masinfo";
						total_htmlmasinfo[i].innerHTML = parent.icono_mas;
						//total_htmlmasinfo[i].className = "boton_masinfo"
						//document.getElementById(var_id.id+"_0").style.zIndex = 1;

						//total_masinfo[i].visible = true;
						total_masinfo[i].scaleX  = 0.9;
						total_masinfo[i].scaleY  = 0.9;
						//total_masinfo[i].alpha  = 1;

					
										
				}

			}
			}
				
			 //numero_arreglo_circulos = numero_arreglo_circulos_anterior;
				
				
			} 


			numero_arreglo_circulos_anterior = numero_arreglo_circulos;

			

			

			if (cantidad_videos>0){
						for (i = 0; i < total_videos.length-1; i++) {
				if(parent.videos_vimeo){

						//iframe_vid = $('#video'+i)[0];
				    	//var_video = $f(iframe_vid);
						 //var_video.api('pause');


						 iframe_vid = document.getElementById('video'+i);
							var_video = new Vimeo.Player(iframe_vid);
							var_video.pause()

					} else if(parent.videos_youtube) {
						player_yt[i].pauseVideo();
					} else {
						 var_video = document.getElementById("video"+i);
						var_video.pause();

					}
					}
					}

		

			




			index_circulo_anterior = -1;

			for (i = 0; i < cantidad_circulos; i++) { 

				if(contenidos_circulos[i].alpha == 1){
					index_circulo_anterior = i;
				}
			}			
			//console.log(index_circulo_anterior)

			//if(!ini_especial){
			control_flechas(numero_arreglo_circulos,"clic");

			if(parent.tipo_curso == "isometrico" || parent.tipo_curso == "plataformas"){
					//parent.$(".cubre_imgfondo").css("background-color",parent.bg_cubreimgfondo);
    				parent.$(".cubre_imgfondo").addClass("cubre_imgfondoact");
    				if(parent.completado||parent.znThisPage<parent.pagina_superior){
    					instruccion_circulos.alpha = 1;
    				}
				}
			//}
				for (i = 0; i < titulos_circulos.length; i++) { 
					//titulos_circulos[i].alpha = 0;
					x_original_tc.push(titulos_circulos[i].x);
					x_original_cg.push(contenedor_circulos[i].x);
					y_original_cg.push(contenedor_circulos[i].y);
				
					


					document.getElementById("numero_titulo"+i).className = "numero_titulo_c";


					
					document.getElementById("titulo_c"+i).className = "titulo_c";
					document.getElementById("titulo_c"+i).style.textAlign = "left";
					document.getElementById("titulo_c"+i).style.fontSize = 22+"px";
					document.getElementById("titulo_c"+i).style.width = "auto";
					//document.getElementById("titulo_c"+i).style.minWidth = 400+"px";
					document.getElementById("titulo_c"+i).style.minWidth = "auto";
					document.getElementById("titulo_c"+i).style.maxWidth = 900+"px";

				
				}
			
			

			for (i = 0; i < contenidos_circulos.length; i++) { 
					document.getElementById("contenido_c"+i).style.zIndex = -1;
					createjs.Tween.get(contenidos_circulos[i],{override:true}).to({alpha:0},velocidad_media);	
					createjs.Tween.get(titulos_circulos[i],{override:true}).to({alpha:0},velocidad_rapida);
					//contenidos_circulos[i].alpha = 0;
				}

			if (numero_arreglo_circulos > index_circulo_anterior && index_circulo_anterior != -1) {
				
				
				contenidos_circulos[numero_arreglo_circulos].y = y_contenidos_abajo_3;
				createjs.Tween.get(contenidos_circulos[index_circulo_anterior]).to({y:y_contenidos_arriba_3},velocidad_media);	

				titulos_circulos[numero_arreglo_circulos].x = x_titulos_abajo;
				createjs.Tween.get(titulos_circulos[index_circulo_anterior]).to({x:x_titulos_arriba},velocidad_rapida);	

			} else if (numero_arreglo_circulos < index_circulo_anterior && index_circulo_anterior != -1) {
				contenidos_circulos[numero_arreglo_circulos].y = y_contenidos_arriba_3;
				createjs.Tween.get(contenidos_circulos[index_circulo_anterior]).to({y:y_contenidos_abajo_3},velocidad_media);	

				titulos_circulos[numero_arreglo_circulos].x = x_titulos_arriba;
				createjs.Tween.get(titulos_circulos[index_circulo_anterior]).to({x:x_titulos_abajo},velocidad_rapida);	

				
			}

			document.getElementById("contenido_c"+numero_arreglo_circulos).style.zIndex = 0;
			
			createjs.Tween.get(contenidos_circulos[numero_arreglo_circulos],{override:true}).wait(velocidad_media*1.1).to({alpha:1, y: y_contenidos_final_3},velocidad_media*1.2);	

			//console.log(numero_arreglo_circulos,"numero_arreglo_circulos")
			for (i = 0; i < cantidad_circulos; i++) { 

					if(numero_arreglo_circulos != numero_arreglo_circulos_anterior){

					
						initialValueAnima("#contenido_c",i,"");//para contenido principal
					}
				}
			setTimeout(function(){ 
				
				
				animaElemPage("#contenido_c",numero_arreglo_circulos,"");
			
			
			}, velocidad_media);

			if(parent.tipo_curso=="plataformas"){

				salta_una_vez = true;
	    		avanza_una_vez = true;
	    		retrocede_una_vez = true;
	    		think_una_vez = true;

	    		avanza_personaje = false;
	    		retrocede_personaje = false;

	    		pausa_game = true;

				createjs.Tween.get(contenedor_juego,{override:true}).to({alpha:0},velocidad_rapida);
				//createjs.Tween.get(contenedor_plataformas,{override:true}).to({alpha:0},velocidad_rapida);
				//createjs.Tween.get(contenedor_suelos,{override:true}).to({alpha:0},velocidad_rapida);
				//createjs.Tween.get(per_game,{override:true}).to({alpha:0},velocidad_rapida);
				//createjs.Tween.get(sprites_interacgame[numero_arreglo_circulos],{override:true}).to({alpha:0},velocidad_rapida);

				///SPCONTROL
				if(parent.dispositivo_movil){
			
					$("#boton_sp").fadeOut(velocidad_rapida);
					$("#controles_sp").fadeOut(velocidad_rapida);
					$(".inst_navega_sf").fadeOut(velocidad_rapida);
					$(".inst_navega_sfbtn").fadeOut(velocidad_rapida);
				}
			}
			
			if (circulo_g){
			////anima_btncirc = true;
			anima_btncirc = false;


		for (i = 0; i < cantidad_circulos; i++) { 
				//document.getElementById("numero_titulo"+i).innerHTML = "<i class='fas fa-chevron-right'></i>";
}
				if(parent.znThisPage==600){
					//createjs.Tween.get(boton_volver).wait(velocidad_lenta/3).to({scaleX:1,alpha:1},velocidad_lenta)
				}
				//createjs.Tween.get(line).wait(velocidad_lenta/2).to({scaleY:1},velocidad_lenta*4)
				//createjs.Tween.get(line).wait(velocidad_lenta).to({alpha:1},velocidad_lenta*2)
				
				ancho_titulo_final = var_titulo_pagina.clientWidth;

				//createjs.Tween.get(line,{override:true}).wait(velocidad_lenta*2).to({alpha:1},velocidad_lenta*2)
				//createjs.Tween.get(line2,{override:true}).wait(velocidad_lenta*3).to({alpha:1},velocidad_lenta*3)

				createjs.Tween.get(titulos_circulos[numero_arreglo_circulos],{override:true}).to({alpha:1, x:x_titulos, y:y_titulos},velocidad_media).call(posicion_final_titulos);		
				
				if(posabs_btncirc){
					if(parent.znThisPage!=1){

					createjs.Tween.get(flecha_last,{override:true}).to({scaleX:0,scaleY:0},velocidad_rapida, createjs.Ease.bounceOut);
					}
					if(parent.znThisPage<parent.pagina_superior && parent.tipo_curso=="isometrico"){

					createjs.Tween.get(flecha_next,{override:true}).to({scaleX:0,scaleY:0},velocidad_rapida, createjs.Ease.bounceOut);
					}
				}

				for (i = contenedor_circulos.length-1; i > -1; i--) { 


					//console.log(i)
					//createjs.Tween.get(contenedor_circulos[contenedor_circulos.length-(1+i)],{override:true}).to({x:x_circ_p-(i*110), y:y_circ_p, scaleX:0.4, scaleY:0.4},velocidad_lenta);

					if(i!=numero_arreglo_circulos){
						if(!btn_zonaper){
							
							//if(parent.tipo_curso=="isometrico"){
								if(posabs_btncirc){
								createjs.Tween.get(contenedor_circulos[i],{override:true}).to({scaleX:0, scaleY:0},velocidad_rapida/3);

							} else {
								if(parent.con_menunumeros_v2){
									createjs.Tween.get(contenedor_circulos[i],{override:true}).to({x:1200-((contenedor_circulos.length-i)*70), y:47, scaleX:scale_circulos_pequenos_no_over, scaleY:scale_circulos_pequenos_no_over},velocidad_lenta*0.6);
								} else {
									createjs.Tween.get(contenedor_circulos[i],{override:true}).to({x:1280-((contenedor_circulos.length-i)*70), y:47, scaleX:scale_circulos_pequenos_no_over, scaleY:scale_circulos_pequenos_no_over},velocidad_lenta*0.6);

								}
						}
					}
					//createjs.Tween.get(contenedor_circulos[i],{override:true}).to({x:ancho_titulo_final+100+(i*80), y:52, scaleX:scale_circulos_pequenos_no_over, scaleY:scale_circulos_pequenos_no_over},velocidad_lenta);
					//createjs.Tween.get(contenedor_circulos[i],{override:true}).to({x:bounds_contenedor_circulos.width*scale_circulos_pequenos_no_over*0.8, y:y_circ_p+(i*bounds_contenedor_circulos.width*scale_circulos_pequenos_over*1), scaleX:scale_circulos_pequenos_no_over, scaleY:scale_circulos_pequenos_no_over},velocidad_lenta);
					

					} else {
						if(!btn_zonaper){

							//if(parent.tipo_curso=="isometrico"){
								if(posabs_btncirc){
								createjs.Tween.get(contenedor_circulos[i],{override:true}).to({scaleX:0, scaleY:0},velocidad_rapida/3);

							} else {
						if(parent.con_menunumeros_v2){
							createjs.Tween.get(contenedor_circulos[i],{override:true}).to({x:1200-((contenedor_circulos.length-i)*70), y:47, scaleX:scale_circulos_pequenos_no_over, scaleY:scale_circulos_pequenos_no_over},velocidad_lenta*0.6);
						} else {
							createjs.Tween.get(contenedor_circulos[i],{override:true}).to({x:1280-((contenedor_circulos.length-i)*70), y:47, scaleX:scale_circulos_pequenos_no_over, scaleY:scale_circulos_pequenos_no_over},velocidad_lenta*0.6);

						}
						}
					}
					//createjs.Tween.get(contenedor_circulos[i],{override:true}).to({x:bounds_contenedor_circulos.width*scale_circulos_pequenos_no_over*0.8, y:y_circ_p+(i*bounds_contenedor_circulos.width*scale_circulos_pequenos_over*1), scaleX:scale_circulos_pequenos_no_over, scaleY:scale_circulos_pequenos_no_over},velocidad_lenta);
					
					}
					if(i==0){
						if(parent.con_menunumeros_v2){
						x_nuevo = 1200-((contenedor_circulos.length-i)*70)-60;//-10;
						} else {
						x_nuevo = 1280-((contenedor_circulos.length-i)*70)-60;//-10;

						}
					}
				}	

				
				setTimeout(function(){ 
					activaBtnCirc();
				}, velocidad_lenta*1,2);

				total_circulos[numero_arreglo_circulos].alpha = 0;
				total_circulos_seleccionados[numero_arreglo_circulos].alpha = scale_circulos_grandes_over;

				if(parent.znThisPage == 400){
					if(posabs_btncirc){
					if(document.getElementById("circ_btn"+numero_arreglo_circulos).className == "circulos_botones_vistos"){
										$(".boton_volver").fadeIn(velocidad_media);
										parent.audio_volver.play();
						console.log("boton volver aparece f!")

										var_instruccion_circulos.innerHTML = "<div style='float:right;'><span style='margin-right:5px'>"+parent.tx_puedesmay+" volver al escenario.</span> <div class='arrow' style='padding-left:'0'px;font-size:18px;display:inline-block'><div style=' transform: scaleX(-1);'>"+parent.icono_indica+" </div></div></div>";
										var_instruccion_circulos.style.width = 1120+"px"

										;
									}
								} else {
										var_instruccion_circulos.innerHTML = "<div style='color:transparent'>a</div>"
								instruccion_circulos.visible = false;
					}
				//var_instruccion_circulos.innerHTML = "<div style='text-align:right'>"+parent.tx_recuerdmay+" ir pulsando cada botón a medida que completas la consulta de cada sección. <i style='color:#0063A9' class='fa fa-angle-double-right' aria-hidden='true'></i></div>";

				} else {
					//console.log(document.getElementById("circ_btn"+numero_arreglo_circulos).className,"className")
					if(document.getElementById("circ_btn"+numero_arreglo_circulos).className == "circulos_botones_vistos"){

						console.log("boton volver aparece A!")
										$(".boton_volver").fadeIn(velocidad_media);
					parent.audio_volver.play();

										instruccion_circulos.alpha = 1;
										var_instruccion_circulos.innerHTML = "<div style='float:right;'><span style='margin-right:5px'>"+parent.tx_puedesmay+" volver al escenario.</span> <div class='arrow' style='padding-left:'0'px;font-size:18px;display:inline-block'><div style=' transform: scaleX(-1);'>"+parent.icono_indica+" </div></div></div>";
										var_instruccion_circulos.style.width = 1120+"px"

										;
									} else {
						console.log("boton volver deaparece!")

										var_instruccion_circulos.innerHTML = "<div style='color:transparent'>a</div>"
			instruccion_circulos.visible = false;
		}

				//var_instruccion_circulos.innerHTML = "<div style='text-align:right'>"+parent.tx_recuerdmay+" ir consultando cada botón. <i style='color:#0063A9' class='fa fa-angle-double-right' aria-hidden='true'></i></div>";

				}
				//ancho_instruccion_cn = var_instruccion_circulos.clientWidth;
				
				//var_instruccion_circulos.style.width = x_nuevo+"px"//(ancho_titulo_final+30)+"px";
				//instruccion_circulos.x = contenedor_circulos[0].x-230;//x_nuevo - 230;

				//var_instruccion_circulos.style.marginLeft = (ancho_titulo_final-ancho_instruccion_cn+30)+"px";

				//createjs.Tween.get(instruccion_circulos,{override:true}).to({alpha:0},velocidad_media);
				//createjs.Tween.get(flecha_subtitulo,{override:true}).to({alpha:1},velocidad_rapida);///OJO ES LA AMARILLA
	
				var_instruccion_circulos.style.width = x_nuevo+"px"
				if(btn_zonaper){
					var_instruccion_circulos.style.width = 960+"px"

				}

				if(posabs_btncirc){
					var_instruccion_circulos.style.width = 1120+"px"

				}

				
				circulo_g = false;


				
				
				setTimeout(function(){ 
					//if(parent.tipo_curso!="isometrico"){
						if(!posabs_btncirc){
					createjs.Tween.get(contenedor_circulos[numero_arreglo_circulos],{override:true}).to({scaleX:scale_circulos_pequenos_over, scaleY:scale_circulos_pequenos_over},velocidad_media);
					}
					
					flecha_volver.visible = false;
					var bounds_flecha_volver = flecha_volver.getBounds();
					flecha_volver.x = contenedor_circulos[0].x - bounds_flecha_volver.width*1.5;
					flecha_volver.y = contenedor_circulos[0].y + alto_circulos_html /4 - bounds_flecha_volver.height/2;

					x_indicador = contenedor_circulos[numero_arreglo_circulos].x - ($("#indicador_principal").width()/2)-2 //+ 15//bounds_indicador.width/2;
					x_indicador = x_indicador+"px";	
					
					if(!ini_especial){
						//if(parent.tipo_curso!="isometrico"){
							if(!posabs_btncirc){
							$("#indicador_principal").fadeIn(0);
						}
					}
					

					$( "#indicador_principal" ).stop(true,true).animate({
					    left: x_indicador
					}, 300, "linear", function() {
					  
					});

					
					//indicador.y = contenedor_circulos[0].y + ((alto_circulos_html/2)*scale_circulos_pequenos_over*1);
					
					//createjs.Tween.get(indicador).to({x:x_indicador},velocidad_rapida);//.call(posicion_final_titulos);
					//createjs.Tween.get(indicador).wait(velocidad_rapida).to({alpha:1},velocidad_lenta);
					

					createjs.Tween.get(flecha_volver).to({alpha:1},velocidad_lenta);

					
					}, velocidad_lenta+20);
				
				} else {

					createjs.Tween.get(titulos_circulos[numero_arreglo_circulos],{override:true}).wait(velocidad_media).to({alpha:1, x:x_titulos, y:y_titulos},velocidad_media).call(posicion_final_titulos);		

					//indicador.x = contenedor_circulos[0].x + ((bounds_contenedor_circulos.width/2)*scale_circulos_pequenos_over*1);
					//y_indicador = contenedor_circulos[numero_arreglo_circulos].y + bounds_indicador.width/2;
					indicador.y = contenedor_circulos[0].y + ((alto_circulos_html/2)*scale_circulos_pequenos_over*1);
					x_indicador = contenedor_circulos[numero_arreglo_circulos].x - bounds_indicador.width/2;
					for (i = 0; i < contenedor_circulos.length; i++) { 
					//createjs.Tween.get(contenedor_circulos[contenedor_circulos.length-(1+i)],{override:true}).to({x:x_circ_p-(i*110), y:y_circ_p, scaleX:0.4, scaleY:0.4},velocidad_lenta);
					/*
					if(i!=numero_arreglo_circulos){
					createjs.Tween.get(contenedor_circulos[i]).to({rotation:0},velocidad_lenta);

					} else {
					createjs.Tween.get(contenedor_circulos[numero_arreglo_circulos]).to({rotation:360},velocidad_lenta);						
					}
					*/
					}	

					$( "#indicador_principal" ).stop(true,true).animate({
					    left: x_indicador
					}, 300, "linear", function() {
					  
					});

					//createjs.Tween.get(indicador).to({x:x_indicador},velocidad_rapida);//.call(posicion_final_titulos);
					
					//createjs.Tween.get(indicador,{override:true}).to({y:y_indicador},velocidad_lenta);//.call(posicion_final_titulos);
					//x_indicador = contenedor_circulos[numero_arreglo_circulos].x + bounds_contenedor_circulo.width/4 + bounds_indicador.height/2;
					//createjs.Tween.get(indicador,{override:true}).to({x:x_indicador, alpha:1},velocidad_lenta);//call(posicion_final_titulos);
					//total_circulos[numero_arreglo_circulos].alpha = 0;
					//total_circulos_seleccionados[numero_arreglo_circulos].alpha = 1;

					for (i = 0; i < contenedor_circulos.length; i++) { 
						total_circulos[i].alpha = 1;
						total_circulos_seleccionados[i].alpha = 0;
						contenedor_circulos[i].scaleX = scale_circulos_pequenos_no_over;
						contenedor_circulos[i].scaleY = scale_circulos_pequenos_no_over;

					}
					contenedor_circulos[numero_arreglo_circulos].scaleX = scale_circulos_pequenos_over;
					contenedor_circulos[numero_arreglo_circulos].scaleY = scale_circulos_pequenos_over;
					total_circulos[numero_arreglo_circulos].alpha = 0;
					total_circulos_seleccionados[numero_arreglo_circulos].alpha = 1;



					}
				
				}
				}
		
		

		function posicion_final_titulos(){
			for (i = 0; i < titulos_circulos.length; i++) { 
			titulos_circulos[i].x = x_titulos;
			titulos_circulos[i].y = y_titulos;
			}
	
		}	
		flecha_volver.addEventListener("click", clic_flecha_volver);
		function clic_flecha_volver (){
			createjs.Tween.get(flecha_volver).to({alpha:0, visible:false},velocidad_media);	
			circulo_g = true;
			for (i = 0; i < masinfo_consultados.length; i++) { 
				document.getElementById("volver"+i).parentNode.style.visibility = "hidden";
				document.getElementById("volver"+i).parentNode.style.opacity = 0;
				document.getElementById("volver"+i).parentNode.style.zIndex = -1;
			}

			if (cantidad_videos>0){
						for (i = 0; i < total_videos.length-1; i++) { 
						if(parent.videos_vimeo){

						//iframe_vid = $('#video'+i)[0];
				    	//var_video = $f(iframe_vid);
						 //var_video.api('pause');

						 iframe_vid = document.getElementById('video'+i);
							var_video = new Vimeo.Player(iframe_vid);
							var_video.pause()

					} else if(parent.videos_youtube) {
						player_yt[i].pauseVideo();
					} else {
						 var_video = document.getElementById("video"+i);
						var_video.pause();

					}
						}
					}

			for (i = 0; i < titulos_circulos.length; i++) { 
					titulos_circulos[i].alpha = 0;
					document.getElementById("titulo_c"+i).style.textAlign = "center";
					document.getElementById("titulo_c"+i).style.fontSize = 23+"px";
					document.getElementById("titulo_c"+i).style.width = 200+"px";
				}
			for (i = 0; i < contenidos_circulos.length; i++) { 
					createjs.Tween.get(contenidos_circulos[i]).to({alpha:0},velocidad_media);	
					document.getElementById("contenido_c"+i).style.zIndex = -1;
					
				}
			instruccion_circulos.visible = true;
			createjs.Tween.get(instruccion_circulos).to({alpha:1},velocidad_lenta);	
			
			createjs.Tween.get(indicador).to({alpha:0},velocidad_lenta);
			createjs.Tween.get(flecha_subtitulo).to({alpha:0},velocidad_rapida);

			for (i = 0; i < titulos_circulos.length; i++) { 

				if (cantidad_circulos==4){
					if (i == 0 || i == 3){
					y_circulos_gr = y_circulos_g-60;
					} else {y_circulos_gr = y_circulos_g}
					
				} else if (cantidad_circulos==5){
					if (i == 0 || i == 4){
					y_circulos_gr = y_circulos_g-60;
					} else if (i == 1 || i == 3){
					y_circulos_gr = y_circulos_g-30;
					} else {y_circulos_gr = y_circulos_g}
					
				} else if(cantidad_circulos==6){
					if (i == 0 || i == 3){
					y_circulos_gr = y_circulos_g-60;
					} else if (i == 1 || i == 4){
					y_circulos_gr = y_circulos_g-30;
					} else {y_circulos_gr = y_circulos_g}
					
				} else {
					y_circulos_gr = y_circulos_g
				}
				createjs.Tween.get(titulos_circulos[i]).to({alpha:1,x:x_original_tc[i],y:y_circulos_gr+bounds_contenedor_circulo.height/2},velocidad_lenta);
				createjs.Tween.get(contenedor_circulos[i]).to({x:x_original_cg[i],y:y_circulos_gr,scaleX:scale_circulos_grandes_no_over,scaleY:scale_circulos_grandes_no_over},velocidad_lenta);

				activos_circulos_internos[i].val = false;

				total_circulos[i].alpha = 1;

				total_circulos_seleccionados[i].alpha = 0;

			}

				

		}


			
		}

/*
		function clic_boton_volver(){
			
			createjs.Tween.get(boton_volver).to({alpha:0, scaleX:0},velocidad_media);	
			circulo_g = true;
			
			if (cantidad_videos>0){
						for (i = 0; i < total_videos.length-1; i++) { 
						if(!parent.videos_vimeo){

						var_video = document.getElementById("video"+i);
						var_video.pause();
					} else {
						
						 iframe_vid = $('#video'+i)[0];
				    	var_video = $f(iframe_vid);
						 var_video.api('pause');

						}
						}
					}

			for (i = 0; i < titulos_circulos.length; i++) { 
					titulos_circulos[i].alpha = 0;
					//document.getElementById("titulo_c"+i).style.textAlign = "center";
					//document.getElementById("titulo_c"+i).style.fontSize = 23+"px";
					//document.getElementById("titulo_c"+i).style.width = 200+"px";
				}
			for (i = 0; i < contenidos_circulos.length; i++) { 
					createjs.Tween.get(contenidos_circulos[i]).to({alpha:0},velocidad_media);	
					document.getElementById("contenido_c"+i).style.zIndex = -1;
					
				}
			instruccion_circulos.visible = true;
			createjs.Tween.get(instruccion_circulos).to({alpha:1},velocidad_lenta);	
			
			createjs.Tween.get(indicador).to({alpha:0},velocidad_lenta);
			createjs.Tween.get(flecha_subtitulo).to({alpha:0},velocidad_rapida);

			for (i = 0; i < titulos_circulos.length; i++) { 
				//createjs.Tween.get(titulos_circulos[i]).to({alpha:1,x:x_original_tc[i],y:y_circulos_gr+bounds_contenedor_circulo.height/2},velocidad_lenta);
				createjs.Tween.get(contenedor_circulos[i]).to({x:x_original_cg[i],y:y_original_cg[i],scaleX:scale_circulos_grandes_no_over,scaleY:scale_circulos_grandes_no_over},velocidad_lenta);
				createjs.Tween.get(line,{override:true}).to({alpha:0},velocidad_rapida)
				createjs.Tween.get(line2,{override:true}).to({alpha:0},velocidad_rapida)

				createjs.Tween.get(fondo_p2,{override:true}).to({alpha:1},velocidad_lenta*1.5);

				
				activos_circulos_internos[i].val = false;

				total_circulos[i].alpha = 1;

				total_circulos_seleccionados[i].alpha = 0;

			}

				
		}
*/
	
		/*
		createjs.Ticker.addEventListener("tick", ajuste);
		function ajuste() {

		ancho_ventana =  parent.window.innerWidth;// || parent.document.body.clientWidth;
		
		ancho_pantalla = screen.width;

		//document.getElementById("html_completo");
		razon_ventana = ancho_ventana / 1366;

		//console.log(ancho_ventana, ancho_pantalla,razon_ventana)
		//razon_ventana_d = razon_ventana.toFixed(2)
		parent.document.getElementById("html_completo").style.transform = "scale("+razon_ventana+")";
		parent.document.getElementById("html_completo").style.webkitTransform = "scale("+razon_ventana+")"; // Chrome
		parent.document.getElementById("html_completo").style.MozTransform = "scale("+razon_ventana+")"; //Mozilla
		//parent.document.getElementById("html_completo").style.MsTransform = "scale("+razon_ventana+")"; 
		//parent.document.getElementById("html_completo").style.zoom = razon_ventana;
		
		parent.document.getElementById("fondo").style.width = ancho_pantalla+"px";

		
	}
	*/



	
			
	


			/////






};

function actualizaEstadoSimb(){
	$(".btn_visto").html(icono_check);
 	$(".btn_abierto").html(icono_candadoab);
 	$(".btn_cerrado").html(icono_candadocerr);
}

function sigInteract(){
			sig_interact++
			console.log(cant_inteact,"cant_inteact")
			//console.log(sig_interact,"sig_interact")
			//console.log($('[data-orden]').eq(sig_interact))
			if(sig_interact<=cant_inteact){

				//console.log($('[data-orden]').eq(sig_interact),$('[data-orden]').eq(sig_interact).hasClass("negrilla_sensiblex"))
				if($('[data-orden]').eq(sig_interact).hasClass("negrilla_sensiblex")){
					$('[data-orden]').eq(sig_interact).removeClass("negrilla_sensiblex");
					$('[data-orden]').eq(sig_interact).addClass("negrilla_sensible");
				} else if($('[data-orden]').eq(sig_interact).hasClass("boton_zoomx")){
					$('[data-orden]').eq(sig_interact).removeClass("boton_zoomx");
					$('[data-orden]').eq(sig_interact).addClass("boton_zoom");
				} else if($('[data-orden]').eq(sig_interact).hasClass("descargax")){
					$('[data-orden]').eq(sig_interact).removeClass("descargax");
					$('[data-orden]').eq(sig_interact).addClass("descarga");
					$('[data-orden]').eq(sig_interact).closest(".cont_descarga").find(".cubre_contdesc").fadeOut();

				} else if($('[data-orden]').eq(sig_interact).hasClass("boton_masinfox")){
					idmi = $('[data-orden]').eq(sig_interact).attr('id');
					idmi = idmi.replace("masinfo", "");

					createjs.Tween.get(total_masinfo[idmi],{override:true}).wait(delay_anima).to({y:y_botones_mas+5},velocidad_lenta,createjs.Ease.elasticOut);	
					createjs.Tween.get(total_texto_masinfo[idmi],{override:true}).wait(delay_anima/3).to({x:x_botones + 10,alpha:1},velocidad_lenta*2);	
				} else if($('[data-orden]').eq(sig_interact).hasClass("cont_videox")){
					$('[data-orden]').eq(sig_interact).removeClass("cont_videox");
					$('[data-orden]').eq(sig_interact).addClass("cont_video");

				} else if($('[data-orden]').eq(sig_interact).hasClass("mas_personaje")){
					apareceBtnPer();

				}
			}
			
		}


function apareceBtnPer(){
	console.log("apareceper")
					parent.instruccion_especial2.visible = true;
					parent.instruccion_especial2.alpha = 0;
					createjs.Tween.get(parent.instruccion_especial2).to({alpha:1},velocidad_lenta);
					

					contenedor_btnpersonaje_per1.scaleX = 0;
				contenedor_btnpersonaje_per1.scaleY = 0;

				contenedor_btnpersonaje_per2.scaleX = 0;
				contenedor_btnpersonaje_per2.scaleY = 0;

				contenedor_btnpersonaje_per3.scaleX = 0;
				contenedor_btnpersonaje_per3.scaleY = 0;


				contenedor_btnpersonaje_per4.scaleX = 0;
				contenedor_btnpersonaje_per4.scaleY = 0;
					if(version_personaje==1){
					createjs.Tween.get(contenedor_btnpersonaje_per1,{override:true}).wait(velocidad_lenta).to({scaleX:parent.scalesmallx_contenedor_btnpersonaje_per1,scaleY:parent.scalesmally_contenedor_btnpersonaje_per1},velocidad_lenta*2,createjs.Ease.bounceOut);
					createjs.Tween.get(audio_btnoff_per1,{override:true}).to({alpha:1},velocidad_lenta*0.2);
					createjs.Tween.get(audio_btnon_per1,{override:true}).to({alpha:0},velocidad_lenta*1);
					} else if(version_personaje==2){
					createjs.Tween.get(contenedor_btnpersonaje_per2,{override:true}).wait(velocidad_lenta).to({scaleX:parent.scalesmallx_contenedor_btnpersonaje_per2,scaleY:parent.scalesmally_contenedor_btnpersonaje_per2},velocidad_lenta*2,createjs.Ease.bounceOut);
					createjs.Tween.get(audio_btnoff_per2,{override:true}).to({alpha:1},velocidad_lenta*0.2);
					createjs.Tween.get(audio_btnon_per2,{override:true}).to({alpha:0},velocidad_lenta*1);
					} else if(version_personaje==3){
					createjs.Tween.get(contenedor_btnpersonaje_per3,{override:true}).wait(velocidad_lenta).to({scaleX:parent.scalesmallx_contenedor_btnpersonaje_per3,scaleY:parent.scalesmally_contenedor_btnpersonaje_per3},velocidad_lenta*2,createjs.Ease.bounceOut);
					createjs.Tween.get(audio_btnoff_per3,{override:true}).to({alpha:1},velocidad_lenta*0.2);
					createjs.Tween.get(audio_btnon_per3,{override:true}).to({alpha:0},velocidad_lenta*1);
					} else if(version_personaje==4){
					createjs.Tween.get(contenedor_btnpersonaje_per4,{override:true}).wait(velocidad_lenta).to({scaleX:parent.scalesmallx_contenedor_btnpersonaje_per4,scaleY:parent.scalesmally_contenedor_btnpersonaje_per4},velocidad_lenta*2,createjs.Ease.bounceOut);
					createjs.Tween.get(audio_btnoff_per4,{override:true}).to({alpha:1},velocidad_lenta*0.2);
					createjs.Tween.get(audio_btnon_per4,{override:true}).to({alpha:0},velocidad_lenta*1);
					}
	}


function control_flechas(elemento_actual,accion){ 
		////CONTROL FLECHAS
			//control_animacion_una_vez = true;
			console.log(accion,"accion",elemento_actual,clics_internos_vistos,"entra control")
			console.log(accion,"accion",elemento_actual,sensibles_clic,"entra control")
			//console.log(accion,"accion",elemento_actual,sensibles_clic,"entra control")
			//console.log(sensibles_over[elemento_actual].val,zoom_consultados[elemento_actual].val,masinfo_consultados[elemento_actual].val,descargas_consultadas[elemento_actual].val,clics_internos_vistos[elemento_actual].val,clics_internos_vistosb[elemento_actual].val,sensibles_clic[elemento_actual].val,videos_vistos[elemento_actual].val,val_mas_personajes[elemento_actual].val,audios_vistos[elemento_actual].val)

			if ((accion == "over"&&sensibles_over[elemento_actual].val==false)||(accion == "clic_zoom"&&zoom_consultados[elemento_actual].val==false)||(accion == "masinfo_clic"&&masinfo_consultados[elemento_actual].val==false)||(accion == "descarga_clic"&&descargas_consultadas[elemento_actual].val==false)||(accion == "clic_interno"&&clics_internos_vistos[elemento_actual].val==false)||(accion == "clic_internob"&&clics_internos_vistosb[elemento_actual].val==false)||(accion == "clic"&&sensibles_clic[elemento_actual].val==false)||(accion == "fin_video"&&videos_vistos[elemento_actual].val==false)||(accion == "mas_personaje"&&val_mas_personajes[elemento_actual].val==false)||(accion == "fin_audio"&&audios_vistos[elemento_actual].val==false)) {
				console.log("entra inte")
				
				sigInteract();
			}


			if (accion == "clic"){
			sensibles_clic[elemento_actual].val = true;
			} else if (accion == "over") {
			sensibles_over[elemento_actual].val = true;
			} else if (accion == "fin_video") {
			videos_vistos[elemento_actual].val = true;
			} else if (accion == "masinfo_clic") {
			masinfo_consultados[elemento_actual].val = true;
			} else if (accion == "descarga_clic") {
			descargas_consultadas[elemento_actual].val = true;
			} else if (accion == "clic_interno"){
			clics_internos_vistos[elemento_actual].val = true;
			} else if (accion == "clic_zoom") {
			zoom_consultados[elemento_actual].val = true;
			} else if (accion == "mas_personaje") {
			val_mas_personajes[elemento_actual].val = true;
			} else if(accion == "clic_internob"){
			clics_internos_vistosb[elemento_actual].val = true;
			} if(accion == "fin_audio"){
			audios_vistos[elemento_actual].val = true;
			}
			//clic_mayor_actualb = 0;
			//clic_mayor_actual = 0;
			if(!clic_en_masinfo){
				$("#contenido_c"+actual_circ+"_0").find('[id^=clic]').each(function(index){
	    		id_clicac = this.id;
	    		id_clicac = id_clicac.replace("clic", "");
		    		if(!isNaN(id_clicac)){
		    			if(permitido_clic[id_clicac].val){
		    			clic_mayor_actual = parseInt(id_clicac);
		    			}
		    		}
	    		});

				$("#contenido_c"+actual_circ+"_0").find('[id^=clicb]').each(function(index){

		    	id_clicac = this.id;
	    		id_clicac = id_clicac.replace("clicb", "");
		    		if(!isNaN(id_clicac)){
		    			if(permitido_clicb[id_clicac].val){
		    			clic_mayor_actualb = parseInt(id_clicac);
		    			}
		    		}
	    		});
				
			} else {
				$("#contenido_c"+actual_circ).find('[id^=clic]').each(function(index){
	    		id_clicac = this.id;
	    		id_clicac = id_clicac.replace("clic", "");
		    		if(!isNaN(id_clicac)){
		    			if(permitido_clic[id_clicac].val){
		    			clic_mayor_actual = parseInt(id_clicac);
		    			}
		    		}
	    		});
	    		
				$("#contenido_c"+actual_circ).find('[id^=clicb]').each(function(index){
		    	id_clicac = this.id;
	    		id_clicac = id_clicac.replace("clicb", "");
		    		if(!isNaN(id_clicac)){
				
		    			if(permitido_clicb[id_clicac].val){
		    			clic_mayor_actualb = parseInt(id_clicac);
		    			}
		    		}
	    		});
			}
			
			//console.log("clics mayores",clic_mayor_actual,clic_mayor_actualb)

			//val_mas_personajes
			
			count_clic = 0;
			count_over = 0;
			count_videos = 0;
			count_masinfo = 0;
			count_descargas = 0;
			count_clics_internos = 0;
			count_clics_zoom = 0;
			count_clics_maspersonajes = 0;
			count_clics_internosb = 0;
			count_audios = 0;


			

			if (tipo == "tipo4"){
				sensibles_clic[0].val = true;
				
			}

			if (parent.znThisPage == parent.var_paginas_totales && sensibles_clic.length>0 && parent.znPages>1){
				sensibles_clic[0].val = true;
			}

			if (sensibles_over.length>0){
				for (i = 0; i < sensibles_over.length; i++) {
					if (sensibles_over[i].val == true) {
						count_over += 1;
					}
				}
			}
			
			
			if (sensibles_clic.length>0){
			for (i = 0; i < sensibles_clic.length; i++) { 
				if (sensibles_clic[i].val == true) {
					count_clic += 1;
					}
				}
			}

			if (videos_vistos.length>0){
			for (i = 0; i < videos_vistos.length; i++) { 
				if (videos_vistos[i].val == true) {
					count_videos += 1;
					}
				}
			}

			if (audios_vistos.length>0){
			for (i = 0; i < audios_vistos.length; i++) { 
				if (audios_vistos[i].val == true) {
					count_audios += 1;
					}
				}
			}

			if (masinfo_consultados.length>0){
			for (i = 0; i < masinfo_consultados.length; i++) { 
				if (masinfo_consultados[i].val == true) {
					count_masinfo += 1;

					}
				}
			}
			
			if(clics_internos_vistos.length>0){

				for (i = 0; i < clics_internos_vistos.length; i++) { 
					
				if (clics_internos_vistos[i].val == true) {
					count_clics_internos += 1;
					}
				}
				
				
			}

			if(zoom_consultados.length>0){
				for (i = 0; i < zoom_consultados.length; i++) { 
				if (zoom_consultados[i].val == true) {
					count_clics_zoom += 1;
					}
				}
				
				
			}


			if(val_mas_personajes.length>0){
				for (i = 0; i < val_mas_personajes.length; i++) { 
				if (val_mas_personajes[i].val == true) {
					count_clics_maspersonajes += 1;
					}
				}
				
				
			}

			if(clics_internos_vistosb.length>0){
				for (i = 0; i < clics_internos_vistosb.length; i++) { 
			//console.log(i)

				if (clics_internos_vistosb[i].val == true) {
					count_clics_internosb += 1;
					}
				}
				
				
			}
			//console.log(count_clics_internosb)
			/*

			if(zoom_consultados.length>0){
				for (i = 0; i < zoom_consultados.length; i++) { 
				if (zoom_consultados[i].val == true) {
					count_clics_zoom += 1;
					}
				}
				
				
			}
			*/

			if (descargas_consultadas.length>0){
			for (i = 0; i < descargas_consultadas.length; i++) { 
				if (descargas_consultadas[i].val == true) {
					count_descargas += 1;

					}
				}
			}

			if(cantidad_circulos>0){
				if(count_clic == sensibles_clic.length && parent.znThisPage == parent.var_paginas_totales && tipo == "tipo2"){
					if (cantidad_descargas>0){
						for (i = 0; i < descargas_consultadas.length-1; i++) { 
						document.getElementById("descarga"+i).style.visibility = "visible";
						}
					}
				}
			}

			if(cantidad_sensibles>0){
				if(count_over == sensibles_over.length && parent.znThisPage == parent.var_paginas_totales && tipo == "tipo2"){
					if (cantidad_descargas>0){
						for (i = 0; i < descargas_consultadas.length-1; i++) { 
						document.getElementById("descarga"+i).style.visibility = "visible";
						}
					}
				}
			}
			if(accion=="masinfo_clic"){

					if(over_en_mas_info[elemento_actual]==undefined||over_en_mas_info[elemento_actual]==null&&clic_en_mas_info[elemento_actual]==undefined||clic_en_mas_info[elemento_actual]==null){
						
						document.getElementById("estado_btnmasinfo"+elemento_actual).className = "estado_btnmasinfo2";
						
					}
				
			}

			if (accion=="over"||accion=="clic_interno"||accion=="clic_internob"||accion=="masinfo_clic"||accion=="clic_zoom"||accion=="descarga_clic"||accion=="fin_video"||accion=="fin_audio"){
						//for (i = 0; i < cantidad_clics; i++) { 
							esta_en_masinfo = false;
								//console.log(over_en_clics)

							for (int = 0; int < video_en_mas_info.length; int++) {
								//console.log(over_en_clics[int])

								if(video_en_mas_info[int]!=undefined||video_en_mas_info[video_en_mas_info]!=null){
								//console.log(over_en_clics[int])

									//if(over_en_clics[int].length>1){
									for (int2 = 0; int2 < video_en_mas_info[int].length; int2++) {
									//console.log(over_en_clics[int][int2], elemento_actual)
									if(accion=="fin_video"){
										if(video_en_mas_info[int][int2] == elemento_actual){
											esta_en_masinfo = true;
											masinfo_actual = int;

										}
									}
									//}
								} /*else{
									if(over_en_clics[int] == elemento_actual){
										esta_en_clic = true;

									}
								
								}*/
								}
							}


							//esta_en_masinfo = false;
								//console.log(over_en_clics)

							for (int = 0; int < audio_en_mas_info.length; int++) {
								//console.log(over_en_clics[int])

								if(audio_en_mas_info[int]!=undefined||audio_en_mas_info[video_en_mas_info]!=null){
								//console.log(over_en_clics[int])

									//if(over_en_clics[int].length>1){
									for (int2 = 0; int2 < audio_en_mas_info[int].length; int2++) {
									//console.log(over_en_clics[int][int2], elemento_actual)
									if(accion=="fin_audio"){
										if(audio_en_mas_info[int][int2] == elemento_actual){
											esta_en_masinfo = true;
											masinfo_actual = int;

										}
									}
									//}
								} /*else{
									if(over_en_clics[int] == elemento_actual){
										esta_en_clic = true;

									}
								
								}*/
								}
							}


							for (int = 0; int < zoom_en_mas_info.length; int++) {
								//console.log(over_en_clics[int])

								if(zoom_en_mas_info[int]!=undefined||zoom_en_mas_info[int]!=null){
								//console.log(over_en_clics[int])

									//if(over_en_clics[int].length>1){
									for (int2 = 0; int2 < zoom_en_mas_info[int].length; int2++) {
									//console.log(over_en_clics[int][int2], elemento_actual)
									if(accion=="clic_zoom"){
										if(zoom_en_mas_info[int][int2] == elemento_actual){
											esta_en_masinfo = true;
											masinfo_actual = int;

										}
									}
									//}
								} /*else{
									if(over_en_clics[int] == elemento_actual){
										esta_en_clic = true;

									}
								
								}*/
								}
							}
							


							for (int = 0; int < over_en_mas_info.length; int++) {
								//console.log(over_en_clics[int])

								if(over_en_mas_info[int]!=undefined||over_en_mas_info[int]!=null){
								//console.log(over_en_clics[int])

									//if(over_en_clics[int].length>1){
									for (int2 = 0; int2 < over_en_mas_info[int].length; int2++) {
									//console.log(over_en_clics[int][int2], elemento_actual)
									if(accion=="over"){
										if(over_en_mas_info[int][int2] == elemento_actual){
											esta_en_masinfo = true;
											masinfo_actual = int;

										}
									}
									//}
								} /*else{
									if(over_en_clics[int] == elemento_actual){
										esta_en_clic = true;

									}
								
								}*/
								}
							}
							

							for (int = 0; int < clic_en_mas_info.length; int++) {
								//console.log(over_en_clics[int])

								if(clic_en_mas_info[int]!=undefined||clic_en_mas_info[int]!=null){
								//console.log(over_en_clics[int])

									//if(over_en_clics[int].length>1){
									for (int2 = 0; int2 < clic_en_mas_info[int].length; int2++) {
									//console.log(over_en_clics[int][int2], elemento_actual)
									if(accion=="clic_interno"){

										if(clic_en_mas_info[int][int2] == elemento_actual){
											esta_en_masinfo = true;
											masinfo_actual = int;
							//console.log(masinfo_actual,int2)

										}
									}
									//}
								} /*else{
									if(over_en_clics[int] == elemento_actual){
										esta_en_clic = true;

									}
								
								}*/
								}
							}

							for (int = 0; int < clic_en_mas_infob.length; int++) {
								//console.log(over_en_clics[int])

								if(clic_en_mas_infob[int]!=undefined||clic_en_mas_infob[int]!=null){
								//console.log(over_en_clics[int])

									//if(over_en_clics[int].length>1){
									for (int2 = 0; int2 < clic_en_mas_infob[int].length; int2++) {
									//console.log(over_en_clics[int][int2], elemento_actual)
									if(accion=="clic_internob"){

										if(clic_en_mas_infob[int][int2] == elemento_actual){
											esta_en_masinfo = true;
											masinfo_actual = int;
							//console.log(masinfo_actual,int2)

										}
									}
									//}
								} /*else{
									if(over_en_clics[int] == elemento_actual){
										esta_en_clic = true;

									}
								
								}*/
								}
							}

							for (int = 0; int < descarga_en_mas_info.length; int++) {

								if(clic_en_mas_info[int]!=undefined||clic_en_mas_info[int]!=null){
								//console.log(over_en_clics[int])
								//console.log(descarga_en_mas_info[int],accion,elemento_actual)

									//if(over_en_clics[int].length>1){
									for (int2 = 0; int2 < clic_en_mas_info[int].length; int2++) {
									//console.log(over_en_clics[int][int2], elemento_actual)
									if(accion=="descarga_clic"){

										if(descarga_en_mas_info[int][int2] == elemento_actual){
											esta_en_masinfo = true;
											masinfo_actual = int;
							//console.log(masinfo_actual,int2)

										}
									}
									//}
								} /*else{
									if(over_en_clics[int] == elemento_actual){
										esta_en_clic = true;

									}
								
								}*/
								}
							}
							if(accion=="masinfo_clic"){
								esta_en_masinfo=true;
								masinfo_actual = numero_arreglo_masinfo_html;
							}
							
		//console.log(clic_en_mas_info)

						if(esta_en_masinfo){
								//console.log(over_en_clics[clic_actual_ok][over_en_clics[clic_actual_ok].length-1])
							if(audio_en_mas_info[masinfo_actual]!=undefined||audio_en_mas_info[masinfo_actual]!=null){
								for (int = audio_en_mas_info[masinfo_actual][0]; int <= audio_en_mas_info[masinfo_actual][audio_en_mas_info[masinfo_actual].length-1]; int++) {
									//console.log(int)
								//over_en_clics[int]==
									if(audios_vistos[int].val){
										 cumple_audio_masinfo = true;
									} else {
										cumple_audio_masinfo = false;
										break;
									}
								}
							} else {
								cumple_audio_masinfo = true;

							}

							if(video_en_mas_info[masinfo_actual]!=undefined||video_en_mas_info[masinfo_actual]!=null){
								for (int = video_en_mas_info[masinfo_actual][0]; int <= video_en_mas_info[masinfo_actual][video_en_mas_info[masinfo_actual].length-1]; int++) {
									//console.log(int)
								//over_en_clics[int]==
									if(videos_vistos[int].val){
										 cumple_video_masinfo = true;
									} else {
										cumple_video_masinfo = false;
										break;
									}
								}
							} else {
								cumple_video_masinfo = true;

							}

							if(zoom_en_mas_info[masinfo_actual]!=undefined||zoom_en_mas_info[masinfo_actual]!=null){
								for (int = zoom_en_mas_info[masinfo_actual][0]; int <= zoom_en_mas_info[masinfo_actual][zoom_en_mas_info[masinfo_actual].length-1]; int++) {
									//console.log(int)
								//over_en_clics[int]==
									if(zoom_consultados[int].val){
										 cumple_zoom_masinfo = true;
									} else {
										cumple_zoom_masinfo = false;
										break;
									}
								}
							} else {
								cumple_zoom_masinfo = true;

							}
							if(over_en_mas_info[masinfo_actual]!=undefined||over_en_mas_info[masinfo_actual]!=null){
								for (int = over_en_mas_info[masinfo_actual][0]; int <= over_en_mas_info[masinfo_actual][over_en_mas_info[masinfo_actual].length-1]; int++) {
									//console.log(int)
								//over_en_clics[int]==
									if(sensibles_over[int].val){
										 cumple_over_masinfo = true;
									} else {
										cumple_over_masinfo = false;
										break;
									}
								}
							} else {
								cumple_over_masinfo = true;

							}
							if(clic_en_mas_info[masinfo_actual]!=undefined||clic_en_mas_info[masinfo_actual]!=null){

								for (int = clic_en_mas_info[masinfo_actual][0]; int <= clic_en_mas_info[masinfo_actual][clic_en_mas_info[masinfo_actual].length-1]; int++) {
									//console.log(int)
								//over_en_clics[int]==
									if(clics_internos_vistos[int].val){
										 cumple_clic_masinfo = true;
									} else {
										cumple_clic_masinfo = false;
										break;
									}
								}
							} else {
								cumple_clic_masinfo = true;

							}

							//console.log(clic_en_mas_infob)
							//console.log(clic_en_mas_info)

							if(clic_en_mas_infob[masinfo_actual]!=undefined||clic_en_mas_infob[masinfo_actual]!=null){

								for (int = clic_en_mas_infob[masinfo_actual][0]; int <= clic_en_mas_infob[masinfo_actual][clic_en_mas_infob[masinfo_actual].length-1]; int++) {
									//console.log(int)
								//over_en_clics[int]==
							//	console.log(clics_internos_vistosb[int].val,int)
									if(clics_internos_vistosb[int].val){
										 cumple_clic_masinfob = true;
									} else {
										cumple_clic_masinfob = false;
										break;
									}
								}
							} else {
								cumple_clic_masinfob = true;

							}


							if(descarga_en_mas_info[masinfo_actual]!=undefined||descarga_en_mas_info[masinfo_actual]!=null){

								for (int = descarga_en_mas_info[masinfo_actual][0]; int <= descarga_en_mas_info[masinfo_actual][descarga_en_mas_info[masinfo_actual].length-1]; int++) {
									//console.log(descargas_consultadas[int])
								//over_en_clics[int]==
									if(descargas_consultadas[int].val){
										 cumple_clic_descarga = true;
									} else {
										cumple_clic_descarga = false;
										break;
									}
								}
							} else {
								cumple_clic_descarga = true;

							}
						}
						//console.log(esta_en_masinfo)
						//console.log(cumple_over_masinfo,cumple_clic_masinfo,cumple_clic_descarga)
						if(esta_en_masinfo){
							//console.log(cumple_over_masinfo,cumple_clic_masinfo,cumple_zoom_masinfo,cumple_clic_descarga,cumple_video_masinfo,cumple_clic_masinfob)
						if(cumple_over_masinfo&&cumple_clic_masinfo&&cumple_zoom_masinfo&&cumple_clic_descarga&&cumple_video_masinfo&&cumple_clic_masinfob&&cumple_audio_masinfo){
							
								if(document.getElementById("estado_btnmasinfo"+numero_arreglo_masinfo).innerHTML != parent.icono_check){
									//document.getElementById("estado_btnmasinfo"+numero_arreglo_masinfo).innerHTML = parent.icono_check;
									document.getElementById("estado_btnmasinfo"+numero_arreglo_masinfo).innerHTML = "<div class='arrow animated bounce' style='margin-left:5px'>" +parent.icono_indica+"</div>";

									total_htmlmasinfo[numero_arreglo_masinfo].innerHTML = parent.icono_check;
									total_htmlmasinfo[numero_arreglo_masinfo].className = "boton_masinfo_visto";

									
								}

							}
							}


				}

					
			

			//for (i = 0; i < cantidad_circulos; i++) { 
				if(cantidad_clics>0){
					if(accion=="clic_interno"){
							
						
						//console.log(over_en_clics[elemento_actual])
						if((zoom_en_clics[elemento_actual]==undefined||zoom_en_clics[elemento_actual]==null)&&(over_en_clics[elemento_actual]==undefined||over_en_clics[elemento_actual]==null)&&(clics_en_clics[elemento_actual]==undefined||clics_en_clics[elemento_actual]==null)&&(descarga_en_clics[elemento_actual]==undefined||descarga_en_clics[elemento_actual]==null)&&(video_en_clics[elemento_actual]==undefined||video_en_clics[elemento_actual]==null)&&(audio_en_clics[elemento_actual]==undefined||audio_en_clics[elemento_actual]==null)){
						
							if(!$("#clic"+elemento_actual).hasClass("clic_visto")){
							setTimeout(function(){ 


									if($("#clic"+elemento_actual).hasClass("selected_clic")){
										es_selclic = true;
									} else {
										es_selclic = false;

									}

									

									document.getElementById("clic"+elemento_actual).className = "clic_visto";
									
									if(es_selclic){
										$("#clic"+elemento_actual).addClass("selected_clic");
										
									}
						

									//if(clic_mayor_actual<cantidad_clics-1 && !permitido_clic[clic_mayor_actual+1].val){
									if(clic_mayor_actual<cantidad_clics-1 && !permitido_clic[elemento_actual+1].val){

										

										permitido_clic[elemento_actual+1].val = true;
										permitido_clic[clic_actual_ok+1].val = true;
										document.getElementById("clic"+(elemento_actual+1)).className = "clic_abierto";
										document.getElementById("clic"+(clic_actual_ok+1)).className = "clic_abierto";
									}
							}, velocidad_lenta);
							}

						}
					} else if (accion=="over" || accion=="clic_internob"||accion=="clic_zoom"||accion=="descarga_clic"||accion=="fin_video"||accion=="fin_audio"){
						//for (i = 0; i < cantidad_clics; i++) { 
							over_esta_en_clic = false;
							clic_esta_en_clic = false;
							zoom_esta_en_clic = false;
							descarga_esta_en_clic = false;
							video_esta_en_clic = false;
							audio_esta_en_clic = false;

								//console.log(over_en_clics)
								//console.log(over_en_clics)
								//console.log(clics_en_clics)
						
								//console.log(over_en_clics[int])
								
								for (int = 0; int < cantidad_clics; int++) {
								if(video_en_clics[clic_mayor_actual]!=undefined||video_en_clics[clic_mayor_actual]!=null){
								//console.log(over_en_clics[int])
									for (inte = video_en_clics[clic_mayor_actual][0]; inte <= video_en_clics[clic_mayor_actual][video_en_clics[clic_mayor_actual].length-1]; inte++) {
								//console.log(int)
							//over_en_clics[int]==
										if(videos_vistos[inte].val){
											 cumple_video_clic = true;
										} else {
											cumple_video_clic = false;
											break;
										}
									}
								
								} else {
									cumple_video_clic = true;

								}


								if(audio_en_clics[clic_mayor_actual]!=undefined||audio_en_clics[clic_mayor_actual]!=null){
								//console.log(over_en_clics[int])
									for (inte = audio_en_clics[clic_mayor_actual][0]; inte <= audio_en_clics[clic_mayor_actual][audio_en_clics[clic_mayor_actual].length-1]; inte++) {
								//console.log(int)
							//over_en_clics[int]==
										if(audios_vistos[inte].val){
											 cumple_audio_clic = true;
										} else {
											cumple_audio_clic = false;
											break;
										}
									}
								
								} else {
									cumple_audio_clic = true;

								}
								
								if(zoom_en_clics[clic_mayor_actual]!=undefined||zoom_en_clics[clic_mayor_actual]!=null){
								//console.log(over_en_clics[int])
									for (inte = zoom_en_clics[clic_mayor_actual][0]; inte <= zoom_en_clics[clic_mayor_actual][zoom_en_clics[clic_mayor_actual].length-1]; inte++) {
								//console.log(int)
							//over_en_clics[int]==
										if(zoom_consultados[inte].val){
											 cumple_zoom_clic = true;
										} else {
											cumple_zoom_clic = false;
											break;
										}
									}
								
								} else {
									cumple_zoom_clic = true;

								}

								if(over_en_clics[clic_mayor_actual]!=undefined||over_en_clics[clic_mayor_actual]!=null){
								//console.log(over_en_clics[int])
									for (inte = over_en_clics[clic_mayor_actual][0]; inte <= over_en_clics[clic_mayor_actual][over_en_clics[clic_mayor_actual].length-1]; inte++) {
								//console.log(int)
							//over_en_clics[int]==
										if(sensibles_over[inte].val){
											 cumple_over_clic = true;
										} else {
											cumple_over_clic = false;
											break;
										}
									}
								
								} else {
									cumple_over_clic = true;

								}



								if(descarga_en_clics[clic_mayor_actual]!=undefined||descarga_en_clics[clic_mayor_actual]!=null){
								//console.log(over_en_clics[int])

									for (inte = descarga_en_clics[clic_mayor_actual][0]; inte <= descarga_en_clics[clic_mayor_actual][descarga_en_clics[clic_mayor_actual].length-1]; inte++) {
								//console.log(int)
							//over_en_clics[int]==
										if(descargas_consultadas[inte].val){
											 cumple_descarga_clic = true;
										} else {
											cumple_descarga_clic = false;
											break;
										}
									}
								
								} else {
									cumple_descarga_clic = true;

								}
								//console.log(int)
								if(clics_en_clics[clic_mayor_actual]!=undefined||clics_en_clics[clic_mayor_actual]!=null){
								//console.log(over_en_clics[int])
									for (inte = clics_en_clics[clic_mayor_actual][0]; inte <= clics_en_clics[clic_mayor_actual][clics_en_clics[clic_mayor_actual].length-1]; inte++) {
								//console.log(int)
							//over_en_clics[int]==
										if(clics_internos_vistosb[inte].val){
											 cumple_clic_clic = true;
										} else {
											cumple_clic_clic = false;
											break;
										}
									}
								
								} else {
									cumple_clic_clic = true;

								}



							}

							//console.log(esta_en_clic)
							
							
							
							//console.log(cumple_over_clic,cumple_clic_clic,cumple_zoom_clic,cumple_descarga_clic,cumple_video_clic)

							if(cumple_over_clic&&cumple_clic_clic&&cumple_zoom_clic&&cumple_descarga_clic&&cumple_video_clic&&cumple_audio_clic){

								if(!$("#clic"+clic_mayor_actual).hasClass("clic_visto")&&clics_internos_vistos[clic_mayor_actual].val){
									//console.log(cumple_over_clic)
									if($("#clic"+clic_mayor_actual).hasClass("selected_clic")){
										es_selclic = true;
									} else {
										es_selclic = false;

									}
									document.getElementById("clic"+clic_mayor_actual).className = "clic_visto";

									if(es_selclic){
										$("#clic"+clic_mayor_actual).addClass("selected_clic");

									}

									if(clic_mayor_actual<cantidad_clics-1 && !permitido_clic[clic_mayor_actual+1].val){
										permitido_clic[clic_mayor_actual+1].val = true;
										document.getElementById("clic"+(clic_mayor_actual+1)).className = "clic_abierto";
										
										//$('.txt_interno').eq(0).find(">div>div").eq(0).find(".instruccion_interna").eq(0).fadeTo(1,velocidad_media);

									}
								}

							}
							
					//	}
						
					} 


					if(cantidad_clicsb>0){
						if(accion=="clic_internob"){
							//console.log(over_en_clics[elemento_actual])
							if((zoom_en_clicsb[elemento_actual]==undefined||zoom_en_clicsb[elemento_actual]==null)&&(over_en_clicsb[elemento_actual]==undefined||over_en_clicsb[elemento_actual]==null)&&(video_en_clicsb[elemento_actual]==undefined||video_en_clicsb[elemento_actual]==null)&&(descarga_en_clicsb[elemento_actual]==undefined||descarga_en_clicsb[elemento_actual]==null)&&(audio_en_clicsb[elemento_actual]==undefined||audio_en_clicsb[elemento_actual]==null)){
							//if((over_en_clicsb[elemento_actual]==undefined||over_en_clicsb[elemento_actual]==null)&&(video_en_clicsb[elemento_actual]==undefined||video_en_clicsb[elemento_actual]==null)&&(descarga_en_clicsb[elemento_actual]==undefined||descarga_en_clicsb[elemento_actual]==null)){
							
								if(!$("clicb"+elemento_actual).hasClass("clic_vistob")){
										if($("#clicb"+elemento_actual).hasClass("selected_clicb")){
										es_selclicb = true;
										} else {
											es_selclicb = false;

										}

									
										document.getElementById("clicb"+elemento_actual).className = "clic_vistob";

									

									
									
									if(es_selclicb){
										$("#clicb"+elemento_actual).addClass("selected_clicb");
										
									}
										if(clic_actual_okb<cantidad_clicsb-1 && !permitido_clicb[clic_actual_okb+1].val){
											permitido_clicb[clic_actual_okb+1].val = true;

											document.getElementById("clicb"+(elemento_actual+1)).className = "clic_abiertob";
										}
									}
							}
							
						} else if (accion=="over"||accion=="descarga_clic"||accion=="fin_video"||accion=="fin_audio"){
						
							//for (i = 0; i < cantidad_clics; i++) { 
								//esta_en_clicb = false;

								over_esta_en_clicb = false;
								descarga_en_clicsb = false;
									//console.log(over_en_clics)

								for (int = 0; int < over_en_clicsb.length; int++) {
									//console.log(over_en_clics[int])

									if(over_en_clicsb[int]!=undefined||over_en_clicsb[int]!=null){
									//console.log(over_en_clics[int])

										//if(over_en_clics[int].length>1){
										for (int2 = 0; int2 < over_en_clicsb[int].length; int2++) {
										//console.log(over_en_clics[int][int2], elemento_actual)
										if(over_en_clicsb[int][int2] == elemento_actual){
											over_esta_en_clicb = true;

										}
										//}
									} 
									}
								}

								//console.log(esta_en_clic)
								
								for (int = 0; int < cantidad_clicsb; int++) {
								
								if(over_en_clicsb[clic_mayor_actualb]!=undefined||over_en_clicsb[clic_mayor_actualb]!=null){
								//console.log(over_en_clics[int])
									for (inte = over_en_clicsb[clic_mayor_actualb][0]; inte <= over_en_clicsb[clic_mayor_actualb][over_en_clicsb[clic_mayor_actualb].length-1]; inte++) {
								//console.log(int)
							//over_en_clics[int]==
										if(sensibles_over[inte].val){
											 cumple_over_clicb = true;
										} else {
											cumple_over_clicb = false;
											break;
										}
									}
								
								} else {
									cumple_over_clicb = true;

								}

								if(zoom_en_clicsb[clic_mayor_actualb]!=undefined||zoom_en_clicsb[clic_mayor_actualb]!=null){
								//console.log(over_en_clics[int])

									for (inte = zoom_en_clicsb[clic_mayor_actualb][0]; inte <= zoom_en_clicsb[clic_mayor_actualb][zoom_en_clicsb[clic_mayor_actualb].length-1]; inte++) {
								//console.log(int)
							//over_en_clics[int]==
										if(zoom_consultados[inte].val){
											 cumple_zoom_clicb = true;
										} else {
											cumple_zoom_clicb = false;
											break;
										}
									}
								
								} else {
									cumple_zoom_clicb = true;

								}

								if(descarga_en_clicsb[clic_mayor_actualb]!=undefined||descarga_en_clicsb[clic_mayor_actualb]!=null){
								//console.log(over_en_clics[int])

									for (inte = descarga_en_clicsb[clic_mayor_actualb][0]; inte <= descarga_en_clicsb[clic_mayor_actualb][descarga_en_clicsb[clic_mayor_actualb].length-1]; inte++) {
								//console.log(int)
							//over_en_clics[int]==
										if(descargas_consultadas[inte].val){
											 cumple_descarga_clicb = true;
										} else {
											cumple_descarga_clicb = false;
											break;
										}
									}
								
								} else {
									cumple_descarga_clicb = true;

								}
								//console.log(int)
								
								if(video_en_clicsb[clic_mayor_actualb]!=undefined||video_en_clicsb[clic_mayor_actualb]!=null){
								//console.log(over_en_clics[int])

									for (inte = video_en_clicsb[clic_mayor_actualb][0]; inte <= video_en_clicsb[clic_mayor_actualb][video_en_clicsb[clic_mayor_actualb].length-1]; inte++) {
								//console.log(int)
							//over_en_clics[int]==
										if(videos_vistos[inte].val){
											 cumple_video_clicb = true;
										} else {
											cumple_video_clicb = false;
											break;
										}
									}
								
								} else {
									cumple_video_clicb = true;

								}


								if(audio_en_clicsb[clic_mayor_actualb]!=undefined||audio_en_clicsb[clic_mayor_actualb]!=null){
								//console.log(over_en_clics[int])

									for (inte = audio_en_clicsb[clic_mayor_actualb][0]; inte <= audio_en_clicsb[clic_mayor_actualb][audio_en_clicsb[clic_mayor_actualb].length-1]; inte++) {
								//console.log(int)
							//over_en_clics[int]==
										if(audios_vistos[inte].val){
											 cumple_audio_clicb = true;
										} else {
											cumple_audio_clicb = false;
											break;
										}
									}
								
								} else {
									cumple_audio_clicb = true;

								}


							}
								//console.log(cumple_over_clicb,cumple_descarga_clicb,clic_actual_okb,clic_mayor_actualb)

								if(cumple_over_clicb&&cumple_descarga_clicb&&cumple_video_clicb&&cumple_audio_clicb){
									if(document.getElementById("clicb"+clic_mayor_actualb).className != "clic_vistob"&&clics_internos_vistosb[clic_mayor_actualb].val){

										if($("#clicb"+clic_mayor_actualb).hasClass("selected_clicb")){
										es_selclicb = true;
										} else {
											es_selclicb = false;

										}

									
										document.getElementById("clicb"+clic_mayor_actualb).className = "clic_vistob";
										

									

									
									
									if(es_selclicb){
										$("#clicb"+clic_mayor_actualb).addClass("selected_clicb");
										
									}
									//if(document.getElementById("clicb"+clic_actual_okb).className != "clic_vistob"){
										if(clic_mayor_actualb<cantidad_clicsb-1 && !permitido_clicb[clic_mayor_actualb+1].val){
											permitido_clicb[clic_mayor_actualb+1].val = true;
											document.getElementById("clicb"+(clic_mayor_actualb+1)).className = "clic_abiertob";

											//$('.txt_internob').eq(clic_mayor_actualb).find(">div>div").eq(1).find(".instruccion_interna:last").fadeTo(1,velocidad_media);

										}
									}

								
							}
					//	}
						
					}
					}
				}
				
				
				if(cantidad_circulos>0 && tipo=="tipo3"){
					//console.log(count_over,cantidad_sensibles_original[numero_arreglo_circulos])

					//console.log(count_clics_internos, cantidad_clics_original[circulo_actual_ok])
					//console.log(count_over, cantidad_sensibles_original[circulo_actual_ok])
					//console.log(count_clics_maspersonajes, arreglo_masper[circulo_actual_ok])
					//console.log(count_masinfo, cantidad_masinfo_original[circulo_actual_ok])
					//
					//console.log(count_clics_internosb)
					//console.log(count_over,cantidad_sensibles_original,circulo_actual_ok)
					//console.log(count_clics_internosb,cantidad_clics_originalb,circulo_actual_ok)
					//console.log(count_clics_internos,count_clics_internos,circulo_actual_ok)
				//console.log(count_clics_internosb == cantidad_clics_originalb[circulo_actual_ok], count_clics_internos == cantidad_clics_original[circulo_actual_ok], count_over == cantidad_sensibles_original[circulo_actual_ok], count_clics_maspersonajes == arreglo_masper[circulo_actual_ok],count_masinfo == cantidad_masinfo_original[circulo_actual_ok])
				//			console.log("cumple req ant",count_over, cantidad_sensibles_original[circulo_actual_ok])

							if((parent.znThisPage<parent.pagina_superior||parent.completado)&&accion == "clic" && parent.tipo_curso == "isometrico"){

										var_instruccion_circulos.style.width = 1120+"px"

								instruccion_circulos.visible = true;
								instruccion_circulos.alpha = 1;
								var_instruccion_circulos.innerHTML = "<div style='float:right;'><span style='margin-right:5px'>"+parent.tx_puedesmay+" volver al escenario.</span> <div class='arrow' style='padding-left:'0'px;font-size:18px;display:inline-block'><div style=' transform: scaleX(-1);'>"+parent.icono_indica+" </div></div></div>";
						console.log("boton volver aparece B!")
										
										$(".boton_volver").fadeIn(velocidad_media);

										parent.audio_volver.play();
							}
					
					if (count_clics_zoom == cantidad_zoom_original[circulo_actual_ok] && count_clics_internosb == cantidad_clics_originalb[circulo_actual_ok] && count_clics_internos == cantidad_clics_original[circulo_actual_ok] && count_over == cantidad_sensibles_original[circulo_actual_ok] && count_clics_maspersonajes == arreglo_masper[circulo_actual_ok] && count_masinfo == cantidad_masinfo_original[circulo_actual_ok] && count_descargas == cantidad_descargas_original[circulo_actual_ok] && count_videos == cantidad_videos_original[circulo_actual_ok] && count_audios == cantidad_audios_original[circulo_actual_ok]) {
							setTimeout(function(){ 
							console.log("cumple req")
							
							if(document.getElementById("circ_btn"+circulo_actual_ok).className != "circulos_botones_vistos"){
								if(circulo_actual_ok<cantidad_circulos-1){
								instruccion_circulos.visible = true;
								instruccion_circulos.alpha = 1;
								
									if(btn_zonaper){
									var_instruccion_circulos.innerHTML = "<div style='float:right;'><span style='margin-right:5px'>Ha sido desbloqueado otro cuadrante del esquema.</span> <div class='arrow' style='padding-left:'0'px;font-size:18px;display:inline-block'><div style=' transform: scaleX(-1);'>"+parent.icono_indica+" </div></div></div>";

									} else if(ini_especial){
									var_instruccion_circulos.innerHTML = "<div style='float:right;'><span style='margin-right:5px'>Ha sido desbloqueada una de las fichas del rompecabezas.</span> <div class='arrow' style='padding-left:'0'px;font-size:18px;display:inline-block'><div style=' transform: scaleX(-1);'>"+parent.icono_indica+" </div></div></div>";

									} else {
										if(posabs_btncirc){
									var_instruccion_circulos.innerHTML = "<div style='float:right;'><span style='margin-right:5px'>"+parent.tx_puedesmay+" volver al escenario.</span> <div class='arrow' style='padding-left:'0'px;font-size:18px;display:inline-block'><div style=' transform: scaleX(-1);'>"+parent.icono_indica+" </div></div></div>";
						console.log("boton volver aparece B!")
										
										$(".boton_volver").fadeIn(velocidad_media);

										parent.audio_volver.play();


											} else {
									var_instruccion_circulos.innerHTML = "<div style='float:right;'><span style='margin-right:5px'>"+parent.tx_puedesmay+" avanzar al siguiente botón.</span> <div class='arrow' style='padding-left:'0'px;font-size:18px;display:inline-block'><div style=' transform: scaleX(-1);'>"+parent.icono_indica+" </div></div></div>";
									}
									}
								}

							document.getElementById("circ_btn"+circulo_actual_ok).className = "circulos_botones_vistos";
							document.getElementById("est_btn"+circulo_actual_ok).className = "btn_visto";
							document.getElementById("cb"+circulo_actual_ok).className = "cb_int_visto";

							scale_actual = contenedor_circulos[circulo_actual_ok].scaleX;
							contenedor_circulos[circulo_actual_ok].scaleX = scale_actual*0.8;
							contenedor_circulos[circulo_actual_ok].scaleY = scale_actual*0.8;
							createjs.Tween.get(contenedor_circulos[circulo_actual_ok],{override:true}).to({scaleX:scale_actual, scaleY:scale_actual},velocidad_rapida),createjs.Ease.bounceInOut;
							}
							if(ini_especial){
								if(!clic_btnesp){
									$(".btn_iniespecial").fadeIn(parent.velocidad_media);


									if(!btn_zonaper){

									if(sprites_total_an[circulo_actual_ok].currentAnimation!="status_visto"){

										parent.audio_boton.play();
										document.getElementById("indica_circ").style.visibility = "visible";
									}

									sprites_total_an[circulo_actual_ok].gotoAndPlay("status_visto");
									} 



								} else {

									if(!btn_zonaper){

									createjs.Tween.get(sprites_total_an[circulo_actual_ok],{override:true}).to({x:x_btnanima[circulo_actual_ok],y:y_btnanima[circulo_actual_ok],rotation:0},velocidad_lenta, createjs.Ease.bounceOut);
									}
								}
							}
						if(circulo_actual_ok<cantidad_circulos-1){
							if(!permitido_btn[circulo_actual_ok+1].val){
							parent.audio_boton.play();
							permitido_btn[circulo_actual_ok+1].val = true;
							parent.znInt = circulo_actual_ok+1;
							document.getElementById("circ_btn"+(circulo_actual_ok+1)).className = "circulos_botones_abiertos";
							document.getElementById("est_btn"+(circulo_actual_ok+1)).className = "btn_abierto";
							document.getElementById("cb"+(circulo_actual_ok+1)).className = "cb_int_abierto";
							if(!posabs_btncirc){
								document.getElementById("indica_circ").style.visibility = "visible";
							}
							if(ini_especial){
								if(!btn_zonaper){

									sprites_total_an[circulo_actual_ok+1].gotoAndPlay("status_abierto");
									}
								document.getElementById("indica_circ").style.left = $(".btn_iniespecial").position().left+$(".btn_iniespecial").width()/2+"px"// + "900px"
								document.getElementById("indica_circ").style.top = $(".btn_iniespecial").position().top+$(".btn_iniespecial").height()+20+"px"// + "900px"

							} else {


							document.getElementById("indica_circ").style.left =(contenedor_circulos[circulo_actual_ok+1].x-4)+"px"
							}
							scale_actual2 = contenedor_circulos[circulo_actual_ok+1].scaleX;

							contenedor_circulos[circulo_actual_ok+1].scaleX = scale_actual2*1.15;
							contenedor_circulos[circulo_actual_ok+1].scaleY = scale_actual2*1.15;
							createjs.Tween.get(contenedor_circulos[circulo_actual_ok+1],{override:true}).wait(velocidad_rapida).to({scaleX:scale_actual2, scaleY:scale_actual2},velocidad_rapida),createjs.Ease.bounceIn;
							}
						} else {
							//console.log(parent.znThisPage,parent.estados_numeros[parent.znThisPage+1],parent.estados_numeros[parent.znThisPage])
							//console.log(btn_zonaper,clic_btnesp)
								if(btn_zonaper&&!clic_btnesp){
									parent.audio_boton.play();

									document.getElementById("indica_circ").style.visibility = "visible";
								}

							}
							actualizaEstadoSimb();

							}, velocidad_lenta);
							

					}
				}
			//}
				//console.log(count_clic,sensibles_clic.length,count_over, sensibles_over.length,count_videos, videos_vistos.length,count_masinfo,masinfo_consultados.length,count_descargas, descargas_consultadas.length,count_clics_internos,clics_internos_vistos.length,count_clics_zoom,zoom_consultados.length,count_clics_maspersonajes,val_mas_personajes.length,count_clics_internosb,clics_internos_vistosb.length);

				if (count_clic == sensibles_clic.length && count_over == sensibles_over.length && count_videos == videos_vistos.length && count_masinfo == masinfo_consultados.length && count_descargas == descargas_consultadas.length && count_clics_internos == clics_internos_vistos.length && count_clics_zoom == zoom_consultados.length && count_clics_maspersonajes == val_mas_personajes.length && count_clics_internosb == clics_internos_vistosb.length && count_audios == audios_vistos.length ) {

					if (parent.znThisPage != parent.znPages) {
					setTimeout(function(){ 
					
					//parent.document.getElementById("flecha_abajo").style.visibility = "visible";
					//contenedores_circulos_menu[znThisPage].

					//parent.contenedores_circulos_menu[parent.znThisPage]
					control_animacion_pantalla_final = true;
					if(ini_especial){
						if(clic_btnesp){
							console.log("AAA")
								suma_total();

						}
					} else {
							console.log("BBB",parent.preguntas_pantallas[parent.znThisPage-1][circulo_actual_ok],num_reto)
						if(parent.preguntas_pantallas[parent.znThisPage-1][circulo_actual_ok]==num_reto){
							if(clic_volverfin){
								suma_total();	
							} else {
								if(posabs_btncirc){

						//console.log(parent.preguntas_pantallas,num_reto,parent.preguntas_pantallas[parent.znThisPage-1][circulo_actual_ok],parent.znThisPage-1,circulo_actual_ok,"dssfdgfdg")
									//if(parent.preguntas_pantallas[parent.znThisPage-1][circulo_actual_ok]==num_reto){
					instruccion_circulos.alpha = 1;

										var_instruccion_circulos.style.visibility = "visible";
									instruccion_circulos.visible = true;
									var_instruccion_circulos.innerHTML = "<div style='float:right;'><span style='margin-right:5px'>"+parent.tx_puedesmay+" volver al escenario.</span> <div class='arrow' style='padding-left:'0'px;font-size:18px;display:inline-block'><div style=' transform: scaleX(-1);'>"+parent.icono_indica+" </div></div></div>";
										
										//$(".boton_volver").fadeIn(velocidad_media);
											//console.log(parent.preguntas_pantallas,"parent.preguntas_pantallas",parent.preguntas_pantallas[parent.znThisPage-1][circulo_actual_ok])
						console.log("boton volver aparece C!")
										
										$(".boton_volver").fadeIn(velocidad_media);
										parent.audio_volver.play();

										//}
											}
							}
						}
						

					}
					//if(parent.znThisPage==1&&parent.estados_numeros[parent.znThisPage+1].val=="cerrado"){
						
						//parent.numerosVistos();
					//}
					
					}, velocidad_lenta);
					} else {
						
						if (tipo != "arrastre_final" && tipo != "vf_final" && tipo != "s_final"){

						if(tipo=="cuestionario"){

						$(".inicia_cuestionario").fadeIn("slow");

					} /*else if(parent.tipo_curso=="isometrico") {
						console.log(num_reto,parent.preguntas_pantallas[parent.znThisPage-1][circulo_actual_ok],"jlkj")
						if(num_reto==parent.preguntas_pantallas[parent.znThisPage-1][circulo_actual_ok]){
							//console.log("completo!")

							suma_total();

						}
					}*/ else {
							console.log("CCC")

							
						if(parent.preguntas_pantallas[parent.znThisPage-1][circulo_actual_ok]==num_reto){
							if(clic_volverfin){
								suma_total();	
							} else {
								if(posabs_btncirc){

						//console.log(parent.preguntas_pantallas,num_reto,parent.preguntas_pantallas[parent.znThisPage-1][circulo_actual_ok],parent.znThisPage-1,circulo_actual_ok,"dssfdgfdg")
									//if(parent.preguntas_pantallas[parent.znThisPage-1][circulo_actual_ok]==num_reto){

					instruccion_circulos.alpha = 1;
								

										var_instruccion_circulos.style.visibility = "visible";
									instruccion_circulos.visible = true;
									var_instruccion_circulos.innerHTML = "<div style='float:right;'><span style='margin-right:5px'>"+parent.tx_puedesmay+" volver al escenario.</span> <div class='arrow' style='padding-left:'0'px;font-size:18px;display:inline-block'><div style=' transform: scaleX(-1);'>"+parent.icono_indica+" </div></div></div>";
										
										//$(".boton_volver").fadeIn(velocidad_media);
											//console.log(parent.preguntas_pantallas,"parent.preguntas_pantallas",parent.preguntas_pantallas[parent.znThisPage-1][circulo_actual_ok])
						console.log("boton volver aparece D!")
										
										$(".boton_volver").fadeIn(velocidad_media);
										parent.audio_volver.play();

										//}
											}
							}
						}
						

					}
						//control_animacion_pantalla_final = false;

						//leccion_finalizada = document.getElementById("texto_fin").innerHTML

						
						setTimeout(function(){ 
						
						if(!parent.completado){

						if(!posabs_btncirc){
							posactualy_instruccion = instruccion_circulos.y;
							createjs.Tween.get(instruccion_circulos,{override:true}).to({alpha:0,y:posactualy_instruccion+30},velocidad_lenta*2).call(cambio_txtinstruccion);
						}
						function cambio_txtinstruccion(){
							if(tipo!="arrastre"&&tipo!= "arrastre_unico"&&tipo!="crucigrama"&&tipo!="vf"&& tipo != "varias_sel"&&tipo !="selecciones"&& tipo != "ruleta"&& tipo !="cuestionario"&&tipo!="arrastre_txt_varios"&&tipo != "arrastre_txt2"){
					//document.getElementById("instruccion_circulos_span").innerHTML = "¡Muy bien"+parent.tx_hasmay+" ubicado de forma correcta todas las opciones. "+txt_complemento+""
						//document.getElementById("instruccion_circulos").innerHTML = "<table class='tabla_instruccion' style='border:none'><td style='border:none' class='corchetes_instrucciones'>{</td><td style='border:none'>¡Felicitaciones! "+parent.tx_hasmay+" finalizado el estudio "+leccion_finalizada+".<br/> Para finalizar "+parent.tx_hazmin+" clic en el el botón de SALIR.</td><td style='border:none' class='corchetes_instrucciones'>}</td></table>";
						//document.getElementById("instruccion_circulos").style.color = "rgb(236,27,35)"
						//document.getElementById("instruccion_circulos").style.borderColor = "rgb(236,27,35)"
						//document.getElementById("instruccion_circulos").style.width = "auto"
						//createjs.Tween.get(instruccion_circulos,{override:true}).to({alpha:1,y:posactualy_instruccion},velocidad_lenta*2);
							} else {
								if(tipo!="cuestionario"){

							//document.getElementById("instruccion_circulos_span").innerHTML = ""+parent.tx_puedesmay+" cerrar esta ventana para finalizar."
							//console.log("njlkjlkjk")
							$(".instruccion_interna").find("div").html(""+parent.tx_puedesmay+" cerrar esta ventana para finalizar.");

							//SimboloRetroalimentacion("j","#333333");
							animacionCorrecto();

							
						createjs.Tween.get(instruccion_circulos,{override:true}).to({alpha:1,y:posactualy_instruccion},velocidad_lenta*2);

							}
						}
						}
						}

						/////parent.completado = true;
						/////parent.guardaAvance();

						/////if(parent.mensaje_final){
							/////console.log("A!")
							/////parent.$(".mensaje_final").fadeIn(parent.velocidad_rapida)
						/////}
						/////if(parent.con_glosario){
							/////muestraGlosario();
						/////}
						
						}, velocidad_lenta);
						}
					}
				}
			

			
		}

function suma_total(){	
		{
			
				//////MEJORAS MENU CANDADOS
			//setTimeout(function(){ 
			
				if(parent.znThisPage==parent.pagina_superior || tipo=="arrastre" || tipo =="crucigrama" || tipo =="vf" || tipo =="cuestionario" || tipo =="arrastre_txt_varios" || tipo =="selecciones" || tipo == "ruleta" || tipo == "arrastre_txt2" || tipo == "arrastre_unico" || tipo == "varias_sel"){

					parent.audio_estrella.play();
				}



				if(parent.znThisPage==1){
					//document.getElementById("instruccion_dinamica0").style.display = "none";
					//document.getElementById("instruccion_dinamica1").style.visibility = "visible"; 
					//document.getElementById("txt_ie2").innerHTML = "Ahora "+parent.tx_puedesmay+" avanzar a la siguiente pantalla y seguir aprendiendo sobre Gestión del Desempeño. Para hacerlo "+parent.tx_hazmay+" clic en el número 2 del menú superior o presiona la flecHas que apunta a la derecha. Ten presente que es necesario consultar la totalidad de los contenidos de cada pantalla para avanzar a la siguiente. Podrás saber que has completado la consulta de una pantalla porque su botón y el de la pantalla siguiente cambian de color, como Has ocurrido con los números 1 y 2.<br/>¡Éxitos!";

					/*
				parent.document.getElementById("txt_ie2").innerHTML = "<div style='width:230px;line-height:18px;padding:10px 0;height:'auto''>Ahora "+parent.tx_puedesmay+" avanzar a la siguiente pantalla y seguir aprendiendo sobre Gestión del Desempeño. Para hacerlo "+parent.tx_hazmay+" clic en el número 2 del menú superior o presiona la flecHas que apunta a la derecha. Ten presente que es necesario consultar la totalidad de los contenidos de cada pantalla para avanzar a la siguiente. Podrás saber que has completado la consulta de una pantalla porque su botón y el de la pantalla siguiente cambian de color, como Has ocurrido con los números 1 y 2.<br/>¡Éxitos!</div>";
						parent.document.getElementById("s3").innerHTML = "í";
						parent.document.getElementById("s4").innerHTML = "í";
						parent.instruccion_especial2.x = 130;
						parent.instruccion_especial2.y = 130;
						parent.instruccion_especial2.visible = true;
						createjs.Tween.get(parent.instruccion_especial2,{override:true}).to({alpha:1},velocidad_lenta);
						*/
			}
						
			//		 }, 500);

			//control_animacion_menu_superior = true;			
			
			//parent.document.getElementById("flecha_abajo").style.visibility = "visible";
			
				if(parent.znThisPage==1 && parent.con_instruccion_inicial){
						//$("#instruccion_dinamica").fadeOut("slow");
						
						parent.document.getElementById("instruccion_especial2").style.maxHeight = "28px";
						parent.document.getElementById("instruccion_especial2").style.borderRadius = "30px";
						parent.document.getElementById("instruccion_especial2").style.padding = "2px 10px";
						
						parent.document.getElementById("instruccion_especial2").style.zIndex="1";

						parent.document.getElementById("instruccion_especial2").style.fontSize = "15px";

						
						parent.document.getElementById("txt_ie2").innerHTML = "<div>"+parent.tx_pulsamay+" en el número 2 para avanzar a la siguiente pantalla.</div>";
						//parent.document.getElementById("instruccion_especial2").style.backgroundColor="#F1F1F1";
						//parent.document.getElementById("instruccion_especial2").style.color="#0063A9";

						//parent.document.getElementById("instruccion_especial2").style.backgroundColor="transparent"
						//parent.document.getElementById("txt_ie2").innerHTML = "<div style='position:absolute;top:70px;left:1010px;font-size:40px'><span class='arrow animated bounce' style='color:#E20613'><i class='fa fa-angle-double-right' aria-hidden='true'></i></span></div><div style='background-color:white;width:920px; padding:20px; line-height:24px;border-radius:30px;box-shadow:0 0 15px rgba(0,0,0,.35)'><span style='font-family:Raleway-Regular;font-size:24px;color:#0063A9'><div style='color:#00a9b1;font-family:ProximaNova-Regular;font-size:30px;display:inline-block'>¡MUY BIEN!</span></div><div style='border:1px solid #7a3994;color:#7a3994;border-radius:40px;padding:10px;font-size:20px;margin:10px;display:inline-block'>Has finalizado la consulta de la primera pantalla.</div><div style='margin:10px;font-size:20px;text-align:left'>Para seguir avanzando debes ir presionando consecutivamente los números del MENÚ<br/>teniendo en cuenta que:</div><div style='border-radius:20px;padding:20px;margin:20px;background-color:#7a3994;color:white;font-family:Raleway-Italic;font-size:20px'><table style='width:100%;margin:0 auto '><tr><td style='text-align:right;border-bottom:2px dotted #cccccc'>Podrás saber que has completado exitosamente el estudio de un tema del programa porque su botón en el menú cambia a un tono como el que "+parent.tx_tienesmay+" actualmente el número 1:<div style='font-family:ProximaNova-Light'>Asegúrate de seguir las instrucciones internas en cada pantalla.</div></td><td style='width:20px'></td><td><div style='width: 40px;	height:24px;	border-radius:25px;	background-color: white;	text-align: center;	font-family:ProximaNova-Semibold;	font-size: 18px;	border:0px solid #333333;	color:#E6E7E8;	line-height: 26px;	background-color:#E20613;  	border-color: #E6E6E6;'>1 <span class='simbolos' style='font-size:12px;float:right;margin-right:5px'>å</span></div></td></tr><tr><td style='height:6px'></td></tr><tr><td style='text-align:right;border-bottom:2px dotted #cccccc'>El siguiente tema que "+parent.tx_puedesmay+" consultar aparecerá en el menú con un tono como el que actualemte "+parent.tx_tienesmay+" el número 2. Sólo debes presionar el botón para acceder a este tema:</td><td style='width:20px'></td><td><div style='width: 40px;	height:24px;	border-radius:25px;	background-color: white;	text-align: center;	font-family:ProximaNova-Semibold;	font-size: 18px;	border:0px solid #333333;	color:#333333;	line-height: 26px;	background-color:#420F5F;  	border-color: #E6E6E6;'>2 <span class='simbolos' style='font-size:12px;float:right;margin-right:5px'>ê</span></div></td></tr><tr><td style='height:10px'></td></tr><tr><td style='text-align:right;border-bottom:2px dotted #cccccc'>Los botones que aparecen con la apariencia que tienen actualmente los números del 3 al 14 indican que aún no podrán ser consultados. Sin embargo, estos se irán desbloqueando a medida que avanzas:</td><td style='width:20px'></td><td><div style='width: 40px;	height:24px;	border-radius:25px;	background-color: white;	text-align: center;	font-family:ProximaNova-Semibold;	font-size: 18px;	border:0px solid #333333;	color:#E6E7E8;	line-height: 26px;	background-color:#8A44A4;  	border-color: #E6E6E6;'>3 <span class='simbolos' style='font-size:12px;float:right;margin-right:5px'>è</span></div></td></tr><tr><td style='height:6px'></td></tr></table></div><div style='margin-top:10px'><span style='font-family:Raleway-Italic;font-size:24px;color:#E20613'>Presiona el número 2 en el MENÚ para continuar.</span></div><br/></div>";
						
						parent.document.getElementById("s3").innerHTML = "<span class='arrow animated bounce' style='color:#FF1D25;font-size:28px;margin-left:10px'><i class='fal fa-angle-double-left' aria-hidden='true'></i> </span>";
						parent.document.getElementById("s4").innerHTML = "";
						//parent.document.getElementById("s4").innerHTML = "<img src='images/flecha.gif' class='flecha_down'>";

						parent.instruccion_especial2.x = 90;
						parent.instruccion_especial2.y = 180;
						parent.instruccion_especial2.visible = true;
						//createjs.Tween.get(parent.instruccion_especial,{override:true}).to({alpha:1},velocidad_lenta);
						createjs.Tween.get(parent.instruccion_especial2,{override:true}).wait(velocidad_lenta*0).to({alpha:1},velocidad_lenta);
						

					}
					
			control_animacion_una_vez = true;
			if(parent.znThisPage!=parent.znPages){
			//parent.contenedor_flecha_avance.visible = true;
			createjs.Tween.get(parent.contenedor_flecha_avance,{override:true}).to({alpha:1},velocidad_rapida);

			}

			//if(control_animacion_una_vez){
			
			//}
			//console.log(control_animacion_una_vez,control_animacion_pantalla_final)
			

			if (control_animacion_una_vez && parent.znThisPage == parent.pagina_superior && control_animacion_pantalla_final){
				//control_animacion_menu_superior = false;
				
			
				


				//parent.contenedores_circulos_menu[parent.znThisPage-1].scaleX = 1;
				//parent.contenedores_circulos_menu[parent.znThisPage-1].scaleY = 1;

				//parent.contenedores_circulos_menu[parent.znThisPage].scaleX = 1.3;
				//parent.contenedores_circulos_menu[parent.znThisPage].scaleY = 1.3;

				//createjs.Tween.get(parent.contenedores_circulos_menu[0]).to({alpha:0},velocidad_lenta);

				//createjs.Tween.get(parent.contenedores_circulos_menu[parent.znThisPage-1],{override:true}).to({scaleX:1.3,scaleY:1.3},velocidad_lenta, createjs.Ease.bounceOut);
				
				parent.contenedor_numeros_menu[parent.znThisPage-1].alpha = 0;
				
				parent.contenedor_numeros_menu[parent.znThisPage-1].color = "#FFFFFF";

				//parent.total_html_numeros_menu_nav[parent.znThisPage-1].style.color = "#FFFFFF";
				//parent.total_html_numeros_menu_nav[parent.znThisPage-1].style.backgroundColor = "#D10019";
				//parent.total_html_numeros_menu_nav[parent.znThisPage-1].style.borderColor = "#D10019";


				parent.total_html_numeros_menu_nav[parent.znThisPage-1].className = "menu_visto";

				parent.estados_numeros[parent.znThisPage-1] = {val: "visto"};
				parent.estados_numeros[parent.znThisPage] = {val: "abierto"};

				

				
				
				//createjs.Tween.get(parent.contenedor_circulos_grises[parent.znThisPage-1],{override:true}).to({alpha:0},velocidad_media);
				createjs.Tween.get(parent.contenedor_circulos_novistos[parent.znThisPage-1],{override:true}).to({alpha:0},velocidad_media);	
				//parent.contenedor_simbolos_ok[parent.znThisPage-1].alpha = 1;
				//createjs.Tween.get(parent.contenedor_simbolos_ok[parent.znThisPage-1],{override:true}).to({alpha:1},velocidad_media);
				createjs.Tween.get(parent.contenedor_circulos_vistos[parent.znThisPage-1],{override:true}).to({alpha:1},velocidad_lenta);	
				createjs.Tween.get(parent.contenedor_circulos_desbloqueados[parent.znThisPage-1],{override:true}).to({alpha:0},velocidad_lenta);	
				
				//createjs.Tween.get(parent.contenedor_numeros_menu[parent.znThisPage-1],{override:true}).wait(velocidad_lenta*2).to({alpha:1},velocidad_media);
				
				if (parent.znThisPage!=parent.znPages) {
					

					parent.contenedor_simbolos_ok[parent.znThisPage-1].alpha = 1;
					createjs.Tween.get(parent.contenedor_simbolos_ok[parent.znThisPage-1],{override:true}).wait(velocidad_lenta*2).to({alpha:0},velocidad_media);
					//parent.total_html_numeros_menu_nav[parent.znThisPage-1].style.fontFamily = "sosa";
					//parent.total_html_numeros_menu_nav[parent.znThisPage-1].innerHTML = "å";
					parent.total_html_simb_menu_nav[parent.znThisPage-1].className = "simb_menu_principal_visto";
					parent.total_html_num_menu_nav[parent.znThisPage-1].className = "num_menu_principal_visto";

					

					
					parent.total_html_franjamenunav[parent.znThisPage-1].className = "franja_menunav_vista"
					parent.total_status_franjamenunav[parent.znThisPage-1].className = "status_menunav_visto"

					parent.total_html_franjamenunav_n[parent.znThisPage-1].className = "franja_menunav_vista_n"
					parent.total_status_franjamenunav_n[parent.znThisPage-1].className = "status_menunav_visto_n"

					parent.total_html_franjamenunav_nhz[parent.znThisPage-1].className = "franja_menunav_vista_nhz"
					parent.total_status_franjamenunav_nhz[parent.znThisPage-1].className = "status_menunav_visto_nhz"


					parent.$(".trofeos").find(".trofeo").eq(parent.znThisPage-1).addClass("trofeo_on")
					parent.$(".trofeos").find(".trofeo").eq(parent.znThisPage-1).html(parent.icono_trofeo_on)

					setTimeout(function(){ 
						//parent.total_html_numeros_menu_nav[parent.znThisPage-1].style.fontFamily = "ProximaNova-Semibold";
						//parent.total_html_numeros_menu_nav[parent.znThisPage-1].innerHTML = parent.znThisPage;
					 }, 2000);

					////CON MENU NUMEROS
					if(parent.con_menunumeros_old){
					//parent.document.getElementById("indica_nav_int").innerHTML = "<i class='fa fa-angle-double-left' aria-hidden='true'></i>";
					createjs.Tween.get(parent.indica_nav,{override:true}).to({visible:true},velocidad_rapida).to({alpha:1,y:parent.total_numeros_menu_nav[parent.znThisPage].y-15,x:parent.total_numeros_menu_nav[parent.znThisPage].x+60},velocidad_media);
					}
					//console.log(parent.con_menunumeros_v2,parent.znThisPage)
					if(parent.con_menunumeros_v2){
					//parent.document.getElementById("indica_nav_int").innerHTML = "<i class='fal fa-angle-double-left' aria-hidden='true'></i>";
					createjs.Tween.get(parent.indica_nav,{override:true}).to({visible:true},velocidad_rapida).to({alpha:1,y:190,x:70},velocidad_media);
					}

					if(parent.con_menunumeros_vhz&&!parent.con_botonesavance){
					//parent.document.getElementById("indica_nav_int").innerHTML = "<i class='fal fa-angle-double-left' aria-hidden='true'></i>";
					parent.indica_nav.rotation = 0;
					createjs.Tween.get(parent.indica_nav,{override:true}).to({visible:true},velocidad_rapida).to({alpha:1,y:550,x:600},velocidad_media);
					}

					if(parent.con_botonesavance){
						parent.siguiente_activo = true;
							createjs.Tween.get(parent.arrow_siguiente,{override:true}).to({scaleX:1,scaleY:1},velocidad_lenta, createjs.Ease.backOut);

						parent.var_arrow_siguiente.className = "flecha_activa_sig";
					}

					/*if(posabs_btncirc){

						//console.log(parent.preguntas_pantallas,num_reto,parent.preguntas_pantallas[parent.znThisPage-1][circulo_actual_ok],parent.znThisPage-1,circulo_actual_ok,"dssfdgfdg")
									//if(parent.preguntas_pantallas[parent.znThisPage-1][circulo_actual_ok]==num_reto){

										var_instruccion_circulos.style.visibility = "visible";
									instruccion_circulos.visible = true;
									var_instruccion_circulos.innerHTML = "<div style='float:right;'><span style='margin-right:5px'>"+parent.tx_puedesmay+" volver al escenario.</span> <div class='arrow' style='padding-left:'0'px;font-size:18px;display:inline-block'><div style=' transform: scaleX(-1);'>"+parent.icono_indica+" </div></div></div>";
										
										//$(".boton_volver").fadeIn(velocidad_media);
											//console.log(parent.preguntas_pantallas,"parent.preguntas_pantallas",parent.preguntas_pantallas[parent.znThisPage-1][circulo_actual_ok])
										
										$(".boton_volver").fadeIn(velocidad_media);

										//}
											}*/

				} else {
					if(parent.con_botonesavance){
						parent.siguiente_activo = false;
							createjs.Tween.get(parent.arrow_siguiente,{override:true}).to({scaleX:0,scaleY:0},velocidad_rapida/10, createjs.Ease.backOut);

						parent.var_arrow_siguiente.className = "flecha_inactiva";
					}
			

					if (!parent.completado){
					parent.contenedor_simbolos_bandera[parent.znThisPage-1].alpha = 1;
					createjs.Tween.get(parent.contenedor_simbolos_bandera[parent.znThisPage-1],{override:true}).wait(velocidad_lenta*2).to({alpha:0},velocidad_media);

					//parent.total_html_numeros_menu_nav[parent.znThisPage-1].style.fontFamily = "sosa";
					//parent.total_html_numeros_menu_nav[parent.znThisPage-1].innerHTML = "j";
					parent.total_html_simb_menu_nav[parent.znThisPage-1].className = "simb_menu_principal_visto_fin";
					parent.total_html_num_menu_nav[parent.znThisPage-1].className = "num_menu_principal_visto";

					parent.total_html_franjamenunav[parent.znThisPage-1].className = "franja_menunav_vista"
					parent.total_status_franjamenunav[parent.znThisPage-1].className = "status_menunav_visto_fin"
					parent.total_status_franjamenunav[parent.znThisPage-1].className = "status_menunav_visto"

					parent.total_html_franjamenunav_n[parent.znThisPage-1].className = "franja_menunav_vista_n"
					parent.total_status_franjamenunav_n[parent.znThisPage-1].className = "status_menunav_visto_fin_n"
					parent.total_status_franjamenunav_n[parent.znThisPage-1].className = "status_menunav_visto_n"


					parent.total_html_franjamenunav_nhz[parent.znThisPage-1].className = "franja_menunav_vista_nhz"
					parent.total_status_franjamenunav_nhz[parent.znThisPage-1].className = "status_menunav_visto_fin_nhz"
					parent.total_status_franjamenunav_nhz[parent.znThisPage-1].className = "status_menunav_visto_nhz"
					
					parent.$(".trofeos").find(".trofeo").eq(parent.znThisPage-1).addClass("trofeo_on")
					parent.$(".trofeos").find(".trofeo").eq(parent.znThisPage-1).html(parent.icono_trofeo_on)

					
					parent.znInt = cantidad_circulos;
					parent.completado = true;
					parent.guardaAvance();

					if(parent.mensaje_final&&parent.tipo_curso!="plataformas"){

						setTimeout(function(){ 
						

							//console.log(parent.$(".mensaje_final").css("z-index"))
							//console.log(parent.$("#canvas_principal").css("z-index"))
							//console.log(parent.$("#ifrm").css("z-index"))
							//console.log(parent.$("#boton_cerrar").css("z-index"))

							zio_mensajefinal = parent.$(".mensaje_final").css("z-index");
							zio_canvas_principal = parent.$("#canvas_principal").css("z-index");
							zio_ifrm = parent.$("#ifrm").css("z-index");
							zio_boton_cerrar = parent.$("#boton_cerrar").css("z-index");
							zio_trofeo = parent.$(".cont_trofeo").css("z-index");

							parent.contenedor_personajeini.x = parent.x_personajeanima_inicial_ini;
							createjs.Tween.get(parent.contenedor_personajeini).to({x:parent.x_personajeanima_inicial_fin,alpha:1},parent.velocidad_lenta*2, createjs.Ease.backOut);

							parent.animaPersonajeIni();

							parent.$(".txt_puntfin").text(parseInt(parent.puntaje));
							parent.$(".mensaje_final").css("opacity",1)
							parent.$(".mensaje_final").fadeIn(parent.velocidad_rapida)
							parent.$(".mensaje_final").css("z-index",4)
							parent.$(".cont_trofeo").css("z-index",6)
							parent.$("#boton_cerrar").css("z-index",6)
							parent.$("#canvas_principal").css("z-index",5)
							//parent.$("#ifrm").css("z-index",0)

							if(parent.con_trofeos){
			
								parent.$(".cont_trofeo").addClass("cont_trofeo_fin");
								
							}
					 	}, parent.velocidad_lenta);

					 	
						
					}

					if(parent.con_glosario){
							muestraGlosario();
						}
					parent.document.getElementById("boton_cerrar_b").className = "boton_cerrar_b2";
					if(parent.con_botonesavance){

					parent.x_explorador = parent.xfesteja_explora;
					createjs.Tween.get(parent.explorador).to({x:parent.x_explorador,y:parent.y_explora,alpha:1},velocidad_lenta*2);

					parent.document.getElementById("explorador1").className = "explora_invisible";
					parent.document.getElementById("explorador2").className = "explora_visible";
				}
					setTimeout(function(){ 
						//parent.total_html_numeros_menu_nav[parent.znThisPage-1].style.fontFamily = "ProximaNova-Semibold";
						//parent.total_html_numeros_menu_nav[parent.znThisPage-1].innerHTML = parent.znThisPage;
					 }, 3000);
					
					//if(parent.con_menunumeros_old){

						
					//parent.document.getElementById("indica_nav_int").innerHTML = "<i class='fa fa-angle-double-right' aria-hidden='true'></i>";
					//console.log(parent.indica_nav,"parent.indica_nav")
					parent.indica_nav.rotation = 90;
					parent.indica_nav.scaleY = 1;
					
					parent.indica_nav.x = parent.boton_cerrar.x-85;
					parent.indica_nav.y = parent.boton_cerrar.y-20;
					if(parent.con_botoncerrar){
					createjs.Tween.get(parent.indica_nav,{override:true}).to({visible:true},velocidad_rapida).to({alpha:1,x:parent.boton_cerrar.x-35},velocidad_media);	
					}

					if(tipo!="tipoA"&&tipo!="tipo3"&&tipo!="tipo2"&&tipo!="tipo1"&&tipo!="cuestionario"){
						if(parent.znThisPage==parent.znPages&&!posabs_btncirc){
							//$(".instruccion_interna").find("div").text(""+parent.tx_puedesmay+" cerrar la ventana para finalizar.");
							y_inscirc_fin = instruccion_circulos.y;
							instruccion_circulos.alpha = 0;
							instruccion_circulos.y = y_inscirc_fin+30;
							createjs.Tween.get(instruccion_circulos).to({alpha:1,y:y_inscirc_fin},velocidad_lenta);

							//document.getElementById("instruccion_circulos_span").innerHTML = ""+parent.tx_puedesmay+" cerrar la ventana para finalizar."
							//$("#instruccion_circulos").find("div").html(""+parent.tx_puedesmay+" cerrar la ventana para finalizar.");
							$(".instruccion_interna").find("div").html(""+parent.tx_puedesmay+" cerrar esta ventana para finalizar.");

						}
					}

					/*if(posabs_btncirc){

						//console.log(parent.preguntas_pantallas,num_reto,parent.preguntas_pantallas[parent.znThisPage-1][circulo_actual_ok],parent.znThisPage-1,circulo_actual_ok,"dssfdgfdg")
									//if(parent.preguntas_pantallas[parent.znThisPage-1][circulo_actual_ok]==num_reto){

										var_instruccion_circulos.style.visibility = "visible";
									instruccion_circulos.visible = true;
									var_instruccion_circulos.innerHTML = "<div style='float:right;'><span style='margin-right:5px'>"+parent.tx_puedesmay+" volver al escenario.</span> <div class='arrow' style='padding-left:'0'px;font-size:18px;display:inline-block'><div style=' transform: scaleX(-1);'>"+parent.icono_indica+" </div></div></div>";
										
										//$(".boton_volver").fadeIn(velocidad_media);
											//console.log(parent.preguntas_pantallas,"parent.preguntas_pantallas",parent.preguntas_pantallas[parent.znThisPage-1][circulo_actual_ok])
										
										$(".boton_volver").fadeIn(velocidad_media);

										//}
											}*/
				//}
					//createjs.Tween.get(parent.indica_nav,{override:true}).to({visible:true},velocidad_rapida).to({alpha:1,y:parent.boton_cerrar.y-15,x:parent.boton_cerrar.x+60},velocidad_media);	


					}
				}

				control_animacion_una_vez = false;


				for (i = 0; i < parent.znPages; i++) { 
			
				parent.numeros_menu_activos[i] = {val: false};

				} 
			//numero_arr_contcircmenu = parent.contenedores_circulos_menu.indexOf(parent.circulo_menu_actual);
			

			parent.numeros_menu_activos[parent.znThisPage-1].val = true;

			for (i = 0; i < parent.znPages; i++) { 



				parent.adelante_activado = true;
				if (parent.numeros_menu_activos[i].val == false){

					if(i == parent.znThisPage && parent.znThisPage==parent.pagina_superior){

						//parent.finalizaAnimacionMenu = false;

					parent.pagina_superior++
					//if(parent.pagina_superior==2&&parent.estados_numeros[parent.pagina_superior+1].val=="cerrado"){
					//if(parent.pagina_superior==2&&parent.estados_numeros[parent.pagina_superior].val=="cerrado"){
					if(parent.pagina_superior==2&&parent.estados_numeros[parent.pagina_superior-1].val!="visto"){
						
						parent.numerosVistos();
					}
					
					parent.guardaAvance();

					parent.contenedor_numeros_menu[parent.znThisPage].alpha = 0;
					
					parent.contenedor_numeros_menu[parent.znThisPage].color = "rgba(255,255,255,1)";
					parent.contenedor_simbolos_unlock[parent.znThisPage].color = "rgba(255,255,255,1)";


					//parent.total_html_numeros_menu_nav[parent.znThisPage].style.color = "#FFFFFF";
					//parent.total_html_numeros_menu_nav[parent.znThisPage].style.backgroundColor = "#333333";
					//parent.total_html_numeros_menu_nav[parent.znThisPage].style.borderColor = "#333333";


					parent.total_html_numeros_menu_nav[parent.znThisPage].className = "menu_abierto";

					parent.total_html_franjamenunav[parent.znThisPage].className = "franja_menunav_abierta"
					parent.total_status_franjamenunav[parent.znThisPage].className = "status_menunav_abierto"

					parent.total_html_franjamenunav_n[parent.znThisPage].className = "franja_menunav_abierta_n"
					parent.total_status_franjamenunav_n[parent.znThisPage].className = "status_menunav_abierto_n"


					parent.total_html_franjamenunav_nhz[parent.znThisPage].className = "franja_menunav_abierta_nhz"
					parent.total_status_franjamenunav_nhz[parent.znThisPage].className = "status_menunav_abierto_nhz"


					parent.total_numeros_menu_nav[parent.znThisPage].scaleX = 1;
					parent.total_numeros_menu_nav[parent.znThisPage].scaleY = 1;

					parent.contenedores_circulos_menu[parent.znThisPage].scaleX = 1;
					parent.contenedores_circulos_menu[parent.znThisPage].scaleY = 1;

					createjs.Tween.get(parent.contenedor_circulos_desbloqueados[parent.znThisPage],{override:true}).to({alpha:0},velocidad_lenta*2, createjs.Ease.bounceIn);
					createjs.Tween.get(parent.contenedor_circulos_novistos[parent.znThisPage],{override:true}).to({alpha:1},velocidad_lenta*2, createjs.Ease.bounceIn);

					createjs.Tween.get(parent.contenedores_circulos_menu[parent.znThisPage]).to({scaleX:scale_circulos,scaleY:scale_circulos},velocidad_lenta*6, createjs.Ease.bounceIn);
					
					createjs.Tween.get(parent.total_numeros_menu_nav[parent.znThisPage]).to({scaleX:scale_circulos,scaleY:scale_circulos},velocidad_lenta*6, createjs.Ease.bounceIn);

					//createjs.Tween.get(parent.contenedor_numeros_menu[parent.znThisPage],{override:true}).wait(velocidad_lenta*5).to({alpha:1},velocidad_media);
					//createjs.Tween.get(parent.contenedor_simbolos_unlock[parent.znThisPage],{override:true}).wait(velocidad_lenta*5).to({alpha:0},velocidad_media);


						if (parent.znThisPage!=parent.znPages) {
							parent.contenedor_simbolos_unlock[parent.znThisPage].alpha = 1;
							createjs.Tween.get(parent.contenedor_simbolos_unlock[parent.znThisPage],{override:true}).wait(velocidad_lenta*5).to({alpha:0},velocidad_lenta*2).call(activarMenu);


							//parent.total_html_numeros_menu_nav[parent.znThisPage].style.fontFamily = "sosa";
							//parent.total_html_numeros_menu_nav[parent.znThisPage].innerHTML = "ê";
							parent.total_html_simb_menu_nav[parent.znThisPage].className = "simb_menu_principal_abierto";

							parent.total_html_num_menu_nav[parent.znThisPage].className = "num_menu_principal_abierto";

							parent.total_html_franjamenunav[parent.znThisPage].className = "franja_menunav_abierta"
							parent.total_status_franjamenunav[parent.znThisPage].className = "status_menunav_abierto"

							parent.total_html_franjamenunav_n[parent.znThisPage].className = "franja_menunav_abierta_n"
							parent.total_status_franjamenunav_n[parent.znThisPage].className = "status_menunav_abierto_n"


							parent.total_html_franjamenunav_nhz[parent.znThisPage].className = "franja_menunav_abierta_nhz"
							parent.total_status_franjamenunav_nhz[parent.znThisPage].className = "status_menunav_abierto_nhz"

							setTimeout(function(){ 
								//parent.total_html_numeros_menu_nav[parent.znThisPage].style.fontFamily = "ProximaNova-Semibold";
								//parent.total_html_numeros_menu_nav[parent.znThisPage].innerHTML = parent.znThisPage+1;
							}, 3000);
						} else {
							
							parent.znInt = cantidad_circulos;

							parent.completado = true;

							/////if(parent.mensaje_final){
							/////console.log("A!")
							/////parent.$(".mensaje_final").fadeIn(parent.velocidad_rapida)
						/////}
							parent.guardaAvance();
							if(parent.con_glosario){
								muestraGlosario();
							}
							parent.contenedor_simbolos_bandera[parent.znThisPage].alpha = 1;
							createjs.Tween.get(parent.contenedor_simbolos_bandera[parent.znThisPage],{override:true}).wait(velocidad_lenta*5).to({alpha:0},velocidad_lenta*2).call(activarMenu);
						}

					//createjs.Tween.get(parent.contenedores_circulos_menu[parent.znThisPage],{override:true}).wait(velocidad_lenta*2).to({scaleX:1,scaleY:1},velocidad_lenta*2, createjs.Ease.bounceOut);
					} else{	
					
					//parent.contenedor_numeros_menu[parent.znThisPage].alpha = 0;
					//parent.contenedor_simbolos_unlock[parent.znThisPage].alpha = 1;

					createjs.Tween.get(parent.contenedores_circulos_menu[i]).to({scaleX:scale_circulos,scaleY:scale_circulos},velocidad_lenta, createjs.Ease.bounceIn)
					createjs.Tween.get(parent.total_numeros_menu_nav[i]).to({scaleX:scale_circulos,scaleY:scale_circulos},velocidad_lenta, createjs.Ease.bounceIn)

					//createjs.Tween.get(parent.contenedor_numeros_menu[parent.znThisPage],{override:true}).wait(velocidad_lenta*5).to({alpha:1},velocidad_media);
					//createjs.Tween.get(parent.contenedor_simbolos_unlock[parent.znThisPage],{override:true}).wait(velocidad_lenta*5).to({alpha:0},velocidad_rapida);
				
					}
				}
			}
		
		} else {
			if (control_animacion_menu_superior){
				activarMenu();
			}
		}

			}

			parent.$(".status_menunav_visto, .status_menunav_visto_n, .status_menunav_visto_fin_n, .status_menunav_visto_fin_nhz, .status_menunav_visto_nhz").html(parent.icono_check);
 	
			 	parent.$(".status_menunav_abierto, .status_menunav_abierto_n, .status_menunav_abierto_nhz").html(parent.icono_candadoab);

			 	parent.$(".status_menunav_cerrado, .status_menunav_cerrado_n, .status_menunav_cerrado_nhz").html(parent.icono_candadocerr);
			
	}
	function activarMenu(){
		//console.log("HOLA")
		parent.finalizaAnimacionMenu = true;
	}

